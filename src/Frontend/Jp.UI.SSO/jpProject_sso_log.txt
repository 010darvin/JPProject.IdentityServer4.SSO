2018-09-30 16:22:52.376 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 16:22:52.469 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 16:22:57.182 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 16:22:57.197 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 16:22:57.199 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 16:22:57.205 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 16:22:57.207 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 16:22:57.317 -03:00 [DBG] Starting token cleanup
2018-09-30 16:23:03.321 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 16:23:03.453 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 16:23:03.461 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 16:23:03.476 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:23:12.370 -03:00 [INF] Clearing 0 tokens
2018-09-30 16:23:13.399 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:23:13.655 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:23:27.378 -03:00 [INF] Clearing 0 tokens
2018-09-30 16:23:42.395 -03:00 [INF] Clearing 0 tokens
2018-09-30 16:23:57.402 -03:00 [INF] Clearing 0 tokens
2018-09-30 16:24:01.888 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:01.908 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:01.921 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:02.029 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:02.042 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:02.056 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:07.073 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:07.084 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:07.112 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 16:24:10.220 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:10.468 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:12.420 -03:00 [INF] Clearing 0 tokens
2018-09-30 16:24:19.705 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:19.807 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:20.384 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:20.468 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:20.620 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:20.712 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:20.823 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:20.906 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:21.022 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:21.101 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 16:24:27.431 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:06:07.987 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:06:08.083 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:06:12.956 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:06:12.972 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:06:12.975 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:06:12.977 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:06:12.983 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:06:13.091 -03:00 [DBG] Starting token cleanup
2018-09-30 17:06:28.149 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:06:43.174 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:06:58.190 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:07:03.911 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:04.171 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:04.930 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:05.039 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:06.539 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:06.651 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:07.240 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:07.338 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:07.745 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:07.830 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:07:13.208 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:07:28.214 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:07:43.233 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:07:58.249 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:10:00.678 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:10:00.745 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:10:05.361 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:10:05.375 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:10:05.377 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:10:05.380 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:10:05.386 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:10:05.499 -03:00 [DBG] Starting token cleanup
2018-09-30 17:10:10.882 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:10.943 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:10.952 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:11.043 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:11.053 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:11.064 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:16.081 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:16.097 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:16.113 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-30 17:10:20.547 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:10:35.564 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:10:43.535 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:10:43.622 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:10:47.772 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:10:47.786 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:10:47.789 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:10:47.791 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:10:47.795 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:10:47.916 -03:00 [DBG] Starting token cleanup
2018-09-30 17:10:48.126 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:10:48.377 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:10:50.242 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:10:50.336 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:10:51.721 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:10:51.815 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: The 'ClientId' option must be provided.
Parameter name: ClientId
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationOptions.Validate(String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.CspMiddleware.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at NWebsec.AspNetCore.Middleware.Middleware.MiddlewareBase.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-30 17:11:02.953 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:11:57.106 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:11:57.222 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:12:01.341 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:12:01.355 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:12:01.358 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:12:01.361 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:12:01.367 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:12:01.483 -03:00 [DBG] Starting token cleanup
2018-09-30 17:12:05.680 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:12:05.866 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:12:05.874 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:12:05.904 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:12:05.912 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:12:05.916 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:12:05.924 -03:00 [DBG] Start discovery request
2018-09-30 17:12:06.225 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:12:06.281 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:12:06.290 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:12:06.293 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:12:06.296 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:12:06.300 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:12:06.303 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:12:06.309 -03:00 [DBG] Start key discovery request
2018-09-30 17:12:06.357 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 17:12:06.369 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 17:12:06.374 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 17:12:06.380 -03:00 [DBG] Start authorize request
2018-09-30 17:12:06.391 -03:00 [DBG] No user present in authorize request
2018-09-30 17:12:06.397 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:12:06.889 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:12:06.934 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:12:06.984 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:12:06.998 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:12:07.009 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:12:07.019 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:12:07.032 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
  "Nonce": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj"
  }
}
2018-09-30 17:12:07.044 -03:00 [INF] Showing login: User is not authenticated
2018-09-30 17:12:07.177 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:12:07.202 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:12:07.209 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:12:07.223 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:12:07.230 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:12:07.244 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:12:07.249 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:12:07.276 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:12:26.841 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:12:26.921 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:12:30.756 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:12:30.770 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:12:30.773 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:12:30.775 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:12:30.781 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:12:30.887 -03:00 [DBG] Starting token cleanup
2018-09-30 17:12:45.949 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:13:00.970 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:13:15.988 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:13:30.997 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:13:31.218 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:13:31.601 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:31.675 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:31.793 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:31.812 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:31.824 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:31.834 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:13:31.860 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:34.907 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-30 17:13:36.011 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-30 17:13:36.587 -03:00 [INF] Provider Facebook associated.
2018-09-30 17:13:36.757 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLH724OFT01L:00000004",
  "TimeStamp": "2018-09-30T20:13:36Z",
  "ProcessId": 7964,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 17:13:36.769 -03:00 [DBG] Augmenting SignInContext
2018-09-30 17:13:36.774 -03:00 [DBG] Adding amr claim with value: external
2018-09-30 17:13:36.780 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-30 17:13:36.787 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-30 17:13:36.811 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-30 17:13:36.818 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-30 17:13:36.822 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-30 17:13:36.829 -03:00 [DBG] Start authorize callback request
2018-09-30 17:13:36.838 -03:00 [DBG] User in authorize request: c5b51cec-60c0-41db-978d-bc7e652f2ea3
2018-09-30 17:13:36.841 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:13:36.862 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:36.867 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:36.879 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:36.884 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:36.895 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:36.898 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:13:36.909 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
  "Nonce": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
  "SessionId": "8606aa9bf7a1f99edec94a31b74ae896",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj"
  }
}
2018-09-30 17:13:36.959 -03:00 [DBG] NXGa6xK4K4Gnw2ZVyscLRSpzJCAKYJYxVD1Fydn4IpU= found in database: false
2018-09-30 17:13:36.963 -03:00 [DBG] user_consent grant with value: IS4-Admin|c5b51cec-60c0-41db-978d-bc7e652f2ea3 not found in store.
2018-09-30 17:13:36.966 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-30 17:13:36.968 -03:00 [INF] Showing consent: User has not yet consented
2018-09-30 17:13:37.000 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:13:37.019 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:37.025 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:37.040 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:37.047 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:37.060 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:37.065 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:13:37.090 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:37.096 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:37.109 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:39.968 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-30 17:13:40.001 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:13:40.026 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:40.033 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:40.047 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:40.055 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:40.069 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:40.074 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:13:40.090 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-30 17:13:40.095 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-30 17:13:40.098 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-30 17:13:40.102 -03:00 [DBG] Start authorize callback request
2018-09-30 17:13:40.110 -03:00 [DBG] User in authorize request: c5b51cec-60c0-41db-978d-bc7e652f2ea3
2018-09-30 17:13:40.113 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:13:40.137 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:40.144 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:40.158 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:40.166 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:40.183 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:13:40.187 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:13:40.192 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
  "Nonce": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
  "SessionId": "8606aa9bf7a1f99edec94a31b74ae896",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj"
  }
}
2018-09-30 17:13:40.214 -03:00 [DBG] NXGa6xK4K4Gnw2ZVyscLRSpzJCAKYJYxVD1Fydn4IpU= found in database: false
2018-09-30 17:13:40.218 -03:00 [DBG] user_consent grant with value: IS4-Admin|c5b51cec-60c0-41db-978d-bc7e652f2ea3 not found in store.
2018-09-30 17:13:40.222 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-30 17:13:40.233 -03:00 [INF] User consented to scopes: ["openid","profile","email","management-api.identityserver4-manager"]
2018-09-30 17:13:40.239 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","management-api.identityserver4-manager"]
2018-09-30 17:13:40.245 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: c5b51cec-60c0-41db-978d-bc7e652f2ea3
2018-09-30 17:13:40.263 -03:00 [DBG] NXGa6xK4K4Gnw2ZVyscLRSpzJCAKYJYxVD1Fydn4IpU= not found in database
2018-09-30 17:13:40.364 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 17:13:40.375 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 17:13:40.378 -03:00 [DBG] Getting claims for access token for subject: c5b51cec-60c0-41db-978d-bc7e652f2ea3
2018-09-30 17:13:40.443 -03:00 [DBG] Getting claims for identity token for subject: c5b51cec-60c0-41db-978d-bc7e652f2ea3 and client: IS4-Admin
2018-09-30 17:13:40.447 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 17:13:40.463 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****m3PA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****SIOA"
    }
  ],
  "ActivityId": "0HLH724OFT01I:00000005",
  "TimeStamp": "2018-09-30T20:13:40Z",
  "ProcessId": 7964,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 17:13:40.483 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 17:13:40.505 -03:00 [DBG] Augmenting SignInContext
2018-09-30 17:13:40.509 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-30 17:13:42.655 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:13:42.680 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:13:42.685 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:13:42.695 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:13:42.702 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:13:42.710 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:13:42.720 -03:00 [DBG] Start discovery request
2018-09-30 17:13:42.805 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:13:42.824 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:13:42.829 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:13:42.832 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:13:42.834 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:13:42.837 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:13:42.841 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:13:42.847 -03:00 [DBG] Start key discovery request
2018-09-30 17:13:44.017 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:13:44.025 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:13:44.028 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:13:44.119 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:13:44.127 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:13:44.131 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:13:44.134 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:13:44.140 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:13:44.144 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:13:44.154 -03:00 [DBG] Start userinfo request
2018-09-30 17:13:44.160 -03:00 [DBG] Bearer token found in header
2018-09-30 17:13:44.200 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:44.224 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:13:44.237 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:13:44.243 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338420,
    "exp": 1538342020,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
    "auth_time": 1538338416,
    "idp": "Facebook",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "external"
  }
}
2018-09-30 17:13:44.256 -03:00 [DBG] Creating userinfo response
2018-09-30 17:13:44.261 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:13:44.266 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:13:44.274 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:44.278 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:13:44.281 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:13:44.287 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:13:44.298 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-30 17:13:44.300 -03:00 [DBG] End userinfo request
2018-09-30 17:13:46.012 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:13:50.393 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:13:50.398 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:13:50.402 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:13:50.406 -03:00 [DBG] Start discovery request
2018-09-30 17:13:50.420 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:13:50.472 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:13:50.483 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:13:50.487 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:13:50.493 -03:00 [DBG] Start key discovery request
2018-09-30 17:14:01.031 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:14:16.042 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:14:31.058 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:14:46.075 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:14:46.577 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-09-30 17:14:46.589 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-09-30 17:14:46.599 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-09-30 17:14:46.611 -03:00 [DBG] Processing signout request for c5b51cec-60c0-41db-978d-bc7e652f2ea3
2018-09-30 17:14:46.621 -03:00 [DBG] Start end session request validation
2018-09-30 17:14:46.632 -03:00 [DBG] Start identity token validation
2018-09-30 17:14:46.658 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:14:46.660 -03:00 [DBG] Client found: IS4-Admin / IS4-Admin
2018-09-30 17:14:46.675 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:14:46.678 -03:00 [DBG] Token validation success
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1538338420,
    "exp": 1538338720,
    "iss": "https://localhost:5000",
    "aud": "IS4-Admin",
    "nonce": "tcyZuqXZvMGjAhTEIMzl0B4dzSWgLX2ay2NPbnPj",
    "iat": 1538338420,
    "at_hash": "Ebkc7TwsHM4wjlyT71h5qA",
    "sid": "8606aa9bf7a1f99edec94a31b74ae896",
    "sub": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
    "auth_time": 1538338416,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-09-30 17:14:46.690 -03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "SubjectId": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjM1Y2JkMjU0NmQ0Mjc5MmI3MTVhYTRhN2U4MGRmODczIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzgzMzg0MjAsImV4cCI6MTUzODMzODcyMCwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6IklTNC1BZG1pbiIsIm5vbmNlIjoidGN5WnVxWFp2TUdqQWhURUlNemwwQjRkelNXZ0xYMmF5Mk5QYm5QaiIsImlhdCI6MTUzODMzODQyMCwiYXRfaGFzaCI6IkVia2M3VHdzSE00d2pseVQ3MWg1cUEiLCJzaWQiOiI4NjA2YWE5YmY3YTFmOTllZGVjOTRhMzFiNzRhZTg5NiIsInN1YiI6ImM1YjUxY2VjLTYwYzAtNDFkYi05NzhkLWJjN2U2NTJmMmVhMyIsImF1dGhfdGltZSI6MTUzODMzODQxNiwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.gC1ex53DnZmp5m36PVA-EyLMALc4CgZJVlONAgD--nVakoCGVtOJ7UmwpgLh1XPDDe03qulI-0MYnOWErvGBVimf5M9BLTxU47l9QbW4yyjdw-HqbTPrE_xFpHRc9NLv_KbA_FJWQglj4m9Lsd43MYgSnJTV8QAwSKYQuRpnbrk_CHhyzBYH-ioR0i-OlJ29G12EcEuRkn9Yu0Lo_-ctjA3IIfo01-W6PvBeIX8nvIw243DuiKf2c17wIGCpcda7QZpzx6yjjxdFUxlaS1_sM7ic_g6hIfQy4N62_LGuGXp07G6ROYbeWu1See6S9AISIMnX_6QrT1iR_wrpCqm3PA",
    "post_logout_redirect_uri": "http://localhost:4300/"
  }
}
2018-09-30 17:14:46.698 -03:00 [ERR] Error processing end session request Invalid request
2018-09-30 17:14:48.482 -03:00 [DBG] CORS request made for path: /account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-30 17:14:48.502 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-30 17:14:48.507 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-30 17:14:48.511 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-30 17:14:48.519 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "c5b51cec-60c0-41db-978d-bc7e652f2ea3",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLH724OFT01J:00000009",
  "TimeStamp": "2018-09-30T20:14:48Z",
  "ProcessId": 7964,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 17:14:48.663 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-09-30 17:14:48.668 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-09-30 17:14:48.671 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-09-30 17:14:48.678 -03:00 [DBG] Processing signout callback request
2018-09-30 17:14:48.703 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:14:48.705 -03:00 [DBG] No client front-channel logout URLs
2018-09-30 17:14:48.717 -03:00 [DBG] No client back-channel logout URLs
2018-09-30 17:14:48.720 -03:00 [INF] Successful signout callback.
2018-09-30 17:14:48.722 -03:00 [DBG] No client front-channel iframe urls
2018-09-30 17:14:48.725 -03:00 [DBG] No client back-channel iframe urls
2018-09-30 17:14:59.889 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-30 17:15:00.005 -03:00 [DBG] Augmenting SignInContext
2018-09-30 17:15:00.009 -03:00 [DBG] Adding idp claim with value: local
2018-09-30 17:15:00.012 -03:00 [DBG] Adding amr claim with value: pwd
2018-09-30 17:15:00.016 -03:00 [DBG] Adding auth_time claim with value: 1538338500
2018-09-30 17:15:00.019 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-30 17:15:00.025 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bruno",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "DisplayName": "bruno",
  "Endpoint": "UI",
  "ActivityId": "0HLH724OFT01J:0000000D",
  "TimeStamp": "2018-09-30T20:15:00Z",
  "ProcessId": 7964,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 17:15:01.091 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:15:16.106 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:15:31.123 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:15:40.548 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:15:40.555 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:15:40.558 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:15:40.563 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:15:40.567 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:15:40.571 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:15:40.574 -03:00 [DBG] Start discovery request
2018-09-30 17:15:40.594 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:15:40.651 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:15:40.660 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:15:40.664 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:15:40.669 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:15:40.678 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:15:40.682 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:15:40.687 -03:00 [DBG] Start key discovery request
2018-09-30 17:15:40.722 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 17:15:40.735 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 17:15:40.744 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 17:15:40.754 -03:00 [DBG] Start authorize request
2018-09-30 17:15:40.757 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:15:40.760 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:15:40.782 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:15:40.788 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:40.799 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:40.806 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:40.818 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:40.821 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:15:40.824 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6",
  "Nonce": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6"
  }
}
2018-09-30 17:15:40.863 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: false
2018-09-30 17:15:40.868 -03:00 [DBG] user_consent grant with value: IS4-Admin|08d62700-cd05-8b33-e915-8024e7c117f1 not found in store.
2018-09-30 17:15:40.872 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-30 17:15:40.874 -03:00 [INF] Showing consent: User has not yet consented
2018-09-30 17:15:40.885 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:15:40.905 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:15:40.911 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:40.924 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:40.931 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:40.942 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:40.945 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:15:40.962 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:15:40.967 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:40.976 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:43.347 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-30 17:15:43.353 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:15:43.375 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:15:43.383 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:43.397 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:43.406 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:43.420 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:43.425 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:15:43.433 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-30 17:15:43.437 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-30 17:15:43.440 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-30 17:15:43.444 -03:00 [DBG] Start authorize callback request
2018-09-30 17:15:43.447 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:15:43.451 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:15:43.477 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:15:43.484 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:43.498 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:43.506 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:43.520 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:15:43.524 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:15:43.528 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6",
  "Nonce": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6"
  }
}
2018-09-30 17:15:43.544 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: false
2018-09-30 17:15:43.548 -03:00 [DBG] user_consent grant with value: IS4-Admin|08d62700-cd05-8b33-e915-8024e7c117f1 not found in store.
2018-09-30 17:15:43.551 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-30 17:15:43.555 -03:00 [INF] User consented to scopes: ["openid","profile","email","management-api.identityserver4-manager"]
2018-09-30 17:15:43.560 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","management-api.identityserver4-manager"]
2018-09-30 17:15:43.564 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:15:43.573 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= not found in database
2018-09-30 17:15:43.651 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 17:15:43.654 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 17:15:43.656 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:15:43.680 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 17:15:43.685 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 17:15:43.691 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****EunA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****VRGA"
    }
  ],
  "ActivityId": "0HLH724OFT01J:00000013",
  "TimeStamp": "2018-09-30T20:15:43Z",
  "ProcessId": 7964,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 17:15:43.699 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "3Vva94miWwooh83mDtjI5CMRZdwRUbBe615LwdU6",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 17:15:43.707 -03:00 [DBG] Augmenting SignInContext
2018-09-30 17:15:43.710 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-30 17:15:45.349 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:15:45.359 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:15:45.363 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:15:45.367 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:15:45.374 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:15:45.379 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:15:45.384 -03:00 [DBG] Start discovery request
2018-09-30 17:15:45.406 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:15:45.443 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:15:45.455 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:15:45.459 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:15:45.463 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:15:45.469 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:15:45.476 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:15:45.480 -03:00 [DBG] Start key discovery request
2018-09-30 17:15:46.136 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:15:46.688 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:15:46.694 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:15:46.697 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:15:46.843 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:15:46.850 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:15:46.854 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:15:46.858 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:15:46.863 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:15:46.867 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:15:46.872 -03:00 [DBG] Start userinfo request
2018-09-30 17:15:46.875 -03:00 [DBG] Bearer token found in header
2018-09-30 17:15:46.902 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:15:46.925 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:15:46.934 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:15:46.939 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:15:46.946 -03:00 [DBG] Creating userinfo response
2018-09-30 17:15:46.951 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:15:46.957 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:15:46.966 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:46.970 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:15:46.973 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:15:46.978 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:15:46.995 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:15:46.998 -03:00 [DBG] End userinfo request
2018-09-30 17:16:01.154 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:16:16.170 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:16:31.182 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:17:03.122 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:17:03.195 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:17:07.683 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:17:07.697 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:17:07.700 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:17:07.703 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:17:07.707 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:17:07.828 -03:00 [DBG] Starting token cleanup
2018-09-30 17:17:08.093 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:17:08.202 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:08.209 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:08.311 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:17:08.320 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:17:08.324 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:17:08.331 -03:00 [DBG] Start discovery request
2018-09-30 17:17:08.604 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:17:08.658 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:17:08.668 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:08.672 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:08.675 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:17:08.679 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:17:08.682 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:17:08.687 -03:00 [DBG] Start key discovery request
2018-09-30 17:17:08.809 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:17:08.815 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:08.819 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:08.893 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:17:08.902 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:08.908 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:08.911 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:17:08.919 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:17:08.922 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:17:08.934 -03:00 [DBG] Start userinfo request
2018-09-30 17:17:08.943 -03:00 [DBG] Bearer token found in header
2018-09-30 17:17:09.157 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:17:09.162 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:17:09.165 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:17:09.168 -03:00 [DBG] Start discovery request
2018-09-30 17:17:09.201 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:17:09.252 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:17:09.261 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:17:09.265 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:17:09.270 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:17:09.275 -03:00 [DBG] Start key discovery request
2018-09-30 17:17:09.288 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:17:09.318 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:17:09.326 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:17:09.343 -03:00 [DBG] Creating userinfo response
2018-09-30 17:17:09.349 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:17:09.355 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:17:09.381 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:17:09.387 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:17:09.391 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:17:09.397 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:17:09.551 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:17:09.554 -03:00 [DBG] End userinfo request
2018-09-30 17:17:14.015 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:17:14.023 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:14.031 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:14.034 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:17:14.039 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:17:14.044 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:17:14.054 -03:00 [DBG] Start discovery request
2018-09-30 17:17:14.070 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:17:14.090 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:17:14.100 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:14.104 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:14.109 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:17:14.113 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:17:14.117 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:17:14.122 -03:00 [DBG] Start key discovery request
2018-09-30 17:17:14.650 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:17:14.658 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:14.662 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:14.803 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:17:14.813 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:17:14.817 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:17:14.821 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:17:14.826 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:17:14.834 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:17:14.842 -03:00 [DBG] Start userinfo request
2018-09-30 17:17:14.845 -03:00 [DBG] Bearer token found in header
2018-09-30 17:17:14.870 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:17:14.893 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:17:14.910 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:17:14.914 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:17:14.923 -03:00 [DBG] Creating userinfo response
2018-09-30 17:17:14.928 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:17:14.936 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:17:14.944 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:17:14.948 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:17:14.951 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:17:14.958 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:17:14.976 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:17:14.979 -03:00 [DBG] End userinfo request
2018-09-30 17:17:22.860 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:17:37.874 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:17:51.491 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:17:51.572 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:17:55.937 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:17:55.951 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:17:55.954 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:17:55.957 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:17:55.962 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:17:56.074 -03:00 [DBG] Starting token cleanup
2018-09-30 17:18:00.145 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:18:00.312 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:18:00.320 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:18:00.356 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:18:00.364 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:18:00.367 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:18:00.373 -03:00 [DBG] Start discovery request
2018-09-30 17:18:00.757 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:18:00.806 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:18:00.814 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:18:00.817 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:18:00.820 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:18:00.824 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:18:00.828 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:18:00.833 -03:00 [DBG] Start key discovery request
2018-09-30 17:18:00.957 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:18:00.964 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:18:00.968 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:18:01.053 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:18:01.068 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:18:01.075 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:18:01.081 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:18:01.091 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:18:01.099 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:18:01.111 -03:00 [DBG] Start userinfo request
2018-09-30 17:18:01.116 -03:00 [DBG] Bearer token found in header
2018-09-30 17:18:01.318 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:18:01.322 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:18:01.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:18:01.329 -03:00 [DBG] Start discovery request
2018-09-30 17:18:01.362 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:18:01.411 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:18:01.415 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:18:01.418 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:18:01.421 -03:00 [DBG] Start key discovery request
2018-09-30 17:18:01.453 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:18:01.474 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:18:01.508 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:18:01.519 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:18:01.534 -03:00 [DBG] Creating userinfo response
2018-09-30 17:18:01.538 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:18:01.544 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:18:01.570 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:18:01.575 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:18:01.578 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:18:01.584 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:18:01.787 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:18:01.790 -03:00 [DBG] End userinfo request
2018-09-30 17:18:11.110 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:18:26.127 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:18:41.141 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:18:56.155 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:19:11.168 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:19:20.139 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:19:20.151 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:20.158 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:20.163 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:19:20.169 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:19:20.176 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:19:20.180 -03:00 [DBG] Start discovery request
2018-09-30 17:19:20.205 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:19:20.255 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:19:20.270 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:20.281 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:20.285 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:19:20.296 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:19:20.304 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:19:20.309 -03:00 [DBG] Start key discovery request
2018-09-30 17:19:21.040 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:19:21.047 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:21.051 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:21.163 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:19:21.173 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:21.180 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:21.185 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:19:21.192 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:19:21.219 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:19:21.241 -03:00 [DBG] Start userinfo request
2018-09-30 17:19:21.282 -03:00 [DBG] Bearer token found in header
2018-09-30 17:19:21.351 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:19:21.380 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:19:21.395 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:19:21.399 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:19:21.407 -03:00 [DBG] Creating userinfo response
2018-09-30 17:19:21.410 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:21.415 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:21.424 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:19:21.428 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:19:21.431 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:21.439 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:19:21.462 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:19:21.465 -03:00 [DBG] End userinfo request
2018-09-30 17:19:26.183 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:19:33.937 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:19:33.946 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:33.951 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:33.958 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:19:33.965 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:19:33.973 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:19:33.977 -03:00 [DBG] Start discovery request
2018-09-30 17:19:33.995 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:19:34.015 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:19:34.026 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:34.032 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:34.037 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:19:34.041 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:19:34.045 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:19:34.049 -03:00 [DBG] Start key discovery request
2018-09-30 17:19:34.638 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:19:34.644 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:34.647 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:34.721 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:19:34.731 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:34.738 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:34.743 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:19:34.750 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:19:34.755 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:19:34.762 -03:00 [DBG] Start userinfo request
2018-09-30 17:19:34.767 -03:00 [DBG] Bearer token found in header
2018-09-30 17:19:34.794 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:19:34.818 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:19:34.828 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:19:34.831 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:19:34.837 -03:00 [DBG] Creating userinfo response
2018-09-30 17:19:34.839 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:34.849 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:34.865 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:19:34.869 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:19:34.872 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:34.879 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:19:34.899 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:19:34.902 -03:00 [DBG] End userinfo request
2018-09-30 17:19:41.202 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:19:43.881 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:19:43.889 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:43.896 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:43.902 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:19:43.906 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:19:43.911 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:19:43.915 -03:00 [DBG] Start discovery request
2018-09-30 17:19:43.930 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:19:43.951 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:19:43.962 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:43.966 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:43.972 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:19:43.976 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:19:43.981 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:19:43.985 -03:00 [DBG] Start key discovery request
2018-09-30 17:19:44.545 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:19:44.551 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:44.555 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:44.627 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:19:44.636 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:19:44.641 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:19:44.645 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:19:44.649 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:19:44.655 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:19:44.659 -03:00 [DBG] Start userinfo request
2018-09-30 17:19:44.664 -03:00 [DBG] Bearer token found in header
2018-09-30 17:19:44.702 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:19:44.732 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:19:44.744 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:19:44.758 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:19:44.769 -03:00 [DBG] Creating userinfo response
2018-09-30 17:19:44.771 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:44.778 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:44.785 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:19:44.788 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:19:44.792 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:19:44.802 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:19:44.836 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:19:44.840 -03:00 [DBG] End userinfo request
2018-09-30 17:19:56.221 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:20:02.331 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:20:02.341 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:02.347 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:02.352 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:20:02.356 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:20:02.360 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:20:02.363 -03:00 [DBG] Start discovery request
2018-09-30 17:20:02.381 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:20:02.404 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:20:02.415 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:02.422 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:02.431 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:20:02.438 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:20:02.444 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:20:02.451 -03:00 [DBG] Start key discovery request
2018-09-30 17:20:03.080 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:20:03.086 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:03.089 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:03.179 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:20:03.187 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:03.192 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:03.198 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:20:03.209 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:20:03.217 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:20:03.232 -03:00 [DBG] Start userinfo request
2018-09-30 17:20:03.237 -03:00 [DBG] Bearer token found in header
2018-09-30 17:20:03.278 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:20:03.307 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:20:03.328 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:20:03.340 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:20:03.375 -03:00 [DBG] Creating userinfo response
2018-09-30 17:20:03.381 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:03.384 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:03.396 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:20:03.400 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:20:03.404 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:03.415 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:20:03.440 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:20:03.444 -03:00 [DBG] End userinfo request
2018-09-30 17:20:11.230 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:20:26.248 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:20:26.593 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:20:26.692 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:26.725 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:26.760 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:20:26.768 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:20:26.775 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:20:26.781 -03:00 [DBG] Start discovery request
2018-09-30 17:20:26.806 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:20:27.320 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:20:27.328 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:27.330 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:27.333 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:20:27.335 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:20:27.340 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:20:27.347 -03:00 [DBG] Start key discovery request
2018-09-30 17:20:27.476 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:20:27.481 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:27.484 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:27.562 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:20:27.575 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:27.581 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:27.586 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:20:27.599 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:20:27.606 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:20:27.614 -03:00 [DBG] Start userinfo request
2018-09-30 17:20:27.620 -03:00 [DBG] Bearer token found in header
2018-09-30 17:20:27.648 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:20:27.686 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:20:27.695 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:20:27.698 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:20:27.709 -03:00 [DBG] Creating userinfo response
2018-09-30 17:20:27.713 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:27.720 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:27.727 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:20:27.733 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:20:27.737 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:27.744 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:20:27.767 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:20:27.771 -03:00 [DBG] End userinfo request
2018-09-30 17:20:33.560 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:20:33.567 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:33.572 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:33.576 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:20:33.579 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:20:33.585 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:20:33.595 -03:00 [DBG] Start discovery request
2018-09-30 17:20:33.647 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:20:33.683 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:20:33.697 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:33.705 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:33.715 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:20:33.724 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:20:33.731 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:20:33.738 -03:00 [DBG] Start key discovery request
2018-09-30 17:20:34.349 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:20:34.355 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:34.358 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:34.433 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:20:34.444 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:20:34.449 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:20:34.461 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:20:34.467 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:20:34.472 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:20:34.476 -03:00 [DBG] Start userinfo request
2018-09-30 17:20:34.480 -03:00 [DBG] Bearer token found in header
2018-09-30 17:20:34.512 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:20:34.541 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:20:34.563 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:20:34.567 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338543,
    "exp": 1538342143,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:20:34.579 -03:00 [DBG] Creating userinfo response
2018-09-30 17:20:34.595 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:34.618 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:34.629 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:20:34.654 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:20:34.658 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:20:34.667 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:20:34.692 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:20:34.697 -03:00 [DBG] End userinfo request
2018-09-30 17:20:41.263 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:20:56.276 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:21:11.289 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:22:37.645 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:22:37.748 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:22:41.709 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:22:41.724 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:22:41.726 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:22:41.728 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:22:41.733 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:22:41.853 -03:00 [DBG] Starting token cleanup
2018-09-30 17:22:46.621 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:22:46.750 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:46.757 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:46.791 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:22:46.799 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:22:46.803 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:22:46.810 -03:00 [DBG] Start discovery request
2018-09-30 17:22:47.112 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:22:47.166 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:22:47.176 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:47.180 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:47.183 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:22:47.187 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:22:47.191 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:22:47.197 -03:00 [DBG] Start key discovery request
2018-09-30 17:22:54.821 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:22:54.828 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:54.832 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:54.841 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:22:54.848 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:22:54.851 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:22:54.856 -03:00 [DBG] Start discovery request
2018-09-30 17:22:54.872 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:22:54.892 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:22:54.901 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:54.911 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:54.914 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:22:54.918 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:22:54.922 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:22:54.931 -03:00 [DBG] Start key discovery request
2018-09-30 17:22:54.972 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 17:22:54.978 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 17:22:54.980 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 17:22:54.986 -03:00 [DBG] Start authorize request
2018-09-30 17:22:54.995 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:22:55.001 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:22:55.212 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:22:55.252 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:22:55.298 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:22:55.310 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:22:55.319 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 17:22:55.328 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:22:55.337 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "o2ZSq3pfxZhBbFUNe1WElR8EyJJ3ZfXttqX75IGN",
  "Nonce": "o2ZSq3pfxZhBbFUNe1WElR8EyJJ3ZfXttqX75IGN",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "o2ZSq3pfxZhBbFUNe1WElR8EyJJ3ZfXttqX75IGN",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "o2ZSq3pfxZhBbFUNe1WElR8EyJJ3ZfXttqX75IGN"
  }
}
2018-09-30 17:22:55.421 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 17:22:55.429 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 17:22:55.437 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 17:22:55.446 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 17:22:55.449 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:22:55.626 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 17:22:55.630 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 17:22:55.655 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zfPg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****X7gA"
    }
  ],
  "ActivityId": "0HLH729U1O86Q:00000001",
  "TimeStamp": "2018-09-30T20:22:55Z",
  "ProcessId": 108,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 17:22:55.664 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "o2ZSq3pfxZhBbFUNe1WElR8EyJJ3ZfXttqX75IGN",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 17:22:56.735 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:22:56.742 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:56.746 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:56.751 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:22:56.757 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:22:56.763 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:22:56.768 -03:00 [DBG] Start discovery request
2018-09-30 17:22:56.785 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:22:56.798 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:22:56.806 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:56.811 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:56.814 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:22:56.818 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:22:56.821 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:22:56.825 -03:00 [DBG] Start key discovery request
2018-09-30 17:22:56.886 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:22:57.947 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:22:57.954 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:57.958 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:58.005 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:22:58.013 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:22:58.017 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:22:58.021 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:22:58.027 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:22:58.031 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:22:58.039 -03:00 [DBG] Start userinfo request
2018-09-30 17:22:58.044 -03:00 [DBG] Bearer token found in header
2018-09-30 17:22:58.081 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:22:58.099 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:22:58.110 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:22:58.117 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338975,
    "exp": 1538342575,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:22:58.128 -03:00 [DBG] Creating userinfo response
2018-09-30 17:22:58.133 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:22:58.137 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:22:58.144 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:22:58.147 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:22:58.150 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:22:58.156 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:22:58.174 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:22:58.177 -03:00 [DBG] End userinfo request
2018-09-30 17:23:07.401 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:23:07.406 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:23:07.409 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:23:07.412 -03:00 [DBG] Start discovery request
2018-09-30 17:23:07.426 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:23:07.478 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:23:07.483 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:23:07.488 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:23:07.492 -03:00 [DBG] Start key discovery request
2018-09-30 17:23:11.902 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:23:26.916 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:23:41.920 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:23:56.927 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:24:11.932 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:24:26.940 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:24:41.954 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:25:26.629 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 17:25:26.699 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 17:25:30.847 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 17:25:30.861 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 17:25:30.864 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 17:25:30.866 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 17:25:30.872 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 17:25:31.012 -03:00 [DBG] Starting token cleanup
2018-09-30 17:25:32.385 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:25:32.490 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:25:32.499 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:25:32.541 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:25:32.549 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:25:32.553 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:25:32.558 -03:00 [DBG] Start discovery request
2018-09-30 17:25:32.866 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:25:32.919 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:25:32.931 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:25:32.935 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:25:32.938 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:25:32.942 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:25:32.949 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:25:32.955 -03:00 [DBG] Start key discovery request
2018-09-30 17:25:33.048 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:25:33.055 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:25:33.058 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:25:33.113 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:25:33.122 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:25:33.137 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:25:33.144 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:25:33.151 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:25:33.155 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:25:33.177 -03:00 [DBG] Start userinfo request
2018-09-30 17:25:33.190 -03:00 [DBG] Bearer token found in header
2018-09-30 17:25:33.432 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:25:33.461 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:25:33.466 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:25:33.469 -03:00 [DBG] Start discovery request
2018-09-30 17:25:33.483 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:25:33.489 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:25:33.512 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:25:33.537 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:25:33.541 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:25:33.546 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:25:33.551 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:25:33.553 -03:00 [DBG] Start key discovery request
2018-09-30 17:25:33.568 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338975,
    "exp": 1538342575,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:25:33.585 -03:00 [DBG] Creating userinfo response
2018-09-30 17:25:33.592 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:25:33.598 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:25:33.633 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:25:33.638 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:25:33.642 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:25:33.649 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:25:33.788 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:25:33.792 -03:00 [DBG] End userinfo request
2018-09-30 17:25:46.047 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:26:01.058 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:26:16.074 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:26:19.683 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 17:26:19.689 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:26:19.692 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:26:19.695 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:26:19.700 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:26:19.703 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:26:19.707 -03:00 [DBG] Start discovery request
2018-09-30 17:26:19.725 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:26:19.735 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 17:26:19.741 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:26:19.745 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:26:19.748 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:26:19.751 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:26:19.754 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:26:19.757 -03:00 [DBG] Start key discovery request
2018-09-30 17:26:20.331 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:26:20.336 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:26:20.340 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:26:20.429 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:26:20.438 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:26:20.444 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:26:20.447 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:26:20.453 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:26:20.458 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:26:20.465 -03:00 [DBG] Start userinfo request
2018-09-30 17:26:20.470 -03:00 [DBG] Bearer token found in header
2018-09-30 17:26:20.511 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:26:20.540 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:26:20.553 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:26:20.556 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338975,
    "exp": 1538342575,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:26:20.565 -03:00 [DBG] Creating userinfo response
2018-09-30 17:26:20.572 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:26:20.577 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:26:20.586 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:26:20.601 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:26:20.606 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:26:20.618 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:26:20.654 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:26:20.658 -03:00 [DBG] End userinfo request
2018-09-30 17:26:24.225 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 17:26:24.233 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 17:26:24.238 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 17:26:24.242 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 17:26:24.248 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 17:26:24.254 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 17:26:24.258 -03:00 [DBG] Start userinfo request
2018-09-30 17:26:24.263 -03:00 [DBG] Bearer token found in header
2018-09-30 17:26:24.287 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:26:24.305 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 17:26:24.312 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 17:26:24.316 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538338975,
    "exp": 1538342575,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 17:26:24.322 -03:00 [DBG] Creating userinfo response
2018-09-30 17:26:24.324 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:26:24.327 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:26:24.334 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:26:24.337 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 17:26:24.339 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 17:26:24.344 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 17:26:24.359 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 17:26:24.364 -03:00 [DBG] End userinfo request
2018-09-30 17:26:31.092 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:26:46.105 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:27:01.120 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:27:16.136 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:27:31.153 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:27:46.166 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:28:01.182 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:28:16.200 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:28:31.217 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:28:46.230 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:29:01.246 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:29:16.265 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:29:31.277 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:29:46.293 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:30:01.310 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:30:16.324 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:30:31.343 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:30:46.357 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:31:01.375 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:31:02.493 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 17:31:02.501 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 17:31:02.504 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 17:31:02.510 -03:00 [DBG] Start discovery request
2018-09-30 17:31:02.525 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 17:31:02.565 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 17:31:02.570 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 17:31:02.574 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 17:31:02.580 -03:00 [DBG] Start key discovery request
2018-09-30 17:31:02.666 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 17:31:02.674 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 17:31:02.680 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 17:31:02.686 -03:00 [DBG] Start authorize request
2018-09-30 17:31:02.695 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:31:02.702 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:31:02.733 -03:00 [DBG] skoruba_identity_admin found in database: true
2018-09-30 17:31:02.757 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:02.788 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:02.801 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:02.808 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:02.819 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:31:02.829 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "skoruba_identity_admin",
  "ClientName": "skoruba_identity_admin",
  "RedirectUri": "http://localhost:9000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:9000/signin-oidc"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email roles",
  "State": "CfDJ8GSgSaSHrdVBj_NZ1rXz9fiqTqqoemED2w4XcB5fv06Y0gxrIUQv9dGWgLBQjtWONOdgznQhr2vHn_saE2Y6x0qHVxe5XRi0S88xf-FXN6lwAHPxSaaGtrunbK4vUdkDaC2XGz3Q3426I3wOvE0z6f5aUfpWGGxx37zfzDbMnOIH3gbsiB6DiJ3b4hom9cCkxKtQiQyqgJBiuL-J8WpPIYrsEMAovuUBlgbsqxVHdFZywdieB1P0k91S_ld5oms9NPCtVgyYVwVAZzXau6wtIvmXoV_REDeHC2rD1XUU7W84Hj5eC-X26o5XCyxeEUo8TQ",
  "Nonce": "636739362626187884.NjMyOTgyZDItYWZjOS00OTViLWIxNzctYmRiMjE3MDM0ZjhhZDE2YTlmNmUtNTQzNy00NzJiLTg0MzAtMzJmMTJiNDY2ZThi",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "client_id": "skoruba_identity_admin",
    "redirect_uri": "http://localhost:9000/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile email roles",
    "response_mode": "form_post",
    "nonce": "636739362626187884.NjMyOTgyZDItYWZjOS00OTViLWIxNzctYmRiMjE3MDM0ZjhhZDE2YTlmNmUtNTQzNy00NzJiLTg0MzAtMzJmMTJiNDY2ZThi",
    "state": "CfDJ8GSgSaSHrdVBj_NZ1rXz9fiqTqqoemED2w4XcB5fv06Y0gxrIUQv9dGWgLBQjtWONOdgznQhr2vHn_saE2Y6x0qHVxe5XRi0S88xf-FXN6lwAHPxSaaGtrunbK4vUdkDaC2XGz3Q3426I3wOvE0z6f5aUfpWGGxx37zfzDbMnOIH3gbsiB6DiJ3b4hom9cCkxKtQiQyqgJBiuL-J8WpPIYrsEMAovuUBlgbsqxVHdFZywdieB1P0k91S_ld5oms9NPCtVgyYVwVAZzXau6wtIvmXoV_REDeHC2rD1XUU7W84Hj5eC-X26o5XCyxeEUo8TQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-09-30 17:31:02.876 -03:00 [DBG] gsCVSNdvZgUr8tZdTaGuiL+gfTK57U3hd+F8kqPECnA= found in database: false
2018-09-30 17:31:02.880 -03:00 [DBG] user_consent grant with value: skoruba_identity_admin|08d62700-cd05-8b33-e915-8024e7c117f1 not found in store.
2018-09-30 17:31:02.883 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-30 17:31:02.886 -03:00 [INF] Showing consent: User has not yet consented
2018-09-30 17:31:03.024 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:31:03.048 -03:00 [DBG] skoruba_identity_admin found in database: true
2018-09-30 17:31:03.058 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:03.065 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:03.072 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:03.079 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:03.084 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:31:03.110 -03:00 [DBG] skoruba_identity_admin found in database: true
2018-09-30 17:31:03.119 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:03.125 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:10.561 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-30 17:31:10.600 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:31:10.622 -03:00 [DBG] skoruba_identity_admin found in database: true
2018-09-30 17:31:10.629 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:10.636 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:10.643 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:10.649 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:10.654 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:31:10.672 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-30 17:31:10.676 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-30 17:31:10.679 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-30 17:31:10.686 -03:00 [DBG] Start authorize callback request
2018-09-30 17:31:10.694 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:31:10.698 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 17:31:10.716 -03:00 [DBG] skoruba_identity_admin found in database: true
2018-09-30 17:31:10.723 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:10.728 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:10.733 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2018-09-30 17:31:10.738 -03:00 [DBG] Found [] API scopes in database
2018-09-30 17:31:10.741 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 17:31:10.744 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "skoruba_identity_admin",
  "ClientName": "skoruba_identity_admin",
  "RedirectUri": "http://localhost:9000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:9000/signin-oidc"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email roles",
  "State": "CfDJ8GSgSaSHrdVBj_NZ1rXz9fiqTqqoemED2w4XcB5fv06Y0gxrIUQv9dGWgLBQjtWONOdgznQhr2vHn_saE2Y6x0qHVxe5XRi0S88xf-FXN6lwAHPxSaaGtrunbK4vUdkDaC2XGz3Q3426I3wOvE0z6f5aUfpWGGxx37zfzDbMnOIH3gbsiB6DiJ3b4hom9cCkxKtQiQyqgJBiuL-J8WpPIYrsEMAovuUBlgbsqxVHdFZywdieB1P0k91S_ld5oms9NPCtVgyYVwVAZzXau6wtIvmXoV_REDeHC2rD1XUU7W84Hj5eC-X26o5XCyxeEUo8TQ",
  "Nonce": "636739362626187884.NjMyOTgyZDItYWZjOS00OTViLWIxNzctYmRiMjE3MDM0ZjhhZDE2YTlmNmUtNTQzNy00NzJiLTg0MzAtMzJmMTJiNDY2ZThi",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "client_id": "skoruba_identity_admin",
    "redirect_uri": "http://localhost:9000/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile email roles",
    "response_mode": "form_post",
    "nonce": "636739362626187884.NjMyOTgyZDItYWZjOS00OTViLWIxNzctYmRiMjE3MDM0ZjhhZDE2YTlmNmUtNTQzNy00NzJiLTg0MzAtMzJmMTJiNDY2ZThi",
    "state": "CfDJ8GSgSaSHrdVBj_NZ1rXz9fiqTqqoemED2w4XcB5fv06Y0gxrIUQv9dGWgLBQjtWONOdgznQhr2vHn_saE2Y6x0qHVxe5XRi0S88xf-FXN6lwAHPxSaaGtrunbK4vUdkDaC2XGz3Q3426I3wOvE0z6f5aUfpWGGxx37zfzDbMnOIH3gbsiB6DiJ3b4hom9cCkxKtQiQyqgJBiuL-J8WpPIYrsEMAovuUBlgbsqxVHdFZywdieB1P0k91S_ld5oms9NPCtVgyYVwVAZzXau6wtIvmXoV_REDeHC2rD1XUU7W84Hj5eC-X26o5XCyxeEUo8TQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-09-30 17:31:10.758 -03:00 [DBG] gsCVSNdvZgUr8tZdTaGuiL+gfTK57U3hd+F8kqPECnA= found in database: false
2018-09-30 17:31:10.762 -03:00 [DBG] user_consent grant with value: skoruba_identity_admin|08d62700-cd05-8b33-e915-8024e7c117f1 not found in store.
2018-09-30 17:31:10.765 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-30 17:31:10.770 -03:00 [INF] User consented to scopes: ["openid","profile","email","roles"]
2018-09-30 17:31:10.774 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","roles"]
2018-09-30 17:31:10.781 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 17:31:10.795 -03:00 [DBG] gsCVSNdvZgUr8tZdTaGuiL+gfTK57U3hd+F8kqPECnA= not found in database
2018-09-30 17:31:10.979 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 17:31:10.989 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: skoruba_identity_admin
2018-09-30 17:31:11.049 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "skoruba_identity_admin",
  "ClientName": "skoruba_identity_admin",
  "RedirectUri": "http://localhost:9000/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email roles",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****RCRQ"
    }
  ],
  "ActivityId": "0HLH72BFEHLOD:00000004",
  "TimeStamp": "2018-09-30T20:31:11Z",
  "ProcessId": 21768,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 17:31:11.067 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "skoruba_identity_admin",
  "RedirectUri": "http://localhost:9000/signin-oidc",
  "State": "CfDJ8GSgSaSHrdVBj_NZ1rXz9fiqTqqoemED2w4XcB5fv06Y0gxrIUQv9dGWgLBQjtWONOdgznQhr2vHn_saE2Y6x0qHVxe5XRi0S88xf-FXN6lwAHPxSaaGtrunbK4vUdkDaC2XGz3Q3426I3wOvE0z6f5aUfpWGGxx37zfzDbMnOIH3gbsiB6DiJ3b4hom9cCkxKtQiQyqgJBiuL-J8WpPIYrsEMAovuUBlgbsqxVHdFZywdieB1P0k91S_ld5oms9NPCtVgyYVwVAZzXau6wtIvmXoV_REDeHC2rD1XUU7W84Hj5eC-X26o5XCyxeEUo8TQ",
  "Scope": "openid profile email roles"
}
2018-09-30 17:31:11.091 -03:00 [DBG] Augmenting SignInContext
2018-09-30 17:31:11.101 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-30 17:31:16.394 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:31:31.411 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:31:46.426 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:32:01.441 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:32:16.455 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:32:31.469 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:32:46.485 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:33:01.496 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:33:16.512 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:33:31.531 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:33:46.547 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:34:01.558 -03:00 [INF] Clearing 0 tokens
2018-09-30 17:34:16.577 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:03:50.587 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 22:03:50.656 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 22:03:56.403 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 22:03:56.416 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 22:03:56.418 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 22:03:56.420 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 22:03:56.425 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 22:03:56.532 -03:00 [DBG] Starting token cleanup
2018-09-30 22:04:11.585 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:04:26.610 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:04:41.627 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:04:56.645 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:05:11.659 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:05:26.673 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:05:41.691 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:05:56.707 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:06:11.720 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:06:26.724 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:06:41.736 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:06:56.753 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:07:11.767 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:07:26.785 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:07:41.806 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:07:56.814 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:08:11.832 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:08:26.848 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:08:38.734 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:08:38.823 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:08:38.826 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:08:38.855 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:08:38.893 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:08:38.898 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:08:38.903 -03:00 [DBG] Start discovery request
2018-09-30 22:08:39.151 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:08:39.196 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:08:39.201 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:08:39.203 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:08:39.206 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:08:39.220 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:08:39.225 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:08:39.232 -03:00 [DBG] Start key discovery request
2018-09-30 22:08:39.463 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 22:08:39.469 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 22:08:39.472 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 22:08:39.477 -03:00 [DBG] Start authorize request
2018-09-30 22:08:39.484 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 22:08:39.490 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 22:08:39.655 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 22:08:39.687 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:08:39.725 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 22:08:39.738 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:08:39.746 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 22:08:39.756 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 22:08:39.765 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "E43n4KQS3ZZwRvvkHddSfK9ldZYA3QmW0jMwJCgS",
  "Nonce": "E43n4KQS3ZZwRvvkHddSfK9ldZYA3QmW0jMwJCgS",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "E43n4KQS3ZZwRvvkHddSfK9ldZYA3QmW0jMwJCgS",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "E43n4KQS3ZZwRvvkHddSfK9ldZYA3QmW0jMwJCgS"
  }
}
2018-09-30 22:08:39.816 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 22:08:39.823 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 22:08:39.831 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 22:08:39.839 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 22:08:39.842 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 22:08:39.896 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 22:08:39.899 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 22:08:39.917 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ws-g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Tw6Q"
    }
  ],
  "ActivityId": "0HLH779LP3NA3:00000001",
  "TimeStamp": "2018-10-01T01:08:39Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 22:08:39.925 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "E43n4KQS3ZZwRvvkHddSfK9ldZYA3QmW0jMwJCgS",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 22:08:40.833 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:08:40.839 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:08:40.844 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:08:40.848 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:08:40.853 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:08:40.857 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:08:40.863 -03:00 [DBG] Start discovery request
2018-09-30 22:08:40.882 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:08:40.901 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:08:40.915 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:08:40.918 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:08:40.921 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:08:40.925 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:08:40.929 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:08:40.932 -03:00 [DBG] Start key discovery request
2018-09-30 22:08:41.861 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:08:42.093 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 22:08:42.101 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:08:42.108 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:08:42.187 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 22:08:42.193 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:08:42.197 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:08:42.199 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 22:08:42.204 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 22:08:42.208 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 22:08:42.216 -03:00 [DBG] Start userinfo request
2018-09-30 22:08:42.222 -03:00 [DBG] Bearer token found in header
2018-09-30 22:08:42.262 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 22:08:42.282 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 22:08:42.292 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 22:08:42.298 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538356119,
    "exp": 1538359719,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 22:08:42.308 -03:00 [DBG] Creating userinfo response
2018-09-30 22:08:42.314 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 22:08:42.318 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 22:08:42.325 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:08:42.330 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 22:08:42.332 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 22:08:42.338 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:08:42.357 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 22:08:42.360 -03:00 [DBG] End userinfo request
2018-09-30 22:08:45.504 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:08:45.507 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:08:45.511 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:08:45.513 -03:00 [DBG] Start discovery request
2018-09-30 22:08:45.524 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:08:45.565 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:08:45.568 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:08:45.571 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:08:45.573 -03:00 [DBG] Start key discovery request
2018-09-30 22:08:56.879 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:09:11.894 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:09:26.917 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:09:41.941 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:09:56.959 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:10:11.979 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:10:26.999 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:10:42.018 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:10:57.021 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:11:12.036 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:11:27.049 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:11:42.065 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:11:57.082 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:12:12.096 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:12:27.113 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:12:42.127 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:12:57.144 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:13:12.160 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:13:27.179 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:13:42.191 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:13:57.205 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:14:12.212 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:14:27.221 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:14:42.236 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:14:57.240 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:15:12.260 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:15:27.278 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:15:42.299 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:15:57.320 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:16:12.333 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:16:27.348 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:16:42.361 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:16:57.371 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:17:12.377 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:17:27.383 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:17:42.402 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:17:57.416 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:18:12.429 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:18:27.448 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:18:42.458 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:18:57.474 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:19:12.490 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:19:27.497 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:19:42.506 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:19:57.519 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:20:12.526 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:20:27.541 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:20:42.549 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:20:57.564 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:21:12.582 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:21:27.597 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:21:42.611 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:21:57.629 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:22:12.636 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:22:27.649 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:22:42.667 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:22:57.678 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:23:12.690 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:23:18.884 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:23:18.889 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:23:18.894 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:23:18.898 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:23:18.901 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:23:18.905 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:23:18.909 -03:00 [DBG] Start discovery request
2018-09-30 22:23:18.922 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:23:18.949 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:23:18.956 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:23:18.959 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:23:18.962 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:23:18.964 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:23:18.967 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:23:18.969 -03:00 [DBG] Start key discovery request
2018-09-30 22:23:27.707 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:23:42.727 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:23:57.736 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:24:12.739 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:24:27.754 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:24:42.768 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:24:57.784 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:25:12.801 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:25:27.819 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:25:42.834 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:25:57.848 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:26:12.861 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:26:27.867 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:26:42.884 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:26:57.902 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:27:12.909 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:27:27.928 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:27:42.943 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:27:57.967 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:28:12.986 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:28:28.005 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:28:43.024 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:28:58.042 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:29:13.062 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:29:28.068 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:29:43.085 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:29:49.120 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:29:49.125 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:29:49.129 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:29:49.133 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:29:49.137 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:29:49.141 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:29:49.146 -03:00 [DBG] Start discovery request
2018-09-30 22:29:49.162 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:29:49.184 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:29:49.192 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:29:49.197 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:29:49.201 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:29:49.205 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:29:49.209 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:29:49.213 -03:00 [DBG] Start key discovery request
2018-09-30 22:29:49.247 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 22:29:49.252 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 22:29:49.255 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 22:29:49.259 -03:00 [DBG] Start authorize request
2018-09-30 22:29:49.261 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 22:29:49.264 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 22:29:49.283 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 22:29:49.288 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:29:49.300 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 22:29:49.305 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:29:49.314 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 22:29:49.317 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 22:29:49.320 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "ngzKiqTeojG1rTxw7tEuzOFfxnDZjmZgBbCTKUBm",
  "Nonce": "ngzKiqTeojG1rTxw7tEuzOFfxnDZjmZgBbCTKUBm",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "ngzKiqTeojG1rTxw7tEuzOFfxnDZjmZgBbCTKUBm",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "ngzKiqTeojG1rTxw7tEuzOFfxnDZjmZgBbCTKUBm"
  }
}
2018-09-30 22:29:49.337 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 22:29:49.342 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 22:29:49.345 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 22:29:49.347 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 22:29:49.349 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 22:29:49.367 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 22:29:49.370 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 22:29:49.374 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****AHZQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****vfUw"
    }
  ],
  "ActivityId": "0HLH779LP3NA8:00000001",
  "TimeStamp": "2018-10-01T01:29:49Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 22:29:49.378 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "ngzKiqTeojG1rTxw7tEuzOFfxnDZjmZgBbCTKUBm",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 22:29:50.302 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:29:50.307 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:29:50.311 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:29:50.316 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:29:50.320 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:29:50.323 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:29:50.327 -03:00 [DBG] Start discovery request
2018-09-30 22:29:50.343 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:29:50.359 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:29:50.366 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:29:50.370 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:29:50.372 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:29:50.377 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:29:50.380 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:29:50.383 -03:00 [DBG] Start key discovery request
2018-09-30 22:29:51.499 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 22:29:51.505 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:29:51.508 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:29:51.561 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 22:29:51.568 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:29:51.572 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:29:51.575 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 22:29:51.580 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 22:29:51.583 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 22:29:51.588 -03:00 [DBG] Start userinfo request
2018-09-30 22:29:51.591 -03:00 [DBG] Bearer token found in header
2018-09-30 22:29:51.614 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 22:29:51.634 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 22:29:51.642 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 22:29:51.645 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538357389,
    "exp": 1538360989,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 22:29:51.651 -03:00 [DBG] Creating userinfo response
2018-09-30 22:29:51.653 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 22:29:51.658 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 22:29:51.665 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:29:51.668 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 22:29:51.671 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 22:29:51.676 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 22:29:51.700 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 22:29:51.703 -03:00 [DBG] End userinfo request
2018-09-30 22:29:58.090 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:30:13.102 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:30:19.701 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:30:19.717 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:30:19.722 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:30:19.729 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:30:19.734 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:30:19.739 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:30:19.743 -03:00 [DBG] Start discovery request
2018-09-30 22:30:19.756 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:30:19.774 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:30:19.782 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:30:19.786 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:30:19.790 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:30:19.793 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:30:19.799 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:30:19.804 -03:00 [DBG] Start key discovery request
2018-09-30 22:30:28.114 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:30:30.701 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:30:30.708 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:30:30.712 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:30:30.717 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:30:30.728 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:30:30.733 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:30:30.738 -03:00 [DBG] Start discovery request
2018-09-30 22:30:30.752 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:30:30.764 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:30:30.770 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:30:30.773 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:30:30.775 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:30:30.777 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:30:30.780 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:30:30.783 -03:00 [DBG] Start key discovery request
2018-09-30 22:30:36.424 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 22:30:36.432 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:30:36.437 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:30:36.442 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 22:30:36.448 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 22:30:36.452 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 22:30:36.456 -03:00 [DBG] Start discovery request
2018-09-30 22:30:36.473 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 22:30:36.492 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 22:30:36.500 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 22:30:36.504 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 22:30:36.508 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 22:30:36.511 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 22:30:36.515 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 22:30:36.519 -03:00 [DBG] Start key discovery request
2018-09-30 22:30:43.130 -03:00 [INF] Clearing 0 tokens
2018-09-30 22:30:58.143 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:04:31.885 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 23:04:31.954 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 23:04:35.923 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 23:04:35.937 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 23:04:35.939 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 23:04:35.941 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 23:04:35.947 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 23:04:36.069 -03:00 [DBG] Starting token cleanup
2018-09-30 23:04:51.113 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:05:01.697 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:05:01.800 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:01.803 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:01.844 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:05:01.855 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:05:01.858 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:05:01.863 -03:00 [DBG] Start discovery request
2018-09-30 23:05:02.179 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:05:02.229 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:05:02.238 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:02.241 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:02.244 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:05:02.247 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:05:02.251 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:05:02.256 -03:00 [DBG] Start key discovery request
2018-09-30 23:05:06.122 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:05:08.433 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 23:05:08.438 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 23:05:08.441 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 23:05:08.447 -03:00 [DBG] Start authorize request
2018-09-30 23:05:08.455 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:05:08.463 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 23:05:08.645 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:08.678 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:08.713 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 23:05:08.725 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:08.733 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 23:05:08.741 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 23:05:08.750 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "L8zbJTwzYAdQTyr6nmjsdqZCfi1AifzSWL9Rytg8",
  "Nonce": "L8zbJTwzYAdQTyr6nmjsdqZCfi1AifzSWL9Rytg8",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "L8zbJTwzYAdQTyr6nmjsdqZCfi1AifzSWL9Rytg8",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "L8zbJTwzYAdQTyr6nmjsdqZCfi1AifzSWL9Rytg8"
  }
}
2018-09-30 23:05:08.795 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 23:05:08.802 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 23:05:08.809 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 23:05:08.818 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 23:05:08.820 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:05:08.883 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 23:05:08.886 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 23:05:08.908 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****imSw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****73qA"
    }
  ],
  "ActivityId": "0HLH7895VMI38:00000001",
  "TimeStamp": "2018-10-01T02:05:08Z",
  "ProcessId": 24952,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 23:05:08.914 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "L8zbJTwzYAdQTyr6nmjsdqZCfi1AifzSWL9Rytg8",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 23:05:09.980 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:05:09.988 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:09.991 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:09.996 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:05:10.002 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:05:10.008 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:05:10.016 -03:00 [DBG] Start discovery request
2018-09-30 23:05:10.035 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:05:10.051 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:05:10.062 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:10.067 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:10.075 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:05:10.082 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:05:10.088 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:05:10.100 -03:00 [DBG] Start key discovery request
2018-09-30 23:05:11.242 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:05:11.247 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:11.250 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:11.295 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:05:11.302 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:11.307 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:11.310 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:05:11.315 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:05:11.319 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:05:11.327 -03:00 [DBG] Start userinfo request
2018-09-30 23:05:11.333 -03:00 [DBG] Bearer token found in header
2018-09-30 23:05:11.373 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:11.393 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:11.404 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:05:11.410 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:05:11.419 -03:00 [DBG] Creating userinfo response
2018-09-30 23:05:11.424 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:11.428 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:11.435 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:11.438 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:05:11.441 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:11.446 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:11.464 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:05:11.466 -03:00 [DBG] End userinfo request
2018-09-30 23:05:13.887 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:05:13.891 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:05:13.894 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:05:13.896 -03:00 [DBG] Start discovery request
2018-09-30 23:05:13.906 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:05:13.944 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:05:13.948 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:05:13.950 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:05:13.952 -03:00 [DBG] Start key discovery request
2018-09-30 23:05:21.138 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:05:31.454 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:05:31.464 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:31.468 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:31.489 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:05:31.497 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:31.502 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:31.507 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:05:31.510 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:05:31.513 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:05:31.518 -03:00 [DBG] Start userinfo request
2018-09-30 23:05:31.520 -03:00 [DBG] Bearer token found in header
2018-09-30 23:05:31.545 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:31.566 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:31.572 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:05:31.575 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:05:31.581 -03:00 [DBG] Creating userinfo response
2018-09-30 23:05:31.583 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:31.587 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:31.593 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:31.596 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:05:31.599 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:31.604 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:31.622 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:05:31.624 -03:00 [DBG] End userinfo request
2018-09-30 23:05:36.146 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:05:50.977 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:05:50.984 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:50.992 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:50.998 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:05:51.001 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:05:51.005 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:05:51.008 -03:00 [DBG] Start discovery request
2018-09-30 23:05:51.030 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:05:51.049 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:05:51.057 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:51.061 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:51.065 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:05:51.069 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:05:51.073 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:05:51.077 -03:00 [DBG] Start key discovery request
2018-09-30 23:05:51.164 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:05:51.550 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:05:51.557 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:51.561 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:51.623 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:05:51.634 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:51.639 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:51.643 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:05:51.648 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:05:51.652 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:05:51.657 -03:00 [DBG] Start userinfo request
2018-09-30 23:05:51.659 -03:00 [DBG] Bearer token found in header
2018-09-30 23:05:51.687 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:51.711 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:51.720 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:05:51.724 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:05:51.729 -03:00 [DBG] Creating userinfo response
2018-09-30 23:05:51.734 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:51.754 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:51.762 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:51.769 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:05:51.773 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:51.779 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:51.798 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:05:51.804 -03:00 [DBG] End userinfo request
2018-09-30 23:05:55.107 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:05:55.132 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:55.170 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:55.203 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:05:55.223 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:05:55.233 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:05:55.252 -03:00 [DBG] Start discovery request
2018-09-30 23:05:55.270 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:05:55.659 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:05:55.665 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:55.668 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:55.672 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:05:55.681 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:05:55.689 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:05:55.696 -03:00 [DBG] Start key discovery request
2018-09-30 23:05:55.767 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:05:55.777 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:05:55.781 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:05:55.785 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:05:55.789 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:05:55.792 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:05:55.798 -03:00 [DBG] Start userinfo request
2018-09-30 23:05:55.802 -03:00 [DBG] Bearer token found in header
2018-09-30 23:05:55.841 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:55.891 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:05:55.902 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:05:55.905 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:05:55.912 -03:00 [DBG] Creating userinfo response
2018-09-30 23:05:55.914 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:55.918 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:55.924 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:55.928 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:05:55.931 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:05:55.938 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:05:55.955 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:05:55.958 -03:00 [DBG] End userinfo request
2018-09-30 23:06:06.183 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:06:21.191 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:06:36.205 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:06:51.215 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:06:51.988 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:06:51.994 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:06:51.997 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:06:52.000 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:06:52.003 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:06:52.006 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:06:52.008 -03:00 [DBG] Start discovery request
2018-09-30 23:06:52.025 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:06:52.035 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:06:52.040 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:06:52.043 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:06:52.046 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:06:52.051 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:06:52.055 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:06:52.059 -03:00 [DBG] Start key discovery request
2018-09-30 23:06:52.438 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:06:52.443 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:06:52.446 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:06:52.506 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:06:52.515 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:06:52.523 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:06:52.527 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:06:52.532 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:06:52.540 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:06:52.546 -03:00 [DBG] Start userinfo request
2018-09-30 23:06:52.550 -03:00 [DBG] Bearer token found in header
2018-09-30 23:06:52.583 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:06:52.614 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:06:52.623 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:06:52.625 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:06:52.629 -03:00 [DBG] Creating userinfo response
2018-09-30 23:06:52.632 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:06:52.635 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:06:52.642 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:06:52.646 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:06:52.649 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:06:52.654 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:06:52.675 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:06:52.678 -03:00 [DBG] End userinfo request
2018-09-30 23:07:06.223 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:07:21.238 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:07:36.252 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:07:47.297 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:07:47.303 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:47.306 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:47.310 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:07:47.317 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:07:47.320 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:07:47.323 -03:00 [DBG] Start discovery request
2018-09-30 23:07:47.337 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:07:47.349 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:07:47.357 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:47.360 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:47.362 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:07:47.365 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:07:47.369 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:07:47.372 -03:00 [DBG] Start key discovery request
2018-09-30 23:07:47.915 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:07:47.925 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:47.928 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:47.983 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:07:47.991 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:47.998 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:48.010 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:07:48.014 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:07:48.019 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:07:48.025 -03:00 [DBG] Start userinfo request
2018-09-30 23:07:48.029 -03:00 [DBG] Bearer token found in header
2018-09-30 23:07:48.065 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:07:48.089 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:07:48.102 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:07:48.106 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:07:48.117 -03:00 [DBG] Creating userinfo response
2018-09-30 23:07:48.122 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:07:48.125 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:07:48.134 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:07:48.137 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:07:48.142 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:07:48.150 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:07:48.176 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:07:48.180 -03:00 [DBG] End userinfo request
2018-09-30 23:07:51.268 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:07:56.106 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:07:56.113 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:56.117 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:56.121 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:07:56.125 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:07:56.129 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:07:56.132 -03:00 [DBG] Start discovery request
2018-09-30 23:07:56.149 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:07:56.466 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:07:56.472 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:56.475 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:56.478 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:07:56.482 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:07:56.486 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:07:56.491 -03:00 [DBG] Start key discovery request
2018-09-30 23:07:56.549 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:07:56.555 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:56.558 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:56.603 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:07:56.615 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:07:56.621 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:07:56.625 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:07:56.633 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:07:56.640 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:07:56.649 -03:00 [DBG] Start userinfo request
2018-09-30 23:07:56.653 -03:00 [DBG] Bearer token found in header
2018-09-30 23:07:56.691 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:07:56.724 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:07:56.735 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:07:56.738 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:07:56.746 -03:00 [DBG] Creating userinfo response
2018-09-30 23:07:56.752 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:07:56.756 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:07:56.766 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:07:56.769 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:07:56.774 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:07:56.785 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:07:56.819 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:07:56.823 -03:00 [DBG] End userinfo request
2018-09-30 23:08:06.290 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:08:21.317 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:08:36.332 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:08:51.341 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:09:06.347 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:09:21.355 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:09:25.248 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:09:25.259 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:09:25.263 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:09:25.266 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:09:25.270 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:09:25.273 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:09:25.276 -03:00 [DBG] Start discovery request
2018-09-30 23:09:25.296 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:09:25.672 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:09:25.678 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:09:25.682 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:09:25.685 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:09:25.690 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:09:25.693 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:09:25.700 -03:00 [DBG] Start key discovery request
2018-09-30 23:09:25.800 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:09:25.806 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:09:25.809 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:09:25.873 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:09:25.883 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:09:25.889 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:09:25.892 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:09:25.898 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:09:25.904 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:09:25.914 -03:00 [DBG] Start userinfo request
2018-09-30 23:09:25.917 -03:00 [DBG] Bearer token found in header
2018-09-30 23:09:25.947 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:09:25.968 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:09:25.982 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:09:25.985 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359508,
    "exp": 1538363108,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:09:25.989 -03:00 [DBG] Creating userinfo response
2018-09-30 23:09:25.994 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:09:25.997 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:09:26.004 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:09:26.008 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:09:26.010 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:09:26.016 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:09:26.037 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:09:26.040 -03:00 [DBG] End userinfo request
2018-09-30 23:09:36.365 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:09:51.379 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:10:06.395 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:10:18.484 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:10:18.491 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:10:18.496 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:10:18.500 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:10:18.507 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:10:18.510 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:10:18.513 -03:00 [DBG] Start discovery request
2018-09-30 23:10:18.529 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:10:18.542 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:10:18.549 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:10:18.556 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:10:18.559 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:10:18.564 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:10:18.569 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:10:18.572 -03:00 [DBG] Start key discovery request
2018-09-30 23:10:21.402 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:10:36.417 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:10:51.423 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:11:06.431 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:11:21.451 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:11:36.465 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:11:46.804 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:11:46.811 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:11:46.815 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:11:46.824 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:11:46.828 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:11:46.832 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:11:46.837 -03:00 [DBG] Start discovery request
2018-09-30 23:11:46.851 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:11:46.864 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:11:46.869 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:11:46.883 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:11:46.887 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:11:46.890 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:11:46.893 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:11:46.896 -03:00 [DBG] Start key discovery request
2018-09-30 23:11:46.924 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 23:11:46.928 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 23:11:46.931 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 23:11:46.934 -03:00 [DBG] Start authorize request
2018-09-30 23:11:46.939 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:11:46.942 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 23:11:46.962 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:11:46.967 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:11:46.977 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 23:11:46.982 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:11:46.991 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 23:11:46.993 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 23:11:46.996 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "fopEz5fCzf6XKxgi6EIDM7YodBC9yRV3SjXYx0FH",
  "Nonce": "fopEz5fCzf6XKxgi6EIDM7YodBC9yRV3SjXYx0FH",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "fopEz5fCzf6XKxgi6EIDM7YodBC9yRV3SjXYx0FH",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "fopEz5fCzf6XKxgi6EIDM7YodBC9yRV3SjXYx0FH"
  }
}
2018-09-30 23:11:47.013 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 23:11:47.018 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 23:11:47.021 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 23:11:47.023 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 23:11:47.025 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:11:47.044 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 23:11:47.049 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 23:11:47.056 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ndsw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****23PA"
    }
  ],
  "ActivityId": "0HLH7895VMI3B:00000001",
  "TimeStamp": "2018-10-01T02:11:47Z",
  "ProcessId": 24952,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 23:11:47.062 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "fopEz5fCzf6XKxgi6EIDM7YodBC9yRV3SjXYx0FH",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 23:11:47.995 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:11:48.001 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:11:48.009 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:11:48.012 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:11:48.016 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:11:48.019 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:11:48.024 -03:00 [DBG] Start discovery request
2018-09-30 23:11:48.040 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:11:48.056 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:11:48.065 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:11:48.071 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:11:48.075 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:11:48.079 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:11:48.085 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:11:48.088 -03:00 [DBG] Start key discovery request
2018-09-30 23:11:49.218 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:11:49.223 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:11:49.226 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:11:49.268 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:11:49.275 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:11:49.278 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:11:49.282 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:11:49.285 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:11:49.288 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:11:49.291 -03:00 [DBG] Start userinfo request
2018-09-30 23:11:49.294 -03:00 [DBG] Bearer token found in header
2018-09-30 23:11:49.317 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:11:49.335 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:11:49.341 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:11:49.344 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:11:49.350 -03:00 [DBG] Creating userinfo response
2018-09-30 23:11:49.352 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:11:49.355 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:11:49.362 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:11:49.365 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:11:49.368 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:11:49.373 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:11:49.389 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:11:49.393 -03:00 [DBG] End userinfo request
2018-09-30 23:11:51.474 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:12:06.489 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:12:21.501 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:12:36.516 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:12:47.397 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:12:47.403 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:12:47.409 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:12:47.413 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:12:47.416 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:12:47.418 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:12:47.422 -03:00 [DBG] Start discovery request
2018-09-30 23:12:47.439 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:12:47.777 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:12:47.782 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:12:47.785 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:12:47.788 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:12:47.791 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:12:47.793 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:12:47.796 -03:00 [DBG] Start key discovery request
2018-09-30 23:12:47.883 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:12:47.889 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:12:47.892 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:12:47.942 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:12:47.953 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:12:47.960 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:12:47.963 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:12:47.970 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:12:47.974 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:12:47.978 -03:00 [DBG] Start userinfo request
2018-09-30 23:12:47.981 -03:00 [DBG] Bearer token found in header
2018-09-30 23:12:48.012 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:12:48.035 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:12:48.047 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:12:48.051 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:12:48.056 -03:00 [DBG] Creating userinfo response
2018-09-30 23:12:48.060 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:12:48.064 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:12:48.071 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:12:48.075 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:12:48.078 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:12:48.085 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:12:48.109 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:12:48.112 -03:00 [DBG] End userinfo request
2018-09-30 23:12:51.532 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:13:04.981 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:13:04.988 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:13:04.993 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:13:04.996 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:13:05.002 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:13:05.005 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:13:05.008 -03:00 [DBG] Start discovery request
2018-09-30 23:13:05.028 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:13:05.037 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:13:05.042 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:13:05.046 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:13:05.050 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:13:05.054 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:13:05.057 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:13:05.060 -03:00 [DBG] Start key discovery request
2018-09-30 23:13:05.428 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:13:05.434 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:13:05.439 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:13:05.498 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:13:05.508 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:13:05.512 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:13:05.515 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:13:05.523 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:13:05.527 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:13:05.531 -03:00 [DBG] Start userinfo request
2018-09-30 23:13:05.534 -03:00 [DBG] Bearer token found in header
2018-09-30 23:13:05.559 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:13:05.583 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:13:05.591 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:13:05.594 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:13:05.600 -03:00 [DBG] Creating userinfo response
2018-09-30 23:13:05.603 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:13:05.607 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:13:05.614 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:13:05.617 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:13:05.620 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:13:05.627 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:13:05.655 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:13:05.659 -03:00 [DBG] End userinfo request
2018-09-30 23:13:06.559 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:13:21.582 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:13:36.595 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:13:51.609 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:14:06.621 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:14:19.555 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:14:19.562 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:19.567 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:19.571 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:14:19.580 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:14:19.585 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:14:19.591 -03:00 [DBG] Start discovery request
2018-09-30 23:14:19.608 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:14:19.621 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:14:19.627 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:19.632 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:19.635 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:14:19.639 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:14:19.648 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:14:19.655 -03:00 [DBG] Start key discovery request
2018-09-30 23:14:20.166 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:14:20.173 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:20.176 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:20.239 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:14:20.249 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:20.259 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:20.263 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:14:20.270 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:14:20.275 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:14:20.280 -03:00 [DBG] Start userinfo request
2018-09-30 23:14:20.284 -03:00 [DBG] Bearer token found in header
2018-09-30 23:14:20.308 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:14:20.333 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:14:20.344 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:14:20.348 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:14:20.356 -03:00 [DBG] Creating userinfo response
2018-09-30 23:14:20.359 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:14:20.362 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:14:20.368 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:14:20.372 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:14:20.375 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:14:20.383 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:14:20.402 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:14:20.405 -03:00 [DBG] End userinfo request
2018-09-30 23:14:21.638 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:14:36.648 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:14:51.652 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:14:56.539 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:14:56.545 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:56.549 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:56.553 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:14:56.558 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:14:56.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:14:56.565 -03:00 [DBG] Start discovery request
2018-09-30 23:14:56.582 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:14:56.590 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:14:56.595 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:56.599 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:56.602 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:14:56.604 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:14:56.607 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:14:56.610 -03:00 [DBG] Start key discovery request
2018-09-30 23:14:56.998 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:14:57.003 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:57.005 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:57.070 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:14:57.079 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:14:57.086 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:14:57.091 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:14:57.097 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:14:57.100 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:14:57.106 -03:00 [DBG] Start userinfo request
2018-09-30 23:14:57.109 -03:00 [DBG] Bearer token found in header
2018-09-30 23:14:57.141 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:14:57.167 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:14:57.180 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:14:57.183 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:14:57.188 -03:00 [DBG] Creating userinfo response
2018-09-30 23:14:57.190 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:14:57.195 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:14:57.202 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:14:57.206 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:14:57.210 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:14:57.216 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:14:57.239 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:14:57.243 -03:00 [DBG] End userinfo request
2018-09-30 23:15:02.817 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:15:02.826 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:02.832 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:02.835 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:15:02.840 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:15:02.843 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:15:02.846 -03:00 [DBG] Start discovery request
2018-09-30 23:15:02.862 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:15:03.176 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:15:03.183 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:03.186 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:03.189 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:15:03.201 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:15:03.204 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:15:03.207 -03:00 [DBG] Start key discovery request
2018-09-30 23:15:03.270 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:15:03.274 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:03.277 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:03.315 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:15:03.323 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:03.327 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:03.330 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:15:03.335 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:15:03.340 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:15:03.345 -03:00 [DBG] Start userinfo request
2018-09-30 23:15:03.348 -03:00 [DBG] Bearer token found in header
2018-09-30 23:15:03.409 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:15:03.431 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:15:03.442 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:15:03.445 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:15:03.449 -03:00 [DBG] Creating userinfo response
2018-09-30 23:15:03.451 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:15:03.453 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:15:03.461 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:15:03.463 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:15:03.466 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:15:03.471 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:15:03.494 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:15:03.497 -03:00 [DBG] End userinfo request
2018-09-30 23:15:06.666 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:15:21.676 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:15:36.686 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:15:51.695 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:15:55.215 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:15:55.220 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:55.223 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:55.225 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:15:55.229 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:15:55.232 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:15:55.235 -03:00 [DBG] Start discovery request
2018-09-30 23:15:55.250 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:15:55.266 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:15:55.279 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:55.281 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:55.285 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:15:55.288 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:15:55.290 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:15:55.294 -03:00 [DBG] Start key discovery request
2018-09-30 23:15:55.667 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:15:55.672 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:55.675 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:55.729 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:15:55.743 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:15:55.749 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:15:55.752 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:15:55.756 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:15:55.761 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:15:55.766 -03:00 [DBG] Start userinfo request
2018-09-30 23:15:55.769 -03:00 [DBG] Bearer token found in header
2018-09-30 23:15:55.791 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:15:55.815 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:15:55.825 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:15:55.828 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:15:55.832 -03:00 [DBG] Creating userinfo response
2018-09-30 23:15:55.834 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:15:55.839 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:15:55.847 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:15:55.851 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:15:55.853 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:15:55.860 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:15:55.886 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:15:55.890 -03:00 [DBG] End userinfo request
2018-09-30 23:16:06.713 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:16:19.804 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:16:19.813 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:19.816 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:19.821 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:16:19.826 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:16:19.830 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:16:19.834 -03:00 [DBG] Start discovery request
2018-09-30 23:16:19.847 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:16:19.868 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:16:19.877 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:19.881 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:19.886 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:16:19.889 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:16:19.895 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:16:19.899 -03:00 [DBG] Start key discovery request
2018-09-30 23:16:20.299 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:16:20.304 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:20.307 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:20.358 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:16:20.367 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:20.371 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:20.374 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:16:20.379 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:16:20.383 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:16:20.388 -03:00 [DBG] Start userinfo request
2018-09-30 23:16:20.398 -03:00 [DBG] Bearer token found in header
2018-09-30 23:16:20.424 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:16:20.445 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:16:20.456 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:16:20.459 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:16:20.465 -03:00 [DBG] Creating userinfo response
2018-09-30 23:16:20.468 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:16:20.471 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:16:20.479 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:16:20.483 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:16:20.486 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:16:20.494 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:16:20.517 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:16:20.521 -03:00 [DBG] End userinfo request
2018-09-30 23:16:21.729 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:16:36.746 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:16:38.110 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:16:38.117 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:38.120 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:38.124 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:16:38.127 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:16:38.130 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:16:38.134 -03:00 [DBG] Start discovery request
2018-09-30 23:16:38.150 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:16:38.158 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:16:38.164 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:38.167 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:38.169 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:16:38.172 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:16:38.176 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:16:38.180 -03:00 [DBG] Start key discovery request
2018-09-30 23:16:38.564 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:16:38.571 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:38.575 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:38.675 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:16:38.684 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:16:38.690 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:16:38.693 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:16:38.697 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:16:38.701 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:16:38.707 -03:00 [DBG] Start userinfo request
2018-09-30 23:16:38.713 -03:00 [DBG] Bearer token found in header
2018-09-30 23:16:38.737 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:16:38.761 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:16:38.768 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:16:38.770 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538359907,
    "exp": 1538363507,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:16:38.777 -03:00 [DBG] Creating userinfo response
2018-09-30 23:16:38.780 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:16:38.783 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:16:38.805 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:16:38.809 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:16:38.813 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:16:38.824 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:16:38.845 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:16:38.848 -03:00 [DBG] End userinfo request
2018-09-30 23:16:51.752 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:17:06.767 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:17:21.777 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:17:50.432 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 23:17:50.492 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 23:17:54.682 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 23:17:54.695 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 23:17:54.696 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 23:17:54.698 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 23:17:54.703 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 23:17:54.815 -03:00 [DBG] Starting token cleanup
2018-09-30 23:17:55.413 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:17:55.427 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:17:55.430 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:17:55.435 -03:00 [DBG] Start discovery request
2018-09-30 23:17:55.760 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:17:55.822 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:17:55.825 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:17:55.829 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:17:55.834 -03:00 [DBG] Start key discovery request
2018-09-30 23:18:11.100 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:18:26.115 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:18:27.079 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:18:27.117 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:27.122 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:27.126 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:18:27.129 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:18:27.132 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:18:27.135 -03:00 [DBG] Start discovery request
2018-09-30 23:18:27.151 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:18:27.460 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:18:27.466 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:27.470 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:27.474 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:18:27.496 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:18:27.511 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:18:27.518 -03:00 [DBG] Start key discovery request
2018-09-30 23:18:30.175 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:18:30.181 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:30.185 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:30.188 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:18:30.195 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:18:30.201 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:18:30.206 -03:00 [DBG] Start discovery request
2018-09-30 23:18:30.221 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:18:30.234 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:18:30.243 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:30.247 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:30.250 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:18:30.253 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:18:30.256 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:18:30.260 -03:00 [DBG] Start key discovery request
2018-09-30 23:18:30.305 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 23:18:30.311 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 23:18:30.314 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 23:18:30.321 -03:00 [DBG] Start authorize request
2018-09-30 23:18:30.329 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:18:30.335 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 23:18:30.506 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:18:30.542 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:18:30.581 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager","aoeu"] API scopes in database
2018-09-30 23:18:30.593 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:18:30.603 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager","aoeu"] API scopes in database
2018-09-30 23:18:30.611 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 23:18:30.621 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "iIZAMnaXykhc2twV58zyZJaEjsGcgddmbAKNnKO4",
  "Nonce": "iIZAMnaXykhc2twV58zyZJaEjsGcgddmbAKNnKO4",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "iIZAMnaXykhc2twV58zyZJaEjsGcgddmbAKNnKO4",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "iIZAMnaXykhc2twV58zyZJaEjsGcgddmbAKNnKO4"
  }
}
2018-09-30 23:18:30.688 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 23:18:30.696 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 23:18:30.705 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 23:18:30.715 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 23:18:30.717 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:18:30.859 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 23:18:30.861 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 23:18:30.880 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ElhQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****2B9Q"
    }
  ],
  "ActivityId": "0HLH78GCIB2QE:00000001",
  "TimeStamp": "2018-10-01T02:18:30Z",
  "ProcessId": 25432,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 23:18:30.887 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "iIZAMnaXykhc2twV58zyZJaEjsGcgddmbAKNnKO4",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 23:18:31.941 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:18:31.948 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:31.953 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:31.957 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:18:31.962 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:18:31.966 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:18:31.970 -03:00 [DBG] Start discovery request
2018-09-30 23:18:31.984 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:18:31.998 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:18:32.005 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:32.009 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:32.012 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:18:32.015 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:18:32.019 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:18:32.022 -03:00 [DBG] Start key discovery request
2018-09-30 23:18:33.159 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:18:33.165 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:33.167 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:33.213 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:18:33.220 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:18:33.225 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:18:33.228 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:18:33.233 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:18:33.237 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:18:33.244 -03:00 [DBG] Start userinfo request
2018-09-30 23:18:33.250 -03:00 [DBG] Bearer token found in header
2018-09-30 23:18:33.284 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:18:33.302 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:18:33.311 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:18:33.318 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538360310,
    "exp": 1538363910,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:18:33.329 -03:00 [DBG] Creating userinfo response
2018-09-30 23:18:33.333 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:18:33.338 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:18:33.345 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:18:33.348 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:18:33.350 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:18:33.356 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:18:33.374 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:18:33.378 -03:00 [DBG] End userinfo request
2018-09-30 23:18:41.126 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:18:56.144 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:19:11.157 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:19:26.173 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:19:41.188 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:19:45.025 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:19:45.032 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:19:45.036 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:19:45.039 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:19:45.043 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:19:45.053 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:19:45.068 -03:00 [DBG] Start discovery request
2018-09-30 23:19:45.088 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:19:45.116 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:19:45.124 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:19:45.130 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:19:45.136 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:19:45.140 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:19:45.144 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:19:45.147 -03:00 [DBG] Start key discovery request
2018-09-30 23:19:45.740 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:19:45.746 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:19:45.748 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:19:45.826 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:19:45.834 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:19:45.839 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:19:45.843 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:19:45.848 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:19:45.853 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:19:45.879 -03:00 [DBG] Start userinfo request
2018-09-30 23:19:45.881 -03:00 [DBG] Bearer token found in header
2018-09-30 23:19:49.887 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:19:51.922 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:19:51.935 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:19:51.939 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538360310,
    "exp": 1538363910,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:19:51.947 -03:00 [DBG] Creating userinfo response
2018-09-30 23:19:51.950 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:19:51.952 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:19:51.960 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:19:51.966 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:19:51.968 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:19:51.975 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:19:51.996 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:19:51.999 -03:00 [DBG] End userinfo request
2018-09-30 23:19:57.037 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:20:12.051 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:20:27.068 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:20:42.081 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:20:57.097 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:21:12.110 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:24:16.883 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 23:24:16.939 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 23:24:21.875 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 23:24:21.890 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 23:24:21.892 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 23:24:21.894 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 23:24:21.900 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 23:24:22.002 -03:00 [DBG] Starting token cleanup
2018-09-30 23:24:37.062 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:24:52.090 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:25:07.098 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:25:22.111 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:25:37.126 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:25:52.143 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:26:07.159 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:26:22.175 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:26:37.190 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:26:52.206 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:27:07.226 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:27:22.241 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:27:37.256 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:27:52.270 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:28:07.282 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:28:16.264 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:28:16.425 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:28:16.429 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:28:16.486 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:28:16.495 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:28:16.499 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:28:16.506 -03:00 [DBG] Start discovery request
2018-09-30 23:28:16.872 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:28:17.039 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:28:17.045 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:28:17.050 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:28:17.061 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:28:17.091 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:28:17.094 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:28:17.101 -03:00 [DBG] Start key discovery request
2018-09-30 23:28:22.299 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:28:37.316 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:28:52.323 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:29:07.334 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:29:22.347 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:29:37.361 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:29:52.365 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:30:07.380 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:30:22.395 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:30:37.404 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:30:52.418 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:31:07.423 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:31:22.441 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:31:37.457 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:31:52.471 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:32:07.489 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:32:22.508 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:32:37.513 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:32:52.520 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:33:07.538 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:33:22.551 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:33:37.566 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:33:52.585 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:34:07.603 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:34:22.620 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:34:37.634 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:34:52.646 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:35:07.660 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:35:22.674 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:35:37.688 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:35:52.705 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:36:07.719 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:36:22.738 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:36:37.755 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:36:52.773 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:37:07.782 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:37:09.359 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:37:09.369 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:37:09.372 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:37:09.377 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:37:09.381 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:37:09.386 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:37:09.394 -03:00 [DBG] Start discovery request
2018-09-30 23:37:09.415 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:37:09.433 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:37:09.441 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:37:09.445 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:37:09.448 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:37:09.452 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:37:09.456 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:37:09.461 -03:00 [DBG] Start key discovery request
2018-09-30 23:37:09.783 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 23:37:09.788 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 23:37:09.791 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 23:37:09.797 -03:00 [DBG] Start authorize request
2018-09-30 23:37:09.806 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:37:09.812 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 23:37:10.025 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:37:10.069 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:37:10.118 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager","aoeu"] API scopes in database
2018-09-30 23:37:10.133 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:37:10.144 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager","aoeu"] API scopes in database
2018-09-30 23:37:10.153 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 23:37:10.163 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "AOJcGpcBThKO41ALdIsK9iheepmLqN8CPJPNZ1Vr",
  "Nonce": "AOJcGpcBThKO41ALdIsK9iheepmLqN8CPJPNZ1Vr",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "AOJcGpcBThKO41ALdIsK9iheepmLqN8CPJPNZ1Vr",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "AOJcGpcBThKO41ALdIsK9iheepmLqN8CPJPNZ1Vr"
  }
}
2018-09-30 23:37:10.208 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 23:37:10.214 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 23:37:10.224 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 23:37:10.236 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 23:37:10.239 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:37:10.303 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 23:37:10.308 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 23:37:10.334 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kQhQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****lEFw"
    }
  ],
  "ActivityId": "0HLH78M5IVUDM:00000001",
  "TimeStamp": "2018-10-01T02:37:10Z",
  "ProcessId": 6216,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 23:37:10.348 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "AOJcGpcBThKO41ALdIsK9iheepmLqN8CPJPNZ1Vr",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 23:37:11.842 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:37:11.849 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:37:11.853 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:37:11.856 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:37:11.860 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:37:11.864 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:37:11.868 -03:00 [DBG] Start discovery request
2018-09-30 23:37:11.886 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:37:11.921 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:37:11.932 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:37:11.936 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:37:11.940 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:37:11.944 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:37:11.949 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:37:11.953 -03:00 [DBG] Start key discovery request
2018-09-30 23:37:13.126 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:37:13.132 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:37:13.136 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:37:13.202 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:37:13.212 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:37:13.218 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:37:13.224 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:37:13.230 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:37:13.234 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:37:13.247 -03:00 [DBG] Start userinfo request
2018-09-30 23:37:13.253 -03:00 [DBG] Bearer token found in header
2018-09-30 23:37:13.289 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:37:13.309 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:37:13.319 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:37:13.325 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538361430,
    "exp": 1538365030,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:37:13.341 -03:00 [DBG] Creating userinfo response
2018-09-30 23:37:13.347 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:37:13.352 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:37:13.362 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:37:13.366 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:37:13.370 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:37:13.377 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:37:13.398 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:37:13.402 -03:00 [DBG] End userinfo request
2018-09-30 23:37:16.475 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:37:16.478 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:37:16.481 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:37:16.483 -03:00 [DBG] Start discovery request
2018-09-30 23:37:16.494 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:37:16.537 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:37:16.540 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:37:16.543 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:37:16.546 -03:00 [DBG] Start key discovery request
2018-09-30 23:37:32.963 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:37:47.982 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:38:03.016 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:38:18.029 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:38:33.038 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:38:48.052 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:39:03.066 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:39:18.080 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:39:33.095 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:40:00.240 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 23:40:00.298 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 23:40:04.154 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 23:40:04.169 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 23:40:04.171 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 23:40:04.173 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 23:40:04.177 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 23:40:04.282 -03:00 [DBG] Starting token cleanup
2018-09-30 23:40:15.806 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:40:15.820 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:40:15.822 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:40:15.827 -03:00 [DBG] Start discovery request
2018-09-30 23:40:16.170 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:40:16.241 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:40:16.245 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:40:16.248 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:40:16.254 -03:00 [DBG] Start key discovery request
2018-09-30 23:40:19.307 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:40:25.279 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:40:25.342 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:40:25.348 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:40:25.358 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:40:25.363 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:40:25.367 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:40:25.371 -03:00 [DBG] Start discovery request
2018-09-30 23:40:25.418 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager","aoeu"] as all scopes in database
2018-09-30 23:40:26.041 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:40:26.048 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:40:26.051 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:40:26.055 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:40:26.059 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:40:26.065 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:40:26.070 -03:00 [DBG] Start key discovery request
2018-09-30 23:40:26.182 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:40:26.187 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:40:26.190 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:40:26.272 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:40:26.280 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:40:26.287 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:40:26.291 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:40:26.297 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:40:26.301 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:40:26.314 -03:00 [DBG] Start userinfo request
2018-09-30 23:40:26.325 -03:00 [DBG] Bearer token found in header
2018-09-30 23:40:26.571 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:40:26.593 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:40:26.624 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:40:26.632 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538361430,
    "exp": 1538365030,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:40:26.647 -03:00 [DBG] Creating userinfo response
2018-09-30 23:40:26.652 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:40:26.656 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:40:26.684 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:40:26.689 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:40:26.694 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:40:26.702 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:40:26.841 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:40:26.844 -03:00 [DBG] End userinfo request
2018-09-30 23:41:12.766 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:41:28.900 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:41:43.908 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:41:59.252 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:42:14.270 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:42:29.275 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:42:44.291 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:42:59.316 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:43:14.334 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:43:29.350 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:43:44.360 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:43:59.379 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:44:14.399 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:44:29.418 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:44:44.432 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:44:59.458 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:45:14.473 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:45:29.486 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:45:44.503 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:45:59.520 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:46:14.529 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:46:29.541 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:46:44.568 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:46:59.592 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:47:14.614 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:47:29.627 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:47:44.644 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:47:59.659 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:48:14.673 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:48:29.690 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:48:44.705 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:48:59.709 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:54:31.890 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 23:54:31.957 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 23:54:36.442 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 23:54:36.456 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 23:54:36.460 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 23:54:36.462 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 23:54:36.467 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 23:54:36.565 -03:00 [DBG] Starting token cleanup
2018-09-30 23:54:51.648 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:54:51.979 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:54:51.992 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:54:51.995 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:54:52.000 -03:00 [DBG] Start discovery request
2018-09-30 23:54:52.329 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:54:52.397 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:54:52.401 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:54:52.404 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:54:52.409 -03:00 [DBG] Start key discovery request
2018-09-30 23:55:06.661 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:55:21.677 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:55:36.690 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:55:58.499 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-30 23:55:58.554 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-30 23:56:02.292 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-30 23:56:02.305 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-30 23:56:02.307 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-30 23:56:02.309 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-30 23:56:02.313 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-30 23:56:02.418 -03:00 [DBG] Starting token cleanup
2018-09-30 23:56:13.563 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:56:13.578 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:56:13.581 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:56:13.588 -03:00 [DBG] Start discovery request
2018-09-30 23:56:13.951 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:56:14.012 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:56:14.016 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:56:14.018 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:56:14.023 -03:00 [DBG] Start key discovery request
2018-09-30 23:56:17.978 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:56:33.002 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:56:48.021 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:57:03.033 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:57:04.186 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:57:04.228 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:04.233 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:04.245 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:57:04.250 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:57:04.254 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:57:04.258 -03:00 [DBG] Start discovery request
2018-09-30 23:57:04.274 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:57:04.301 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:57:04.309 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:04.313 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:04.316 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:57:04.320 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:57:04.323 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:57:04.328 -03:00 [DBG] Start key discovery request
2018-09-30 23:57:09.029 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:57:09.041 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:09.045 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:09.054 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:57:09.058 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:57:09.062 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:57:09.072 -03:00 [DBG] Start discovery request
2018-09-30 23:57:09.099 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:57:09.122 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:57:09.133 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:09.137 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:09.141 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:57:09.147 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:57:09.151 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:57:09.155 -03:00 [DBG] Start key discovery request
2018-09-30 23:57:09.244 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-30 23:57:09.250 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-30 23:57:09.253 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-30 23:57:09.258 -03:00 [DBG] Start authorize request
2018-09-30 23:57:09.268 -03:00 [DBG] User in authorize request: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:57:09.273 -03:00 [DBG] Start authorize request protocol validation
2018-09-30 23:57:09.448 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:57:09.488 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:57:09.524 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 23:57:09.545 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:57:09.555 -03:00 [DBG] Found ["management-api.owner-content","management-api.identityserver4-manager"] API scopes in database
2018-09-30 23:57:09.564 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-30 23:57:09.575 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email management-api.identityserver4-manager",
  "State": "gE0cHCSHuqvvbdwRo20IbcDpyJMZC6vQtIlacvkQ",
  "Nonce": "gE0cHCSHuqvvbdwRo20IbcDpyJMZC6vQtIlacvkQ",
  "SessionId": "c5a67e6ff6f2976fb7ab1e88e85f7441",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "gE0cHCSHuqvvbdwRo20IbcDpyJMZC6vQtIlacvkQ",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email management-api.identityserver4-manager",
    "nonce": "gE0cHCSHuqvvbdwRo20IbcDpyJMZC6vQtIlacvkQ"
  }
}
2018-09-30 23:57:09.671 -03:00 [DBG] zG5e3YZf/avnqaR7+fP7qC9A1VeVymHMBtj2MxPzijc= found in database: true
2018-09-30 23:57:09.679 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-30 23:57:09.687 -03:00 [DBG] Creating Implicit Flow response.
2018-09-30 23:57:09.696 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-09-30 23:57:09.698 -03:00 [DBG] Getting claims for access token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1
2018-09-30 23:57:09.863 -03:00 [DBG] Getting claims for identity token for subject: 08d62700-cd05-8b33-e915-8024e7c117f1 and client: IS4-Admin
2018-09-30 23:57:09.867 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-30 23:57:09.886 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "Scopes": "openid profile email management-api.identityserver4-manager",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****evCQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****xM6g"
    }
  ],
  "ActivityId": "0HLH795PFAB67:00000001",
  "TimeStamp": "2018-10-01T02:57:09Z",
  "ProcessId": 12100,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-30 23:57:09.894 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d62700-cd05-8b33-e915-8024e7c117f1",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "gE0cHCSHuqvvbdwRo20IbcDpyJMZC6vQtIlacvkQ",
  "Scope": "openid profile email management-api.identityserver4-manager"
}
2018-09-30 23:57:11.410 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:57:11.417 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:11.421 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:11.426 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:57:11.430 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:57:11.435 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:57:11.439 -03:00 [DBG] Start discovery request
2018-09-30 23:57:11.458 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:57:11.481 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:57:11.487 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:11.491 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:11.497 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:57:11.501 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:57:11.507 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:57:11.510 -03:00 [DBG] Start key discovery request
2018-09-30 23:57:12.687 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:57:12.692 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:12.694 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:12.759 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:57:12.768 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:12.771 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:12.775 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:57:12.780 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:57:12.784 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:57:12.795 -03:00 [DBG] Start userinfo request
2018-09-30 23:57:12.799 -03:00 [DBG] Bearer token found in header
2018-09-30 23:57:12.833 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:57:12.852 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:57:12.861 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:57:12.867 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538362629,
    "exp": 1538366229,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:57:12.876 -03:00 [DBG] Creating userinfo response
2018-09-30 23:57:12.881 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:57:12.885 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:57:12.892 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:57:12.896 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:57:12.898 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:57:12.904 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:57:12.922 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:57:12.925 -03:00 [DBG] End userinfo request
2018-09-30 23:57:18.039 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:57:33.056 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:57:46.008 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:57:46.015 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:46.019 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:46.024 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:57:46.027 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:57:46.030 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:57:46.036 -03:00 [DBG] Start discovery request
2018-09-30 23:57:46.053 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:57:46.077 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:57:46.132 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:46.144 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:46.148 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:57:46.152 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:57:46.156 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:57:46.164 -03:00 [DBG] Start key discovery request
2018-09-30 23:57:46.856 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:57:46.862 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:46.865 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:46.924 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:57:46.932 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:57:46.935 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:57:46.938 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:57:46.943 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:57:46.948 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:57:46.952 -03:00 [DBG] Start userinfo request
2018-09-30 23:57:46.955 -03:00 [DBG] Bearer token found in header
2018-09-30 23:57:46.994 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:57:47.043 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:57:47.066 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:57:47.071 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538362629,
    "exp": 1538366229,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:57:47.086 -03:00 [DBG] Creating userinfo response
2018-09-30 23:57:47.093 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:57:47.100 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:57:47.108 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:57:47.112 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:57:47.116 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:57:47.123 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:57:47.144 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:57:47.147 -03:00 [DBG] End userinfo request
2018-09-30 23:57:48.072 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:58:03.088 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:58:06.324 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-09-30 23:58:06.332 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:58:06.335 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:58:06.340 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-30 23:58:06.345 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-30 23:58:06.350 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-30 23:58:06.354 -03:00 [DBG] Start discovery request
2018-09-30 23:58:06.388 -03:00 [DBG] Found ["openid","profile","email","picture","roles","management-api-permissions","IS4-Permission","management-api.owner-content","management-api.identityserver4-manager"] as all scopes in database
2018-09-30 23:58:06.416 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-09-30 23:58:06.425 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:58:06.428 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:58:06.434 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-30 23:58:06.439 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-30 23:58:06.452 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-30 23:58:06.487 -03:00 [DBG] Start key discovery request
2018-09-30 23:58:07.096 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:58:07.107 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:58:07.112 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:58:07.219 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-09-30 23:58:07.226 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-09-30 23:58:07.228 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-09-30 23:58:07.232 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-30 23:58:07.235 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-30 23:58:07.238 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-30 23:58:07.241 -03:00 [DBG] Start userinfo request
2018-09-30 23:58:07.243 -03:00 [DBG] Bearer token found in header
2018-09-30 23:58:07.263 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:58:07.285 -03:00 [DBG] IS4-Admin found in database: true
2018-09-30 23:58:07.293 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-30 23:58:07.296 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1538362629,
    "exp": 1538366229,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "management-api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d62700-cd05-8b33-e915-8024e7c117f1",
    "auth_time": 1538338500,
    "idp": "local",
    "email": "bruno@allto.com.br",
    "scope": [
      "openid",
      "profile",
      "email",
      "management-api.identityserver4-manager"
    ],
    "amr": "pwd"
  }
}
2018-09-30 23:58:07.305 -03:00 [DBG] Creating userinfo response
2018-09-30 23:58:07.309 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:58:07.313 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:58:07.320 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:58:07.324 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender picture profile preferred_username nickname middle_name given_name family_name name website email_verified email
2018-09-30 23:58:07.327 -03:00 [DBG] Scopes in access token: openid profile email management-api.identityserver4-manager
2018-09-30 23:58:07.334 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-09-30 23:58:07.358 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-30 23:58:07.362 -03:00 [DBG] End userinfo request
2018-09-30 23:58:18.094 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:58:33.097 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:58:48.113 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:59:03.128 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:59:18.148 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:59:33.162 -03:00 [INF] Clearing 0 tokens
2018-09-30 23:59:48.174 -03:00 [INF] Clearing 0 tokens
2018-10-01 00:00:03.189 -03:00 [INF] Clearing 0 tokens
