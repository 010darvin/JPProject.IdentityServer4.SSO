2018-09-01 22:52:12.789 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:52:12.809 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:52:12.810 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:52:12.810 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:52:12.810 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:52:19.168 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:19.309 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:19.316 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:19.326 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:24.345 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:24.356 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:24.364 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:50.930 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:52:54.045 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:52:54.052 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:52:54.053 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:52:54.055 -03:00 [DBG] Start authorize request
2018-09-01 22:52:54.061 -03:00 [DBG] No user present in authorize request
2018-09-01 22:52:54.069 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:53:18.985 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:53:18.988 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:53:18.989 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:53:18.990 -03:00 [DBG] Start authorize request
2018-09-01 22:53:18.992 -03:00 [DBG] No user present in authorize request
2018-09-01 22:53:18.992 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:53:23.336 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server 'Db,1433'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.336 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server 'Db,1433'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.374 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.374 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.378 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.380 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.416 -03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known\r\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)\r\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\EntityFramework\\src\\IdentityServer4.EntityFramework\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:11001,State:0,Class:20",
  "Message": "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.)",
  "ActivityId": "0HLGGER64BOP6:00000001",
  "TimeStamp": "2018-09-02T01:53:23Z",
  "ProcessId": 4528,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:53:23.416 -03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\EntityFramework\\src\\IdentityServer4.EntityFramework\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:11001,State:0,Class:20",
  "Message": "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.)",
  "ActivityId": "0HLGGER64BOP7:00000001",
  "TimeStamp": "2018-09-02T01:53:23Z",
  "ProcessId": 4528,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:53:23.419 -03:00 [FTL] Unhandled exception: System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.420 -03:00 [FTL] Unhandled exception: System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.423 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.424 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:49.899 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:53:49.920 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:53:49.920 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:53:49.921 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:53:49.921 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:53:50.106 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:53:59.922 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:53:59.928 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:53:59.929 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:53:59.932 -03:00 [DBG] Start authorize request
2018-09-01 22:53:59.938 -03:00 [DBG] No user present in authorize request
2018-09-01 22:53:59.941 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:54:11.547 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-01 22:54:11.914 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:54:11.914 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:54:29.179 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server 'Db,1433'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.195 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.216 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.289 -03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known\r\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)\r\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\EntityFramework\\src\\IdentityServer4.EntityFramework\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:11001,State:0,Class:20",
  "Message": "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.)",
  "ActivityId": "0HLGGERMS9BQ8:00000004",
  "TimeStamp": "2018-09-02T01:54:29Z",
  "ProcessId": 20744,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:54:29.305 -03:00 [FTL] Unhandled exception: System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.320 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:57:33.508 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:57:33.535 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:57:33.536 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:57:33.537 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:57:33.537 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:57:40.209 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:57:40.216 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:57:40.217 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:57:40.219 -03:00 [DBG] Start authorize request
2018-09-01 22:57:40.226 -03:00 [DBG] No user present in authorize request
2018-09-01 22:57:40.235 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:40.620 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:40.660 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.806 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.821 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.828 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.835 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:40.846 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-01 22:57:40.855 -03:00 [INF] Showing login: User is not authenticated
2018-09-01 22:57:40.950 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:40.958 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:40.960 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.965 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.967 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.971 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.972 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:40.984 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:42.613 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-01 22:57:43.378 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-01 22:57:43.776 -03:00 [INF] Provider Facebook associated.
2018-09-01 22:57:43.933 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGETPH8D0J:00000005",
  "TimeStamp": "2018-09-02T01:57:43Z",
  "ProcessId": 22220,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:57:43.943 -03:00 [DBG] Augmenting SignInContext
2018-09-01 22:57:43.945 -03:00 [DBG] Adding amr claim with value: external
2018-09-01 22:57:43.948 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 22:57:43.953 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 22:57:43.970 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-01 22:57:43.971 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-01 22:57:43.972 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-01 22:57:43.990 -03:00 [DBG] Start authorize callback request
2018-09-01 22:57:43.993 -03:00 [DBG] User in authorize request: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:43.994 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:44.001 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:44.002 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.007 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.008 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.013 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.014 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:44.015 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "af5c1997ac771ca2a12d1ed6489c638b",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-01 22:57:44.057 -03:00 [DBG] SRcFnwNaPYNv2TpsmjNpr0a/QmK92eaJ/gV8yu3avJ4= found in database: false
2018-09-01 22:57:44.058 -03:00 [DBG] user_consent grant with value: Swagger|6ebc388b-3475-47e8-9da4-97a98a6536e7 not found in store.
2018-09-01 22:57:44.059 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-01 22:57:44.060 -03:00 [INF] Showing consent: User has not yet consented
2018-09-01 22:57:44.084 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:44.091 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:44.092 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.097 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.099 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.103 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.103 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:44.110 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:44.112 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.116 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.709 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-01 22:57:45.736 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:45.743 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:45.744 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.749 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.750 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.755 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.756 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:45.787 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-01 22:57:45.788 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-01 22:57:45.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-01 22:57:45.790 -03:00 [DBG] Start authorize callback request
2018-09-01 22:57:45.792 -03:00 [DBG] User in authorize request: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:45.793 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:45.801 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:45.803 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.808 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.809 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.813 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.814 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:45.815 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "af5c1997ac771ca2a12d1ed6489c638b",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-01 22:57:45.822 -03:00 [DBG] SRcFnwNaPYNv2TpsmjNpr0a/QmK92eaJ/gV8yu3avJ4= found in database: false
2018-09-01 22:57:45.823 -03:00 [DBG] user_consent grant with value: Swagger|6ebc388b-3475-47e8-9da4-97a98a6536e7 not found in store.
2018-09-01 22:57:45.823 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-01 22:57:45.828 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-01 22:57:45.829 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-01 22:57:45.832 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:45.842 -03:00 [DBG] SRcFnwNaPYNv2TpsmjNpr0a/QmK92eaJ/gV8yu3avJ4= not found in database
2018-09-01 22:57:45.872 -03:00 [DBG] Creating Implicit Flow response.
2018-09-01 22:57:45.879 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-01 22:57:45.879 -03:00 [DBG] Getting claims for access token for subject: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:45.927 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****dyFw"
    }
  ],
  "ActivityId": "0HLGGETPH8D0J:00000009",
  "TimeStamp": "2018-09-02T01:57:45Z",
  "ProcessId": 22220,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:57:45.932 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "ClientId": "Swagger",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-01 22:57:45.945 -03:00 [DBG] Augmenting SignInContext
2018-09-01 22:57:45.946 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 22:57:50.793 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-01 22:57:50.795 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-01 22:57:50.796 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-01 22:57:50.800 -03:00 [DBG] Start discovery request
2018-09-01 22:57:50.875 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-01 22:57:50.914 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-01 22:57:50.915 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-01 22:57:50.916 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-01 22:57:50.920 -03:00 [DBG] Start key discovery request
2018-09-01 23:43:19.837 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 23:43:19.864 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 23:43:19.865 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 23:43:19.865 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 23:43:19.865 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 23:43:26.204 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:26.539 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:26.546 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:26.552 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:28.936 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:33.540 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-01 23:43:33.543 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 23:43:33.544 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-01 23:43:33.548 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-01 23:43:33.560 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-01 23:43:35.286 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-01 23:43:36.929 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-01 23:43:37.659 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-01 23:43:37.833 -03:00 [INF] Provider Facebook associated.
2018-09-01 23:43:38.015 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGFNDQH752:00000006",
  "TimeStamp": "2018-09-02T02:43:38Z",
  "ProcessId": 10716,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 23:43:38.024 -03:00 [DBG] Augmenting SignInContext
2018-09-01 23:43:38.025 -03:00 [DBG] Adding amr claim with value: external
2018-09-01 23:43:38.030 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 23:43:38.031 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 23:43:38.072 -03:00 [DBG] 0 persisted grants found for 07360bb4-d87f-40f2-a024-d47723cc25ba
2018-09-01 23:51:16.479 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 23:51:16.516 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 23:51:16.517 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 23:51:16.517 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 23:51:16.517 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 23:51:26.997 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 23:51:27.021 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 23:51:27.022 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 23:51:27.022 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 23:51:27.022 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 23:51:31.709 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:31.749 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:31.756 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:31.865 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:36.884 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:36.895 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:36.904 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:46.395 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-01 23:51:46.438 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-01 23:51:46.440 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 23:51:46.441 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-01 23:51:46.461 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGGFRT63EFA:00000003",
  "TimeStamp": "2018-09-02T02:51:46Z",
  "ProcessId": 20076,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 23:51:50.297 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-01 23:51:51.035 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-01 23:51:51.260 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGFRT63EFA:00000007",
  "TimeStamp": "2018-09-02T02:51:51Z",
  "ProcessId": 20076,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 23:51:51.269 -03:00 [DBG] Augmenting SignInContext
2018-09-01 23:51:51.271 -03:00 [DBG] Adding amr claim with value: external
2018-09-01 23:51:51.274 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 23:51:51.275 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-02 00:07:53.866 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:07:53.891 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:07:53.891 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:07:53.892 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:07:53.892 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:08:55.381 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:09:09.141 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:09.312 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:09.323 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:09.332 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:14.347 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:28.823 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:28.823 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:59.084 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:09:59.106 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:09:59.107 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:09:59.107 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:09:59.107 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:10:05.637 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-02 00:10:07.082 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:10:07.883 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:10:07.977 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-02 00:10:42.578 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:10:43.162 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:10:43.222 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-02 00:10:54.223 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:10:54.767 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:11:01.340 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-02 00:11:59.039 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:11:59.075 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:11:59.076 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:11:59.077 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:11:59.078 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:12:25.810 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-02 00:12:29.063 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:12:29.856 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:12:41.747 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGG7CCHCAA:0000000C",
  "TimeStamp": "2018-09-02T03:12:41Z",
  "ProcessId": 8360,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 00:12:41.762 -03:00 [DBG] Augmenting SignInContext
2018-09-02 00:12:41.764 -03:00 [DBG] Adding amr claim with value: external
2018-09-02 00:12:41.770 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-02 00:12:41.776 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-02 00:12:41.831 -03:00 [DBG] 0 persisted grants found for 07360bb4-d87f-40f2-a024-d47723cc25ba
2018-09-02 00:59:19.250 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:59:21.350 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.361 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.365 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-02 00:59:21.371 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-02 00:59:21.372 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-02 00:59:21.375 -03:00 [DBG] Start authorize request
2018-09-02 00:59:21.379 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.385 -03:00 [DBG] No user present in authorize request
2018-09-02 00:59:21.388 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 00:59:21.700 -03:00 [DBG] Swagger found in database: true
2018-09-02 00:59:21.737 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:21.864 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:21.879 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:21.884 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:21.891 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 00:59:21.901 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAwOjU5OjIxIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAwOjU5OjIxIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 00:59:21.910 -03:00 [INF] Showing login: User is not authenticated
2018-09-02 00:59:21.929 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.931 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:22.015 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:22.016 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 00:59:22.025 -03:00 [DBG] Swagger found in database: true
2018-09-02 00:59:22.027 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:22.033 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:22.035 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:22.039 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:22.040 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 00:59:22.049 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:11.859 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-02 02:11:11.885 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 02:11:11.885 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 02:11:11.886 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 02:11:11.886 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 02:11:11.886 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 02:11:15.592 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:15.604 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:15.609 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-02 02:11:15.614 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-02 02:11:15.615 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-02 02:11:15.618 -03:00 [DBG] Start authorize request
2018-09-02 02:11:15.622 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:15.625 -03:00 [DBG] No user present in authorize request
2018-09-02 02:11:15.628 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:15.924 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:15.966 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.083 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.097 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.106 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.114 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:16.130 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:11:16.140 -03:00 [INF] Showing login: User is not authenticated
2018-09-02 02:11:16.157 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:16.158 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:16.280 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:16.281 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:16.290 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:16.292 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.297 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.299 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.306 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.307 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:16.317 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:18.891 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:18.892 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:18.909 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 02:11:19.692 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 02:11:19.712 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:19.714 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:19.901 -03:00 [INF] Provider Facebook associated.
2018-09-02 02:11:20.066 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGIA02SLG4:00000005",
  "TimeStamp": "2018-09-02T05:11:20Z",
  "ProcessId": 8464,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 02:11:20.074 -03:00 [DBG] Augmenting SignInContext
2018-09-02 02:11:20.076 -03:00 [DBG] Adding amr claim with value: external
2018-09-02 02:11:20.080 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:20.082 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-02 02:11:20.087 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-02 02:11:20.108 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-02 02:11:20.109 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-02 02:11:20.110 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-02 02:11:20.114 -03:00 [DBG] Start authorize callback request
2018-09-02 02:11:20.117 -03:00 [DBG] User in authorize request: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:20.117 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:20.127 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:20.128 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.134 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.136 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.140 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.141 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:20.142 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "dc586801c69bf75434013e5d1f3cbdfd",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:11:20.178 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= found in database: false
2018-09-02 02:11:20.180 -03:00 [DBG] user_consent grant with value: Swagger|db0448ac-6a97-418a-b564-6cef57c164e8 not found in store.
2018-09-02 02:11:20.181 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-02 02:11:20.181 -03:00 [INF] Showing consent: User has not yet consented
2018-09-02 02:11:20.207 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:20.214 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:20.215 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.221 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.222 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.227 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.228 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:20.234 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:20.236 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.242 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.714 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-02 02:11:21.743 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:21.750 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:21.751 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.756 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.758 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.765 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.766 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:21.781 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-02 02:11:21.782 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-02 02:11:21.783 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-02 02:11:21.784 -03:00 [DBG] Start authorize callback request
2018-09-02 02:11:21.788 -03:00 [DBG] User in authorize request: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:21.789 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:21.799 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:21.800 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.807 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.809 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.814 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.814 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:21.815 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "dc586801c69bf75434013e5d1f3cbdfd",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:11:21.822 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= found in database: false
2018-09-02 02:11:21.823 -03:00 [DBG] user_consent grant with value: Swagger|db0448ac-6a97-418a-b564-6cef57c164e8 not found in store.
2018-09-02 02:11:21.824 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-02 02:11:21.828 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-02 02:11:21.829 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-02 02:11:21.832 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:21.844 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= not found in database
2018-09-02 02:11:21.874 -03:00 [DBG] Creating Implicit Flow response.
2018-09-02 02:11:21.881 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-02 02:11:21.882 -03:00 [DBG] Getting claims for access token for subject: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:21.930 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****hb6A"
    }
  ],
  "ActivityId": "0HLGGIA02SLG4:00000009",
  "TimeStamp": "2018-09-02T05:11:21Z",
  "ProcessId": 8464,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 02:11:21.935 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-02 02:11:21.948 -03:00 [DBG] Augmenting SignInContext
2018-09-02 02:11:21.949 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-02 02:12:17.066 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-02 02:12:17.106 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 02:12:17.107 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 02:12:17.107 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 02:12:17.108 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 02:12:17.108 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 02:12:20.422 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-02 02:12:20.429 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-02 02:12:20.429 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-02 02:12:20.432 -03:00 [DBG] Start authorize request
2018-09-02 02:12:20.439 -03:00 [DBG] User in authorize request: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:12:20.450 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:12:20.818 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:12:20.858 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:12:20.982 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:12:20.996 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:12:21.002 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:12:21.011 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:12:21.022 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjEyOjIwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "dc586801c69bf75434013e5d1f3cbdfd",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjEyOjIwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:12:21.095 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= found in database: true
2018-09-02 02:12:21.102 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-02 02:12:21.108 -03:00 [DBG] Creating Implicit Flow response.
2018-09-02 02:12:21.115 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-02 02:12:21.115 -03:00 [DBG] Getting claims for access token for subject: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:12:21.271 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****isIA"
    }
  ],
  "ActivityId": "0HLGGIAKD42UV:00000001",
  "TimeStamp": "2018-09-02T05:12:21Z",
  "ProcessId": 25356,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 02:12:21.278 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjEyOjIwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-02 02:12:24.437 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 02:12:24.440 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 02:12:24.441 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 02:12:24.445 -03:00 [DBG] Start discovery request
2018-09-02 02:12:24.527 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 02:12:24.571 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-02 02:12:24.572 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-02 02:12:24.573 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-02 02:12:24.577 -03:00 [DBG] Start key discovery request
2018-09-02 23:02:55.834 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-02 23:02:55.856 -03:00 [DBG] PublicOrigin explicitly set to http://localhost:5000
2018-09-02 23:02:55.860 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 23:03:32.368 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:03:32.485 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:03:32.490 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:03:32.538 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:03:32.552 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:03:32.553 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:03:32.558 -03:00 [DBG] Start discovery request
2018-09-02 23:03:32.848 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 23:04:02.110 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:04:02.115 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:04:02.116 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:04:02.118 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:04:02.119 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:04:02.121 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:04:02.122 -03:00 [DBG] Start discovery request
2018-09-02 23:04:02.133 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 23:04:30.077 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:04:30.080 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:04:30.082 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:04:30.083 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:04:30.084 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:04:30.086 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:04:30.089 -03:00 [DBG] Start discovery request
2018-09-02 23:04:30.101 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 23:06:24.984 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-02 23:06:25.006 -03:00 [DBG] PublicOrigin explicitly set to http://localhost:5000
2018-09-02 23:06:25.011 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 23:06:25.011 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 23:06:25.011 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 23:06:25.012 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 23:06:25.012 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 23:06:43.791 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-02 23:06:43.815 -03:00 [DBG] PublicOrigin explicitly set to http://sso:5000
2018-09-02 23:06:43.820 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 23:06:50.899 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:06:51.050 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:06:51.055 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:06:51.104 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:06:51.112 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:06:51.114 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:06:51.120 -03:00 [DBG] Start discovery request
2018-09-02 23:06:51.411 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 01:51:44.717 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-03 01:51:44.743 -03:00 [DBG] PublicOrigin explicitly set to http://localhost:5000
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 01:51:44.750 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 01:51:49.452 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-03 01:51:49.716 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-03 01:51:49.721 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-03 01:51:49.906 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 01:51:49.916 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 01:51:49.917 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 01:51:49.922 -03:00 [DBG] Start discovery request
2018-09-03 01:51:50.231 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 01:52:28.300 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 01:52:28.327 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 01:52:30.609 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-03 01:52:30.749 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-03 01:52:30.753 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-03 01:52:30.808 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 01:52:30.816 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 01:52:30.818 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 01:52:30.825 -03:00 [DBG] Start discovery request
2018-09-03 01:52:31.148 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 01:53:29.418 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-03 01:53:29.441 -03:00 [DBG] PublicOrigin explicitly set to http://sso:5000
2018-09-03 01:53:29.446 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 01:53:33.558 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-03 01:53:33.704 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-03 01:53:33.709 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-03 01:53:33.760 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 01:53:33.768 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 01:53:33.771 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 01:53:33.777 -03:00 [DBG] Start discovery request
2018-09-03 01:53:34.110 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 14:53:57.769 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 14:53:57.802 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 14:53:57.803 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 14:53:57.803 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 14:53:57.803 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 14:54:06.496 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:06.506 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:06.510 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-03 14:54:06.516 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-03 14:54:06.517 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-03 14:54:06.520 -03:00 [DBG] Start authorize request
2018-09-03 14:54:06.525 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:06.531 -03:00 [DBG] No user present in authorize request
2018-09-03 14:54:06.534 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:06.836 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:06.883 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:06.999 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.012 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:07.018 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.026 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:07.062 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 14:54:07.069 -03:00 [INF] Showing login: User is not authenticated
2018-09-03 14:54:07.084 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:07.086 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:07.199 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:07.201 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:07.209 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:07.210 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:07.217 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.220 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:07.223 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.224 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:07.234 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:10.698 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:10.699 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:10.725 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-03 14:54:11.665 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-03 14:54:11.697 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:11.707 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:11.912 -03:00 [INF] Provider Facebook associated.
2018-09-03 14:54:12.061 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGHOOV2NNTF:00000005",
  "TimeStamp": "2018-09-03T17:54:12Z",
  "ProcessId": 7092,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-03 14:54:12.071 -03:00 [DBG] Augmenting SignInContext
2018-09-03 14:54:12.072 -03:00 [DBG] Adding amr claim with value: external
2018-09-03 14:54:12.075 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:12.077 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-03 14:54:12.082 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-03 14:54:12.098 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-03 14:54:12.100 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-03 14:54:12.100 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-03 14:54:12.105 -03:00 [DBG] Start authorize callback request
2018-09-03 14:54:12.107 -03:00 [DBG] User in authorize request: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:12.109 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:12.116 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:12.117 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.121 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.123 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.126 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.128 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:12.129 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "SessionId": "2a6d71f581b902cdb6942e2f975a74fe",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 14:54:12.169 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= found in database: false
2018-09-03 14:54:12.170 -03:00 [DBG] user_consent grant with value: Swagger|bc04b0b5-d42e-456d-af1e-cbba844a2d6e not found in store.
2018-09-03 14:54:12.173 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-03 14:54:12.173 -03:00 [INF] Showing consent: User has not yet consented
2018-09-03 14:54:12.196 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:12.203 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:12.204 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.208 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.210 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.214 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.215 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:12.221 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:12.222 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.225 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.733 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-03 14:54:13.769 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:13.777 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:13.778 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.783 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.785 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.787 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.788 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:13.801 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-03 14:54:13.803 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-03 14:54:13.803 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-03 14:54:13.804 -03:00 [DBG] Start authorize callback request
2018-09-03 14:54:13.808 -03:00 [DBG] User in authorize request: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:13.809 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:13.819 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:13.820 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.825 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.828 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.834 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.835 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:13.835 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "SessionId": "2a6d71f581b902cdb6942e2f975a74fe",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 14:54:13.847 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= found in database: false
2018-09-03 14:54:13.848 -03:00 [DBG] user_consent grant with value: Swagger|bc04b0b5-d42e-456d-af1e-cbba844a2d6e not found in store.
2018-09-03 14:54:13.849 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-03 14:54:13.857 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-03 14:54:13.860 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-03 14:54:13.865 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:13.878 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= not found in database
2018-09-03 14:54:13.909 -03:00 [DBG] Creating Implicit Flow response.
2018-09-03 14:54:13.918 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-03 14:54:13.918 -03:00 [DBG] Getting claims for access token for subject: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:13.971 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****fq2w"
    }
  ],
  "ActivityId": "0HLGHOOV2NNTE:00000008",
  "TimeStamp": "2018-09-03T17:54:13Z",
  "ProcessId": 7092,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-03 14:54:13.976 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-03 14:54:13.989 -03:00 [DBG] Augmenting SignInContext
2018-09-03 14:54:13.990 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-03 14:54:20.207 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 14:54:20.209 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 14:54:20.210 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 14:54:20.213 -03:00 [DBG] Start discovery request
2018-09-03 14:54:20.279 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 14:54:20.317 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-03 14:54:20.319 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-03 14:54:20.319 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-03 14:54:20.322 -03:00 [DBG] Start key discovery request
2018-09-03 14:58:15.638 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 14:59:20.054 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 14:59:27.610 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:02:54.569 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:02:54.601 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:04:27.054 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:04:27.090 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:06:04.573 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:06:05.571 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:18:48.826 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:18:50.068 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:19:00.821 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:19:03.670 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:23:18.067 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:23:19.136 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:32:11.311 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:32:12.588 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:32:28.651 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 15:32:28.653 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 15:32:28.653 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 15:32:28.653 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 15:32:28.654 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 15:32:39.485 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-03 15:32:39.491 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-03 15:32:39.491 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-03 15:32:39.495 -03:00 [DBG] Start authorize request
2018-09-03 15:32:39.502 -03:00 [DBG] User in authorize request: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 15:32:39.512 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 15:32:39.817 -03:00 [DBG] Swagger found in database: true
2018-09-03 15:32:39.865 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 15:32:39.968 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 15:32:39.983 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 15:32:39.990 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 15:32:39.996 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 15:32:40.035 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE1OjMyOjM5IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "SessionId": "2a6d71f581b902cdb6942e2f975a74fe",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE1OjMyOjM5IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 15:32:40.085 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= found in database: true
2018-09-03 15:32:40.091 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-03 15:32:40.096 -03:00 [DBG] Creating Implicit Flow response.
2018-09-03 15:32:40.103 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-03 15:32:40.103 -03:00 [DBG] Getting claims for access token for subject: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 15:32:40.182 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****IHaA"
    }
  ],
  "ActivityId": "0HLGHPEGB9UP9:00000001",
  "TimeStamp": "2018-09-03T18:32:40Z",
  "ProcessId": 28544,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-03 15:32:40.188 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE1OjMyOjM5IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-03 15:32:45.369 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 15:32:45.372 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 15:32:45.372 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 15:32:45.375 -03:00 [DBG] Start discovery request
2018-09-03 15:32:45.445 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 15:32:45.489 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-03 15:32:45.491 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-03 15:32:45.492 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-03 15:32:45.496 -03:00 [DBG] Start key discovery request
2018-09-04 02:28:18.534 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-04 02:28:18.592 -03:00 [ERR] SigninCredentialExtension cannot find key file JPProjectOAuth.pfx
2018-09-04 02:29:44.986 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-04 02:29:45.031 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-04 02:33:20.813 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-04 02:33:20.840 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 02:33:20.840 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 02:33:20.840 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 02:33:20.841 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 02:33:20.841 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 02:33:23.340 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:23.353 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:23.359 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-04 02:33:23.367 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-04 02:33:23.368 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-04 02:33:23.374 -03:00 [DBG] Start authorize request
2018-09-04 02:33:23.380 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:23.386 -03:00 [DBG] No user present in authorize request
2018-09-04 02:33:23.390 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:23.756 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:23.802 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:23.928 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:23.942 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:23.950 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:23.958 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:23.996 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-04 02:33:24.005 -03:00 [INF] Showing login: User is not authenticated
2018-09-04 02:33:24.041 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:24.043 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:24.150 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:24.153 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:24.165 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:24.166 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:24.174 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:24.177 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:24.187 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:24.188 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:24.208 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:26.411 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:26.413 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:26.436 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 02:33:27.579 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 02:33:27.598 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:27.599 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:27.825 -03:00 [INF] Provider Facebook associated.
2018-09-04 02:33:27.993 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGI4VN6AVKE:00000006",
  "TimeStamp": "2018-09-04T05:33:27Z",
  "ProcessId": 24604,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 02:33:28.004 -03:00 [DBG] Augmenting SignInContext
2018-09-04 02:33:28.010 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 02:33:28.014 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:28.017 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 02:33:28.026 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 02:33:28.061 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-04 02:33:28.065 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-04 02:33:28.065 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-04 02:33:28.072 -03:00 [DBG] Start authorize callback request
2018-09-04 02:33:28.076 -03:00 [DBG] User in authorize request: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:28.077 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:28.089 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:28.090 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.096 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.098 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.103 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.103 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:28.104 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "03da0f7d79210583fe1c047c8bc222d7",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-04 02:33:28.150 -03:00 [DBG] zyAz+A+asftyagE9Hu6R87Lt6UVLqmtnFd9GuzUmlE0= found in database: false
2018-09-04 02:33:28.152 -03:00 [DBG] user_consent grant with value: Swagger|f0f5dad8-a527-4c7e-9dc2-bdd58e551b58 not found in store.
2018-09-04 02:33:28.154 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-04 02:33:28.154 -03:00 [INF] Showing consent: User has not yet consented
2018-09-04 02:33:28.182 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:28.191 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:28.192 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.197 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.198 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.203 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.204 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:28.213 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:28.214 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.219 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.865 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 02:33:29.903 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:29.915 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:29.917 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.923 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.926 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.931 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.932 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:29.949 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-04 02:33:29.951 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-04 02:33:29.954 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-04 02:33:29.955 -03:00 [DBG] Start authorize callback request
2018-09-04 02:33:29.962 -03:00 [DBG] User in authorize request: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:29.963 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:29.974 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:29.976 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.983 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.985 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.992 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.993 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:29.995 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "03da0f7d79210583fe1c047c8bc222d7",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-04 02:33:30.004 -03:00 [DBG] zyAz+A+asftyagE9Hu6R87Lt6UVLqmtnFd9GuzUmlE0= found in database: false
2018-09-04 02:33:30.005 -03:00 [DBG] user_consent grant with value: Swagger|f0f5dad8-a527-4c7e-9dc2-bdd58e551b58 not found in store.
2018-09-04 02:33:30.009 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-04 02:33:30.018 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-04 02:33:30.022 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-04 02:33:30.030 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:30.053 -03:00 [DBG] zyAz+A+asftyagE9Hu6R87Lt6UVLqmtnFd9GuzUmlE0= not found in database
2018-09-04 02:33:30.117 -03:00 [DBG] Creating Implicit Flow response.
2018-09-04 02:33:30.132 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-04 02:33:30.133 -03:00 [DBG] Getting claims for access token for subject: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:30.224 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****d1rQ"
    }
  ],
  "ActivityId": "0HLGI4VN6AVKB:00000005",
  "TimeStamp": "2018-09-04T05:33:30Z",
  "ProcessId": 24604,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 02:33:30.231 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-04 02:33:30.246 -03:00 [DBG] Augmenting SignInContext
2018-09-04 02:33:30.247 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 02:33:40.233 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-04 02:33:40.237 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-04 02:33:40.238 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-04 02:33:40.243 -03:00 [DBG] Start discovery request
2018-09-04 02:33:40.316 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-04 02:33:40.362 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-04 02:33:40.364 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-04 02:33:40.365 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-04 02:33:40.369 -03:00 [DBG] Start key discovery request
2018-09-04 12:57:48.492 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 12:57:48.520 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 12:58:02.764 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:02.776 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.788 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.789 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.816 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 12:58:17.820 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.820 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:18.900 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:18.902 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:18.915 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 12:58:20.323 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 12:58:20.331 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:20.331 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:20.602 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIFSKOEBV8:00000006",
  "TimeStamp": "2018-09-04T15:58:20Z",
  "ProcessId": 33556,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 12:58:20.611 -03:00 [DBG] Augmenting SignInContext
2018-09-04 12:58:20.612 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 12:58:20.616 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:20.618 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 12:58:20.621 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 12:58:20.773 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 12:58:21.147 -03:00 [DBG] Swagger found in database: true
2018-09-04 12:58:21.178 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 12:58:21.289 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 12:58:38.606 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 12:58:39.175 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 12:58:39.193 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIFSKOEBV6:00000007",
  "TimeStamp": "2018-09-04T15:58:39Z",
  "ProcessId": 33556,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 12:58:39.200 -03:00 [DBG] Augmenting SignInContext
2018-09-04 12:58:39.201 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 12:58:39.202 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 12:58:39.202 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 12:58:39.208 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 12:58:39.219 -03:00 [DBG] Swagger found in database: true
2018-09-04 12:58:39.221 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 12:58:39.226 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 12:59:05.499 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 12:59:05.537 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 12:59:05.538 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 12:59:05.540 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 12:59:05.544 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIFSKOEBV8:0000000C",
  "TimeStamp": "2018-09-04T15:59:05Z",
  "ProcessId": 33556,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:05:37.939 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:05:37.968 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:05:55.160 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 13:05:57.108 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 13:05:57.967 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 13:05:58.223 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIG1538VEE:00000006",
  "TimeStamp": "2018-09-04T16:05:58Z",
  "ProcessId": 10496,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:05:58.232 -03:00 [DBG] Augmenting SignInContext
2018-09-04 13:05:58.233 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 13:05:58.237 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 13:05:58.241 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:05:58.291 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 13:05:58.615 -03:00 [DBG] Swagger found in database: true
2018-09-04 13:05:58.645 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 13:05:58.740 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 13:06:22.754 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 13:06:22.786 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 13:06:22.788 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:06:22.788 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 13:06:22.792 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIG1538VEE:00000009",
  "TimeStamp": "2018-09-04T16:06:22Z",
  "ProcessId": 10496,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:07:14.395 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:07:14.421 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:07:14.421 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:07:14.422 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:07:14.422 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:07:14.422 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:36:16.804 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 13:36:19.051 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:36:19.057 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:36:22.834 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 13:36:25.246 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:36:25.253 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:36:25.253 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:36:25.253 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:36:25.254 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:36:25.254 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:36:35.844 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 13:36:43.761 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 13:36:44.778 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 13:36:45.029 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIGI76TE6A:00000006",
  "TimeStamp": "2018-09-04T16:36:44Z",
  "ProcessId": 31596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:36:45.039 -03:00 [DBG] Augmenting SignInContext
2018-09-04 13:36:45.041 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 13:36:45.044 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 13:36:45.049 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:36:45.099 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 13:36:45.395 -03:00 [DBG] Swagger found in database: true
2018-09-04 13:36:45.423 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 13:36:45.521 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 13:36:51.138 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 13:36:51.171 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 13:36:51.172 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:36:51.174 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 13:36:51.178 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIGI76TE6A:00000009",
  "TimeStamp": "2018-09-04T16:36:51Z",
  "ProcessId": 31596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:05:48.512 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:05:50.951 -03:00 [WRN] No XML encryptor configured. Key "ccbb65c1-b7ad-44ec-add7-d7b4e0644492" may be persisted to storage in unencrypted form.
2018-09-04 15:05:51.050 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:05:51.059 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:06:04.592 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:04.604 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.153 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.157 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.181 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:06:09.185 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.187 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.242 -03:00 [ERR] An exception was thrown while deserializing the token.
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The antiforgery token could not be decrypted. ---> System.Security.Cryptography.CryptographicException: The key {b89a3127-6459-4bd3-8eb9-3f53e8355053} was not found in the key ring.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.GetCookieTokenDoesNotThrow(HttpContext httpContext)
2018-09-04 15:07:12.222 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:07:14.697 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:07:14.704 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:07:14.704 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:07:14.705 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:07:14.705 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:07:14.705 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:07:20.379 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:20.391 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.622 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.624 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.647 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:07:23.651 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.652 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:27.177 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:27.178 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:27.189 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:07:28.167 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:07:28.175 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:28.175 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:28.414 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGII4V8VKR0:00000006",
  "TimeStamp": "2018-09-04T18:07:28Z",
  "ProcessId": 16112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:07:28.421 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:07:28.423 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:07:28.426 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:28.427 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:07:28.431 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:07:28.481 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 15:07:28.796 -03:00 [DBG] Swagger found in database: true
2018-09-04 15:07:28.823 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 15:07:28.922 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 15:07:34.360 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 15:07:34.388 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 15:07:34.389 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:07:34.390 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 15:07:34.394 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGII4V8VKR0:00000009",
  "TimeStamp": "2018-09-04T18:07:34Z",
  "ProcessId": 16112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:07:39.512 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-09-04 15:07:45.304 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:07:45.413 -03:00 [WRN] User 744eb69e-ab3a-4a03-a840-53088819651b validation failed: DuplicateUserName.
2018-09-04 15:07:50.390 -03:00 [WRN] '.AspNetCore.Correlation.Google.ehGpSg2StXsuKOu57AbMSu7D1nmSHfIv23iFmMGG1Pw' cookie not found.
2018-09-04 15:07:50.392 -03:00 [INF] Error from RemoteAuthentication: Correlation failed..
2018-09-04 15:07:50.400 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-04 15:07:57.910 -03:00 [WRN] '.AspNetCore.Correlation.Google.ehGpSg2StXsuKOu57AbMSu7D1nmSHfIv23iFmMGG1Pw' cookie not found.
2018-09-04 15:07:57.911 -03:00 [INF] Error from RemoteAuthentication: Correlation failed..
2018-09-04 15:07:57.914 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-04 15:08:03.947 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:08:04.619 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:08:04.631 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGII4V8VKR0:00000014",
  "TimeStamp": "2018-09-04T18:08:04Z",
  "ProcessId": 16112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:08:04.633 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:08:04.633 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:08:04.634 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:08:04.634 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:08:09.261 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 15:08:09.274 -03:00 [DBG] Swagger found in database: true
2018-09-04 15:08:09.276 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 15:08:09.279 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 15:08:14.995 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 15:08:15.010 -03:00 [DBG] Swagger found in database: true
2018-09-04 15:08:15.011 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 15:08:15.017 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 15:14:02.364 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:14:49.058 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:16:55.082 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:17:09.301 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:17:09.307 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:17:09.307 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:17:09.308 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:17:09.308 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:17:09.308 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:17:10.350 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:10.360 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:16.977 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:16.979 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:17.003 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:17:17.008 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:17.008 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.624 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.624 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.625 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.626 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:50.769 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:18:06.628 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:18:11.000 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:18:12.232 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:18:12.446 -03:00 [INF] Provider Facebook associated.
2018-09-04 15:18:12.642 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIIAGMOMTJ:0000000E",
  "TimeStamp": "2018-09-04T18:18:12Z",
  "ProcessId": 16688,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:18:12.650 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:18:12.652 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:18:12.655 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:18:12.660 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:18:12.700 -03:00 [DBG] 0 persisted grants found for bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-04 15:18:19.280 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 15:18:19.313 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 15:18:19.314 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:18:19.316 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 15:18:19.320 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIIAGMOMTJ:00000012",
  "TimeStamp": "2018-09-04T18:18:19Z",
  "ProcessId": 16688,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:19:34.679 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:19:37.224 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:19:37.231 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:19:48.375 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:19:51.973 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:19:53.120 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:19:53.371 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIIBSJ32A3:00000007",
  "TimeStamp": "2018-09-04T18:19:53Z",
  "ProcessId": 15408,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-09-04 15:19:53.379 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:19:53.380 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:19:53.384 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:19:53.389 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:19:53.426 -03:00 [DBG] 0 persisted grants found for bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-04 15:19:57.904 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 15:19:57.932 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 15:19:57.933 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:19:57.934 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 15:19:57.939 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIIBSJ32A3:0000000A",
  "TimeStamp": "2018-09-04T18:19:57Z",
  "ProcessId": 15408,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-09-04 16:01:14.859 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:01:14.961 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:02:00.410 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:02:00.479 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:04:45.975 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:04:46.043 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:05:34.349 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:05:34.433 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:05:38.237 -03:00 [INF] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
