2018-09-01 22:52:12.789 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:52:12.809 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:52:12.810 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:52:12.810 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:52:12.810 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:52:19.168 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:19.309 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:19.316 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:19.326 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:24.345 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:24.356 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:24.364 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:52:50.930 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:52:50.950 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:52:54.045 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:52:54.052 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:52:54.053 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:52:54.055 -03:00 [DBG] Start authorize request
2018-09-01 22:52:54.061 -03:00 [DBG] No user present in authorize request
2018-09-01 22:52:54.069 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:53:18.985 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:53:18.988 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:53:18.989 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:53:18.990 -03:00 [DBG] Start authorize request
2018-09-01 22:53:18.992 -03:00 [DBG] No user present in authorize request
2018-09-01 22:53:18.992 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:53:23.336 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server 'Db,1433'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.336 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server 'Db,1433'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.374 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.374 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.378 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.380 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.416 -03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known\r\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)\r\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\EntityFramework\\src\\IdentityServer4.EntityFramework\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:11001,State:0,Class:20",
  "Message": "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.)",
  "ActivityId": "0HLGGER64BOP6:00000001",
  "TimeStamp": "2018-09-02T01:53:23Z",
  "ProcessId": 4528,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:53:23.416 -03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\EntityFramework\\src\\IdentityServer4.EntityFramework\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:11001,State:0,Class:20",
  "Message": "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.)",
  "ActivityId": "0HLGGER64BOP7:00000001",
  "TimeStamp": "2018-09-02T01:53:23Z",
  "ProcessId": 4528,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:53:23.419 -03:00 [FTL] Unhandled exception: System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.420 -03:00 [FTL] Unhandled exception: System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.423 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:23.424 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:53:49.899 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:53:49.920 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:53:49.920 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:53:49.921 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:53:49.921 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:53:50.106 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:53:59.922 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:53:59.928 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:53:59.929 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:53:59.932 -03:00 [DBG] Start authorize request
2018-09-01 22:53:59.938 -03:00 [DBG] No user present in authorize request
2018-09-01 22:53:59.941 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:54:11.547 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-01 22:54:11.914 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:54:11.914 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 22:54:29.179 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server 'Db,1433'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.195 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.216 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.289 -03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known\r\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)\r\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\EntityFramework\\src\\IdentityServer4.EntityFramework\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 147\r\n   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\AuthorizeRequestValidator.cs:line 65\r\n   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpointBase.cs:line 67\r\n   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\AuthorizeEndpoint.cs:line 55\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:00000000-0000-0000-0000-000000000000\r\nError Number:11001,State:0,Class:20",
  "Message": "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.)",
  "ActivityId": "0HLGGERMS9BQ8:00000004",
  "TimeStamp": "2018-09-02T01:54:29Z",
  "ProcessId": 20744,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:54:29.305 -03:00 [FTL] Unhandled exception: System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:54:29.320 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - No such host is known.) ---> System.ComponentModel.Win32Exception (11001): No such host is known
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateClientAsync(ValidatedAuthorizeRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 147
   at IdentityServer4.Validation.AuthorizeRequestValidator.ValidateAsync(NameValueCollection parameters, ClaimsPrincipal subject) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\AuthorizeRequestValidator.cs:line 65
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpointBase.cs:line 67
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:11001,State:0,Class:20
2018-09-01 22:57:33.508 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 22:57:33.535 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 22:57:33.536 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 22:57:33.537 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 22:57:33.537 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 22:57:40.209 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-01 22:57:40.216 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-01 22:57:40.217 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-01 22:57:40.219 -03:00 [DBG] Start authorize request
2018-09-01 22:57:40.226 -03:00 [DBG] No user present in authorize request
2018-09-01 22:57:40.235 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:40.620 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:40.660 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.806 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.821 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.828 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.835 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:40.846 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-01 22:57:40.855 -03:00 [INF] Showing login: User is not authenticated
2018-09-01 22:57:40.950 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:40.958 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:40.960 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.965 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.967 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:40.971 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:40.972 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:40.984 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:42.613 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-01 22:57:43.378 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-01 22:57:43.776 -03:00 [INF] Provider Facebook associated.
2018-09-01 22:57:43.933 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGETPH8D0J:00000005",
  "TimeStamp": "2018-09-02T01:57:43Z",
  "ProcessId": 22220,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:57:43.943 -03:00 [DBG] Augmenting SignInContext
2018-09-01 22:57:43.945 -03:00 [DBG] Adding amr claim with value: external
2018-09-01 22:57:43.948 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 22:57:43.953 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 22:57:43.970 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-01 22:57:43.971 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-01 22:57:43.972 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-01 22:57:43.990 -03:00 [DBG] Start authorize callback request
2018-09-01 22:57:43.993 -03:00 [DBG] User in authorize request: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:43.994 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:44.001 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:44.002 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.007 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.008 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.013 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.014 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:44.015 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "af5c1997ac771ca2a12d1ed6489c638b",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-01 22:57:44.057 -03:00 [DBG] SRcFnwNaPYNv2TpsmjNpr0a/QmK92eaJ/gV8yu3avJ4= found in database: false
2018-09-01 22:57:44.058 -03:00 [DBG] user_consent grant with value: Swagger|6ebc388b-3475-47e8-9da4-97a98a6536e7 not found in store.
2018-09-01 22:57:44.059 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-01 22:57:44.060 -03:00 [INF] Showing consent: User has not yet consented
2018-09-01 22:57:44.084 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:44.091 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:44.092 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.097 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.099 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.103 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:44.103 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:44.110 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:44.112 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:44.116 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.709 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-01 22:57:45.736 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:45.743 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:45.744 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.749 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.750 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.755 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.756 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:45.787 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-01 22:57:45.788 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-01 22:57:45.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-01 22:57:45.790 -03:00 [DBG] Start authorize callback request
2018-09-01 22:57:45.792 -03:00 [DBG] User in authorize request: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:45.793 -03:00 [DBG] Start authorize request protocol validation
2018-09-01 22:57:45.801 -03:00 [DBG] Swagger found in database: true
2018-09-01 22:57:45.803 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.808 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.809 -03:00 [DBG] Found [] identity scopes in database
2018-09-01 22:57:45.813 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-01 22:57:45.814 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-01 22:57:45.815 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "af5c1997ac771ca2a12d1ed6489c638b",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-01 22:57:45.822 -03:00 [DBG] SRcFnwNaPYNv2TpsmjNpr0a/QmK92eaJ/gV8yu3avJ4= found in database: false
2018-09-01 22:57:45.823 -03:00 [DBG] user_consent grant with value: Swagger|6ebc388b-3475-47e8-9da4-97a98a6536e7 not found in store.
2018-09-01 22:57:45.823 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-01 22:57:45.828 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-01 22:57:45.829 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-01 22:57:45.832 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:45.842 -03:00 [DBG] SRcFnwNaPYNv2TpsmjNpr0a/QmK92eaJ/gV8yu3avJ4= not found in database
2018-09-01 22:57:45.872 -03:00 [DBG] Creating Implicit Flow response.
2018-09-01 22:57:45.879 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-01 22:57:45.879 -03:00 [DBG] Getting claims for access token for subject: 6ebc388b-3475-47e8-9da4-97a98a6536e7
2018-09-01 22:57:45.927 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****dyFw"
    }
  ],
  "ActivityId": "0HLGGETPH8D0J:00000009",
  "TimeStamp": "2018-09-02T01:57:45Z",
  "ProcessId": 22220,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 22:57:45.932 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "6ebc388b-3475-47e8-9da4-97a98a6536e7",
  "ClientId": "Swagger",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U2F0IFNlcCAwMSAyMDE4IDIyOjU3OjQwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-01 22:57:45.945 -03:00 [DBG] Augmenting SignInContext
2018-09-01 22:57:45.946 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 22:57:50.793 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-01 22:57:50.795 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-01 22:57:50.796 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-01 22:57:50.800 -03:00 [DBG] Start discovery request
2018-09-01 22:57:50.875 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-01 22:57:50.914 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-01 22:57:50.915 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-01 22:57:50.916 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-01 22:57:50.920 -03:00 [DBG] Start key discovery request
2018-09-01 23:43:19.837 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 23:43:19.864 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 23:43:19.865 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 23:43:19.865 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 23:43:19.865 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 23:43:26.204 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:26.539 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:26.546 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:26.552 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:28.936 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:43:33.540 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-01 23:43:33.543 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 23:43:33.544 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-01 23:43:33.548 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-01 23:43:33.560 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-01 23:43:35.286 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-01 23:43:36.929 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-01 23:43:37.659 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-01 23:43:37.833 -03:00 [INF] Provider Facebook associated.
2018-09-01 23:43:38.015 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGFNDQH752:00000006",
  "TimeStamp": "2018-09-02T02:43:38Z",
  "ProcessId": 10716,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 23:43:38.024 -03:00 [DBG] Augmenting SignInContext
2018-09-01 23:43:38.025 -03:00 [DBG] Adding amr claim with value: external
2018-09-01 23:43:38.030 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 23:43:38.031 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 23:43:38.072 -03:00 [DBG] 0 persisted grants found for 07360bb4-d87f-40f2-a024-d47723cc25ba
2018-09-01 23:51:16.479 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 23:51:16.516 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 23:51:16.517 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 23:51:16.517 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 23:51:16.517 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 23:51:26.997 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-01 23:51:27.021 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-01 23:51:27.022 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-01 23:51:27.022 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-01 23:51:27.022 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-01 23:51:31.709 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:31.749 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:31.756 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:31.865 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:36.884 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:36.895 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:36.904 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-01 23:51:46.395 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-01 23:51:46.438 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-01 23:51:46.440 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-01 23:51:46.441 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-01 23:51:46.461 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGGFRT63EFA:00000003",
  "TimeStamp": "2018-09-02T02:51:46Z",
  "ProcessId": 20076,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 23:51:50.297 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-01 23:51:51.035 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-01 23:51:51.260 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGFRT63EFA:00000007",
  "TimeStamp": "2018-09-02T02:51:51Z",
  "ProcessId": 20076,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-01 23:51:51.269 -03:00 [DBG] Augmenting SignInContext
2018-09-01 23:51:51.271 -03:00 [DBG] Adding amr claim with value: external
2018-09-01 23:51:51.274 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-01 23:51:51.275 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-02 00:07:53.866 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:07:53.891 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:07:53.891 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:07:53.892 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:07:53.892 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:08:55.381 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:08:55.410 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:09:09.141 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:09.312 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:09.323 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:09.332 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:14.347 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:28.823 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:28.823 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-02 00:09:59.084 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:09:59.106 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:09:59.107 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:09:59.107 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:09:59.107 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:10:05.637 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-02 00:10:07.082 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:10:07.883 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:10:07.977 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-02 00:10:42.578 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:10:43.162 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:10:43.222 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-02 00:10:54.223 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:10:54.767 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:11:01.340 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-02 00:11:59.039 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:11:59.075 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:11:59.076 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:11:59.077 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:11:59.078 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:12:25.810 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-02 00:12:29.063 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 00:12:29.856 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 00:12:41.747 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "07360bb4-d87f-40f2-a024-d47723cc25ba",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGG7CCHCAA:0000000C",
  "TimeStamp": "2018-09-02T03:12:41Z",
  "ProcessId": 8360,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 00:12:41.762 -03:00 [DBG] Augmenting SignInContext
2018-09-02 00:12:41.764 -03:00 [DBG] Adding amr claim with value: external
2018-09-02 00:12:41.770 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-02 00:12:41.776 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-02 00:12:41.831 -03:00 [DBG] 0 persisted grants found for 07360bb4-d87f-40f2-a024-d47723cc25ba
2018-09-02 00:59:19.250 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 00:59:19.271 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 00:59:21.350 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.361 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.365 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-02 00:59:21.371 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-02 00:59:21.372 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-02 00:59:21.375 -03:00 [DBG] Start authorize request
2018-09-02 00:59:21.379 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.385 -03:00 [DBG] No user present in authorize request
2018-09-02 00:59:21.388 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 00:59:21.700 -03:00 [DBG] Swagger found in database: true
2018-09-02 00:59:21.737 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:21.864 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:21.879 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:21.884 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:21.891 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 00:59:21.901 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAwOjU5OjIxIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAwOjU5OjIxIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 00:59:21.910 -03:00 [INF] Showing login: User is not authenticated
2018-09-02 00:59:21.929 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:21.931 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:22.015 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 00:59:22.016 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 00:59:22.025 -03:00 [DBG] Swagger found in database: true
2018-09-02 00:59:22.027 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:22.033 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:22.035 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 00:59:22.039 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 00:59:22.040 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 00:59:22.049 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:11.859 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-02 02:11:11.885 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 02:11:11.885 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 02:11:11.886 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 02:11:11.886 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 02:11:11.886 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 02:11:15.592 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:15.604 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:15.609 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-02 02:11:15.614 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-02 02:11:15.615 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-02 02:11:15.618 -03:00 [DBG] Start authorize request
2018-09-02 02:11:15.622 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:15.625 -03:00 [DBG] No user present in authorize request
2018-09-02 02:11:15.628 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:15.924 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:15.966 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.083 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.097 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.106 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.114 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:16.130 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:11:16.140 -03:00 [INF] Showing login: User is not authenticated
2018-09-02 02:11:16.157 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:16.158 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:16.280 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:16.281 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:16.290 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:16.292 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.297 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.299 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:16.306 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:16.307 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:16.317 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:18.891 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:18.892 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:18.909 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-02 02:11:19.692 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-02 02:11:19.712 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:19.714 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:19.901 -03:00 [INF] Provider Facebook associated.
2018-09-02 02:11:20.066 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGGIA02SLG4:00000005",
  "TimeStamp": "2018-09-02T05:11:20Z",
  "ProcessId": 8464,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 02:11:20.074 -03:00 [DBG] Augmenting SignInContext
2018-09-02 02:11:20.076 -03:00 [DBG] Adding amr claim with value: external
2018-09-02 02:11:20.080 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-02 02:11:20.082 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-02 02:11:20.087 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-02 02:11:20.108 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-02 02:11:20.109 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-02 02:11:20.110 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-02 02:11:20.114 -03:00 [DBG] Start authorize callback request
2018-09-02 02:11:20.117 -03:00 [DBG] User in authorize request: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:20.117 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:20.127 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:20.128 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.134 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.136 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.140 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.141 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:20.142 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "dc586801c69bf75434013e5d1f3cbdfd",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:11:20.178 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= found in database: false
2018-09-02 02:11:20.180 -03:00 [DBG] user_consent grant with value: Swagger|db0448ac-6a97-418a-b564-6cef57c164e8 not found in store.
2018-09-02 02:11:20.181 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-02 02:11:20.181 -03:00 [INF] Showing consent: User has not yet consented
2018-09-02 02:11:20.207 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:20.214 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:20.215 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.221 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.222 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.227 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:20.228 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:20.234 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:20.236 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:20.242 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.714 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-02 02:11:21.743 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:21.750 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:21.751 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.756 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.758 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.765 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.766 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:21.781 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-02 02:11:21.782 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-02 02:11:21.783 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-02 02:11:21.784 -03:00 [DBG] Start authorize callback request
2018-09-02 02:11:21.788 -03:00 [DBG] User in authorize request: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:21.789 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:11:21.799 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:11:21.800 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.807 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.809 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:11:21.814 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:11:21.814 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:11:21.815 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "dc586801c69bf75434013e5d1f3cbdfd",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:11:21.822 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= found in database: false
2018-09-02 02:11:21.823 -03:00 [DBG] user_consent grant with value: Swagger|db0448ac-6a97-418a-b564-6cef57c164e8 not found in store.
2018-09-02 02:11:21.824 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-02 02:11:21.828 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-02 02:11:21.829 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-02 02:11:21.832 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:21.844 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= not found in database
2018-09-02 02:11:21.874 -03:00 [DBG] Creating Implicit Flow response.
2018-09-02 02:11:21.881 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-02 02:11:21.882 -03:00 [DBG] Getting claims for access token for subject: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:11:21.930 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****hb6A"
    }
  ],
  "ActivityId": "0HLGGIA02SLG4:00000009",
  "TimeStamp": "2018-09-02T05:11:21Z",
  "ProcessId": 8464,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 02:11:21.935 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjExOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-02 02:11:21.948 -03:00 [DBG] Augmenting SignInContext
2018-09-02 02:11:21.949 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-02 02:12:17.066 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-02 02:12:17.106 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 02:12:17.107 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 02:12:17.107 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 02:12:17.108 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 02:12:17.108 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 02:12:20.422 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-02 02:12:20.429 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-02 02:12:20.429 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-02 02:12:20.432 -03:00 [DBG] Start authorize request
2018-09-02 02:12:20.439 -03:00 [DBG] User in authorize request: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:12:20.450 -03:00 [DBG] Start authorize request protocol validation
2018-09-02 02:12:20.818 -03:00 [DBG] Swagger found in database: true
2018-09-02 02:12:20.858 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:12:20.982 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:12:20.996 -03:00 [DBG] Found [] identity scopes in database
2018-09-02 02:12:21.002 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-02 02:12:21.011 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-02 02:12:21.022 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjEyOjIwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "dc586801c69bf75434013e5d1f3cbdfd",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "U3VuIFNlcCAwMiAyMDE4IDAyOjEyOjIwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-02 02:12:21.095 -03:00 [DBG] q0jQve5gDj3SxMmafZGctiVEH7psfGCP07O1D30WZMw= found in database: true
2018-09-02 02:12:21.102 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-02 02:12:21.108 -03:00 [DBG] Creating Implicit Flow response.
2018-09-02 02:12:21.115 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-02 02:12:21.115 -03:00 [DBG] Getting claims for access token for subject: db0448ac-6a97-418a-b564-6cef57c164e8
2018-09-02 02:12:21.271 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****isIA"
    }
  ],
  "ActivityId": "0HLGGIAKD42UV:00000001",
  "TimeStamp": "2018-09-02T05:12:21Z",
  "ProcessId": 25356,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-02 02:12:21.278 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "db0448ac-6a97-418a-b564-6cef57c164e8",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIFNlcCAwMiAyMDE4IDAyOjEyOjIwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-02 02:12:24.437 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 02:12:24.440 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 02:12:24.441 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 02:12:24.445 -03:00 [DBG] Start discovery request
2018-09-02 02:12:24.527 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 02:12:24.571 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-02 02:12:24.572 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-02 02:12:24.573 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-02 02:12:24.577 -03:00 [DBG] Start key discovery request
2018-09-02 23:02:55.834 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-02 23:02:55.856 -03:00 [DBG] PublicOrigin explicitly set to http://localhost:5000
2018-09-02 23:02:55.860 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 23:02:55.861 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 23:03:32.368 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:03:32.485 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:03:32.490 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:03:32.538 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:03:32.552 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:03:32.553 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:03:32.558 -03:00 [DBG] Start discovery request
2018-09-02 23:03:32.848 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 23:04:02.110 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:04:02.115 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:04:02.116 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:04:02.118 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:04:02.119 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:04:02.121 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:04:02.122 -03:00 [DBG] Start discovery request
2018-09-02 23:04:02.133 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 23:04:30.077 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:04:30.080 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:04:30.082 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:04:30.083 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:04:30.084 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:04:30.086 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:04:30.089 -03:00 [DBG] Start discovery request
2018-09-02 23:04:30.101 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-02 23:06:24.984 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-02 23:06:25.006 -03:00 [DBG] PublicOrigin explicitly set to http://localhost:5000
2018-09-02 23:06:25.011 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 23:06:25.011 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 23:06:25.011 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 23:06:25.012 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 23:06:25.012 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 23:06:43.791 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-02 23:06:43.815 -03:00 [DBG] PublicOrigin explicitly set to http://sso:5000
2018-09-02 23:06:43.820 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-02 23:06:43.821 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-02 23:06:50.899 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-02 23:06:51.050 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-02 23:06:51.055 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-02 23:06:51.104 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-02 23:06:51.112 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-02 23:06:51.114 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-02 23:06:51.120 -03:00 [DBG] Start discovery request
2018-09-02 23:06:51.411 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 01:51:44.717 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-03 01:51:44.743 -03:00 [DBG] PublicOrigin explicitly set to http://localhost:5000
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 01:51:44.749 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 01:51:44.750 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 01:51:49.452 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-03 01:51:49.716 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-03 01:51:49.721 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-03 01:51:49.906 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 01:51:49.916 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 01:51:49.917 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 01:51:49.922 -03:00 [DBG] Start discovery request
2018-09-03 01:51:50.231 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 01:52:28.300 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 01:52:28.326 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 01:52:28.327 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 01:52:30.609 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-03 01:52:30.749 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-03 01:52:30.753 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-03 01:52:30.808 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 01:52:30.816 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 01:52:30.818 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 01:52:30.825 -03:00 [DBG] Start discovery request
2018-09-03 01:52:31.148 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 01:53:29.418 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-03 01:53:29.441 -03:00 [DBG] PublicOrigin explicitly set to http://sso:5000
2018-09-03 01:53:29.446 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 01:53:29.447 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 01:53:33.558 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-03 01:53:33.704 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-03 01:53:33.709 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-03 01:53:33.760 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 01:53:33.768 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 01:53:33.771 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 01:53:33.777 -03:00 [DBG] Start discovery request
2018-09-03 01:53:34.110 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 14:53:57.769 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 14:53:57.802 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 14:53:57.803 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 14:53:57.803 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 14:53:57.803 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 14:54:06.496 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:06.506 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:06.510 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-03 14:54:06.516 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-03 14:54:06.517 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-03 14:54:06.520 -03:00 [DBG] Start authorize request
2018-09-03 14:54:06.525 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:06.531 -03:00 [DBG] No user present in authorize request
2018-09-03 14:54:06.534 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:06.836 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:06.883 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:06.999 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.012 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:07.018 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.026 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:07.062 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 14:54:07.069 -03:00 [INF] Showing login: User is not authenticated
2018-09-03 14:54:07.084 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:07.086 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:07.199 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:07.201 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:07.209 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:07.210 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:07.217 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.220 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:07.223 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:07.224 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:07.234 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:10.698 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:10.699 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:10.725 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-03 14:54:11.665 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-03 14:54:11.697 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:11.707 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:11.912 -03:00 [INF] Provider Facebook associated.
2018-09-03 14:54:12.061 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGHOOV2NNTF:00000005",
  "TimeStamp": "2018-09-03T17:54:12Z",
  "ProcessId": 7092,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-03 14:54:12.071 -03:00 [DBG] Augmenting SignInContext
2018-09-03 14:54:12.072 -03:00 [DBG] Adding amr claim with value: external
2018-09-03 14:54:12.075 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-03 14:54:12.077 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-03 14:54:12.082 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-03 14:54:12.098 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-03 14:54:12.100 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-03 14:54:12.100 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-03 14:54:12.105 -03:00 [DBG] Start authorize callback request
2018-09-03 14:54:12.107 -03:00 [DBG] User in authorize request: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:12.109 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:12.116 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:12.117 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.121 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.123 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.126 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.128 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:12.129 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "SessionId": "2a6d71f581b902cdb6942e2f975a74fe",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 14:54:12.169 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= found in database: false
2018-09-03 14:54:12.170 -03:00 [DBG] user_consent grant with value: Swagger|bc04b0b5-d42e-456d-af1e-cbba844a2d6e not found in store.
2018-09-03 14:54:12.173 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-03 14:54:12.173 -03:00 [INF] Showing consent: User has not yet consented
2018-09-03 14:54:12.196 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:12.203 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:12.204 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.208 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.210 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.214 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:12.215 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:12.221 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:12.222 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:12.225 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.733 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-03 14:54:13.769 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:13.777 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:13.778 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.783 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.785 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.787 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.788 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:13.801 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-03 14:54:13.803 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-03 14:54:13.803 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-03 14:54:13.804 -03:00 [DBG] Start authorize callback request
2018-09-03 14:54:13.808 -03:00 [DBG] User in authorize request: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:13.809 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 14:54:13.819 -03:00 [DBG] Swagger found in database: true
2018-09-03 14:54:13.820 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.825 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.828 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 14:54:13.834 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 14:54:13.835 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 14:54:13.835 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "SessionId": "2a6d71f581b902cdb6942e2f975a74fe",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 14:54:13.847 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= found in database: false
2018-09-03 14:54:13.848 -03:00 [DBG] user_consent grant with value: Swagger|bc04b0b5-d42e-456d-af1e-cbba844a2d6e not found in store.
2018-09-03 14:54:13.849 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-03 14:54:13.857 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-03 14:54:13.860 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-03 14:54:13.865 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:13.878 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= not found in database
2018-09-03 14:54:13.909 -03:00 [DBG] Creating Implicit Flow response.
2018-09-03 14:54:13.918 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-03 14:54:13.918 -03:00 [DBG] Getting claims for access token for subject: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 14:54:13.971 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****fq2w"
    }
  ],
  "ActivityId": "0HLGHOOV2NNTE:00000008",
  "TimeStamp": "2018-09-03T17:54:13Z",
  "ProcessId": 7092,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-03 14:54:13.976 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE0OjU0OjA2IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-03 14:54:13.989 -03:00 [DBG] Augmenting SignInContext
2018-09-03 14:54:13.990 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-03 14:54:20.207 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 14:54:20.209 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 14:54:20.210 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 14:54:20.213 -03:00 [DBG] Start discovery request
2018-09-03 14:54:20.279 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 14:54:20.317 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-03 14:54:20.319 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-03 14:54:20.319 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-03 14:54:20.322 -03:00 [DBG] Start key discovery request
2018-09-03 14:58:15.638 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 14:59:20.054 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 14:59:27.610 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:02:54.569 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:02:54.601 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:04:27.054 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:04:27.090 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:06:04.573 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:06:05.571 -03:00 [DBG] SigninCredentialExtension adding key from file AlltoIdentityServer4Auth.pfx
2018-09-03 15:18:48.826 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:18:50.068 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:19:00.821 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:19:03.670 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:23:18.067 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:23:19.136 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:32:11.311 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-03 15:32:12.588 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-03 15:32:28.651 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-03 15:32:28.653 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-03 15:32:28.653 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-03 15:32:28.653 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-03 15:32:28.654 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-03 15:32:39.485 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-03 15:32:39.491 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-03 15:32:39.491 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-03 15:32:39.495 -03:00 [DBG] Start authorize request
2018-09-03 15:32:39.502 -03:00 [DBG] User in authorize request: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 15:32:39.512 -03:00 [DBG] Start authorize request protocol validation
2018-09-03 15:32:39.817 -03:00 [DBG] Swagger found in database: true
2018-09-03 15:32:39.865 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 15:32:39.968 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 15:32:39.983 -03:00 [DBG] Found [] identity scopes in database
2018-09-03 15:32:39.990 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-03 15:32:39.996 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-03 15:32:40.035 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE1OjMyOjM5IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "SessionId": "2a6d71f581b902cdb6942e2f975a74fe",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "TW9uIFNlcCAwMyAyMDE4IDE1OjMyOjM5IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ=="
  }
}
2018-09-03 15:32:40.085 -03:00 [DBG] zRGDE5mCW05b4fgVCzh8I3sAXLb3ssWfefblW8uTcnA= found in database: true
2018-09-03 15:32:40.091 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-03 15:32:40.096 -03:00 [DBG] Creating Implicit Flow response.
2018-09-03 15:32:40.103 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-03 15:32:40.103 -03:00 [DBG] Getting claims for access token for subject: bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-03 15:32:40.182 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****IHaA"
    }
  ],
  "ActivityId": "0HLGHPEGB9UP9:00000001",
  "TimeStamp": "2018-09-03T18:32:40Z",
  "ProcessId": 28544,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-03 15:32:40.188 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "TW9uIFNlcCAwMyAyMDE4IDE1OjMyOjM5IEdNVC0wMzAwIChCcmFzaWxpYSBTdGFuZGFyZCBUaW1lKQ==",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-03 15:32:45.369 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-03 15:32:45.372 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-03 15:32:45.372 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-03 15:32:45.375 -03:00 [DBG] Start discovery request
2018-09-03 15:32:45.445 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-03 15:32:45.489 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-03 15:32:45.491 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-03 15:32:45.492 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-03 15:32:45.496 -03:00 [DBG] Start key discovery request
2018-09-04 02:28:18.534 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-04 02:28:18.592 -03:00 [ERR] SigninCredentialExtension cannot find key file JPProjectOAuth.pfx
2018-09-04 02:29:44.986 -03:00 [DBG] SigninCredentialExtension keyType is File
2018-09-04 02:29:45.031 -03:00 [DBG] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-04 02:33:20.813 -03:00 [DBG] Custom IssuerUri set to http://sso:5000
2018-09-04 02:33:20.840 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 02:33:20.840 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 02:33:20.840 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 02:33:20.841 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 02:33:20.841 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 02:33:23.340 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:23.353 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:23.359 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-04 02:33:23.367 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-04 02:33:23.368 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-04 02:33:23.374 -03:00 [DBG] Start authorize request
2018-09-04 02:33:23.380 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:23.386 -03:00 [DBG] No user present in authorize request
2018-09-04 02:33:23.390 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:23.756 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:23.802 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:23.928 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:23.942 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:23.950 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:23.958 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:23.996 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-04 02:33:24.005 -03:00 [INF] Showing login: User is not authenticated
2018-09-04 02:33:24.041 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:24.043 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:24.150 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:24.153 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:24.165 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:24.166 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:24.174 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:24.177 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:24.187 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:24.188 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:24.208 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:26.411 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:26.413 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:26.436 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 02:33:27.579 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 02:33:27.598 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:27.599 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:27.825 -03:00 [INF] Provider Facebook associated.
2018-09-04 02:33:27.993 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGI4VN6AVKE:00000006",
  "TimeStamp": "2018-09-04T05:33:27Z",
  "ProcessId": 24604,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 02:33:28.004 -03:00 [DBG] Augmenting SignInContext
2018-09-04 02:33:28.010 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 02:33:28.014 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 02:33:28.017 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 02:33:28.026 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 02:33:28.061 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-04 02:33:28.065 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-04 02:33:28.065 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-04 02:33:28.072 -03:00 [DBG] Start authorize callback request
2018-09-04 02:33:28.076 -03:00 [DBG] User in authorize request: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:28.077 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:28.089 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:28.090 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.096 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.098 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.103 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.103 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:28.104 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "03da0f7d79210583fe1c047c8bc222d7",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-04 02:33:28.150 -03:00 [DBG] zyAz+A+asftyagE9Hu6R87Lt6UVLqmtnFd9GuzUmlE0= found in database: false
2018-09-04 02:33:28.152 -03:00 [DBG] user_consent grant with value: Swagger|f0f5dad8-a527-4c7e-9dc2-bdd58e551b58 not found in store.
2018-09-04 02:33:28.154 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-04 02:33:28.154 -03:00 [INF] Showing consent: User has not yet consented
2018-09-04 02:33:28.182 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:28.191 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:28.192 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.197 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.198 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.203 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:28.204 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:28.213 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:28.214 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:28.219 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.865 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 02:33:29.903 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:29.915 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:29.917 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.923 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.926 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.931 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.932 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:29.949 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-04 02:33:29.951 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-04 02:33:29.954 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-04 02:33:29.955 -03:00 [DBG] Start authorize callback request
2018-09-04 02:33:29.962 -03:00 [DBG] User in authorize request: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:29.963 -03:00 [DBG] Start authorize request protocol validation
2018-09-04 02:33:29.974 -03:00 [DBG] Swagger found in database: true
2018-09-04 02:33:29.976 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.983 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.985 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 02:33:29.992 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 02:33:29.993 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-04 02:33:29.995 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.owner-content",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "03da0f7d79210583fe1c047c8bc222d7",
  "Raw": {
    "response_type": "token",
    "client_id": "Swagger",
    "redirect_uri": "http://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.owner-content",
    "state": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-09-04 02:33:30.004 -03:00 [DBG] zyAz+A+asftyagE9Hu6R87Lt6UVLqmtnFd9GuzUmlE0= found in database: false
2018-09-04 02:33:30.005 -03:00 [DBG] user_consent grant with value: Swagger|f0f5dad8-a527-4c7e-9dc2-bdd58e551b58 not found in store.
2018-09-04 02:33:30.009 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-04 02:33:30.018 -03:00 [INF] User consented to scopes: ["UserManagementApi.owner-content"]
2018-09-04 02:33:30.022 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.owner-content"]
2018-09-04 02:33:30.030 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:30.053 -03:00 [DBG] zyAz+A+asftyagE9Hu6R87Lt6UVLqmtnFd9GuzUmlE0= not found in database
2018-09-04 02:33:30.117 -03:00 [DBG] Creating Implicit Flow response.
2018-09-04 02:33:30.132 -03:00 [DBG] Getting claims for access token for client: Swagger
2018-09-04 02:33:30.133 -03:00 [DBG] Getting claims for access token for subject: f0f5dad8-a527-4c7e-9dc2-bdd58e551b58
2018-09-04 02:33:30.224 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "Swagger",
  "ClientName": "Swagger UI",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "Scopes": "UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****d1rQ"
    }
  ],
  "ActivityId": "0HLGI4VN6AVKB:00000005",
  "TimeStamp": "2018-09-04T05:33:30Z",
  "ProcessId": 24604,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 02:33:30.231 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "f0f5dad8-a527-4c7e-9dc2-bdd58e551b58",
  "ClientId": "Swagger",
  "RedirectUri": "http://localhost:5003/swagger/oauth2-redirect.html",
  "State": "VHVlIFNlcCAwNCAyMDE4IDAyOjMzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.owner-content"
}
2018-09-04 02:33:30.246 -03:00 [DBG] Augmenting SignInContext
2018-09-04 02:33:30.247 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 02:33:40.233 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-04 02:33:40.237 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-04 02:33:40.238 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-04 02:33:40.243 -03:00 [DBG] Start discovery request
2018-09-04 02:33:40.316 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-04 02:33:40.362 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-04 02:33:40.364 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-04 02:33:40.365 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-04 02:33:40.369 -03:00 [DBG] Start key discovery request
2018-09-04 12:57:48.492 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 12:57:48.520 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 12:57:48.521 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 12:58:02.764 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:02.776 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.788 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.789 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.816 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 12:58:17.820 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:17.820 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:18.900 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:18.902 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:18.915 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 12:58:20.323 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 12:58:20.331 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:20.331 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:20.602 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIFSKOEBV8:00000006",
  "TimeStamp": "2018-09-04T15:58:20Z",
  "ProcessId": 33556,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 12:58:20.611 -03:00 [DBG] Augmenting SignInContext
2018-09-04 12:58:20.612 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 12:58:20.616 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 12:58:20.618 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 12:58:20.621 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 12:58:20.773 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 12:58:21.147 -03:00 [DBG] Swagger found in database: true
2018-09-04 12:58:21.178 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 12:58:21.289 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 12:58:38.606 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 12:58:39.175 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 12:58:39.193 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIFSKOEBV6:00000007",
  "TimeStamp": "2018-09-04T15:58:39Z",
  "ProcessId": 33556,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 12:58:39.200 -03:00 [DBG] Augmenting SignInContext
2018-09-04 12:58:39.201 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 12:58:39.202 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 12:58:39.202 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 12:58:39.208 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 12:58:39.219 -03:00 [DBG] Swagger found in database: true
2018-09-04 12:58:39.221 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 12:58:39.226 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 12:59:05.499 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 12:59:05.537 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 12:59:05.538 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 12:59:05.540 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 12:59:05.544 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIFSKOEBV8:0000000C",
  "TimeStamp": "2018-09-04T15:59:05Z",
  "ProcessId": 33556,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:05:37.939 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:05:37.968 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:05:37.969 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:05:55.160 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 13:05:57.108 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 13:05:57.967 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 13:05:58.223 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIG1538VEE:00000006",
  "TimeStamp": "2018-09-04T16:05:58Z",
  "ProcessId": 10496,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:05:58.232 -03:00 [DBG] Augmenting SignInContext
2018-09-04 13:05:58.233 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 13:05:58.237 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 13:05:58.241 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:05:58.291 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 13:05:58.615 -03:00 [DBG] Swagger found in database: true
2018-09-04 13:05:58.645 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 13:05:58.740 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 13:06:22.754 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 13:06:22.786 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 13:06:22.788 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:06:22.788 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 13:06:22.792 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIG1538VEE:00000009",
  "TimeStamp": "2018-09-04T16:06:22Z",
  "ProcessId": 10496,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:07:14.395 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:07:14.421 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:07:14.421 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:07:14.422 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:07:14.422 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:07:14.422 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:36:16.804 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 13:36:19.051 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:36:19.057 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:36:19.058 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:36:22.834 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 13:36:25.246 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 13:36:25.253 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 13:36:25.253 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 13:36:25.253 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 13:36:25.254 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 13:36:25.254 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 13:36:35.844 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 13:36:43.761 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 13:36:44.778 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 13:36:45.029 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIGI76TE6A:00000006",
  "TimeStamp": "2018-09-04T16:36:44Z",
  "ProcessId": 31596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 13:36:45.039 -03:00 [DBG] Augmenting SignInContext
2018-09-04 13:36:45.041 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 13:36:45.044 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 13:36:45.049 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:36:45.099 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 13:36:45.395 -03:00 [DBG] Swagger found in database: true
2018-09-04 13:36:45.423 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 13:36:45.521 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 13:36:51.138 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 13:36:51.171 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 13:36:51.172 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 13:36:51.174 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 13:36:51.178 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIGI76TE6A:00000009",
  "TimeStamp": "2018-09-04T16:36:51Z",
  "ProcessId": 31596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:05:48.512 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:05:50.951 -03:00 [WRN] No XML encryptor configured. Key "ccbb65c1-b7ad-44ec-add7-d7b4e0644492" may be persisted to storage in unencrypted form.
2018-09-04 15:05:51.050 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:05:51.058 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:05:51.059 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:06:04.592 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:04.604 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.153 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.157 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.181 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:06:09.185 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.187 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:06:09.242 -03:00 [ERR] An exception was thrown while deserializing the token.
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The antiforgery token could not be decrypted. ---> System.Security.Cryptography.CryptographicException: The key {b89a3127-6459-4bd3-8eb9-3f53e8355053} was not found in the key ring.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.GetCookieTokenDoesNotThrow(HttpContext httpContext)
2018-09-04 15:07:12.222 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:07:14.697 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:07:14.704 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:07:14.704 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:07:14.705 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:07:14.705 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:07:14.705 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:07:20.379 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:20.391 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.622 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.624 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.647 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:07:23.651 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:23.652 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:27.177 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:27.178 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:27.189 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:07:28.167 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:07:28.175 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:28.175 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:28.414 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGII4V8VKR0:00000006",
  "TimeStamp": "2018-09-04T18:07:28Z",
  "ProcessId": 16112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:07:28.421 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:07:28.423 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:07:28.426 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:07:28.427 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:07:28.431 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:07:28.481 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 15:07:28.796 -03:00 [DBG] Swagger found in database: true
2018-09-04 15:07:28.823 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 15:07:28.922 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 15:07:34.360 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 15:07:34.388 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 15:07:34.389 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:07:34.390 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 15:07:34.394 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGII4V8VKR0:00000009",
  "TimeStamp": "2018-09-04T18:07:34Z",
  "ProcessId": 16112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:07:39.512 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-09-04 15:07:45.304 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:07:45.413 -03:00 [WRN] User 744eb69e-ab3a-4a03-a840-53088819651b validation failed: DuplicateUserName.
2018-09-04 15:07:50.390 -03:00 [WRN] '.AspNetCore.Correlation.Google.ehGpSg2StXsuKOu57AbMSu7D1nmSHfIv23iFmMGG1Pw' cookie not found.
2018-09-04 15:07:50.392 -03:00 [INF] Error from RemoteAuthentication: Correlation failed..
2018-09-04 15:07:50.400 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-04 15:07:57.910 -03:00 [WRN] '.AspNetCore.Correlation.Google.ehGpSg2StXsuKOu57AbMSu7D1nmSHfIv23iFmMGG1Pw' cookie not found.
2018-09-04 15:07:57.911 -03:00 [INF] Error from RemoteAuthentication: Correlation failed..
2018-09-04 15:07:57.914 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-04 15:08:03.947 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:08:04.619 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:08:04.631 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bc04b0b5-d42e-456d-af1e-cbba844a2d6e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGII4V8VKR0:00000014",
  "TimeStamp": "2018-09-04T18:08:04Z",
  "ProcessId": 16112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:08:04.633 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:08:04.633 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:08:04.634 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:08:04.634 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:08:09.261 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 15:08:09.274 -03:00 [DBG] Swagger found in database: true
2018-09-04 15:08:09.276 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 15:08:09.279 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 15:08:14.995 -03:00 [DBG] 1 persisted grants found for bc04b0b5-d42e-456d-af1e-cbba844a2d6e
2018-09-04 15:08:15.010 -03:00 [DBG] Swagger found in database: true
2018-09-04 15:08:15.011 -03:00 [DBG] Found [] identity scopes in database
2018-09-04 15:08:15.017 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-04 15:14:02.364 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:14:49.058 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:16:55.082 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:17:09.301 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:17:09.307 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:17:09.307 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:17:09.308 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:17:09.308 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:17:09.308 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:17:10.350 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:10.360 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:16.977 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:16.979 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:17.003 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:17:17.008 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:17.008 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.623 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.624 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.624 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.625 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:33.626 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-04 15:17:50.769 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:18:06.628 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:18:11.000 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:18:12.232 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:18:12.446 -03:00 [INF] Provider Facebook associated.
2018-09-04 15:18:12.642 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIIAGMOMTJ:0000000E",
  "TimeStamp": "2018-09-04T18:18:12Z",
  "ProcessId": 16688,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:18:12.650 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:18:12.652 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:18:12.655 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:18:12.660 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:18:12.700 -03:00 [DBG] 0 persisted grants found for bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-04 15:18:19.280 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 15:18:19.313 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 15:18:19.314 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:18:19.316 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 15:18:19.320 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIIAGMOMTJ:00000012",
  "TimeStamp": "2018-09-04T18:18:19Z",
  "ProcessId": 16688,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-04 15:19:34.679 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 15:19:37.224 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-04 15:19:37.231 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-04 15:19:37.232 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-04 15:19:48.375 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-04 15:19:51.973 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-04 15:19:53.120 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-04 15:19:53.371 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGIIBSJ32A3:00000007",
  "TimeStamp": "2018-09-04T18:19:53Z",
  "ProcessId": 15408,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-09-04 15:19:53.379 -03:00 [DBG] Augmenting SignInContext
2018-09-04 15:19:53.380 -03:00 [DBG] Adding amr claim with value: external
2018-09-04 15:19:53.384 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-04 15:19:53.389 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:19:53.426 -03:00 [DBG] 0 persisted grants found for bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-04 15:19:57.904 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-04 15:19:57.932 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-04 15:19:57.933 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-04 15:19:57.934 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-04 15:19:57.939 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGIIBSJ32A3:0000000A",
  "TimeStamp": "2018-09-04T18:19:57Z",
  "ProcessId": 15408,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-09-04 16:01:14.859 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:01:14.961 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:02:00.410 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:02:00.479 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:04:45.975 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:04:46.043 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:05:34.349 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-04 16:05:34.433 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-04 16:05:38.237 -03:00 [INF] SigninCredentialExtension adding key from file JPProjectOAuth.pfx
2018-09-05 00:51:15.325 -03:00 [INF] Authority URI: https://sso:5000
2018-09-05 00:51:15.411 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeEnvironment
2018-09-05 00:51:15.431 -03:00 [INF] Take Certifate from Environment
2018-09-05 00:51:15.431 -03:00 [ERR] SigninCredentialExtension cannot find key file 
2018-09-05 00:52:11.582 -03:00 [INF] Authority URI: https://sso:5000
2018-09-05 00:52:11.653 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeEnvironment
2018-09-05 00:52:11.665 -03:00 [INF] Take Certifate from Environment
2018-09-05 00:52:11.665 -03:00 [ERR] SigninCredentialExtension cannot find key file 
2018-09-05 00:53:47.012 -03:00 [INF] Authority URI: https://sso:5000
2018-09-05 00:53:47.074 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeKeyFile
2018-09-05 00:55:12.944 -03:00 [INF] Authority URI: https://sso:5000
2018-09-05 00:55:13.010 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeKeyFile
2018-09-05 00:56:13.784 -03:00 [INF] Authority URI: https://sso:5000
2018-09-05 00:56:13.859 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeKeyFile
2018-09-05 00:56:23.241 -03:00 [INF] Authority URI: https://sso:5000
2018-09-05 00:56:23.335 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeKeyFile
2018-09-05 00:56:37.619 -03:00 [DBG] Custom IssuerUri set to https://sso:5000
2018-09-05 00:56:37.625 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 00:56:37.625 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 00:56:37.625 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 00:56:37.625 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 00:56:37.626 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 00:56:44.062 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 00:56:44.169 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 00:56:44.174 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 00:56:44.210 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 00:56:44.216 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 00:56:44.216 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 00:56:44.220 -03:00 [DBG] Start discovery request
2018-09-05 00:56:44.488 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 00:57:37.306 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 00:57:37.313 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 00:57:37.314 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 00:57:37.326 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 00:57:37.327 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 00:57:37.330 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 00:57:37.336 -03:00 [DBG] Start discovery request
2018-09-05 00:57:37.346 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 00:57:53.419 -03:00 [INF] Authority URI: https://sso:5000
2018-09-05 00:57:53.492 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeKeyFile
2018-09-05 00:57:56.198 -03:00 [DBG] Custom IssuerUri set to https://sso:5000
2018-09-05 00:57:56.208 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 00:57:56.208 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 00:57:56.208 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 00:57:56.209 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 00:57:56.209 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 00:58:02.535 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 00:58:02.648 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 00:58:02.653 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 00:58:02.692 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 00:58:02.697 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 00:58:02.698 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 00:58:02.702 -03:00 [DBG] Start discovery request
2018-09-05 00:58:02.979 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 00:58:35.017 -03:00 [INF] Authority URI: https://localhost:5000
2018-09-05 00:58:35.086 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeKeyFile
2018-09-05 00:58:37.710 -03:00 [DBG] Custom IssuerUri set to https://localhost:5000
2018-09-05 00:58:37.716 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 00:58:37.717 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 00:58:37.717 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 00:58:37.718 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 00:58:37.718 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 00:58:41.269 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 00:58:41.400 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 00:58:41.408 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 00:58:41.448 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 00:58:41.454 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 00:58:41.455 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 00:58:41.459 -03:00 [DBG] Start discovery request
2018-09-05 00:58:41.759 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 00:58:41.842 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-05 00:58:41.848 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-05 00:58:41.849 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-05 00:58:41.854 -03:00 [DBG] Start authorize request
2018-09-05 00:58:41.863 -03:00 [DBG] No user present in authorize request
2018-09-05 00:58:41.873 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 00:58:42.069 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 00:58:42.107 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 00:58:42.197 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 00:58:42.212 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 00:58:42.218 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 00:58:42.225 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 00:58:42.236 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "oakoMECfsZN86wQ7PanazMKSufQz1F11p42J0R1u",
  "Nonce": "oakoMECfsZN86wQ7PanazMKSufQz1F11p42J0R1u",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "oakoMECfsZN86wQ7PanazMKSufQz1F11p42J0R1u",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "oakoMECfsZN86wQ7PanazMKSufQz1F11p42J0R1u"
  }
}
2018-09-05 00:58:42.244 -03:00 [INF] Showing login: User is not authenticated
2018-09-05 00:58:42.377 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 00:58:42.388 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 00:58:42.392 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 00:58:42.399 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 00:58:42.402 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 00:58:42.412 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 00:58:42.413 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 00:58:42.426 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 00:58:42.481 -03:00 [ERR] An exception was thrown while deserializing the token.
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The antiforgery token could not be decrypted. ---> System.Security.Cryptography.CryptographicException: The key {1280242d-1c0e-4f05-b18c-50de979b41c7} was not found in the key ring.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.GetCookieTokenDoesNotThrow(HttpContext httpContext)
2018-09-05 11:03:42.454 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 11:03:42.536 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeEnvironment
2018-09-05 11:03:42.551 -03:00 [INF] Take Certifate from Environment
2018-09-05 11:03:42.551 -03:00 [ERR] SigninCredentialExtension cannot find key file 
2018-09-05 11:03:45.003 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 11:03:45.010 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 11:03:45.010 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 11:03:45.010 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 11:03:45.010 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 11:03:45.010 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 11:03:51.262 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:03:51.444 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:03:51.453 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:03:51.465 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:04:21.116 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 11:04:21.177 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeEnvironment
2018-09-05 11:04:21.186 -03:00 [INF] Take Certifate from Environment
2018-09-05 11:04:21.187 -03:00 [ERR] SigninCredentialExtension cannot find key file 
2018-09-05 11:04:23.383 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 11:04:23.389 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 11:04:23.390 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 11:04:23.390 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 11:04:23.390 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 11:04:23.390 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 11:04:32.572 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:04:32.743 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:04:32.757 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:04:32.761 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:04:37.775 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 11:04:48.068 -03:00 [DBG] Authentication of the HTTPS connection timed out.
2018-09-05 11:07:56.286 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 11:07:56.353 -03:00 [INF] SigninCredentialExtension keyType is KeyTypeEnvironment
2018-09-05 11:07:56.364 -03:00 [INF] Take Certifate from Environment
2018-09-05 11:07:56.364 -03:00 [ERR] SigninCredentialExtension cannot find key file 
2018-09-05 11:07:58.488 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 11:07:58.497 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 11:07:58.497 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 11:07:58.497 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 11:07:58.498 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 11:07:58.498 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 11:09:49.493 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 11:09:49.567 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-05 11:09:49.567 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-05 11:09:52.080 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 11:09:52.087 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 11:09:52.087 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 11:09:52.087 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 11:09:52.087 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 11:09:52.088 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 11:10:04.100 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-05 11:10:04.160 -03:00 [ERR] An exception was thrown while deserializing the token.
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The antiforgery token could not be decrypted. ---> System.Security.Cryptography.CryptographicException: The key {9f6ef75a-2dce-43d3-ba8f-bdd845efc1f8} was not found in the key ring.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.GetCookieTokenDoesNotThrow(HttpContext httpContext)
2018-09-05 11:10:05.414 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 11:10:06.439 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 11:10:06.526 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JpProject\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-05 11:11:16.202 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 11:11:17.405 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 11:11:34.376 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JpProject\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-05 11:11:59.634 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 11:11:59.706 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-05 11:11:59.707 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-05 11:12:01.960 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 11:12:01.966 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 11:12:01.967 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 11:12:01.967 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 11:12:01.967 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 11:12:01.967 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 11:12:08.919 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-05 11:12:09.850 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 11:12:10.657 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 11:12:18.779 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JpProject\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-05 11:13:33.117 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-05 11:13:34.604 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 11:13:35.272 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 11:13:43.410 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJ766ITSFV:0000000C",
  "TimeStamp": "2018-09-05T14:13:43Z",
  "ProcessId": 24012,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 11:13:43.427 -03:00 [DBG] Augmenting SignInContext
2018-09-05 11:13:43.428 -03:00 [DBG] Adding amr claim with value: external
2018-09-05 11:13:43.433 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 11:13:43.438 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 11:13:43.489 -03:00 [DBG] 0 persisted grants found for bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-05 11:14:17.174 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 11:14:17.247 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-09-05 11:14:17.247 -03:00 [INF] SigninCredentialExtension adding Temporary Signing Credential
2018-09-05 11:14:19.560 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 11:14:19.567 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 11:14:19.567 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 11:14:19.568 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 11:14:19.568 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 11:14:19.568 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 11:14:19.810 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:19.823 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:19.959 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.179 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.179 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.179 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.179 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.180 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.181 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.181 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:20.182 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:26.774 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:26.775 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.791 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.791 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.791 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.792 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.792 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.793 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.793 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:32.794 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-05 11:14:38.491 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 11:14:39.321 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 11:14:39.543 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJ77FHSF54:00000006",
  "TimeStamp": "2018-09-05T14:14:39Z",
  "ProcessId": 16840,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 11:14:39.552 -03:00 [DBG] Augmenting SignInContext
2018-09-05 11:14:39.555 -03:00 [DBG] Adding amr claim with value: external
2018-09-05 11:14:39.558 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 11:14:39.561 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 11:14:43.889 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-05 11:14:43.915 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-05 11:14:43.917 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 11:14:43.918 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-05 11:14:43.922 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGJ77FHSF51:00000008",
  "TimeStamp": "2018-09-05T14:14:43Z",
  "ProcessId": 16840,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 13:49:11.802 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:49:11.869 -03:00 [INF] SigninCredentialExtension keyType is Environment
2018-09-05 13:49:11.881 -03:00 [INF] Taking Certificate from Environment
2018-09-05 13:49:11.881 -03:00 [ERR] SigninCredentialExtension cannot find key file 
2018-09-05 13:49:14.633 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 13:49:14.641 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 13:49:14.641 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 13:49:14.641 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 13:49:14.641 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 13:49:14.641 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 13:51:42.296 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:51:42.331 -03:00 [INF] SigninCredentialExtension keyType is Environment
2018-09-05 13:51:42.332 -03:00 [INF] Taking Certificate from Environment
2018-09-05 13:51:42.332 -03:00 [ERR] SigninCredentialExtension cannot find key file 
2018-09-05 13:51:43.831 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 13:51:43.837 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 13:51:43.837 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 13:51:43.837 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 13:51:43.837 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 13:51:43.837 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 13:56:20.905 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:56:20.947 -03:00 [INF] SigninCredentialExtension keyType is 
2018-09-05 13:56:32.116 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:56:32.156 -03:00 [INF] SigninCredentialExtension keyType is 
2018-09-05 13:57:03.692 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:57:03.732 -03:00 [INF] SigninCredentialExtension keyType is 
2018-09-05 13:57:44.935 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:57:44.980 -03:00 [INF] SigninCredentialExtension keyType is 
2018-09-05 13:57:46.943 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 13:57:46.949 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 13:57:46.949 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 13:57:46.949 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 13:57:46.949 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 13:57:46.949 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 13:58:29.311 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:58:29.354 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 13:58:29.382 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 13:59:26.727 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 13:59:26.771 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 13:59:26.798 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:01:12.003 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 14:01:12.048 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:01:12.080 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:01:15.926 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 14:01:15.933 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:01:15.934 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:01:15.934 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:01:15.934 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:01:15.934 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:01:15.993 -03:00 [FTL] Unable to start Kestrel.
System.FormatException: Invalid URL: 'https//+:5000'.
   at Microsoft.AspNetCore.Server.Kestrel.Core.ServerAddress.FromUrl(String url)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.ParseAddress(String address, Boolean& https)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-09-05 14:02:20.491 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 14:02:20.541 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:02:20.584 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:02:39.878 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 14:02:39.884 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:02:39.884 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:02:39.885 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:02:39.885 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:02:39.885 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:02:39.945 -03:00 [FTL] Unable to start Kestrel.
System.FormatException: Invalid URL: 'https//+:5000'.
   at Microsoft.AspNetCore.Server.Kestrel.Core.ServerAddress.FromUrl(String url)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.ParseAddress(String address, Boolean& https)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-09-05 14:02:58.776 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 14:02:58.817 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:02:58.846 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:03:07.604 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 14:03:07.611 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:03:07.611 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:03:07.611 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:03:07.611 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:03:07.611 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:03:07.668 -03:00 [FTL] Unable to start Kestrel.
System.FormatException: Invalid URL: 'https//+:5000'.
   at Microsoft.AspNetCore.Server.Kestrel.Core.ServerAddress.FromUrl(String url)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.ParseAddress(String address, Boolean& https)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-09-05 14:03:39.363 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 14:03:39.408 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:03:39.438 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:03:41.566 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 14:03:41.572 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:03:41.573 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:03:41.573 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:03:41.573 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:03:41.573 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:06:03.388 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 14:06:18.250 -03:00 [INF] Authority URI: http://localhost:5000
2018-09-05 14:06:18.292 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:06:18.326 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:06:20.428 -03:00 [DBG] Custom IssuerUri set to http://localhost:5000
2018-09-05 14:06:20.434 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:06:20.434 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:06:20.435 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:06:20.435 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:06:20.435 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:06:25.799 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 14:06:34.762 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 14:06:50.724 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 14:06:50.911 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:06:50.915 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:06:50.955 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 14:06:50.961 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 14:06:50.962 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 14:06:50.969 -03:00 [DBG] Start discovery request
2018-09-05 14:06:51.322 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 14:07:01.837 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 14:07:01.843 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:07:01.846 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:07:01.850 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 14:07:01.859 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 14:07:01.860 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 14:07:01.862 -03:00 [DBG] Start discovery request
2018-09-05 14:07:01.876 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 14:07:52.084 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:07:52.136 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:07:54.159 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:07:54.161 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:07:54.162 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:07:54.162 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:07:54.162 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:07:54.446 -03:00 [DBG] Starting token cleanup
2018-09-05 14:07:57.351 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 14:07:57.450 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:07:57.454 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:07:57.488 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 14:07:57.493 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 14:07:57.493 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 14:07:57.497 -03:00 [DBG] Start discovery request
2018-09-05 14:07:57.775 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 14:07:57.831 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-05 14:07:57.837 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:07:57.838 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:07:57.840 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-05 14:07:57.841 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-05 14:07:57.843 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-05 14:07:57.847 -03:00 [DBG] Start key discovery request
2018-09-05 14:07:57.910 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-05 14:07:57.914 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-05 14:07:57.915 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-05 14:07:57.918 -03:00 [DBG] Start authorize request
2018-09-05 14:07:57.925 -03:00 [DBG] No user present in authorize request
2018-09-05 14:07:57.928 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:07:58.200 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:07:58.242 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:07:58.339 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:07:58.351 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:07:58.355 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:07:58.361 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:07:58.369 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
  "Nonce": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu"
  }
}
2018-09-05 14:07:58.377 -03:00 [INF] Showing login: User is not authenticated
2018-09-05 14:07:58.471 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:07:58.480 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:07:58.483 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:07:58.487 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:07:58.489 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:07:58.492 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:07:58.493 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:07:58.501 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:07:58.554 -03:00 [ERR] An exception was thrown while deserializing the token.
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The antiforgery token could not be decrypted. ---> System.Security.Cryptography.CryptographicException: The key {5cacf58e-9417-453d-8d7b-a74ab2dca771} was not found in the key ring.
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgeryTokenSerializer.Deserialize(String serializedToken)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.GetCookieTokenDoesNotThrow(HttpContext httpContext)
2018-09-05 14:08:02.968 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 14:08:04.338 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 14:08:04.508 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJA8G7159O:00000005",
  "TimeStamp": "2018-09-05T17:08:04Z",
  "ProcessId": 18416,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 14:08:04.516 -03:00 [DBG] Augmenting SignInContext
2018-09-05 14:08:04.518 -03:00 [DBG] Adding amr claim with value: external
2018-09-05 14:08:04.522 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 14:08:04.527 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 14:08:04.553 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-05 14:08:04.555 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-05 14:08:04.556 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-05 14:08:04.560 -03:00 [DBG] Start authorize callback request
2018-09-05 14:08:04.563 -03:00 [DBG] User in authorize request: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-05 14:08:04.564 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:08:04.575 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:04.577 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:04.583 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:04.586 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:04.590 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:04.591 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:08:04.591 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
  "Nonce": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
  "SessionId": "27ba0c644ea0af5616aa9a74411ad1b3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu"
  }
}
2018-09-05 14:08:04.642 -03:00 [DBG] 0tlgkubKW7U2h003V5cqQvbdpTRy3/nBXFkBR+pQVz0= found in database: false
2018-09-05 14:08:04.644 -03:00 [DBG] user_consent grant with value: UserManagementUI|bd712d59-5ba3-46d6-88c3-4b052a4b9f27 not found in store.
2018-09-05 14:08:04.645 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-05 14:08:04.645 -03:00 [INF] Showing consent: User has not yet consented
2018-09-05 14:08:04.670 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:08:04.678 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:04.680 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:04.686 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:04.688 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:04.691 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:04.692 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:08:04.697 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:04.699 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:04.703 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:06.333 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-05 14:08:06.364 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:08:06.371 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:06.374 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:06.378 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:06.380 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:06.386 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:06.387 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:08:06.402 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-05 14:08:06.404 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-05 14:08:06.405 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-05 14:08:06.406 -03:00 [DBG] Start authorize callback request
2018-09-05 14:08:06.410 -03:00 [DBG] User in authorize request: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-05 14:08:06.412 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:08:06.424 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:06.428 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:06.436 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:06.439 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:06.443 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:06.444 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:08:06.446 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
  "Nonce": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
  "SessionId": "27ba0c644ea0af5616aa9a74411ad1b3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu"
  }
}
2018-09-05 14:08:06.457 -03:00 [DBG] 0tlgkubKW7U2h003V5cqQvbdpTRy3/nBXFkBR+pQVz0= found in database: false
2018-09-05 14:08:06.457 -03:00 [DBG] user_consent grant with value: UserManagementUI|bd712d59-5ba3-46d6-88c3-4b052a4b9f27 not found in store.
2018-09-05 14:08:06.459 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-05 14:08:06.463 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-05 14:08:06.466 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-05 14:08:06.471 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-05 14:08:06.487 -03:00 [DBG] 0tlgkubKW7U2h003V5cqQvbdpTRy3/nBXFkBR+pQVz0= not found in database
2018-09-05 14:08:06.616 -03:00 [DBG] Creating Implicit Flow response.
2018-09-05 14:08:06.623 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-05 14:08:06.623 -03:00 [DBG] Getting claims for access token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-05 14:08:06.651 -03:00 [DBG] Yiez/hWdBQbf7Yu28vv+xNhxsl8Dpm4vLK90/Ccx27I= not found in database
2018-09-05 14:08:06.663 -03:00 [DBG] Getting claims for identity token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27 and client: UserManagementUI
2018-09-05 14:08:06.664 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-05 14:08:06.704 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****o1-Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****631e"
    }
  ],
  "ActivityId": "0HLGJA8G7159M:00000008",
  "TimeStamp": "2018-09-05T17:08:06Z",
  "ProcessId": 18416,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 14:08:06.712 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-05 14:08:06.725 -03:00 [DBG] Augmenting SignInContext
2018-09-05 14:08:06.725 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 14:08:08.058 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 14:08:08.061 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:08:08.061 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:08:08.062 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 14:08:08.062 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 14:08:08.063 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 14:08:08.064 -03:00 [DBG] Start discovery request
2018-09-05 14:08:08.073 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 14:08:08.125 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-05 14:08:08.129 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:08:08.131 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:08:08.133 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-05 14:08:08.134 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-05 14:08:08.135 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-05 14:08:08.139 -03:00 [DBG] Start key discovery request
2018-09-05 14:08:09.258 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 14:08:09.261 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:08:09.261 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:08:09.323 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 14:08:09.327 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:08:09.328 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:08:09.330 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-05 14:08:09.332 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-05 14:08:09.333 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-05 14:08:09.342 -03:00 [DBG] Start userinfo request
2018-09-05 14:08:09.346 -03:00 [DBG] Bearer token found in header
2018-09-05 14:08:09.368 -03:00 [DBG] Yiez/hWdBQbf7Yu28vv+xNhxsl8Dpm4vLK90/Ccx27I= found in database: true
2018-09-05 14:08:09.385 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:09.395 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:09.400 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 14:08:09.404 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "609df303ee7fd61f35e308d0c1a1a13e32e22a24f6087d59aabc411a2cc0631e",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536167286,
    "exp": 1536170886,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536167284,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 14:08:09.411 -03:00 [DBG] Creating userinfo response
2018-09-05 14:08:09.413 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 14:08:09.416 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 14:08:09.420 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:09.421 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-05 14:08:09.421 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 14:08:09.423 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:09.428 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-05 14:08:09.428 -03:00 [DBG] End userinfo request
2018-09-05 14:08:09.482 -03:00 [INF] Clearing 0 tokens
2018-09-05 14:08:10.835 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 14:08:10.839 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:08:10.840 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:08:10.840 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-05 14:08:10.842 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-05 14:08:10.843 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-05 14:08:10.844 -03:00 [DBG] Start userinfo request
2018-09-05 14:08:10.845 -03:00 [DBG] Bearer token found in header
2018-09-05 14:08:10.848 -03:00 [DBG] Yiez/hWdBQbf7Yu28vv+xNhxsl8Dpm4vLK90/Ccx27I= found in database: true
2018-09-05 14:08:10.872 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:10.881 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:10.887 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 14:08:10.889 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "609df303ee7fd61f35e308d0c1a1a13e32e22a24f6087d59aabc411a2cc0631e",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536167286,
    "exp": 1536170886,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536167284,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 14:08:10.890 -03:00 [DBG] Creating userinfo response
2018-09-05 14:08:10.890 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 14:08:10.893 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 14:08:10.896 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:10.896 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-05 14:08:10.897 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 14:08:10.900 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:10.904 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-05 14:08:10.905 -03:00 [DBG] End userinfo request
2018-09-05 14:08:11.075 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 14:08:11.077 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 14:08:11.077 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 14:08:11.078 -03:00 [DBG] Start discovery request
2018-09-05 14:08:11.083 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 14:08:11.102 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-05 14:08:11.104 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-05 14:08:11.105 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-05 14:08:11.106 -03:00 [DBG] Start key discovery request
2018-09-05 14:08:11.132 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-05 14:08:11.134 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-05 14:08:11.134 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-05 14:08:11.140 -03:00 [DBG] Starting introspection request.
2018-09-05 14:08:11.147 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-05 14:08:11.149 -03:00 [DBG] Start parsing for secret in post body
2018-09-05 14:08:11.150 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-05 14:08:11.150 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-05 14:08:11.184 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-05 14:08:11.191 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-05 14:08:11.191 -03:00 [DBG] API resource validation success
2018-09-05 14:08:11.195 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJA8G7159T:00000001",
  "TimeStamp": "2018-09-05T17:08:11Z",
  "ProcessId": 18416,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 14:08:11.198 -03:00 [DBG] Introspection request validation started.
2018-09-05 14:08:11.200 -03:00 [DBG] Yiez/hWdBQbf7Yu28vv+xNhxsl8Dpm4vLK90/Ccx27I= found in database: true
2018-09-05 14:08:11.212 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:11.218 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:11.220 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 14:08:11.221 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "609df303ee7fd61f35e308d0c1a1a13e32e22a24f6087d59aabc411a2cc0631e",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536167286,
    "exp": 1536170886,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536167284,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 14:08:11.225 -03:00 [DBG] Introspection request validation successful.
2018-09-05 14:08:11.229 -03:00 [DBG] Creating introspection response for active token.
2018-09-05 14:08:11.230 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-05 14:08:15.171 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-09-05 14:08:15.175 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-09-05 14:08:15.176 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-09-05 14:08:15.183 -03:00 [DBG] Processing signout request for bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-05 14:08:15.189 -03:00 [DBG] Start end session request validation
2018-09-05 14:08:15.194 -03:00 [DBG] Start identity token validation
2018-09-05 14:08:15.208 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:15.209 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-09-05 14:08:15.242 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 14:08:15.243 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1536167286,
    "exp": 1536167586,
    "iss": "https://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "oN3XzvJIcDy0hQALA97bw1fcC3v3Lo5fBlvQsnmu",
    "iat": 1536167286,
    "at_hash": "6_WEGhlhIoGg1dZkiN1sCw",
    "sid": "27ba0c644ea0af5616aa9a74411ad1b3",
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536167284,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-09-05 14:08:15.249 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjFCRkMyOTA4RTk0MkZFMzNCMDc0RkJFRjFBOUJGNDNFNTVGOUY1MUYiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJHX3dwQ09sQ19qT3dkUHZ2R3B2MFBsWDU5UjgifQ.eyJuYmYiOjE1MzYxNjcyODYsImV4cCI6MTUzNjE2NzU4NiwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6IlVzZXJNYW5hZ2VtZW50VUkiLCJub25jZSI6Im9OM1h6dkpJY0R5MGhRQUxBOTdidzFmY0MzdjNMbzVmQmx2UXNubXUiLCJpYXQiOjE1MzYxNjcyODYsImF0X2hhc2giOiI2X1dFR2hsaElvR2cxZFpraU4xc0N3Iiwic2lkIjoiMjdiYTBjNjQ0ZWEwYWY1NjE2YWE5YTc0NDExYWQxYjMiLCJzdWIiOiJiZDcxMmQ1OS01YmEzLTQ2ZDYtODhjMy00YjA1MmE0YjlmMjciLCJhdXRoX3RpbWUiOjE1MzYxNjcyODQsImlkcCI6IkZhY2Vib29rIiwiYW1yIjpbImV4dGVybmFsIl19.bCGLgytYCS7kokGFJmV2nCUQWj7mRCtXc7-gs1WrMMbrNOkEb_bSpUDF2dfeA6E4Jez_ZEqip9WPaW-yu0isO_jYUmYfPsFsNqo2zy3Cj9G3T3VzL-nFln_EmzIbb-lRcZzpcKLn9Mj326Q9ZnRIimIMVnEzQdYcuJzUglr_GZzoBjJ2cN-zLjgoiDUKGnMsZV8y8Xy22oTw0clShogohn_4sYFCTwWjwkNuT-n97JBEvXzjrNlijNUe_ox1uaxBdbyx3_qXRuhbk7uFB8kfyJRgqoKDOWF1dUQVJFAw9gzxtlT5Z0QN2xCfyz9PFX7zEmsKMk6_em5NMNc9i8o1-Q",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-09-05 14:08:15.256 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-09-05 14:08:15.294 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-05 14:08:15.296 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 14:08:15.299 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-05 14:08:15.303 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGJA8G7159M:0000000A",
  "TimeStamp": "2018-09-05T17:08:15Z",
  "ProcessId": 18416,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 14:08:15.448 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-09-05 14:08:15.451 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-09-05 14:08:15.452 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-09-05 14:08:15.457 -03:00 [DBG] Processing signout callback request
2018-09-05 14:08:15.479 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:15.480 -03:00 [DBG] No client front-channel logout URLs
2018-09-05 14:08:15.490 -03:00 [DBG] No client back-channel logout URLs
2018-09-05 14:08:15.491 -03:00 [INF] Successful signout callback.
2018-09-05 14:08:15.492 -03:00 [DBG] No client front-channel iframe urls
2018-09-05 14:08:15.492 -03:00 [DBG] No client back-channel iframe urls
2018-09-05 14:08:17.753 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 14:08:17.757 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:08:17.758 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:08:17.759 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 14:08:17.760 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 14:08:17.761 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 14:08:17.761 -03:00 [DBG] Start discovery request
2018-09-05 14:08:17.770 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 14:08:17.822 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-05 14:08:17.825 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 14:08:17.827 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 14:08:17.827 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-05 14:08:17.828 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-05 14:08:17.830 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-05 14:08:17.831 -03:00 [DBG] Start key discovery request
2018-09-05 14:08:17.897 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-05 14:08:17.899 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-05 14:08:17.900 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-05 14:08:17.904 -03:00 [DBG] Start authorize request
2018-09-05 14:08:17.904 -03:00 [DBG] No user present in authorize request
2018-09-05 14:08:17.905 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:08:17.923 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:17.928 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:17.938 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:17.941 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:17.946 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:17.946 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:08:17.951 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "01HkxnUHlSA4MF53iszhaubOdr3ejZuzUMM7Xgqc",
  "Nonce": "01HkxnUHlSA4MF53iszhaubOdr3ejZuzUMM7Xgqc",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "01HkxnUHlSA4MF53iszhaubOdr3ejZuzUMM7Xgqc",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "01HkxnUHlSA4MF53iszhaubOdr3ejZuzUMM7Xgqc"
  }
}
2018-09-05 14:08:17.957 -03:00 [INF] Showing login: User is not authenticated
2018-09-05 14:08:17.962 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 14:08:17.972 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:17.975 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:17.983 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:17.988 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 14:08:17.994 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 14:08:17.996 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 14:08:18.007 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 14:08:24.494 -03:00 [INF] Clearing 0 tokens
2018-09-05 14:08:39.504 -03:00 [INF] Clearing 0 tokens
2018-09-05 14:08:54.508 -03:00 [INF] Clearing 0 tokens
2018-09-05 14:09:09.520 -03:00 [INF] Clearing 0 tokens
2018-09-05 14:20:20.504 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:20:20.557 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:20:22.581 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:20:22.583 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:20:22.583 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:20:22.583 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:20:22.583 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:20:22.851 -03:00 [DBG] Starting token cleanup
2018-09-05 14:20:25.330 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-05 14:20:25.338 -03:00 [DBG] Stopping token cleanup
2018-09-05 14:40:12.116 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:40:12.172 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:47:02.204 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:47:02.258 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:47:11.230 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:47:11.232 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:47:11.233 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:47:11.233 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:47:11.233 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:47:11.504 -03:00 [DBG] Starting token cleanup
2018-09-05 14:47:51.424 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:47:51.488 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:47:57.428 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:47:57.430 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:47:57.431 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:47:57.431 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:47:57.431 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:47:57.709 -03:00 [DBG] Starting token cleanup
2018-09-05 14:49:01.951 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:49:02.006 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:49:11.847 -03:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:aac1dba6-ad44-4912-93e0-51cd60c29ec1
Error Number:208,State:1,Class:16
2018-09-05 14:49:11.910 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:aac1dba6-ad44-4912-93e0-51cd60c29ec1
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:aac1dba6-ad44-4912-93e0-51cd60c29ec1
Error Number:208,State:1,Class:16
2018-09-05 14:49:11.926 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:aac1dba6-ad44-4912-93e0-51cd60c29ec1
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:aac1dba6-ad44-4912-93e0-51cd60c29ec1
Error Number:208,State:1,Class:16
2018-09-05 14:49:16.871 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:49:16.922 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:49:22.844 -03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:53b8f600-b64c-49ae-a08c-23b50039fc1f
Error Number:208,State:1,Class:16
2018-09-05 14:49:22.902 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:53b8f600-b64c-49ae-a08c-23b50039fc1f
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:53b8f600-b64c-49ae-a08c-23b50039fc1f
Error Number:208,State:1,Class:16
2018-09-05 14:49:22.915 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:53b8f600-b64c-49ae-a08c-23b50039fc1f
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:53b8f600-b64c-49ae-a08c-23b50039fc1f
Error Number:208,State:1,Class:16
2018-09-05 14:49:48.289 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:49:48.351 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:49:55.933 -03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:7a442c80-55e1-4774-a3dc-05169b1f9226
Error Number:208,State:1,Class:16
2018-09-05 14:49:55.994 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:7a442c80-55e1-4774-a3dc-05169b1f9226
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:7a442c80-55e1-4774-a3dc-05169b1f9226
Error Number:208,State:1,Class:16
2018-09-05 14:49:56.009 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:7a442c80-55e1-4774-a3dc-05169b1f9226
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:7a442c80-55e1-4774-a3dc-05169b1f9226
Error Number:208,State:1,Class:16
2018-09-05 14:49:59.587 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:49:59.637 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:50:09.507 -03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:52a824a8-8d60-412a-877b-1a7d219339d7
Error Number:208,State:1,Class:16
2018-09-05 14:50:09.573 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:52a824a8-8d60-412a-877b-1a7d219339d7
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:52a824a8-8d60-412a-877b-1a7d219339d7
Error Number:208,State:1,Class:16
2018-09-05 14:50:09.588 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:52a824a8-8d60-412a-877b-1a7d219339d7
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:52a824a8-8d60-412a-877b-1a7d219339d7
Error Number:208,State:1,Class:16
2018-09-05 14:52:06.071 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:52:06.127 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:52:12.601 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 14:52:12.604 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 14:52:12.604 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 14:52:12.604 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 14:52:12.604 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 14:52:12.875 -03:00 [DBG] Starting token cleanup
2018-09-05 14:54:30.605 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:54:30.653 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:54:34.018 -03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:6000da16-6401-4f67-91c1-2e3886f75e36
Error Number:208,State:1,Class:16
2018-09-05 14:54:34.060 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:6000da16-6401-4f67-91c1-2e3886f75e36
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:6000da16-6401-4f67-91c1-2e3886f75e36
Error Number:208,State:1,Class:16
2018-09-05 14:54:34.075 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:6000da16-6401-4f67-91c1-2e3886f75e36
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:6000da16-6401-4f67-91c1-2e3886f75e36
Error Number:208,State:1,Class:16
2018-09-05 14:55:07.668 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 14:55:07.725 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 14:55:09.760 -03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:a35716ee-8a16-4d60-bfbb-846fc5299651
Error Number:208,State:1,Class:16
2018-09-05 14:55:09.802 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:a35716ee-8a16-4d60-bfbb-846fc5299651
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:a35716ee-8a16-4d60-bfbb-846fc5299651
Error Number:208,State:1,Class:16
2018-09-05 14:55:09.815 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:a35716ee-8a16-4d60-bfbb-846fc5299651
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Roles'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:a35716ee-8a16-4d60-bfbb-846fc5299651
Error Number:208,State:1,Class:16
2018-09-05 15:55:09.004 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 15:55:09.047 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 15:55:10.878 -03:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'ApiResources' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at System.Data.SqlClient.SqlCommand.EndExecuteNonQuery(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:91643f00-8b4f-4f53-aa8d-cc6f7b947959
Error Number:2714,State:6,Class:16
2018-09-05 15:55:49.521 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 15:55:49.576 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 15:55:51.224 -03:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'ApiResources' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at System.Data.SqlClient.SqlCommand.EndExecuteNonQuery(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:d0663092-9129-44ba-9eff-2296b311976e
Error Number:2714,State:6,Class:16
2018-09-05 15:56:17.813 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 15:56:17.862 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 15:56:29.821 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 15:56:29.823 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 15:56:29.823 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 15:56:29.823 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 15:56:29.824 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 15:56:30.088 -03:00 [DBG] Starting token cleanup
2018-09-05 15:56:34.035 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-05 15:56:34.046 -03:00 [DBG] Stopping token cleanup
2018-09-05 15:56:37.336 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 15:56:37.393 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 15:56:43.002 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 15:56:43.005 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 15:56:43.005 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 15:56:43.005 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 15:56:43.005 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 15:56:43.278 -03:00 [DBG] Starting token cleanup
2018-09-05 15:56:58.311 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:57:13.325 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:57:28.340 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:57:43.357 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:57:58.373 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:58:13.382 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:58:28.385 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:58:43.400 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:58:58.401 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:59:13.415 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:59:28.431 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:59:43.433 -03:00 [INF] Clearing 0 tokens
2018-09-05 15:59:46.378 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 15:59:46.538 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 15:59:46.554 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 15:59:46.566 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:00:11.658 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 16:00:11.718 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 16:00:13.751 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 16:00:13.753 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 16:00:13.754 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 16:00:13.754 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 16:00:13.754 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 16:00:14.019 -03:00 [DBG] Starting token cleanup
2018-09-05 16:43:49.550 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 16:43:49.611 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 16:43:52.018 -03:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ApiResources` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Enabled` bit NOT NULL,
    `Name` varchar(200) NOT NULL,
    `DisplayName` varchar(200) NULL,
    `Description` varchar(1000) NULL,
    CONSTRAINT `PK_ApiResources` PRIMARY KEY (`Id`)
);
MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'ApiResources' already exists ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'ApiResources' already exists
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 74
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 299
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 284
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2018-09-05 16:45:17.295 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 16:45:17.349 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 16:45:28.310 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 16:45:28.312 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 16:45:28.313 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 16:45:28.314 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 16:45:28.314 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 16:45:28.568 -03:00 [DBG] Starting token cleanup
2018-09-05 16:45:43.604 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:45:54.651 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 16:45:54.730 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:45:54.731 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:45:54.781 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 16:45:54.789 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 16:45:54.791 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 16:45:54.797 -03:00 [DBG] Start discovery request
2018-09-05 16:45:54.989 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 16:45:55.043 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-05 16:45:55.049 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:45:55.050 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:45:55.052 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-05 16:45:55.058 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-05 16:45:55.058 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-05 16:45:55.061 -03:00 [DBG] Start key discovery request
2018-09-05 16:45:55.100 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-05 16:45:55.106 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-05 16:45:55.107 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-05 16:45:55.112 -03:00 [DBG] Start authorize request
2018-09-05 16:45:55.119 -03:00 [DBG] No user present in authorize request
2018-09-05 16:45:55.123 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 16:45:55.272 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:45:55.305 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:55.340 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:55.353 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:55.361 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:55.367 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 16:45:55.375 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
  "Nonce": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq"
  }
}
2018-09-05 16:45:55.385 -03:00 [INF] Showing login: User is not authenticated
2018-09-05 16:45:55.488 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 16:45:55.509 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:45:55.512 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:55.519 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:55.523 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:55.530 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:55.531 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 16:45:55.546 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:45:57.049 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 16:45:57.971 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 16:45:58.236 -03:00 [INF] Provider Facebook associated.
2018-09-05 16:45:58.384 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJD0OAFE9L:00000005",
  "TimeStamp": "2018-09-05T19:45:58Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:45:58.392 -03:00 [DBG] Augmenting SignInContext
2018-09-05 16:45:58.394 -03:00 [DBG] Adding amr claim with value: external
2018-09-05 16:45:58.398 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 16:45:58.402 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 16:45:58.418 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-05 16:45:58.420 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-05 16:45:58.424 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-05 16:45:58.428 -03:00 [DBG] Start authorize callback request
2018-09-05 16:45:58.431 -03:00 [DBG] User in authorize request: 2b00bcb8-b286-461c-989b-cd11a20fcd1e
2018-09-05 16:45:58.432 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 16:45:58.446 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:45:58.448 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:58.456 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:58.459 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:58.466 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:58.467 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 16:45:58.468 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
  "Nonce": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
  "SessionId": "c0d73ca0fdc68f405ce5e0c13e79aab5",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq"
  }
}
2018-09-05 16:45:58.503 -03:00 [DBG] /LpXu3AVNF5eDlvD9ghevo7Ysx/uODOZGp3CYynC0gY= found in database: false
2018-09-05 16:45:58.505 -03:00 [DBG] user_consent grant with value: UserManagementUI|2b00bcb8-b286-461c-989b-cd11a20fcd1e not found in store.
2018-09-05 16:45:58.506 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-05 16:45:58.507 -03:00 [INF] Showing consent: User has not yet consented
2018-09-05 16:45:58.532 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 16:45:58.544 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:45:58.546 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:58.552 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:58.557 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:58.567 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:58.568 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 16:45:58.584 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:45:58.588 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:45:58.595 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:45:58.611 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:46:00.113 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-05 16:46:00.145 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 16:46:00.160 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:00.164 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:00.171 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:46:00.173 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:00.179 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:46:00.180 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 16:46:00.200 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-05 16:46:00.202 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-05 16:46:00.206 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-05 16:46:00.206 -03:00 [DBG] Start authorize callback request
2018-09-05 16:46:00.210 -03:00 [DBG] User in authorize request: 2b00bcb8-b286-461c-989b-cd11a20fcd1e
2018-09-05 16:46:00.211 -03:00 [DBG] Start authorize request protocol validation
2018-09-05 16:46:00.224 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:00.228 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:00.235 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:46:00.240 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:00.245 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:46:00.246 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-05 16:46:00.249 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
  "Nonce": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
  "SessionId": "c0d73ca0fdc68f405ce5e0c13e79aab5",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq"
  }
}
2018-09-05 16:46:00.257 -03:00 [DBG] /LpXu3AVNF5eDlvD9ghevo7Ysx/uODOZGp3CYynC0gY= found in database: false
2018-09-05 16:46:00.259 -03:00 [DBG] user_consent grant with value: UserManagementUI|2b00bcb8-b286-461c-989b-cd11a20fcd1e not found in store.
2018-09-05 16:46:00.260 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-05 16:46:00.264 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-05 16:46:00.266 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-05 16:46:00.270 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 2b00bcb8-b286-461c-989b-cd11a20fcd1e
2018-09-05 16:46:00.283 -03:00 [DBG] /LpXu3AVNF5eDlvD9ghevo7Ysx/uODOZGp3CYynC0gY= not found in database
2018-09-05 16:46:00.318 -03:00 [DBG] Creating Implicit Flow response.
2018-09-05 16:46:00.326 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-05 16:46:00.326 -03:00 [DBG] Getting claims for access token for subject: 2b00bcb8-b286-461c-989b-cd11a20fcd1e
2018-09-05 16:46:00.363 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= not found in database
2018-09-05 16:46:00.376 -03:00 [DBG] Getting claims for identity token for subject: 2b00bcb8-b286-461c-989b-cd11a20fcd1e and client: UserManagementUI
2018-09-05 16:46:00.376 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-05 16:46:00.413 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hu7Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****41e1"
    }
  ],
  "ActivityId": "0HLGJD0OAFE9L:00000009",
  "TimeStamp": "2018-09-05T19:46:00Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:46:00.420 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "tcCJzwwv8yztN88MHLuHiEQlmAKNc0C48A46dhQq",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-05 16:46:00.433 -03:00 [DBG] Augmenting SignInContext
2018-09-05 16:46:00.435 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 16:46:01.108 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 16:46:01.116 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:01.117 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:01.117 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 16:46:01.119 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 16:46:01.119 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 16:46:01.121 -03:00 [DBG] Start discovery request
2018-09-05 16:46:01.130 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 16:46:01.189 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-05 16:46:01.193 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:01.193 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:01.194 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-05 16:46:01.196 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-05 16:46:01.197 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-05 16:46:01.198 -03:00 [DBG] Start key discovery request
2018-09-05 16:46:02.292 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:02.297 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:02.298 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:02.340 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:02.345 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:02.346 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:02.347 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-05 16:46:02.349 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-05 16:46:02.351 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-05 16:46:02.357 -03:00 [DBG] Start userinfo request
2018-09-05 16:46:02.361 -03:00 [DBG] Bearer token found in header
2018-09-05 16:46:02.381 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:02.405 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:02.421 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:02.430 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:02.434 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:02.443 -03:00 [DBG] Creating userinfo response
2018-09-05 16:46:02.446 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:02.448 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:02.454 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:02.457 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-05 16:46:02.458 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:02.461 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:02.469 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-05 16:46:02.470 -03:00 [DBG] End userinfo request
2018-09-05 16:46:03.760 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:03.765 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:03.766 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:03.769 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-05 16:46:03.773 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-05 16:46:03.774 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-05 16:46:03.775 -03:00 [DBG] Start userinfo request
2018-09-05 16:46:03.776 -03:00 [DBG] Bearer token found in header
2018-09-05 16:46:03.781 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:03.805 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:03.820 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:03.827 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:03.829 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:03.831 -03:00 [DBG] Creating userinfo response
2018-09-05 16:46:03.831 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:03.832 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:03.838 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:03.838 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-05 16:46:03.839 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:03.842 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:03.850 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-05 16:46:03.851 -03:00 [DBG] End userinfo request
2018-09-05 16:46:04.020 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-05 16:46:04.022 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-05 16:46:04.022 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-05 16:46:04.024 -03:00 [DBG] Start discovery request
2018-09-05 16:46:04.033 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-05 16:46:04.052 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-05 16:46:04.053 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-05 16:46:04.056 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-05 16:46:04.057 -03:00 [DBG] Start key discovery request
2018-09-05 16:46:04.082 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-05 16:46:04.085 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-05 16:46:04.085 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-05 16:46:04.093 -03:00 [DBG] Starting introspection request.
2018-09-05 16:46:04.100 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-05 16:46:04.103 -03:00 [DBG] Start parsing for secret in post body
2018-09-05 16:46:04.103 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-05 16:46:04.103 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-05 16:46:04.132 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-05 16:46:04.139 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-05 16:46:04.139 -03:00 [DBG] API resource validation success
2018-09-05 16:46:04.142 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJD0OAFE9P:00000001",
  "TimeStamp": "2018-09-05T19:46:04Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:46:04.146 -03:00 [DBG] Introspection request validation started.
2018-09-05 16:46:04.148 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:04.164 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:04.174 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:04.179 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:04.179 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:04.182 -03:00 [DBG] Introspection request validation successful.
2018-09-05 16:46:04.187 -03:00 [DBG] Creating introspection response for active token.
2018-09-05 16:46:04.188 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-05 16:46:13.623 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:46:15.867 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:15.871 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:15.871 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:15.946 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:15.951 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:15.952 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:15.953 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-05 16:46:15.955 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-05 16:46:15.955 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-05 16:46:15.957 -03:00 [DBG] Start userinfo request
2018-09-05 16:46:15.959 -03:00 [DBG] Bearer token found in header
2018-09-05 16:46:15.961 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:15.993 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:16.019 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:16.032 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:16.033 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:16.037 -03:00 [DBG] Creating userinfo response
2018-09-05 16:46:16.038 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:16.045 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:16.051 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:16.051 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-05 16:46:16.052 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:16.058 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:16.065 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-05 16:46:16.065 -03:00 [DBG] End userinfo request
2018-09-05 16:46:16.957 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-05 16:46:16.960 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-05 16:46:16.961 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-05 16:46:16.963 -03:00 [DBG] Starting introspection request.
2018-09-05 16:46:16.966 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-05 16:46:16.968 -03:00 [DBG] Start parsing for secret in post body
2018-09-05 16:46:16.969 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-05 16:46:16.969 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-05 16:46:16.980 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-05 16:46:16.981 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-05 16:46:16.982 -03:00 [DBG] API resource validation success
2018-09-05 16:46:16.982 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJD0OAFE9P:00000002",
  "TimeStamp": "2018-09-05T19:46:16Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:46:16.986 -03:00 [DBG] Introspection request validation started.
2018-09-05 16:46:16.989 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:17.007 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:17.049 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:17.054 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:17.055 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:17.057 -03:00 [DBG] Introspection request validation successful.
2018-09-05 16:46:17.057 -03:00 [DBG] Creating introspection response for active token.
2018-09-05 16:46:17.057 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-05 16:46:28.638 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:46:29.757 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-05 16:46:29.758 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-05 16:46:29.758 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-05 16:46:29.759 -03:00 [DBG] Starting introspection request.
2018-09-05 16:46:29.760 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-05 16:46:29.760 -03:00 [DBG] Start parsing for secret in post body
2018-09-05 16:46:29.761 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-05 16:46:29.761 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-05 16:46:29.767 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-05 16:46:29.769 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-05 16:46:29.769 -03:00 [DBG] API resource validation success
2018-09-05 16:46:29.770 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJD0OAFE9P:00000003",
  "TimeStamp": "2018-09-05T19:46:29Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:46:29.771 -03:00 [DBG] Introspection request validation started.
2018-09-05 16:46:29.773 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:29.792 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:29.804 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:29.809 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:29.809 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:29.813 -03:00 [DBG] Introspection request validation successful.
2018-09-05 16:46:29.813 -03:00 [DBG] Creating introspection response for active token.
2018-09-05 16:46:29.814 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-05 16:46:34.646 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:34.650 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:34.655 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:34.659 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:34.660 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-05 16:46:34.661 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-05 16:46:34.662 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-05 16:46:34.663 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:34.664 -03:00 [DBG] Starting introspection request.
2018-09-05 16:46:34.667 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:34.669 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-05 16:46:34.670 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-05 16:46:34.670 -03:00 [DBG] Start parsing for secret in post body
2018-09-05 16:46:34.673 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-05 16:46:34.673 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-05 16:46:34.674 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-05 16:46:34.674 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-05 16:46:34.675 -03:00 [DBG] Start userinfo request
2018-09-05 16:46:34.676 -03:00 [DBG] Bearer token found in header
2018-09-05 16:46:34.681 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-05 16:46:34.682 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-05 16:46:34.682 -03:00 [DBG] API resource validation success
2018-09-05 16:46:34.683 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJD0OAFE9P:00000004",
  "TimeStamp": "2018-09-05T19:46:34Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:46:34.684 -03:00 [DBG] Introspection request validation started.
2018-09-05 16:46:34.688 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:34.688 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:34.714 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:34.715 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:34.731 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:34.732 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:34.738 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:34.739 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:34.742 -03:00 [DBG] Creating userinfo response
2018-09-05 16:46:34.744 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:34.744 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:34.745 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:34.746 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:34.748 -03:00 [DBG] Introspection request validation successful.
2018-09-05 16:46:34.749 -03:00 [DBG] Creating introspection response for active token.
2018-09-05 16:46:34.749 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:34.750 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-05 16:46:34.751 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-05 16:46:34.757 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:34.761 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:34.768 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-05 16:46:34.769 -03:00 [DBG] End userinfo request
2018-09-05 16:46:38.151 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-05 16:46:38.156 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-05 16:46:38.157 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-05 16:46:38.157 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-05 16:46:38.158 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-05 16:46:38.159 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-05 16:46:38.160 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-05 16:46:38.160 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-05 16:46:38.162 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-05 16:46:38.164 -03:00 [DBG] Starting introspection request.
2018-09-05 16:46:38.165 -03:00 [DBG] Start userinfo request
2018-09-05 16:46:38.166 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-05 16:46:38.166 -03:00 [DBG] Bearer token found in header
2018-09-05 16:46:38.167 -03:00 [DBG] Start parsing for secret in post body
2018-09-05 16:46:38.168 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-05 16:46:38.169 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-05 16:46:38.170 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:38.179 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-05 16:46:38.179 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-05 16:46:38.180 -03:00 [DBG] API resource validation success
2018-09-05 16:46:38.181 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJD0OAFE9P:00000005",
  "TimeStamp": "2018-09-05T19:46:38Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:46:38.182 -03:00 [DBG] Introspection request validation started.
2018-09-05 16:46:38.185 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:38.212 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:38.231 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:38.237 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:38.238 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:38.240 -03:00 [DBG] Creating userinfo response
2018-09-05 16:46:38.240 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:38.243 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:38.246 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:38.247 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-05 16:46:38.249 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-05 16:46:38.251 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:38.259 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-05 16:46:38.260 -03:00 [DBG] End userinfo request
2018-09-05 16:46:38.278 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:38.291 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:38.297 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:38.298 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:38.300 -03:00 [DBG] Introspection request validation successful.
2018-09-05 16:46:38.300 -03:00 [DBG] Creating introspection response for active token.
2018-09-05 16:46:38.301 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-05 16:46:38.667 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-05 16:46:38.670 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-05 16:46:38.671 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-05 16:46:38.676 -03:00 [DBG] Starting introspection request.
2018-09-05 16:46:38.676 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-05 16:46:38.677 -03:00 [DBG] Start parsing for secret in post body
2018-09-05 16:46:38.678 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-05 16:46:38.680 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-05 16:46:38.686 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-05 16:46:38.687 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-05 16:46:38.687 -03:00 [DBG] API resource validation success
2018-09-05 16:46:38.688 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJD0OAFE9P:00000006",
  "TimeStamp": "2018-09-05T19:46:38Z",
  "ProcessId": 14408,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 16:46:38.692 -03:00 [DBG] Introspection request validation started.
2018-09-05 16:46:38.694 -03:00 [DBG] gJSNJikIIVaTF+BkLK+Kk39/L5fUWOTRnAgi0ug8mmY= found in database: true
2018-09-05 16:46:38.713 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:38.725 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:38.730 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-05 16:46:38.731 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "73a2e8f892990aca3b83e8c930182045c3599cb16dc2f5460b54651f464941e1",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536176760,
    "exp": 1536180360,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
    "auth_time": 1536176758,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-05 16:46:38.734 -03:00 [DBG] Introspection request validation successful.
2018-09-05 16:46:38.734 -03:00 [DBG] Creating introspection response for active token.
2018-09-05 16:46:38.734 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-05 16:46:43.652 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:46:47.156 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:46:47.227 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:46:47.236 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:46:47.243 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:46:52.272 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:46:55.287 -03:00 [DBG] 2 persisted grants found for 2b00bcb8-b286-461c-989b-cd11a20fcd1e
2018-09-05 16:46:55.312 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 16:46:55.316 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 16:46:55.323 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 16:46:58.656 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:47:13.661 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:47:27.563 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:47:27.563 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 16:47:28.677 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:47:43.688 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:47:58.701 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:48:13.710 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:48:28.721 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:48:43.724 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:48:58.738 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:49:13.751 -03:00 [INF] Clearing 0 tokens
2018-09-05 16:49:28.771 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:03:59.916 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:03:59.969 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:30:29.595 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:30:29.668 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:30:31.285 -03:00 [ERR] An error occurred using the connection to database '' on server '10.10.0.6'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Access denied for user 'administrador'@'192.168.1.215' (using password: YES)
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 416
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2018-09-05 17:35:30.748 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:35:30.814 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:37:33.793 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:37:33.848 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:37:47.332 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:37:47.386 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:38:53.533 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:38:53.582 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:39:00.730 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 17:39:00.732 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 17:39:00.733 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 17:39:00.733 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 17:39:00.734 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 17:39:00.987 -03:00 [DBG] Starting token cleanup
2018-09-05 17:45:37.505 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:45:37.622 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:45:38.738 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 17:45:38.744 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 17:45:38.746 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 17:45:38.747 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 17:45:38.748 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 17:45:39.038 -03:00 [DBG] Starting token cleanup
2018-09-05 17:45:54.736 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:45:56.591 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-05 17:45:56.616 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 17:45:56.620 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-05 17:45:56.624 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-05 17:45:56.648 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-05 17:45:59.177 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-05 17:46:09.769 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:46:24.797 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:46:30.555 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 17:46:31.356 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 17:46:32.296 -03:00 [INF] Provider Facebook associated.
2018-09-05 17:46:32.660 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "3074463b-6e91-42f4-96a1-b8a8f1fec12a",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJE2A1E2R0:00000007",
  "TimeStamp": "2018-09-05T20:46:32Z",
  "ProcessId": 26196,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 17:46:32.677 -03:00 [DBG] Augmenting SignInContext
2018-09-05 17:46:32.681 -03:00 [DBG] Adding amr claim with value: external
2018-09-05 17:46:32.688 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 17:46:32.691 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 17:46:32.750 -03:00 [DBG] 0 persisted grants found for 3074463b-6e91-42f4-96a1-b8a8f1fec12a
2018-09-05 17:46:35.072 -03:00 [DBG] 0 persisted grants found for 3074463b-6e91-42f4-96a1-b8a8f1fec12a
2018-09-05 17:46:39.837 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:46:54.866 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:48:21.407 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 17:48:21.517 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 17:48:22.577 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 17:48:22.583 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 17:48:22.585 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 17:48:22.586 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 17:48:22.588 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 17:48:22.921 -03:00 [DBG] Starting token cleanup
2018-09-05 17:48:31.273 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-05 17:48:31.342 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-05 17:48:31.347 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 17:48:31.349 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-05 17:48:31.398 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "3074463b-6e91-42f4-96a1-b8a8f1fec12a",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGJE3NRK08E:00000002",
  "TimeStamp": "2018-09-05T20:48:31Z",
  "ProcessId": 4056,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 17:48:34.501 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 17:48:35.190 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 17:48:36.399 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "3074463b-6e91-42f4-96a1-b8a8f1fec12a",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJE3NRK08E:00000006",
  "TimeStamp": "2018-09-05T20:48:36Z",
  "ProcessId": 4056,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 17:48:36.414 -03:00 [DBG] Augmenting SignInContext
2018-09-05 17:48:36.418 -03:00 [DBG] Adding amr claim with value: external
2018-09-05 17:48:36.424 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 17:48:36.426 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 17:48:38.001 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:48:39.491 -03:00 [DBG] 0 persisted grants found for 3074463b-6e91-42f4-96a1-b8a8f1fec12a
2018-09-05 17:48:53.035 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:49:08.069 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:49:23.098 -03:00 [INF] Clearing 0 tokens
2018-09-05 17:49:38.133 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:01:58.136 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 18:01:58.241 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 18:02:00.668 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 18:02:00.683 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 18:02:00.685 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 18:02:00.687 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 18:02:00.696 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 18:02:00.963 -03:00 [DBG] Starting token cleanup
2018-09-05 18:02:16.709 -03:00 [INF] Clearing 1 tokens
2018-09-05 18:02:31.864 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:02:42.482 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-05 18:02:42.532 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-05 18:02:42.538 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 18:02:42.541 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-05 18:02:42.575 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "3074463b-6e91-42f4-96a1-b8a8f1fec12a",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGJEBKDGP3P:00000002",
  "TimeStamp": "2018-09-05T21:02:42Z",
  "ProcessId": 14376,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 18:02:46.872 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:03:01.888 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:03:16.893 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:03:31.905 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:03:46.920 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:04:01.939 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:04:16.954 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:04:31.968 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:04:46.987 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:05:02.005 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:05:17.009 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:05:17.295 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-05 18:05:18.077 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-05 18:05:18.592 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "2b00bcb8-b286-461c-989b-cd11a20fcd1e",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJEBKDGP3P:00000006",
  "TimeStamp": "2018-09-05T21:05:18Z",
  "ProcessId": 14376,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-05 18:05:18.604 -03:00 [DBG] Augmenting SignInContext
2018-09-05 18:05:18.609 -03:00 [DBG] Adding amr claim with value: external
2018-09-05 18:05:18.614 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-05 18:05:18.618 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-05 18:05:22.648 -03:00 [DBG] 1 persisted grants found for 2b00bcb8-b286-461c-989b-cd11a20fcd1e
2018-09-05 18:05:23.036 -03:00 [DBG] UserManagementUI found in database: true
2018-09-05 18:05:23.084 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-05 18:05:23.219 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-05 18:05:32.014 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:05:47.032 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:06:02.049 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:06:17.069 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:06:32.089 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:06:47.094 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:07:02.113 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:07:17.127 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:07:32.132 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:07:47.152 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:08:02.183 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:08:17.209 -03:00 [INF] Clearing 0 tokens
2018-09-05 18:08:32.223 -03:00 [INF] Clearing 0 tokens
2018-09-05 21:48:23.666 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 21:48:23.786 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:00:56.982 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:00:57.101 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:02:16.433 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:02:16.570 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:03:00.603 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:03:00.705 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:05:28.302 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:05:29.268 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:05:45.569 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:05:46.200 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:27:36.969 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:27:38.680 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:28:06.924 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:28:14.164 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:28:19.847 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 22:28:19.863 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 22:28:19.865 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 22:28:19.867 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 22:28:19.870 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 22:28:19.971 -03:00 [DBG] Starting token cleanup
2018-09-05 22:28:41.649 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:28:41.755 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:28:43.900 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 22:28:43.915 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 22:28:43.918 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 22:28:43.920 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 22:28:43.923 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 22:28:44.030 -03:00 [DBG] Starting token cleanup
2018-09-05 22:28:59.637 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:28:59.697 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:28:59.718 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:29:14.735 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:29:14.748 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:29:14.780 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:29:29.790 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:29:29.802 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:29:29.821 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:29:44.833 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:29:44.847 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:29:44.870 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:29:59.897 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:29:59.914 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:29:59.942 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:30:14.954 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:30:14.967 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:30:14.988 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:30:29.999 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:30:30.021 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:30:30.070 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:30:45.098 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:30:45.114 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:30:45.142 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:31:00.156 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:31:00.174 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:31:00.206 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:31:15.227 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:31:15.242 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:31:15.273 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:31:30.285 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:31:30.298 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:31:30.323 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:31:45.334 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:31:45.350 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:31:45.382 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:32:00.396 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:32:00.411 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:32:00.443 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:32:15.470 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:32:15.496 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:32:15.537 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:32:30.560 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:32:30.579 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:32:30.610 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:32:45.623 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:32:45.642 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:32:45.668 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:33:00.692 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:33:00.713 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:33:00.746 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:33:15.808 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:33:15.832 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:33:15.859 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:33:30.878 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:33:30.890 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:33:30.917 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:33:45.927 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:33:45.939 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:33:45.960 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:34:00.977 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:34:00.987 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:34:01.011 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:34:16.035 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:34:16.048 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:34:16.069 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:34:31.091 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:34:31.105 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:34:31.126 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:34:33.892 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 22:34:33.928 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 22:34:33.967 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-05 22:34:46.136 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:34:46.151 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:34:46.195 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:34:49.397 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 22:34:49.811 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:34:49.826 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:34:49.852 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-05 22:35:01.209 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:35:01.221 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:35:01.242 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:35:16.262 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:35:16.275 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:35:16.303 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-05 22:35:27.106 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-05 22:35:27.216 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-05 22:35:29.537 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-05 22:35:29.551 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-05 22:35:29.554 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-05 22:35:29.556 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-05 22:35:29.558 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-05 22:35:29.663 -03:00 [DBG] Starting token cleanup
2018-09-05 22:35:34.066 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-05 22:35:34.992 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-05 22:35:35.054 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-05 22:35:35.074 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-05 22:35:41.039 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-05 22:35:41.050 -03:00 [DBG] Stopping token cleanup
2018-09-06 00:06:34.180 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 00:06:34.361 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 00:06:36.992 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-06 00:06:37.006 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-06 00:06:37.009 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-06 00:06:37.011 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-06 00:06:37.013 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-06 00:06:37.171 -03:00 [DBG] Starting token cleanup
2018-09-06 00:06:42.277 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-06 00:06:42.516 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-06 00:06:42.530 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-06 00:06:42.540 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-09-06 00:06:48.883 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:48.902 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:51.554 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:51.559 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:51.594 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-06 00:06:51.601 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:51.603 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:52.872 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-06 00:06:52.908 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-06 00:06:52.935 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-06 00:06:56.118 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:56.123 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:56.143 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 00:06:57.018 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 00:06:57.032 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:57.036 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:06:57.279 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2018-09-06 00:06:57.310 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2018-09-06 00:06:57.343 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2018-09-06 00:06:57.582 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByLoginAsync(String loginProvider, String providerKey, CancellationToken cancellationToken)
   at Jp.UI.SSO.Controllers.Account.AccountController.FindUserFromExternalProviderAsync(AuthenticateResult result) in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 495
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-06 00:07:02.323 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:02.328 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.165 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.165 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.172 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.175 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.175 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.180 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.188 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:04.194 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-06 00:07:07.980 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-06 00:07:08.000 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-06 00:07:08.029 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-06 00:07:12.190 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 00:07:12.926 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 00:07:12.956 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2018-09-06 00:07:12.970 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2018-09-06 00:07:13.001 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2018-09-06 00:07:13.176 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByLoginAsync(String loginProvider, String providerKey, CancellationToken cancellationToken)
   at Jp.UI.SSO.Controllers.Account.AccountController.FindUserFromExternalProviderAsync(AuthenticateResult result) in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 495
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-06 00:07:23.050 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2018-09-06 00:07:23.064 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at MySql.Data.MySqlClient.MySqlConnection.Open() in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 161
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-09-06 00:07:23.088 -03:00 [ERR] Exception clearing tokens: Unknown database 'JpProject'
2018-09-06 00:07:23.170 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-06 00:07:24.716 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 00:07:25.274 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 00:07:25.299 -03:00 [ERR] An error occurred using the connection to database 'JpProject' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2018-09-06 00:07:25.318 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2018-09-06 00:07:25.355 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'Jp.Infra.CrossCutting.Identity.Context.ApplicationDbContext'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2018-09-06 00:07:25.542 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySql.Data.MySqlClient.MySqlException (0x80004005): Unknown database 'JpProject'
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 112
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ConnectionPool.cs:line 141
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 405
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByLoginAsync(String loginProvider, String providerKey, CancellationToken cancellationToken)
   at Jp.UI.SSO.Controllers.Account.AccountController.FindUserFromExternalProviderAsync(AuthenticateResult result) in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 495
   at Jp.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JP.Project\src\Frontend\Jp.UI.SSO\Controllers\Account\AccountController.cs:line 206
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-09-06 00:08:05.419 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 00:08:05.520 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 00:08:11.763 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-06 00:08:11.783 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-06 00:08:11.786 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-06 00:08:11.788 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-06 00:08:11.794 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-06 00:08:11.926 -03:00 [DBG] Starting token cleanup
2018-09-06 00:08:18.004 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-09-06 00:08:18.973 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 00:08:19.642 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 00:08:35.226 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:08:51.597 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:09:01.077 -03:00 [INF] Provider Facebook associated.
2018-09-06 00:09:05.078 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "09489b68-ec88-4068-be3a-5619093e81e6",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJKNU2GN5E:00000008",
  "TimeStamp": "2018-09-06T03:09:05Z",
  "ProcessId": 15564,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:09:05.091 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:09:05.096 -03:00 [DBG] Adding amr claim with value: external
2018-09-06 00:09:05.103 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:09:05.111 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 00:09:05.157 -03:00 [DBG] 0 persisted grants found for 09489b68-ec88-4068-be3a-5619093e81e6
2018-09-06 00:09:06.613 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:09:14.066 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:09:14.171 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:09:14.175 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:09:14.181 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:09:14.193 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:09:14.206 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:09:14.221 -03:00 [DBG] Start discovery request
2018-09-06 00:09:14.402 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:09:14.406 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:09:14.409 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:09:14.413 -03:00 [DBG] Start discovery request
2018-09-06 00:09:14.473 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:09:14.473 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:09:14.502 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:09:14.509 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:09:14.512 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:09:14.516 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:09:14.519 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:09:14.522 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:09:14.528 -03:00 [DBG] Start key discovery request
2018-09-06 00:09:14.533 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:09:14.536 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:09:14.539 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:09:14.542 -03:00 [DBG] Start key discovery request
2018-09-06 00:09:14.588 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:09:14.593 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:09:14.596 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:09:14.604 -03:00 [DBG] Starting introspection request.
2018-09-06 00:09:14.614 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:09:14.619 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:09:14.632 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:09:14.636 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:09:14.671 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:09:14.680 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:09:14.684 -03:00 [DBG] API resource validation success
2018-09-06 00:09:14.689 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKNU2GN5I:00000001",
  "TimeStamp": "2018-09-06T03:09:14Z",
  "ProcessId": 15564,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:09:14.702 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:09:14.725 -03:00 [DBG] 6fKi/vnxjZ4gZluT9Vs6B8pHrJ3SHr29ySMFaLcpCZE= found in database: false
2018-09-06 00:09:14.729 -03:00 [DBG] reference_token grant with value: d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3 not found in store.
2018-09-06 00:09:14.735 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3"
}
2018-09-06 00:09:14.742 -03:00 [DBG] Token is invalid.
2018-09-06 00:09:14.747 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:09:14.750 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:09:21.635 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:09:36.666 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:10:10.985 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 00:10:11.125 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 00:10:14.827 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-06 00:10:14.843 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-06 00:10:14.846 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-06 00:10:14.849 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-06 00:10:14.855 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-06 00:10:14.970 -03:00 [DBG] Starting token cleanup
2018-09-06 00:10:30.039 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:10:35.625 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:10:35.757 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:10:35.765 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:10:35.817 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:10:35.826 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:10:35.832 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:10:35.842 -03:00 [DBG] Start discovery request
2018-09-06 00:10:35.905 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:10:35.910 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:10:35.915 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:10:35.919 -03:00 [DBG] Start discovery request
2018-09-06 00:10:36.198 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:10:36.198 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:10:36.274 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:10:36.274 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:10:36.282 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:10:36.282 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:10:36.287 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:10:36.289 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:10:36.291 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:10:36.295 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:10:36.298 -03:00 [DBG] Start key discovery request
2018-09-06 00:10:36.300 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:10:36.305 -03:00 [DBG] Start key discovery request
2018-09-06 00:10:36.367 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:10:36.373 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:10:36.376 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:10:36.384 -03:00 [DBG] Starting introspection request.
2018-09-06 00:10:36.395 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:10:36.400 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:10:36.416 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:10:36.419 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:10:36.455 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:10:36.465 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:10:36.467 -03:00 [DBG] API resource validation success
2018-09-06 00:10:36.479 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKP7U8RQP:00000001",
  "TimeStamp": "2018-09-06T03:10:36Z",
  "ProcessId": 25480,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:10:36.487 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:10:36.508 -03:00 [DBG] 6fKi/vnxjZ4gZluT9Vs6B8pHrJ3SHr29ySMFaLcpCZE= found in database: false
2018-09-06 00:10:36.512 -03:00 [DBG] reference_token grant with value: d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3 not found in store.
2018-09-06 00:10:36.518 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3"
}
2018-09-06 00:10:36.522 -03:00 [DBG] Token is invalid.
2018-09-06 00:10:36.527 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:10:36.530 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:10:59.944 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:11:15.756 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:11:30.773 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:11:34.633 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:11:34.640 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:34.644 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:34.647 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:11:34.650 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:11:34.653 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:11:34.656 -03:00 [DBG] Start discovery request
2018-09-06 00:11:34.675 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:11:34.695 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:11:34.703 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:34.709 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:11:34.710 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:34.715 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:11:34.715 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:11:34.729 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:11:34.720 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:11:34.735 -03:00 [DBG] Starting introspection request.
2018-09-06 00:11:34.739 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:11:34.742 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:11:34.750 -03:00 [DBG] Start key discovery request
2018-09-06 00:11:34.752 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:11:34.764 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:11:34.768 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:11:34.785 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:11:34.789 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:11:34.792 -03:00 [DBG] API resource validation success
2018-09-06 00:11:34.796 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKP7U8RQP:00000002",
  "TimeStamp": "2018-09-06T03:11:34Z",
  "ProcessId": 25480,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:11:34.801 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:11:34.806 -03:00 [DBG] 6fKi/vnxjZ4gZluT9Vs6B8pHrJ3SHr29ySMFaLcpCZE= found in database: false
2018-09-06 00:11:34.812 -03:00 [DBG] reference_token grant with value: d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3 not found in store.
2018-09-06 00:11:34.816 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3"
}
2018-09-06 00:11:34.819 -03:00 [DBG] Token is invalid.
2018-09-06 00:11:34.821 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:11:34.823 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:11:45.779 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:11:48.685 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:11:48.693 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:48.697 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:48.700 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:11:48.704 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:11:48.707 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:11:48.711 -03:00 [DBG] Start discovery request
2018-09-06 00:11:48.728 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:11:48.780 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:11:48.783 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:11:48.788 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:11:48.789 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:48.795 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:11:48.797 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:48.800 -03:00 [DBG] Starting introspection request.
2018-09-06 00:11:48.801 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:11:48.805 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:11:48.808 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:11:48.809 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:11:48.816 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:11:48.820 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:11:48.822 -03:00 [DBG] Start key discovery request
2018-09-06 00:11:48.827 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:11:48.849 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:11:48.853 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:11:48.855 -03:00 [DBG] API resource validation success
2018-09-06 00:11:48.859 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKP7U8RQP:00000003",
  "TimeStamp": "2018-09-06T03:11:48Z",
  "ProcessId": 25480,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:11:48.865 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:11:48.869 -03:00 [DBG] 6fKi/vnxjZ4gZluT9Vs6B8pHrJ3SHr29ySMFaLcpCZE= found in database: false
2018-09-06 00:11:48.873 -03:00 [DBG] reference_token grant with value: d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3 not found in store.
2018-09-06 00:11:48.876 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "d0f588ad8d818feab9a71c7e6b2855ba0d0d7aabab430fc8a2f559470f3ef6b3"
}
2018-09-06 00:11:48.878 -03:00 [DBG] Token is invalid.
2018-09-06 00:11:48.882 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:11:48.884 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:11:55.347 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:11:55.358 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:55.363 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:55.367 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:11:55.373 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:11:55.377 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:11:55.381 -03:00 [DBG] Start discovery request
2018-09-06 00:11:55.400 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:11:55.433 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:11:55.442 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:55.446 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:55.450 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:11:55.454 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:11:55.457 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:11:55.461 -03:00 [DBG] Start key discovery request
2018-09-06 00:11:55.507 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 00:11:55.513 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 00:11:55.516 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 00:11:55.523 -03:00 [DBG] Start authorize request
2018-09-06 00:11:55.531 -03:00 [DBG] User in authorize request: 09489b68-ec88-4068-be3a-5619093e81e6
2018-09-06 00:11:55.538 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:11:55.728 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:11:55.769 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:55.815 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:55.832 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:55.848 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:55.860 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:11:55.871 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "09489b68-ec88-4068-be3a-5619093e81e6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5",
  "Nonce": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5",
  "SessionId": "dbc0305e888e58e2cc2f8c290c226f2e",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5"
  }
}
2018-09-06 00:11:55.929 -03:00 [DBG] WD1n83zB4FKgxNoocT0OUShjUpYCk8qzoFY9YPCDIMQ= found in database: false
2018-09-06 00:11:55.933 -03:00 [DBG] user_consent grant with value: UserManagementUI|09489b68-ec88-4068-be3a-5619093e81e6 not found in store.
2018-09-06 00:11:55.936 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 00:11:55.939 -03:00 [INF] Showing consent: User has not yet consented
2018-09-06 00:11:56.101 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:11:56.119 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:11:56.125 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:56.134 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:56.139 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:56.149 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:56.152 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:11:56.169 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:11:56.174 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:56.188 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:58.132 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:11:58.158 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:11:58.177 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:11:58.183 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:58.193 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:58.198 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:58.209 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:58.212 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:11:58.237 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 00:11:58.242 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 00:11:58.246 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 00:11:58.254 -03:00 [DBG] Start authorize callback request
2018-09-06 00:11:58.261 -03:00 [DBG] User in authorize request: 09489b68-ec88-4068-be3a-5619093e81e6
2018-09-06 00:11:58.265 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:11:58.285 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:11:58.291 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:58.303 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:58.309 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:11:58.325 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:11:58.333 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:11:58.337 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "09489b68-ec88-4068-be3a-5619093e81e6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5",
  "Nonce": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5",
  "SessionId": "dbc0305e888e58e2cc2f8c290c226f2e",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5"
  }
}
2018-09-06 00:11:58.362 -03:00 [DBG] WD1n83zB4FKgxNoocT0OUShjUpYCk8qzoFY9YPCDIMQ= found in database: false
2018-09-06 00:11:58.367 -03:00 [DBG] user_consent grant with value: UserManagementUI|09489b68-ec88-4068-be3a-5619093e81e6 not found in store.
2018-09-06 00:11:58.372 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 00:11:58.380 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 00:11:58.386 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 00:11:58.395 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 09489b68-ec88-4068-be3a-5619093e81e6
2018-09-06 00:11:58.414 -03:00 [DBG] WD1n83zB4FKgxNoocT0OUShjUpYCk8qzoFY9YPCDIMQ= not found in database
2018-09-06 00:11:58.594 -03:00 [DBG] Creating Implicit Flow response.
2018-09-06 00:11:58.606 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-06 00:11:58.609 -03:00 [DBG] Getting claims for access token for subject: 09489b68-ec88-4068-be3a-5619093e81e6
2018-09-06 00:11:58.755 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= not found in database
2018-09-06 00:11:58.803 -03:00 [DBG] Getting claims for identity token for subject: 09489b68-ec88-4068-be3a-5619093e81e6 and client: UserManagementUI
2018-09-06 00:11:58.807 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-06 00:11:58.851 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "09489b68-ec88-4068-be3a-5619093e81e6",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****f1cA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0eb3"
    }
  ],
  "ActivityId": "0HLGJKP7U8RQR:00000005",
  "TimeStamp": "2018-09-06T03:11:58Z",
  "ProcessId": 25480,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:11:58.860 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "09489b68-ec88-4068-be3a-5619093e81e6",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "z7CgSdOKXlbJqn9J2WawdbXwGnejZOIpG9zhEww5",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-06 00:11:58.880 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:11:58.891 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:11:59.679 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:11:59.685 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:59.688 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:59.690 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:11:59.693 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:11:59.695 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:11:59.698 -03:00 [DBG] Start discovery request
2018-09-06 00:11:59.716 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:11:59.757 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:11:59.767 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:11:59.772 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:11:59.776 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:11:59.781 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:11:59.786 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:11:59.790 -03:00 [DBG] Start key discovery request
2018-09-06 00:12:00.798 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:12:00.885 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:12:00.893 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:12:00.897 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:12:00.959 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:12:00.966 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:12:00.970 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:12:00.973 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:12:00.979 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:12:00.983 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:12:00.993 -03:00 [DBG] Start userinfo request
2018-09-06 00:12:00.998 -03:00 [DBG] Bearer token found in header
2018-09-06 00:12:01.020 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: true
2018-09-06 00:12:01.048 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:12:01.065 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:12:01.076 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:12:01.080 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203518,
    "exp": 1536207118,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "09489b68-ec88-4068-be3a-5619093e81e6",
    "auth_time": 1536203345,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:12:01.092 -03:00 [DBG] Creating userinfo response
2018-09-06 00:12:01.097 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:12:01.102 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:12:01.109 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:12:01.113 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:12:01.116 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:12:01.121 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:12:01.134 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:12:01.138 -03:00 [DBG] End userinfo request
2018-09-06 00:12:19.211 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 00:12:19.330 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 00:12:25.800 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-06 00:12:25.816 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-06 00:12:25.819 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-06 00:12:25.821 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-06 00:12:25.825 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-06 00:12:25.937 -03:00 [DBG] Starting token cleanup
2018-09-06 00:12:41.038 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:12:42.302 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:12:42.360 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-06 00:12:42.366 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 00:12:42.370 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-06 00:12:42.384 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "09489b68-ec88-4068-be3a-5619093e81e6",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGJKQDCU2L6:00000002",
  "TimeStamp": "2018-09-06T03:12:42Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:12:42.461 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-09-06 00:12:42.473 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-09-06 00:12:42.478 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-09-06 00:12:42.488 -03:00 [DBG] Processing signout callback request
2018-09-06 00:12:42.831 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:12:42.836 -03:00 [DBG] No client front-channel logout URLs
2018-09-06 00:12:42.838 -03:00 [DBG] No client back-channel logout URLs
2018-09-06 00:12:42.841 -03:00 [INF] Successful signout callback.
2018-09-06 00:12:42.844 -03:00 [DBG] No client front-channel iframe urls
2018-09-06 00:12:42.846 -03:00 [DBG] No client back-channel iframe urls
2018-09-06 00:12:44.801 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 00:12:45.537 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 00:12:53.783 -03:00 [INF] Provider Facebook associated.
2018-09-06 00:12:53.940 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJKQDCU2L6:00000007",
  "TimeStamp": "2018-09-06T03:12:53Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:12:53.951 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:12:53.956 -03:00 [DBG] Adding amr claim with value: external
2018-09-06 00:12:53.961 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:12:53.964 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 00:12:56.064 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:12:58.900 -03:00 [DBG] 0 persisted grants found for 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:13:11.084 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:13:26.114 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:13:41.149 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:13:56.172 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:14:00.524 -03:00 [DBG] 0 persisted grants found for 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:14:07.379 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:14:07.411 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:07.416 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:07.420 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:14:07.426 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:14:07.429 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:14:07.435 -03:00 [DBG] Start discovery request
2018-09-06 00:14:07.609 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:14:07.635 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:14:07.646 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:07.650 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:07.654 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:14:07.658 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:14:07.663 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:14:07.669 -03:00 [DBG] Start key discovery request
2018-09-06 00:14:08.443 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:08.451 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:08.457 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:08.507 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:08.515 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:08.519 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:08.524 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:14:08.532 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:14:08.536 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:14:08.545 -03:00 [DBG] Start userinfo request
2018-09-06 00:14:08.551 -03:00 [DBG] Bearer token found in header
2018-09-06 00:14:08.575 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:08.579 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:08.584 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:10.487 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:10.501 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:10.505 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:10.509 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:14:10.517 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:14:10.522 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:14:10.527 -03:00 [DBG] Start userinfo request
2018-09-06 00:14:10.531 -03:00 [DBG] Bearer token found in header
2018-09-06 00:14:10.537 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:10.541 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:10.545 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:10.774 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:14:10.778 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:14:10.781 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:14:10.785 -03:00 [DBG] Start discovery request
2018-09-06 00:14:10.799 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:14:10.827 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:14:10.832 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:14:10.835 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:14:10.838 -03:00 [DBG] Start key discovery request
2018-09-06 00:14:10.866 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:14:10.870 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:14:10.873 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:14:10.881 -03:00 [DBG] Starting introspection request.
2018-09-06 00:14:10.891 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:14:10.897 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:14:10.900 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:14:10.903 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:14:10.933 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:14:10.942 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:14:10.946 -03:00 [DBG] API resource validation success
2018-09-06 00:14:10.950 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000001",
  "TimeStamp": "2018-09-06T03:14:10Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:14:10.957 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:14:10.961 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:10.964 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:10.967 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:10.970 -03:00 [DBG] Token is invalid.
2018-09-06 00:14:10.974 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:14:10.978 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:14:11.190 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:14:25.857 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:14:25.869 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:25.873 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:25.877 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:14:25.881 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:14:25.886 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:14:25.892 -03:00 [DBG] Start discovery request
2018-09-06 00:14:25.910 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:14:26.066 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:14:26.072 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:26.076 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:26.079 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:14:26.083 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:14:26.086 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:14:26.089 -03:00 [DBG] Start key discovery request
2018-09-06 00:14:26.132 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:26.140 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:26.144 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:26.199 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:14:26.203 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:26.234 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:26.236 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:14:26.241 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:26.265 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:14:26.265 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:14:26.269 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:14:26.272 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:14:26.273 -03:00 [DBG] Starting introspection request.
2018-09-06 00:14:26.277 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:14:26.278 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:14:26.282 -03:00 [DBG] Start userinfo request
2018-09-06 00:14:26.282 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:14:26.287 -03:00 [DBG] Bearer token found in header
2018-09-06 00:14:26.289 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:14:26.292 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:14:26.293 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:26.298 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:26.302 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:26.307 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:14:26.312 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:14:26.316 -03:00 [DBG] API resource validation success
2018-09-06 00:14:26.319 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000002",
  "TimeStamp": "2018-09-06T03:14:26Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:14:26.323 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:14:26.327 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:26.330 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:26.333 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:26.336 -03:00 [DBG] Token is invalid.
2018-09-06 00:14:26.338 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:14:26.340 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:14:30.576 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:14:30.585 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:14:30.591 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:14:30.598 -03:00 [DBG] Starting introspection request.
2018-09-06 00:14:30.602 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:14:30.604 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:14:30.607 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:14:30.610 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:14:30.625 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:14:30.628 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:14:30.630 -03:00 [DBG] API resource validation success
2018-09-06 00:14:30.634 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000003",
  "TimeStamp": "2018-09-06T03:14:30Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:14:30.638 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:14:30.642 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:30.645 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:30.648 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:30.650 -03:00 [DBG] Token is invalid.
2018-09-06 00:14:30.653 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:14:30.655 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:14:32.664 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:32.678 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:32.687 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:32.695 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:32.699 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:14:32.703 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:14:32.704 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:32.710 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:14:32.712 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:32.713 -03:00 [DBG] Starting introspection request.
2018-09-06 00:14:32.716 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:14:32.718 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:14:32.721 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:14:32.721 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:14:32.725 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:14:32.726 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:14:32.729 -03:00 [DBG] Start userinfo request
2018-09-06 00:14:32.730 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:14:32.733 -03:00 [DBG] Bearer token found in header
2018-09-06 00:14:32.741 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:32.743 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:14:32.745 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:32.746 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:14:32.751 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:32.752 -03:00 [DBG] API resource validation success
2018-09-06 00:14:32.759 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000004",
  "TimeStamp": "2018-09-06T03:14:32Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:14:32.764 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:14:32.769 -03:00 [DBG] kPpsgRJVURlRSCbIfaMHZnpVv4lwF8AxaBCVH2ZWRgY= found in database: false
2018-09-06 00:14:32.773 -03:00 [DBG] reference_token grant with value: 1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3 not found in store.
2018-09-06 00:14:32.775 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "1e74f00461e934e8eb7fb1666b834d537585f19569247db3a8e7b7919ddb0eb3"
}
2018-09-06 00:14:32.778 -03:00 [DBG] Token is invalid.
2018-09-06 00:14:32.780 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:14:32.782 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:14:41.221 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:14:46.959 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:14:46.966 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:46.970 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:46.991 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:14:47.002 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:14:47.012 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:14:47.031 -03:00 [DBG] Start discovery request
2018-09-06 00:14:47.064 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:14:47.351 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:14:47.357 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:47.360 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:47.363 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:14:47.366 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:14:47.369 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:14:47.373 -03:00 [DBG] Start key discovery request
2018-09-06 00:14:52.345 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:14:52.352 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:52.355 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:52.358 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:14:52.362 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:14:52.366 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:14:52.370 -03:00 [DBG] Start discovery request
2018-09-06 00:14:52.389 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:14:52.408 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:14:52.415 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:52.420 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:52.427 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:14:52.434 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:14:52.439 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:14:52.444 -03:00 [DBG] Start key discovery request
2018-09-06 00:14:52.485 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 00:14:52.496 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 00:14:52.501 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 00:14:52.509 -03:00 [DBG] Start authorize request
2018-09-06 00:14:52.516 -03:00 [DBG] No user present in authorize request
2018-09-06 00:14:52.527 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:14:52.556 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:52.610 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:52.666 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:52.684 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:52.698 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:52.709 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:14:52.720 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
  "Nonce": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8"
  }
}
2018-09-06 00:14:52.735 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 00:14:52.748 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:14:52.771 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:52.779 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:52.791 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:52.797 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:52.807 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:52.810 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:14:52.828 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:54.697 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 00:14:55.335 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 00:14:55.373 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJKQDCU2L6:0000000F",
  "TimeStamp": "2018-09-06T03:14:55Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:14:55.378 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:14:55.381 -03:00 [DBG] Adding amr claim with value: external
2018-09-06 00:14:55.384 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:14:55.388 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 00:14:55.396 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 00:14:55.400 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 00:14:55.404 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 00:14:55.414 -03:00 [DBG] Start authorize callback request
2018-09-06 00:14:55.420 -03:00 [DBG] User in authorize request: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:14:55.424 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:14:55.446 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:55.454 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:55.466 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:55.475 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:55.488 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:55.492 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:14:55.495 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
  "Nonce": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
  "SessionId": "665215ef39a5278d887a034b72717868",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8"
  }
}
2018-09-06 00:14:55.529 -03:00 [DBG] PtkdcXdo84rEfC85311ciFKuxQWiVrQDZ0zU+7UFphY= found in database: false
2018-09-06 00:14:55.532 -03:00 [DBG] user_consent grant with value: UserManagementUI|0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0 not found in store.
2018-09-06 00:14:55.537 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 00:14:55.539 -03:00 [INF] Showing consent: User has not yet consented
2018-09-06 00:14:55.553 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:14:55.569 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:55.575 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:55.586 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:55.591 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:55.601 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:55.604 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:14:55.620 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:55.626 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:55.635 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:56.241 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:14:57.234 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:14:57.250 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:14:57.267 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:57.274 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:57.284 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:57.289 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:57.302 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:57.305 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:14:57.320 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 00:14:57.323 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 00:14:57.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 00:14:57.330 -03:00 [DBG] Start authorize callback request
2018-09-06 00:14:57.334 -03:00 [DBG] User in authorize request: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:14:57.337 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:14:57.361 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:57.370 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:57.382 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:57.390 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:57.403 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:14:57.406 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:14:57.410 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
  "Nonce": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
  "SessionId": "665215ef39a5278d887a034b72717868",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8"
  }
}
2018-09-06 00:14:57.428 -03:00 [DBG] PtkdcXdo84rEfC85311ciFKuxQWiVrQDZ0zU+7UFphY= found in database: false
2018-09-06 00:14:57.432 -03:00 [DBG] user_consent grant with value: UserManagementUI|0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0 not found in store.
2018-09-06 00:14:57.436 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 00:14:57.443 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 00:14:57.448 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 00:14:57.455 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:14:57.471 -03:00 [DBG] PtkdcXdo84rEfC85311ciFKuxQWiVrQDZ0zU+7UFphY= not found in database
2018-09-06 00:14:57.514 -03:00 [DBG] Creating Implicit Flow response.
2018-09-06 00:14:57.526 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-06 00:14:57.529 -03:00 [DBG] Getting claims for access token for subject: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:14:57.569 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= not found in database
2018-09-06 00:14:57.596 -03:00 [DBG] Getting claims for identity token for subject: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0 and client: UserManagementUI
2018-09-06 00:14:57.599 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-06 00:14:57.639 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****v4vw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0f1c"
    }
  ],
  "ActivityId": "0HLGJKQDCU2L6:00000013",
  "TimeStamp": "2018-09-06T03:14:57Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:14:57.648 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "5NJVSFBv74Ie3UtVR468qMf5AYo3oCTNpYxxkTZ8",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-06 00:14:57.664 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:14:57.666 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:14:58.505 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:14:58.511 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:58.514 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:58.517 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:14:58.522 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:14:58.525 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:14:58.529 -03:00 [DBG] Start discovery request
2018-09-06 00:14:58.547 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:14:58.591 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:14:58.600 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:58.605 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:58.609 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:14:58.613 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:14:58.618 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:14:58.622 -03:00 [DBG] Start key discovery request
2018-09-06 00:14:59.713 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:59.722 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:59.726 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:59.783 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:14:59.790 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:14:59.793 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:14:59.796 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:14:59.799 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:14:59.803 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:14:59.806 -03:00 [DBG] Start userinfo request
2018-09-06 00:14:59.809 -03:00 [DBG] Bearer token found in header
2018-09-06 00:14:59.821 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:14:59.851 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:59.871 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:14:59.881 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:14:59.886 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:14:59.902 -03:00 [DBG] Creating userinfo response
2018-09-06 00:14:59.908 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:14:59.913 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:14:59.921 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:59.925 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:14:59.928 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:14:59.934 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:14:59.949 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:14:59.952 -03:00 [DBG] End userinfo request
2018-09-06 00:15:01.391 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:15:01.402 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:15:01.408 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:15:01.413 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:15:01.421 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:15:01.421 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:15:01.427 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:15:01.435 -03:00 [DBG] Start userinfo request
2018-09-06 00:15:01.435 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:15:01.439 -03:00 [DBG] Bearer token found in header
2018-09-06 00:15:01.442 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:15:01.445 -03:00 [DBG] Starting introspection request.
2018-09-06 00:15:01.447 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:01.450 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:15:01.453 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:15:01.455 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:15:01.458 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:15:01.467 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:15:01.470 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:15:01.473 -03:00 [DBG] API resource validation success
2018-09-06 00:15:01.475 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000005",
  "TimeStamp": "2018-09-06T03:15:01Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:15:01.479 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:15:01.484 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:01.486 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:01.526 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:01.535 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:01.536 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:01.541 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:01.546 -03:00 [DBG] Creating userinfo response
2018-09-06 00:15:01.549 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:01.553 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:01.583 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:15:01.603 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:15:01.610 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:01.613 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:01.626 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:01.627 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:15:01.631 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:01.639 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:15:01.645 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:15:01.648 -03:00 [DBG] End userinfo request
2018-09-06 00:15:01.653 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:15:01.660 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:15:09.325 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:15:09.329 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:15:09.332 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:15:09.335 -03:00 [DBG] Starting introspection request.
2018-09-06 00:15:09.337 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:15:09.339 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:15:09.341 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:15:09.343 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:15:09.353 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:15:09.356 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:15:09.358 -03:00 [DBG] API resource validation success
2018-09-06 00:15:09.360 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000006",
  "TimeStamp": "2018-09-06T03:15:09Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:15:09.363 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:15:09.368 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:09.388 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:09.404 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:09.412 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:09.414 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:09.420 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:15:09.423 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:15:09.425 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:15:11.106 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:15:11.120 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:15:11.125 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:15:11.126 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:15:11.134 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:15:11.141 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:15:11.143 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:15:11.148 -03:00 [DBG] Starting introspection request.
2018-09-06 00:15:11.149 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:15:11.153 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:15:11.157 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:15:11.158 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:15:11.162 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:15:11.164 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:15:11.165 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:15:11.168 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:15:11.170 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:15:11.174 -03:00 [DBG] Start userinfo request
2018-09-06 00:15:11.176 -03:00 [DBG] Bearer token found in header
2018-09-06 00:15:11.180 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:11.183 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:15:11.186 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:15:11.188 -03:00 [DBG] API resource validation success
2018-09-06 00:15:11.190 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000007",
  "TimeStamp": "2018-09-06T03:15:11Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:15:11.195 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:15:11.222 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:11.253 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:11.269 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:15:11.274 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:11.285 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:11.295 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:11.301 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:11.308 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:11.310 -03:00 [DBG] Creating userinfo response
2018-09-06 00:15:11.320 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:11.326 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:11.329 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:11.332 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:11.341 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:15:11.342 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:15:11.351 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:15:11.352 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:15:11.358 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:11.359 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:15:11.371 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:15:11.387 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:15:11.391 -03:00 [DBG] End userinfo request
2018-09-06 00:15:12.774 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:15:12.780 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:15:12.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:15:12.796 -03:00 [DBG] Starting introspection request.
2018-09-06 00:15:12.800 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:15:12.803 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:15:12.806 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:15:12.809 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:15:12.819 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:15:12.822 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:15:12.824 -03:00 [DBG] API resource validation success
2018-09-06 00:15:12.826 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000008",
  "TimeStamp": "2018-09-06T03:15:12Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:15:12.832 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:15:12.836 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:12.857 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:12.872 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:12.880 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:12.883 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:12.889 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:15:12.891 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:15:12.894 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:15:14.398 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:15:14.408 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:15:14.415 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:15:14.419 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:15:14.423 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:15:14.424 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:15:14.430 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:15:14.431 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:15:14.436 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:15:14.437 -03:00 [DBG] Start userinfo request
2018-09-06 00:15:14.441 -03:00 [DBG] Starting introspection request.
2018-09-06 00:15:14.442 -03:00 [DBG] Bearer token found in header
2018-09-06 00:15:14.446 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:15:14.448 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:15:14.451 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:14.453 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:15:14.456 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:15:14.481 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:15:14.490 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:15:14.494 -03:00 [DBG] API resource validation success
2018-09-06 00:15:14.497 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:00000009",
  "TimeStamp": "2018-09-06T03:15:14Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:15:14.502 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:15:14.514 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:14.517 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:14.535 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:14.542 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:14.546 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:14.550 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:14.556 -03:00 [DBG] Creating userinfo response
2018-09-06 00:15:14.559 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:14.563 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:14.583 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:15:14.585 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:14.587 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:15:14.592 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:15:14.597 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:14.602 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:14.605 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:15:14.610 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:15:14.615 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:15:14.621 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:15:14.625 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:15:14.632 -03:00 [DBG] End userinfo request
2018-09-06 00:15:26.279 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:15:29.475 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:15:29.480 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:15:29.484 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:15:29.488 -03:00 [DBG] Starting introspection request.
2018-09-06 00:15:29.493 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:15:29.496 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:15:29.499 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:15:29.501 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:15:29.513 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:15:29.517 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:15:29.519 -03:00 [DBG] API resource validation success
2018-09-06 00:15:29.522 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:0000000A",
  "TimeStamp": "2018-09-06T03:15:29Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:15:29.526 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:15:29.532 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:29.561 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:29.581 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:29.590 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:29.593 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:29.599 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:15:29.602 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:15:29.606 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:15:37.105 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:15:37.111 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:15:37.114 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:15:37.116 -03:00 [DBG] Starting introspection request.
2018-09-06 00:15:37.119 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:15:37.121 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:15:37.123 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:15:37.125 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:15:37.134 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:15:37.137 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:15:37.139 -03:00 [DBG] API resource validation success
2018-09-06 00:15:37.141 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:0000000B",
  "TimeStamp": "2018-09-06T03:15:37Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:15:37.144 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:15:37.148 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:15:37.169 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:37.186 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:15:37.194 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:15:37.197 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:15:37.203 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:15:37.206 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:15:37.208 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:15:41.295 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:15:56.316 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:16:11.340 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:16:26.244 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:16:26.258 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:16:26.264 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:16:26.276 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:16:26.291 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:16:26.294 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:16:26.297 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:16:26.298 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:16:26.301 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:16:26.303 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:16:26.304 -03:00 [DBG] Starting introspection request.
2018-09-06 00:16:26.307 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:16:26.307 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:16:26.310 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:16:26.310 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:16:26.314 -03:00 [DBG] Start userinfo request
2018-09-06 00:16:26.316 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:16:26.316 -03:00 [DBG] Bearer token found in header
2018-09-06 00:16:26.318 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:16:26.323 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:16:26.329 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:16:26.333 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:16:26.335 -03:00 [DBG] API resource validation success
2018-09-06 00:16:26.337 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LC:0000000C",
  "TimeStamp": "2018-09-06T03:16:26Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:16:26.341 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:16:26.360 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:16:26.361 -03:00 [DBG] eaC+p8Dr36QeDQbo4NxQKqNBOS+l43Ok7jlmStCrgmw= found in database: true
2018-09-06 00:16:26.370 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:16:26.387 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:16:26.388 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:16:26.399 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:16:26.402 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:16:26.408 -03:00 [DBG] Creating userinfo response
2018-09-06 00:16:26.411 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:16:26.415 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:16:26.417 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:16:26.425 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:16:26.431 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:16:26.437 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:16:26.439 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:16:26.448 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:16:26.449 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "764e7b857082a234b4b3e8e750f3e22b6dead8e552ca954f8e41759b78a10f1c",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536203697,
    "exp": 1536207297,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:16:26.466 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:16:26.472 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:16:26.475 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:16:26.475 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:16:26.481 -03:00 [DBG] End userinfo request
2018-09-06 00:16:41.377 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:16:56.398 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:17:11.419 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:17:26.437 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:17:41.455 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:17:56.474 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:18:11.495 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:18:26.503 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:18:41.520 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:18:56.542 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:19:11.565 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:19:26.581 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:19:41.596 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:19:56.608 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:19:57.796 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:19:57.803 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:19:57.806 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:19:57.810 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:19:57.814 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:19:57.818 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:19:57.822 -03:00 [DBG] Start discovery request
2018-09-06 00:19:57.840 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:19:57.852 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:19:57.863 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:19:57.869 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:19:57.876 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:19:57.876 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:19:57.883 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:19:57.888 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:19:57.886 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:19:57.894 -03:00 [DBG] Start discovery request
2018-09-06 00:19:57.898 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:19:57.903 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:19:57.909 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:19:57.913 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:19:57.919 -03:00 [DBG] Start key discovery request
2018-09-06 00:19:57.924 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:19:57.952 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:19:57.960 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:19:57.964 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:19:57.966 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:19:57.970 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:19:57.973 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:19:57.977 -03:00 [DBG] Start key discovery request
2018-09-06 00:20:01.460 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:20:01.466 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:01.469 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:01.472 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:20:01.476 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:20:01.479 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:20:01.481 -03:00 [DBG] Start discovery request
2018-09-06 00:20:01.500 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:20:01.518 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:20:01.527 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:01.531 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:01.535 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:20:01.539 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:20:01.543 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:20:01.547 -03:00 [DBG] Start key discovery request
2018-09-06 00:20:01.591 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 00:20:01.606 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 00:20:01.611 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 00:20:01.615 -03:00 [DBG] Start authorize request
2018-09-06 00:20:01.618 -03:00 [DBG] User in authorize request: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:20:01.621 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:20:01.647 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:01.655 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:01.669 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:01.676 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:01.688 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:01.692 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:20:01.695 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "pPPvy91oSxgvB2arGtzZuaCdsk4ewoPyeFsMGCZU",
  "Nonce": "pPPvy91oSxgvB2arGtzZuaCdsk4ewoPyeFsMGCZU",
  "SessionId": "665215ef39a5278d887a034b72717868",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "pPPvy91oSxgvB2arGtzZuaCdsk4ewoPyeFsMGCZU",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "pPPvy91oSxgvB2arGtzZuaCdsk4ewoPyeFsMGCZU"
  }
}
2018-09-06 00:20:01.722 -03:00 [DBG] PtkdcXdo84rEfC85311ciFKuxQWiVrQDZ0zU+7UFphY= found in database: true
2018-09-06 00:20:01.728 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-06 00:20:01.732 -03:00 [DBG] Creating Implicit Flow response.
2018-09-06 00:20:01.735 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-06 00:20:01.738 -03:00 [DBG] Getting claims for access token for subject: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:20:01.759 -03:00 [DBG] j7cQh7EIVbCnLtqHVI1y4eVuzwf8onIzg/BqKjO97V0= not found in database
2018-09-06 00:20:01.827 -03:00 [DBG] Getting claims for identity token for subject: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0 and client: UserManagementUI
2018-09-06 00:20:01.832 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-06 00:20:01.838 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pmEA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a3cc"
    }
  ],
  "ActivityId": "0HLGJKQDCU2LF:00000001",
  "TimeStamp": "2018-09-06T03:20:01Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:20:01.846 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "pPPvy91oSxgvB2arGtzZuaCdsk4ewoPyeFsMGCZU",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-06 00:20:02.415 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:20:02.423 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:02.432 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:02.435 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:20:02.440 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:20:02.446 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:20:02.451 -03:00 [DBG] Start discovery request
2018-09-06 00:20:02.468 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:20:02.494 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:20:02.504 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:02.512 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:02.515 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:20:02.520 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:20:02.524 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:20:02.528 -03:00 [DBG] Start key discovery request
2018-09-06 00:20:03.634 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:20:03.642 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:03.647 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:03.691 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:20:03.698 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:03.702 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:03.706 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:20:03.710 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:20:03.716 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:20:03.719 -03:00 [DBG] Start userinfo request
2018-09-06 00:20:03.722 -03:00 [DBG] Bearer token found in header
2018-09-06 00:20:03.727 -03:00 [DBG] j7cQh7EIVbCnLtqHVI1y4eVuzwf8onIzg/BqKjO97V0= found in database: true
2018-09-06 00:20:03.751 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:03.771 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:03.780 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:20:03.783 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "4001b06fe32f012dea2657d45cd7781a667dc9ab9f5b34b19879f3d34091a3cc",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204001,
    "exp": 1536207601,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:20:03.788 -03:00 [DBG] Creating userinfo response
2018-09-06 00:20:03.790 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:20:03.794 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:20:03.801 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:03.805 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:20:03.808 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:20:03.815 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:03.827 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:20:03.830 -03:00 [DBG] End userinfo request
2018-09-06 00:20:08.364 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-09-06 00:20:08.370 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-09-06 00:20:08.375 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-09-06 00:20:08.384 -03:00 [DBG] Processing signout request for 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:20:08.393 -03:00 [DBG] Start end session request validation
2018-09-06 00:20:08.401 -03:00 [DBG] Start identity token validation
2018-09-06 00:20:08.433 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:08.438 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-09-06 00:20:08.454 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:20:08.458 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1536204001,
    "exp": 1536204301,
    "iss": "https://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "pPPvy91oSxgvB2arGtzZuaCdsk4ewoPyeFsMGCZU",
    "iat": 1536204001,
    "at_hash": "y9sCUaLofrPjaEIDHFdpfA",
    "sid": "665215ef39a5278d887a034b72717868",
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536203695,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-09-06 00:20:08.468 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjAxOEEyM0IyOTM3QjZGRTQxRkRGRjIwQkZDMUUyMEI2MjU5NTBGMTAiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJBWW9qc3BON2ItUWYzX0lMX0I0Z3RpV1ZEeEEifQ.eyJuYmYiOjE1MzYyMDQwMDEsImV4cCI6MTUzNjIwNDMwMSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6IlVzZXJNYW5hZ2VtZW50VUkiLCJub25jZSI6InBQUHZ5OTFvU3hndkIyYXJHdHpadWFDZHNrNGV3b1B5ZUZzTUdDWlUiLCJpYXQiOjE1MzYyMDQwMDEsImF0X2hhc2giOiJ5OXNDVWFMb2ZyUGphRUlESEZkcGZBIiwic2lkIjoiNjY1MjE1ZWYzOWE1Mjc4ZDg4N2EwMzRiNzI3MTc4NjgiLCJzdWIiOiIwYjFjYjFiMi1kNWUyLTRlZDEtODE0Yi04NzRjNDgxNmQwZTAiLCJhdXRoX3RpbWUiOjE1MzYyMDM2OTUsImlkcCI6IkZhY2Vib29rIiwiYW1yIjpbImV4dGVybmFsIl19.s8wUFPk9e1UpLtKmxIQMjg7Ndw0XwGTcEodHTjy-H20CCp4yKiXCCKl2n2R0pkViMqZ8QVCxe4BeT7u7FvTM1XM9SvHOba3Xduoq6BvNLlQlaYJcP4tMp9OOfnHkIq1mMn_bMP2JdtobklYMcZNNNBNZNZKTBd8zIynSnaVngnCaYQ8o_bHqYy2e07oTC6fXDAT66v-cHYfdoDgZOk99R3bzB_pEI_FBLe_VuheNrMc7s_-rZhE-egT9cqTzd6V9puDoYRoIIghegFtH4cKWwQCw6T97lyx9q0clASDSWAjEIFzhqXA2gG89sqqP8iFVC2BJ2z9AhaPTMit43hpmEA",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-09-06 00:20:08.477 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-09-06 00:20:08.502 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-06 00:20:08.507 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 00:20:08.511 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-06 00:20:08.516 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGJKQDCU2LF:00000003",
  "TimeStamp": "2018-09-06T03:20:08Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:20:08.665 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-09-06 00:20:08.676 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-09-06 00:20:08.683 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-09-06 00:20:08.687 -03:00 [DBG] Processing signout callback request
2018-09-06 00:20:08.718 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:08.723 -03:00 [DBG] No client front-channel logout URLs
2018-09-06 00:20:08.726 -03:00 [DBG] No client back-channel logout URLs
2018-09-06 00:20:08.729 -03:00 [INF] Successful signout callback.
2018-09-06 00:20:08.731 -03:00 [DBG] No client front-channel iframe urls
2018-09-06 00:20:08.734 -03:00 [DBG] No client back-channel iframe urls
2018-09-06 00:20:11.201 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:20:11.208 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:11.212 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:11.216 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:20:11.220 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:20:11.224 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:20:11.228 -03:00 [DBG] Start discovery request
2018-09-06 00:20:11.247 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:20:11.298 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:20:11.306 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:11.312 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:11.315 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:20:11.319 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:20:11.324 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:20:11.328 -03:00 [DBG] Start key discovery request
2018-09-06 00:20:11.368 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 00:20:11.374 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 00:20:11.379 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 00:20:11.384 -03:00 [DBG] Start authorize request
2018-09-06 00:20:11.386 -03:00 [DBG] No user present in authorize request
2018-09-06 00:20:11.389 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:20:11.411 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:11.418 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:11.430 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:11.437 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:11.448 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:11.452 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:20:11.456 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "8neynVeHDkhMaGKYepySleuP4Uvoa1Khu7sqIWD7",
  "Nonce": "8neynVeHDkhMaGKYepySleuP4Uvoa1Khu7sqIWD7",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "8neynVeHDkhMaGKYepySleuP4Uvoa1Khu7sqIWD7",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "8neynVeHDkhMaGKYepySleuP4Uvoa1Khu7sqIWD7"
  }
}
2018-09-06 00:20:11.462 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 00:20:11.471 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:20:11.492 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:11.499 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:11.513 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:11.520 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:11.529 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:11.532 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:20:11.551 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:11.623 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:20:13.398 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:20:13.405 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:13.410 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:13.413 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:20:13.417 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:20:13.423 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:20:13.427 -03:00 [DBG] Start discovery request
2018-09-06 00:20:13.449 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:20:13.525 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:20:13.533 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:20:13.538 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:20:13.541 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:20:13.546 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:20:13.550 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:20:13.554 -03:00 [DBG] Start key discovery request
2018-09-06 00:20:25.180 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:20:25.184 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:20:25.188 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:20:25.191 -03:00 [DBG] Starting introspection request.
2018-09-06 00:20:25.193 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:20:25.195 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:20:25.198 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:20:25.200 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:20:25.210 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:20:25.214 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:20:25.216 -03:00 [DBG] API resource validation success
2018-09-06 00:20:25.218 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LI:00000001",
  "TimeStamp": "2018-09-06T03:20:25Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:20:25.221 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:20:25.226 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 00:20:25.229 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 00:20:25.232 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 00:20:25.235 -03:00 [DBG] Token is invalid.
2018-09-06 00:20:25.237 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:20:25.240 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:20:25.665 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:20:25.671 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:20:25.675 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:20:25.678 -03:00 [DBG] Starting introspection request.
2018-09-06 00:20:25.681 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:20:25.683 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:20:25.685 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:20:25.687 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:20:25.696 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:20:25.699 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:20:25.702 -03:00 [DBG] API resource validation success
2018-09-06 00:20:25.704 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LI:00000002",
  "TimeStamp": "2018-09-06T03:20:25Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:20:25.710 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:20:25.714 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 00:20:25.717 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 00:20:25.720 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 00:20:25.723 -03:00 [DBG] Token is invalid.
2018-09-06 00:20:25.725 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:20:25.729 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:20:26.640 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:20:27.545 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:20:27.550 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:20:27.553 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:20:27.556 -03:00 [DBG] Starting introspection request.
2018-09-06 00:20:27.559 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:20:27.561 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:20:27.564 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:20:27.566 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:20:27.576 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:20:27.579 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:20:27.581 -03:00 [DBG] API resource validation success
2018-09-06 00:20:27.584 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LI:00000003",
  "TimeStamp": "2018-09-06T03:20:27Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:20:27.588 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:20:27.592 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 00:20:27.595 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 00:20:27.598 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 00:20:27.601 -03:00 [DBG] Token is invalid.
2018-09-06 00:20:27.604 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:20:27.606 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:20:37.697 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:20:37.701 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:20:37.704 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:20:37.709 -03:00 [DBG] Starting introspection request.
2018-09-06 00:20:37.712 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:20:37.714 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:20:37.718 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:20:37.721 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:20:37.731 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:20:37.734 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:20:37.737 -03:00 [DBG] API resource validation success
2018-09-06 00:20:37.741 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LI:00000004",
  "TimeStamp": "2018-09-06T03:20:37Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:20:37.747 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:20:37.754 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 00:20:37.759 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 00:20:37.762 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 00:20:37.766 -03:00 [DBG] Token is invalid.
2018-09-06 00:20:37.769 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:20:37.772 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:20:41.659 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:20:53.054 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:20:53.057 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:20:53.060 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:20:53.064 -03:00 [DBG] Starting introspection request.
2018-09-06 00:20:53.067 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:20:53.070 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:20:53.072 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:20:53.074 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:20:53.087 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:20:53.090 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:20:53.092 -03:00 [DBG] API resource validation success
2018-09-06 00:20:53.095 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LI:00000005",
  "TimeStamp": "2018-09-06T03:20:53Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:20:53.097 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:20:53.102 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 00:20:53.105 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 00:20:53.108 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 00:20:53.111 -03:00 [DBG] Token is invalid.
2018-09-06 00:20:53.113 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 00:20:53.115 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 00:20:53.891 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 00:20:53.903 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 00:20:53.909 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 00:20:53.917 -03:00 [DBG] Start authorize request
2018-09-06 00:20:53.922 -03:00 [DBG] No user present in authorize request
2018-09-06 00:20:53.926 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:20:53.955 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:53.967 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:53.982 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:53.989 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:54.004 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:54.010 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:20:54.014 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
  "Nonce": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL"
  }
}
2018-09-06 00:20:54.025 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 00:20:54.038 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:20:54.064 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:54.070 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:54.081 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:54.087 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:20:54.097 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:20:54.100 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:20:54.118 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:20:56.680 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:21:11.687 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:21:12.654 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:21:12.727 -03:00 [WRN] Invalid password for user 15de547f-3266-4071-bce5-68bee48518d9.
2018-09-06 00:21:12.732 -03:00 [WRN] User 15de547f-3266-4071-bce5-68bee48518d9 failed to provide the correct password.
2018-09-06 00:21:12.784 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:21:12.801 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:12.807 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:12.818 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:12.824 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:12.834 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:12.837 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:21:12.861 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:26.704 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:21:30.109 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:21:30.299 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:21:30.302 -03:00 [DBG] Adding idp claim with value: local
2018-09-06 00:21:30.305 -03:00 [DBG] Adding amr claim with value: pwd
2018-09-06 00:21:30.308 -03:00 [DBG] Adding auth_time claim with value: 1536204090
2018-09-06 00:21:30.311 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:21:30.316 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bhdebrito",
  "SubjectId": "15de547f-3266-4071-bce5-68bee48518d9",
  "DisplayName": "bhdebrito",
  "Endpoint": "UI",
  "ActivityId": "0HLGJKQDCU2LF:0000000B",
  "TimeStamp": "2018-09-06T03:21:30Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:21:30.326 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 00:21:30.330 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 00:21:30.332 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 00:21:30.335 -03:00 [DBG] Start authorize callback request
2018-09-06 00:21:30.337 -03:00 [DBG] User in authorize request: 15de547f-3266-4071-bce5-68bee48518d9
2018-09-06 00:21:30.340 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:21:30.358 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:30.364 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:30.375 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:30.381 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:30.390 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:30.394 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:21:30.396 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "15de547f-3266-4071-bce5-68bee48518d9",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
  "Nonce": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
  "SessionId": "db9b61bff479b8f4cee645e7edca5f88",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL"
  }
}
2018-09-06 00:21:30.408 -03:00 [DBG] mrvRGDLLxobVNiR8FG3254RpxT1Hh2VxYhovlzPKhcM= found in database: false
2018-09-06 00:21:30.411 -03:00 [DBG] user_consent grant with value: UserManagementUI|15de547f-3266-4071-bce5-68bee48518d9 not found in store.
2018-09-06 00:21:30.414 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 00:21:30.416 -03:00 [INF] Showing consent: User has not yet consented
2018-09-06 00:21:30.424 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:21:30.441 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:30.447 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:30.457 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:30.463 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:30.473 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:30.476 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:21:30.494 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:30.500 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:30.510 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:32.179 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:21:32.185 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:21:32.206 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:32.213 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:32.223 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:32.229 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:32.240 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:32.243 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:21:32.250 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 00:21:32.253 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 00:21:32.256 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 00:21:32.259 -03:00 [DBG] Start authorize callback request
2018-09-06 00:21:32.262 -03:00 [DBG] User in authorize request: 15de547f-3266-4071-bce5-68bee48518d9
2018-09-06 00:21:32.265 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:21:32.283 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:32.290 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:32.301 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:32.307 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:32.317 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:21:32.320 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:21:32.324 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "15de547f-3266-4071-bce5-68bee48518d9",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
  "Nonce": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
  "SessionId": "db9b61bff479b8f4cee645e7edca5f88",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL"
  }
}
2018-09-06 00:21:32.338 -03:00 [DBG] mrvRGDLLxobVNiR8FG3254RpxT1Hh2VxYhovlzPKhcM= found in database: false
2018-09-06 00:21:32.341 -03:00 [DBG] user_consent grant with value: UserManagementUI|15de547f-3266-4071-bce5-68bee48518d9 not found in store.
2018-09-06 00:21:32.347 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 00:21:32.349 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 00:21:32.353 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 00:21:32.358 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 15de547f-3266-4071-bce5-68bee48518d9
2018-09-06 00:21:32.368 -03:00 [DBG] mrvRGDLLxobVNiR8FG3254RpxT1Hh2VxYhovlzPKhcM= not found in database
2018-09-06 00:21:32.451 -03:00 [DBG] Creating Implicit Flow response.
2018-09-06 00:21:32.455 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-06 00:21:32.458 -03:00 [DBG] Getting claims for access token for subject: 15de547f-3266-4071-bce5-68bee48518d9
2018-09-06 00:21:32.480 -03:00 [DBG] wjaozptG3OKW9LU+8rO5f9DxVicJ85UBknKwZDp0iLM= not found in database
2018-09-06 00:21:32.501 -03:00 [DBG] Getting claims for identity token for subject: 15de547f-3266-4071-bce5-68bee48518d9 and client: UserManagementUI
2018-09-06 00:21:32.505 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-06 00:21:32.510 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "15de547f-3266-4071-bce5-68bee48518d9",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****G0MA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6ca2"
    }
  ],
  "ActivityId": "0HLGJKQDCU2LL:00000004",
  "TimeStamp": "2018-09-06T03:21:32Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:21:32.519 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "15de547f-3266-4071-bce5-68bee48518d9",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-06 00:21:32.524 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:21:32.528 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:21:33.638 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:21:33.645 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:21:33.648 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:21:33.651 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:21:33.654 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:21:33.657 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:21:33.660 -03:00 [DBG] Start discovery request
2018-09-06 00:21:33.678 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:21:33.716 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:21:33.723 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:21:33.727 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:21:33.731 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:21:33.736 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:21:33.742 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:21:33.747 -03:00 [DBG] Start key discovery request
2018-09-06 00:21:34.861 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:21:34.870 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:21:34.874 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:21:34.929 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:21:34.937 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:21:34.941 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:21:34.945 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:21:34.949 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:21:34.954 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:21:34.959 -03:00 [DBG] Start userinfo request
2018-09-06 00:21:34.962 -03:00 [DBG] Bearer token found in header
2018-09-06 00:21:34.967 -03:00 [DBG] wjaozptG3OKW9LU+8rO5f9DxVicJ85UBknKwZDp0iLM= found in database: true
2018-09-06 00:21:34.988 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:35.004 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:21:35.012 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:21:35.016 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "5067b59a7d6938b992ed746362baeaf9e35b6fa765804dbda670f90b668b6ca2",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204092,
    "exp": 1536207692,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "15de547f-3266-4071-bce5-68bee48518d9",
    "auth_time": 1536204090,
    "idp": "local",
    "amr": "pwd",
    "email": "bhdebrito2@gmail.com"
  }
}
2018-09-06 00:21:35.025 -03:00 [DBG] Creating userinfo response
2018-09-06 00:21:35.028 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:21:35.033 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:21:35.040 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:35.045 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:21:35.050 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:21:35.057 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:21:35.069 -03:00 [INF] Profile service returned to the following claim types: sub email preferred_username name email email_verified
2018-09-06 00:21:35.072 -03:00 [DBG] End userinfo request
2018-09-06 00:21:41.718 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:21:56.745 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:22:11.764 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:22:26.786 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:22:41.795 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:22:56.820 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:23:00.866 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-09-06 00:23:00.877 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-09-06 00:23:00.883 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-09-06 00:23:00.908 -03:00 [DBG] Processing signout request for 15de547f-3266-4071-bce5-68bee48518d9
2018-09-06 00:23:00.912 -03:00 [DBG] Start end session request validation
2018-09-06 00:23:00.915 -03:00 [DBG] Start identity token validation
2018-09-06 00:23:00.944 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:23:00.948 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-09-06 00:23:00.968 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:23:00.972 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1536204092,
    "exp": 1536204392,
    "iss": "https://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "b6YdWYPTJanAyfe7PfR6UG1ggDqUGAjQuUokcvNL",
    "iat": 1536204092,
    "at_hash": "R-RwEOTh816ud_cHjxBdYg",
    "sid": "db9b61bff479b8f4cee645e7edca5f88",
    "sub": "15de547f-3266-4071-bce5-68bee48518d9",
    "auth_time": 1536204090,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-09-06 00:23:00.977 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "15de547f-3266-4071-bce5-68bee48518d9",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjAxOEEyM0IyOTM3QjZGRTQxRkRGRjIwQkZDMUUyMEI2MjU5NTBGMTAiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJBWW9qc3BON2ItUWYzX0lMX0I0Z3RpV1ZEeEEifQ.eyJuYmYiOjE1MzYyMDQwOTIsImV4cCI6MTUzNjIwNDM5MiwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6IlVzZXJNYW5hZ2VtZW50VUkiLCJub25jZSI6ImI2WWRXWVBUSmFuQXlmZTdQZlI2VUcxZ2dEcVVHQWpRdVVva2N2TkwiLCJpYXQiOjE1MzYyMDQwOTIsImF0X2hhc2giOiJSLVJ3RU9UaDgxNnVkX2NIanhCZFlnIiwic2lkIjoiZGI5YjYxYmZmNDc5YjhmNGNlZTY0NWU3ZWRjYTVmODgiLCJzdWIiOiIxNWRlNTQ3Zi0zMjY2LTQwNzEtYmNlNS02OGJlZTQ4NTE4ZDkiLCJhdXRoX3RpbWUiOjE1MzYyMDQwOTAsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.PfSVUt9Ka_C39zDIQABN3cacEO7q_JrIXZ1NGb76YFqRVgQmG0W302R3QvppiPQRRsr0mvN0HeiEGbDoX0LazFt_v6hLoDOzSSy5OHH9rrkLNnIL2-wN0NdR7ivGtiX_uENpX3x-umVp1d-_FTUqvaYiDs3yu_QTQfJem07N59Vgaf6bk9NPn_fF4UQ_VdF3iEcAWDK4Y6BD_yxipLv_9uBV_6eHk0t_aJxYMY7FfAXRHGyf5_3YNKwc2IQvDEViyAqeP_CeS4GR9qJga3GWTC1l6ePmG5uwZuIAlM7fjIQEdBCOJ2aJqjJ80omxaMQv__H_LgcObrDpCK1iPiG0MA",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-09-06 00:23:00.987 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-09-06 00:23:00.998 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-06 00:23:01.002 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 00:23:01.006 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-06 00:23:01.010 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "15de547f-3266-4071-bce5-68bee48518d9",
  "DisplayName": "bhdebrito",
  "ActivityId": "0HLGJKQDCU2LL:00000006",
  "TimeStamp": "2018-09-06T03:23:01Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:23:01.154 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-09-06 00:23:01.160 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-09-06 00:23:01.165 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-09-06 00:23:01.168 -03:00 [DBG] Processing signout callback request
2018-09-06 00:23:01.190 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:23:01.193 -03:00 [DBG] No client front-channel logout URLs
2018-09-06 00:23:01.196 -03:00 [DBG] No client back-channel logout URLs
2018-09-06 00:23:01.198 -03:00 [INF] Successful signout callback.
2018-09-06 00:23:01.200 -03:00 [DBG] No client front-channel iframe urls
2018-09-06 00:23:01.203 -03:00 [DBG] No client back-channel iframe urls
2018-09-06 00:23:03.663 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:23:03.669 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:23:03.672 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:23:03.675 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:23:03.679 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:23:03.682 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:23:03.687 -03:00 [DBG] Start discovery request
2018-09-06 00:23:03.707 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:23:03.756 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:23:03.769 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:23:03.781 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:23:03.789 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:23:03.804 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:23:03.810 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:23:03.815 -03:00 [DBG] Start key discovery request
2018-09-06 00:23:03.845 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 00:23:03.852 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 00:23:03.856 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 00:23:03.860 -03:00 [DBG] Start authorize request
2018-09-06 00:23:03.865 -03:00 [DBG] No user present in authorize request
2018-09-06 00:23:03.869 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:23:03.891 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:23:03.900 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:23:03.918 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:23:03.929 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:23:03.944 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:23:03.948 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:23:03.952 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4",
  "Nonce": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4"
  }
}
2018-09-06 00:23:03.962 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 00:23:03.971 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:23:03.996 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:23:04.005 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:23:04.017 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:23:04.025 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:23:04.038 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:23:04.042 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:23:04.064 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:23:05.809 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:23:05.817 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:23:05.820 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:23:05.823 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:23:05.827 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:23:05.830 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:23:05.834 -03:00 [DBG] Start discovery request
2018-09-06 00:23:05.853 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:23:05.922 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:23:05.929 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:23:05.933 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:23:05.936 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:23:05.941 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:23:05.945 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:23:05.950 -03:00 [DBG] Start key discovery request
2018-09-06 00:23:11.843 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:23:26.860 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:23:41.874 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:23:56.894 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:24:11.905 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:24:26.929 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:24:41.937 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:24:56.955 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:25:11.969 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:25:26.986 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:25:42.002 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:25:57.017 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:26:12.032 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:26:27.048 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:26:36.127 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:26:36.134 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:26:36.138 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:26:36.143 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:26:36.147 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:26:36.152 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:26:36.157 -03:00 [DBG] Start discovery request
2018-09-06 00:26:36.183 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:26:36.239 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:26:36.249 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:26:36.253 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:26:36.257 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:26:36.261 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:26:36.267 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:26:36.282 -03:00 [DBG] Start key discovery request
2018-09-06 00:26:42.067 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:26:57.081 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:27:12.093 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:27:27.111 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:27:42.123 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:27:57.135 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:28:12.156 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:28:18.357 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:28:18.388 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:18.400 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:18.415 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:18.423 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:18.436 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:18.440 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:28:18.460 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:27.173 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:28:30.889 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:28:30.913 -03:00 [WRN] Invalid password for user 15de547f-3266-4071-bce5-68bee48518d9.
2018-09-06 00:28:30.918 -03:00 [WRN] User 15de547f-3266-4071-bce5-68bee48518d9 failed to provide the correct password.
2018-09-06 00:28:31.017 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:28:31.046 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:31.053 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:31.063 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:31.069 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:31.079 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:31.082 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:28:31.099 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:38.928 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 00:28:38.954 -03:00 [WRN] Invalid password for user 15de547f-3266-4071-bce5-68bee48518d9.
2018-09-06 00:28:38.959 -03:00 [WRN] User 15de547f-3266-4071-bce5-68bee48518d9 failed to provide the correct password.
2018-09-06 00:28:39.005 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:28:39.037 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:39.046 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:39.060 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:39.067 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:39.078 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:39.081 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:28:39.102 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:42.186 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:28:42.722 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 00:28:43.376 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 00:28:43.411 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJKQDCU2LM:00000006",
  "TimeStamp": "2018-09-06T03:28:43Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:28:43.415 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:28:43.418 -03:00 [DBG] Adding amr claim with value: external
2018-09-06 00:28:43.420 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:28:43.425 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 00:28:43.433 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 00:28:43.436 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 00:28:43.439 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 00:28:43.441 -03:00 [DBG] Start authorize callback request
2018-09-06 00:28:43.444 -03:00 [DBG] User in authorize request: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:28:43.447 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 00:28:43.466 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:43.474 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:43.485 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:43.491 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:43.500 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 00:28:43.504 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 00:28:43.507 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4",
  "Nonce": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4",
  "SessionId": "dc69f67d4e8f5a86c37fbb8122026b58",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4"
  }
}
2018-09-06 00:28:43.519 -03:00 [DBG] PtkdcXdo84rEfC85311ciFKuxQWiVrQDZ0zU+7UFphY= found in database: true
2018-09-06 00:28:43.525 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-06 00:28:43.529 -03:00 [DBG] Creating Implicit Flow response.
2018-09-06 00:28:43.531 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-06 00:28:43.533 -03:00 [DBG] Getting claims for access token for subject: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0
2018-09-06 00:28:43.551 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= not found in database
2018-09-06 00:28:43.581 -03:00 [DBG] Getting claims for identity token for subject: 0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0 and client: UserManagementUI
2018-09-06 00:28:43.586 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-06 00:28:43.591 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1d1Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****e491"
    }
  ],
  "ActivityId": "0HLGJKQDCU2LM:00000007",
  "TimeStamp": "2018-09-06T03:28:43Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:28:43.599 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "mABLubpbItrI6zhHOlYRuq2fnyoPtf7VSzjo4PB4",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-06 00:28:43.603 -03:00 [DBG] Augmenting SignInContext
2018-09-06 00:28:43.608 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 00:28:44.743 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 00:28:44.752 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:28:44.759 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:28:44.762 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 00:28:44.766 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 00:28:44.770 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 00:28:44.775 -03:00 [DBG] Start discovery request
2018-09-06 00:28:44.793 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 00:28:44.823 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 00:28:44.831 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:28:44.834 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:28:44.838 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 00:28:44.842 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 00:28:44.846 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 00:28:44.851 -03:00 [DBG] Start key discovery request
2018-09-06 00:28:45.964 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:28:45.971 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:28:45.975 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:28:46.028 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:28:46.036 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:28:46.040 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:28:46.043 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:28:46.048 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:28:46.052 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:28:46.057 -03:00 [DBG] Start userinfo request
2018-09-06 00:28:46.060 -03:00 [DBG] Bearer token found in header
2018-09-06 00:28:46.065 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:28:46.086 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:46.102 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:46.111 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:28:46.114 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:28:46.119 -03:00 [DBG] Creating userinfo response
2018-09-06 00:28:46.121 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:46.124 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:46.130 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:46.134 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:28:46.138 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:46.143 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:46.155 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:28:46.158 -03:00 [DBG] End userinfo request
2018-09-06 00:28:47.835 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:28:47.847 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:28:47.852 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:28:47.857 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:28:47.865 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:28:47.871 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:28:47.876 -03:00 [DBG] Start userinfo request
2018-09-06 00:28:47.880 -03:00 [DBG] Bearer token found in header
2018-09-06 00:28:47.888 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:28:47.894 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:28:47.899 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:28:47.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:28:47.907 -03:00 [DBG] Starting introspection request.
2018-09-06 00:28:47.910 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:28:47.912 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:28:47.915 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:28:47.918 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:28:47.949 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:47.958 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:28:47.962 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:28:47.964 -03:00 [DBG] API resource validation success
2018-09-06 00:28:47.967 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000001",
  "TimeStamp": "2018-09-06T03:28:47Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:28:47.973 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:28:47.973 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:47.980 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:28:47.985 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:28:47.989 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:28:47.994 -03:00 [DBG] Creating userinfo response
2018-09-06 00:28:47.997 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:48.000 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:48.012 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:48.020 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:28:48.024 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:48.049 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:48.053 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:48.095 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:28:48.100 -03:00 [DBG] End userinfo request
2018-09-06 00:28:48.120 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:48.130 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:28:48.133 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:28:48.138 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:28:48.140 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:28:48.143 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:28:49.786 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:28:49.793 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:28:49.798 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:28:49.806 -03:00 [DBG] Starting introspection request.
2018-09-06 00:28:49.809 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:28:49.813 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:28:49.817 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:28:49.820 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:28:49.833 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:28:49.837 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:28:49.840 -03:00 [DBG] API resource validation success
2018-09-06 00:28:49.844 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000002",
  "TimeStamp": "2018-09-06T03:28:49Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:28:49.849 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:28:49.855 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:28:49.878 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:49.898 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:49.908 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:28:49.912 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:28:49.917 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:28:49.921 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:28:49.924 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:28:50.630 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:28:50.638 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:28:50.644 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:28:50.649 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:28:50.650 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:28:50.654 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:28:50.656 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:28:50.660 -03:00 [DBG] Starting introspection request.
2018-09-06 00:28:50.665 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:28:50.664 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:28:50.669 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:28:50.671 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:28:50.674 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:28:50.677 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:28:50.675 -03:00 [DBG] Start userinfo request
2018-09-06 00:28:50.681 -03:00 [DBG] Bearer token found in header
2018-09-06 00:28:50.687 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:28:50.690 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:28:50.694 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:28:50.697 -03:00 [DBG] API resource validation success
2018-09-06 00:28:50.719 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000003",
  "TimeStamp": "2018-09-06T03:28:50Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:28:50.724 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:28:50.729 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:28:50.742 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:50.774 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:50.782 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:50.791 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:28:50.795 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:28:50.800 -03:00 [DBG] Creating userinfo response
2018-09-06 00:28:50.803 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:50.807 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:50.808 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:50.817 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:28:50.821 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:28:50.825 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:28:50.828 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:28:50.831 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:28:50.836 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:50.844 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:28:50.850 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:28:50.859 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:28:50.873 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:28:50.879 -03:00 [DBG] End userinfo request
2018-09-06 00:28:57.208 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:28:59.151 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:28:59.155 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:28:59.158 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:28:59.163 -03:00 [DBG] Starting introspection request.
2018-09-06 00:28:59.165 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:28:59.168 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:28:59.170 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:28:59.173 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:28:59.183 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:28:59.186 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:28:59.189 -03:00 [DBG] API resource validation success
2018-09-06 00:28:59.191 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000004",
  "TimeStamp": "2018-09-06T03:28:59Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:28:59.195 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:28:59.200 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:28:59.223 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:59.240 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:28:59.248 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:28:59.251 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:28:59.256 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:28:59.258 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:28:59.260 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:02.318 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:02.322 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:02.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:02.329 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:02.333 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:02.335 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:02.337 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:02.340 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:02.349 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:02.352 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:02.355 -03:00 [DBG] API resource validation success
2018-09-06 00:29:02.357 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000005",
  "TimeStamp": "2018-09-06T03:29:02Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:02.362 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:02.366 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:02.387 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:02.403 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:02.411 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:02.414 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:02.419 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:02.422 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:02.424 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:03.352 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:29:03.365 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:03.365 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:29:03.371 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:03.372 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:29:03.377 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:03.384 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:03.385 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:29:03.388 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:03.393 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:03.394 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:29:03.398 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:03.400 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:03.398 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:29:03.405 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:29:03.408 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:29:03.413 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:29:03.416 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:03.416 -03:00 [DBG] Start userinfo request
2018-09-06 00:29:03.420 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:03.423 -03:00 [DBG] API resource validation success
2018-09-06 00:29:03.421 -03:00 [DBG] Bearer token found in header
2018-09-06 00:29:03.426 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000006",
  "TimeStamp": "2018-09-06T03:29:03Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:03.430 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:03.429 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:03.437 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:03.473 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:03.475 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:03.494 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:03.493 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:03.510 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:03.515 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:03.514 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:03.523 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:03.526 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:03.524 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:03.531 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:03.536 -03:00 [DBG] Creating userinfo response
2018-09-06 00:29:03.542 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:03.546 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:03.556 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:29:03.560 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:29:03.564 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:03.571 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:29:03.584 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:29:03.588 -03:00 [DBG] End userinfo request
2018-09-06 00:29:04.609 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:04.618 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:04.622 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:04.626 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:04.629 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:04.631 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:04.635 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:04.637 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:04.647 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:04.650 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:04.653 -03:00 [DBG] API resource validation success
2018-09-06 00:29:04.655 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000007",
  "TimeStamp": "2018-09-06T03:29:04Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:04.659 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:04.664 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:04.689 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:04.705 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:04.713 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:04.717 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:04.721 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:04.724 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:04.726 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:10.844 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:29:10.862 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:29:10.866 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:29:10.872 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:10.879 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:29:10.880 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:10.895 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:10.898 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:29:10.899 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:10.906 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:29:10.906 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:10.910 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:29:10.911 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:10.915 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:29:10.917 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:10.918 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:29:10.922 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:10.925 -03:00 [DBG] Start userinfo request
2018-09-06 00:29:10.929 -03:00 [DBG] Bearer token found in header
2018-09-06 00:29:10.934 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:10.941 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:10.944 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:10.947 -03:00 [DBG] API resource validation success
2018-09-06 00:29:10.949 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000008",
  "TimeStamp": "2018-09-06T03:29:10Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:10.953 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:10.958 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:10.972 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:10.981 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:11.005 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:11.017 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:11.021 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:11.022 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:11.032 -03:00 [DBG] Creating userinfo response
2018-09-06 00:29:11.035 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:11.042 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:11.051 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:11.054 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:11.057 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:29:11.059 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:11.063 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:29:11.064 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:11.068 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:11.069 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:11.077 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:29:11.103 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:29:11.108 -03:00 [DBG] End userinfo request
2018-09-06 00:29:12.225 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:29:14.022 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:14.028 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:14.034 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:14.038 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:14.041 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:14.044 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:14.047 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:14.050 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:14.060 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:14.063 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:14.065 -03:00 [DBG] API resource validation success
2018-09-06 00:29:14.067 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:00000009",
  "TimeStamp": "2018-09-06T03:29:14Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:14.071 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:14.075 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:14.097 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:14.112 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:14.120 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:14.123 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:14.129 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:14.131 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:14.133 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:27.241 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:29:36.877 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:36.882 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:36.886 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:36.890 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:36.893 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:36.896 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:36.900 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:36.902 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:36.915 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:36.919 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:36.922 -03:00 [DBG] API resource validation success
2018-09-06 00:29:36.924 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:0000000A",
  "TimeStamp": "2018-09-06T03:29:36Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:36.929 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:36.934 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:36.959 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:36.979 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:36.992 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:36.996 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:37.002 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:37.006 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:37.009 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:38.106 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:29:38.117 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:29:38.117 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:38.124 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:29:38.127 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:38.133 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 00:29:38.135 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:38.141 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:38.144 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 00:29:38.145 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:38.150 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 00:29:38.150 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:38.154 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 00:29:38.157 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:38.158 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 00:29:38.161 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:38.163 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 00:29:38.166 -03:00 [DBG] Start userinfo request
2018-09-06 00:29:38.169 -03:00 [DBG] Bearer token found in header
2018-09-06 00:29:38.173 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:38.177 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:38.180 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:38.183 -03:00 [DBG] API resource validation success
2018-09-06 00:29:38.185 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:0000000B",
  "TimeStamp": "2018-09-06T03:29:38Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:38.189 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:38.193 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:38.209 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:38.219 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:38.228 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:38.237 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:38.243 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:38.246 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:38.249 -03:00 [DBG] Creating userinfo response
2018-09-06 00:29:38.252 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:38.256 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:38.264 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:38.272 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:38.276 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:38.279 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:38.281 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:29:38.281 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:38.287 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 00:29:38.290 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 00:29:38.300 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 00:29:38.329 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-06 00:29:38.332 -03:00 [DBG] End userinfo request
2018-09-06 00:29:39.665 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 00:29:39.671 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 00:29:39.676 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 00:29:39.681 -03:00 [DBG] Starting introspection request.
2018-09-06 00:29:39.683 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 00:29:39.686 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 00:29:39.689 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 00:29:39.691 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 00:29:39.701 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 00:29:39.704 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 00:29:39.706 -03:00 [DBG] API resource validation success
2018-09-06 00:29:39.709 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJKQDCU2LQ:0000000C",
  "TimeStamp": "2018-09-06T03:29:39Z",
  "ProcessId": 16348,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 00:29:39.714 -03:00 [DBG] Introspection request validation started.
2018-09-06 00:29:39.719 -03:00 [DBG] ch4XdEPhAcLljrpCGKXjNSN1QBPaIEey57MluQbOx+Q= found in database: true
2018-09-06 00:29:39.746 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:39.764 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 00:29:39.772 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 00:29:39.775 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b1e24f601e1aae7b7e7fc01ae829bbb3cd76aa9d9d81d82a2f02359d12ade491",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536204523,
    "exp": 1536208123,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "0b1cb1b2-d5e2-4ed1-814b-874c4816d0e0",
    "auth_time": 1536204523,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-06 00:29:39.780 -03:00 [DBG] Introspection request validation successful.
2018-09-06 00:29:39.782 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 00:29:39.784 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 00:29:42.252 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:29:57.270 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:30:12.282 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:30:27.296 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:30:42.311 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:30:57.327 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:31:12.349 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:31:27.359 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:31:42.374 -03:00 [INF] Clearing 0 tokens
2018-09-06 00:49:47.551 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 00:49:47.656 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 00:50:37.785 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 00:50:37.879 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 01:39:15.954 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 01:39:16.078 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 01:39:22.662 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-06 01:39:22.681 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-06 01:39:22.684 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-06 01:39:22.686 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-06 01:39:22.689 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-06 01:39:22.836 -03:00 [DBG] Starting token cleanup
2018-09-06 01:39:37.901 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:39:52.924 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:39:55.526 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 01:39:55.643 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:39:55.648 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:39:55.684 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 01:39:55.699 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 01:39:55.702 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 01:39:55.709 -03:00 [DBG] Start discovery request
2018-09-06 01:39:56.046 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 01:39:56.108 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 01:39:56.115 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:39:56.119 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:39:56.122 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 01:39:56.130 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 01:39:56.133 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 01:39:56.139 -03:00 [DBG] Start key discovery request
2018-09-06 01:39:56.252 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-06 01:39:56.259 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 01:39:56.264 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-06 01:39:56.271 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-06 01:39:56.277 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-06 01:39:56.281 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 01:39:56.288 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 01:39:56.291 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 01:39:56.297 -03:00 [DBG] Start authorize request
2018-09-06 01:39:56.305 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-09-06 01:39:56.313 -03:00 [DBG] No user present in authorize request
2018-09-06 01:39:56.321 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:39:56.577 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:39:56.633 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:39:56.767 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:39:56.786 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:39:56.808 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:39:56.819 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:39:56.832 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
  "Nonce": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw"
  }
}
2018-09-06 01:39:56.844 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 01:39:56.977 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:39:57.017 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:39:57.031 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:39:57.055 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:39:57.066 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:39:57.087 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:39:57.090 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:39:57.130 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:07.940 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:40:19.068 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 01:40:19.167 -03:00 [WRN] Invalid password for user 091806fe-9390-47fe-ca83-08d613b2b6d2.
2018-09-06 01:40:19.171 -03:00 [WRN] User 091806fe-9390-47fe-ca83-08d613b2b6d2 failed to provide the correct password.
2018-09-06 01:40:19.203 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:40:19.251 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:19.271 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:19.300 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:19.314 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:19.344 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:19.351 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:40:19.396 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:22.957 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:40:28.508 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 01:40:28.535 -03:00 [WRN] Invalid password for user 091806fe-9390-47fe-ca83-08d613b2b6d2.
2018-09-06 01:40:28.539 -03:00 [WRN] User 091806fe-9390-47fe-ca83-08d613b2b6d2 failed to provide the correct password.
2018-09-06 01:40:28.561 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:40:28.600 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:28.611 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:28.635 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:28.646 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:28.670 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:28.674 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:40:28.719 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:37.970 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:40:40.034 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 01:40:40.263 -03:00 [DBG] Augmenting SignInContext
2018-09-06 01:40:40.269 -03:00 [DBG] Adding idp claim with value: local
2018-09-06 01:40:40.272 -03:00 [DBG] Adding amr claim with value: pwd
2018-09-06 01:40:40.275 -03:00 [DBG] Adding auth_time claim with value: 1536208840
2018-09-06 01:40:40.285 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 01:40:40.302 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bruno",
  "SubjectId": "091806fe-9390-47fe-ca83-08d613b2b6d2",
  "DisplayName": "bruno",
  "Endpoint": "UI",
  "ActivityId": "0HLGJMB5J69FT:00000005",
  "TimeStamp": "2018-09-06T04:40:40Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:40:40.312 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 01:40:40.317 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 01:40:40.323 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 01:40:40.334 -03:00 [DBG] Start authorize callback request
2018-09-06 01:40:40.341 -03:00 [DBG] User in authorize request: 091806fe-9390-47fe-ca83-08d613b2b6d2
2018-09-06 01:40:40.345 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:40:40.388 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:40.400 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:40.427 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:40.440 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:40.463 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:40.472 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:40:40.476 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "091806fe-9390-47fe-ca83-08d613b2b6d2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
  "Nonce": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
  "SessionId": "7e70ec107898b04c66ba5c7c409742a6",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw"
  }
}
2018-09-06 01:40:40.530 -03:00 [DBG] l9oz+dN6ueNfgUc19TL6d8S7h9MZb+LRmxvnWTgy3Bk= found in database: false
2018-09-06 01:40:40.533 -03:00 [DBG] user_consent grant with value: UserManagementUI|091806fe-9390-47fe-ca83-08d613b2b6d2 not found in store.
2018-09-06 01:40:40.537 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 01:40:40.540 -03:00 [INF] Showing consent: User has not yet consented
2018-09-06 01:40:40.576 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:40:40.610 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:40.621 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:40.642 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:40.652 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:40.675 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:40.678 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:40:40.714 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:40.724 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:40.742 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:52.985 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:40:54.260 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 01:40:54.285 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:40:54.325 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:54.336 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:54.360 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:54.371 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:54.394 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:54.397 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:40:54.421 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 01:40:54.426 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 01:40:54.430 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 01:40:54.433 -03:00 [DBG] Start authorize callback request
2018-09-06 01:40:54.441 -03:00 [DBG] User in authorize request: 091806fe-9390-47fe-ca83-08d613b2b6d2
2018-09-06 01:40:54.446 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:40:54.491 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:54.504 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:54.532 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:54.549 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:54.574 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:40:54.580 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:40:54.585 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "091806fe-9390-47fe-ca83-08d613b2b6d2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
  "Nonce": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
  "SessionId": "7e70ec107898b04c66ba5c7c409742a6",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw"
  }
}
2018-09-06 01:40:54.607 -03:00 [DBG] l9oz+dN6ueNfgUc19TL6d8S7h9MZb+LRmxvnWTgy3Bk= found in database: false
2018-09-06 01:40:54.613 -03:00 [DBG] user_consent grant with value: UserManagementUI|091806fe-9390-47fe-ca83-08d613b2b6d2 not found in store.
2018-09-06 01:40:54.617 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 01:40:54.629 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 01:40:54.636 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture","UserManagementApi.owner-content"]
2018-09-06 01:40:54.644 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 091806fe-9390-47fe-ca83-08d613b2b6d2
2018-09-06 01:40:54.668 -03:00 [DBG] l9oz+dN6ueNfgUc19TL6d8S7h9MZb+LRmxvnWTgy3Bk= not found in database
2018-09-06 01:40:54.732 -03:00 [DBG] Creating Implicit Flow response.
2018-09-06 01:40:54.746 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-06 01:40:54.749 -03:00 [DBG] Getting claims for access token for subject: 091806fe-9390-47fe-ca83-08d613b2b6d2
2018-09-06 01:40:54.808 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= not found in database
2018-09-06 01:40:54.835 -03:00 [DBG] Getting claims for identity token for subject: 091806fe-9390-47fe-ca83-08d613b2b6d2 and client: UserManagementUI
2018-09-06 01:40:54.839 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-06 01:40:54.886 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "091806fe-9390-47fe-ca83-08d613b2b6d2",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6Hfg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dfe5"
    }
  ],
  "ActivityId": "0HLGJMB5J69FT:00000009",
  "TimeStamp": "2018-09-06T04:40:54Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:40:54.895 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "091806fe-9390-47fe-ca83-08d613b2b6d2",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-06 01:40:54.916 -03:00 [DBG] Augmenting SignInContext
2018-09-06 01:40:54.919 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 01:40:56.124 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 01:40:56.133 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:40:56.136 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:40:56.139 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 01:40:56.144 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 01:40:56.149 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 01:40:56.155 -03:00 [DBG] Start discovery request
2018-09-06 01:40:56.192 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 01:40:56.228 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 01:40:56.237 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:40:56.241 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:40:56.245 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 01:40:56.250 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 01:40:56.256 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 01:40:56.260 -03:00 [DBG] Start key discovery request
2018-09-06 01:40:57.379 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 01:40:57.393 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:40:57.399 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:40:57.465 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 01:40:57.476 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:40:57.480 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:40:57.483 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 01:40:57.489 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 01:40:57.493 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 01:40:57.504 -03:00 [DBG] Start userinfo request
2018-09-06 01:40:57.512 -03:00 [DBG] Bearer token found in header
2018-09-06 01:40:57.542 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:40:57.588 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:57.627 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:40:57.640 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:40:57.648 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:40:57.662 -03:00 [DBG] Creating userinfo response
2018-09-06 01:40:57.669 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:40:57.675 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:40:57.689 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:57.692 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 01:40:57.696 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:40:57.706 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:40:57.728 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-06 01:40:57.732 -03:00 [DBG] End userinfo request
2018-09-06 01:41:00.781 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 01:41:00.799 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:00.805 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:00.812 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 01:41:00.817 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 01:41:00.821 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 01:41:00.825 -03:00 [DBG] Start userinfo request
2018-09-06 01:41:00.833 -03:00 [DBG] Bearer token found in header
2018-09-06 01:41:00.840 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:41:00.905 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:00.951 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:00.961 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:00.966 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:41:00.972 -03:00 [DBG] Creating userinfo response
2018-09-06 01:41:00.976 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:41:00.980 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:41:00.992 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:00.995 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 01:41:00.999 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:41:01.019 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:01.045 -03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-09-06 01:41:01.053 -03:00 [DBG] End userinfo request
2018-09-06 01:41:01.177 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 01:41:01.181 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 01:41:01.184 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 01:41:01.187 -03:00 [DBG] Start discovery request
2018-09-06 01:41:01.212 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 01:41:01.251 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 01:41:01.254 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 01:41:01.257 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 01:41:01.260 -03:00 [DBG] Start key discovery request
2018-09-06 01:41:01.303 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:41:01.308 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:41:01.312 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:41:01.320 -03:00 [DBG] Starting introspection request.
2018-09-06 01:41:01.332 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:41:01.337 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:41:01.340 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:41:01.342 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:41:01.391 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:41:01.402 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:41:01.405 -03:00 [DBG] API resource validation success
2018-09-06 01:41:01.411 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000001",
  "TimeStamp": "2018-09-06T04:41:01Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:41:01.417 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:41:01.423 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:41:01.462 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:01.498 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:01.506 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:01.510 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:41:01.517 -03:00 [DBG] Introspection request validation successful.
2018-09-06 01:41:01.525 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 01:41:01.529 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 01:41:07.991 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:41:11.105 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:41:11.110 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:41:11.114 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:41:11.119 -03:00 [DBG] Starting introspection request.
2018-09-06 01:41:11.122 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:41:11.125 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:41:11.128 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:41:11.132 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:41:11.157 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:41:11.161 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:41:11.165 -03:00 [DBG] API resource validation success
2018-09-06 01:41:11.170 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000002",
  "TimeStamp": "2018-09-06T04:41:11Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:41:11.174 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:41:11.182 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:41:11.232 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:11.272 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:11.279 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:11.283 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:41:11.289 -03:00 [DBG] Introspection request validation successful.
2018-09-06 01:41:11.292 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 01:41:11.294 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 01:41:15.962 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:41:15.969 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:41:15.972 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:41:15.976 -03:00 [DBG] Starting introspection request.
2018-09-06 01:41:15.980 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:41:15.984 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:41:15.988 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:41:15.991 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:41:16.017 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:41:16.023 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:41:16.026 -03:00 [DBG] API resource validation success
2018-09-06 01:41:16.030 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000003",
  "TimeStamp": "2018-09-06T04:41:16Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:41:16.035 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:41:16.044 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:41:16.090 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:16.132 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:16.143 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:16.146 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:41:16.151 -03:00 [DBG] Introspection request validation successful.
2018-09-06 01:41:16.154 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 01:41:16.158 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 01:41:23.003 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:41:38.019 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:41:39.554 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:41:39.558 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:41:39.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:41:39.565 -03:00 [DBG] Starting introspection request.
2018-09-06 01:41:39.568 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:41:39.570 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:41:39.572 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:41:39.575 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:41:39.597 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:41:39.601 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:41:39.604 -03:00 [DBG] API resource validation success
2018-09-06 01:41:39.607 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000004",
  "TimeStamp": "2018-09-06T04:41:39Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:41:39.614 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:41:39.620 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:41:39.665 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:39.702 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:39.710 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:39.714 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:41:39.718 -03:00 [DBG] Introspection request validation successful.
2018-09-06 01:41:39.720 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 01:41:39.723 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 01:41:45.612 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 01:41:45.622 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:45.626 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:45.629 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 01:41:45.633 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 01:41:45.638 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 01:41:45.642 -03:00 [DBG] Start discovery request
2018-09-06 01:41:45.671 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 01:41:45.792 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 01:41:45.801 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:45.805 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:45.808 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 01:41:45.812 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 01:41:45.817 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 01:41:45.823 -03:00 [DBG] Start key discovery request
2018-09-06 01:41:45.867 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 01:41:45.889 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:45.897 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:45.968 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-06 01:41:45.984 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:45.992 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:45.994 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:41:46.011 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-06 01:41:46.015 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:41:46.026 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-06 01:41:46.030 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:41:46.042 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-06 01:41:46.046 -03:00 [DBG] Starting introspection request.
2018-09-06 01:41:46.048 -03:00 [DBG] Start userinfo request
2018-09-06 01:41:46.056 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:41:46.058 -03:00 [DBG] Bearer token found in header
2018-09-06 01:41:46.064 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:41:46.070 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:41:46.071 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:41:46.076 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:41:46.108 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:41:46.113 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:41:46.116 -03:00 [DBG] API resource validation success
2018-09-06 01:41:46.119 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000005",
  "TimeStamp": "2018-09-06T04:41:46Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:41:46.126 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:41:46.133 -03:00 [DBG] LrCS2Xq5rDDWKko3srzZulgv2So5/J1xLbcMs9KmGo0= found in database: true
2018-09-06 01:41:46.194 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:46.197 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:46.247 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:46.251 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:46.256 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:46.264 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:41:46.267 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:46.271 -03:00 [DBG] Introspection request validation successful.
2018-09-06 01:41:46.275 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b2b6041239591556a3a6c9594b61438c2899449e526a3d6ac9ed3bc0cf90dfe5",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536208854,
    "exp": 1536212454,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd",
    "email": "bruno@allto.com.br"
  }
}
2018-09-06 01:41:46.276 -03:00 [DBG] Creating introspection response for active token.
2018-09-06 01:41:46.286 -03:00 [DBG] Creating userinfo response
2018-09-06 01:41:46.286 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-06 01:41:46.290 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:41:46.293 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:41:46.309 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:46.314 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-06 01:41:46.318 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-06 01:41:46.330 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:46.375 -03:00 [INF] Profile service returned to the following claim types: sub picture preferred_username name email email_verified
2018-09-06 01:41:46.380 -03:00 [DBG] End userinfo request
2018-09-06 01:41:48.596 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-09-06 01:41:48.604 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-09-06 01:41:48.607 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-09-06 01:41:48.616 -03:00 [DBG] Processing signout request for 091806fe-9390-47fe-ca83-08d613b2b6d2
2018-09-06 01:41:48.625 -03:00 [DBG] Start end session request validation
2018-09-06 01:41:48.636 -03:00 [DBG] Start identity token validation
2018-09-06 01:41:48.690 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:48.694 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-09-06 01:41:48.715 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-06 01:41:48.722 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1536208854,
    "exp": 1536209154,
    "iss": "https://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "mpqdA965Ednbl3dCKsnZaVSAi7sKBbU2M638Lkkw",
    "iat": 1536208854,
    "at_hash": "Wwsehu4tWChvWfzpPpegEQ",
    "sid": "7e70ec107898b04c66ba5c7c409742a6",
    "sub": "091806fe-9390-47fe-ca83-08d613b2b6d2",
    "auth_time": 1536208840,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-09-06 01:41:48.735 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "091806fe-9390-47fe-ca83-08d613b2b6d2",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjAxOEEyM0IyOTM3QjZGRTQxRkRGRjIwQkZDMUUyMEI2MjU5NTBGMTAiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJBWW9qc3BON2ItUWYzX0lMX0I0Z3RpV1ZEeEEifQ.eyJuYmYiOjE1MzYyMDg4NTQsImV4cCI6MTUzNjIwOTE1NCwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6IlVzZXJNYW5hZ2VtZW50VUkiLCJub25jZSI6Im1wcWRBOTY1RWRuYmwzZENLc25aYVZTQWk3c0tCYlUyTTYzOExra3ciLCJpYXQiOjE1MzYyMDg4NTQsImF0X2hhc2giOiJXd3NlaHU0dFdDaHZXZnpwUHBlZ0VRIiwic2lkIjoiN2U3MGVjMTA3ODk4YjA0YzY2YmE1YzdjNDA5NzQyYTYiLCJzdWIiOiIwOTE4MDZmZS05MzkwLTQ3ZmUtY2E4My0wOGQ2MTNiMmI2ZDIiLCJhdXRoX3RpbWUiOjE1MzYyMDg4NDAsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.IF8ygVBqIVQGhu1RtnuoDFt0IKVhs11QvM6L6IrHVM2E7X4nGF_zGETVK6nebhOhAtIRhDl71FnTmww00QR6w_vvxY9M0wk4icqc_jZTz5NCdjkszWJE747NKyjB2VXRdyIByMGdOg9CIXVDE_R8TQBTtw9whcB9lK2g7ZddpzAJZeSj9liTckHIX8gRg6fAnOIDYlSkDVraZdKPcjxDcfkWyhgLCcHrhcDGFxA-wknbOUeRgp-ReTeHf9jQbQXHpW1H3yGvclyuElqs3sni0aizPzI9kUCqZVlBxnerrE-d3nq7NbdBcu-UCe-spWBu6zawq8Q6xMwKRP0CSk6Hfg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-09-06 01:41:48.745 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-09-06 01:41:48.800 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-06 01:41:48.807 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 01:41:48.815 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-06 01:41:48.824 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "091806fe-9390-47fe-ca83-08d613b2b6d2",
  "DisplayName": "bruno",
  "ActivityId": "0HLGJMB5J69FT:0000000B",
  "TimeStamp": "2018-09-06T04:41:48Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:41:49.009 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-09-06 01:41:49.020 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-09-06 01:41:49.025 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-09-06 01:41:49.037 -03:00 [DBG] Processing signout callback request
2018-09-06 01:41:49.090 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:49.094 -03:00 [DBG] No client front-channel logout URLs
2018-09-06 01:41:49.097 -03:00 [DBG] No client back-channel logout URLs
2018-09-06 01:41:49.099 -03:00 [INF] Successful signout callback.
2018-09-06 01:41:49.102 -03:00 [DBG] No client front-channel iframe urls
2018-09-06 01:41:49.104 -03:00 [DBG] No client back-channel iframe urls
2018-09-06 01:41:51.596 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 01:41:51.605 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:51.608 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:51.610 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 01:41:51.613 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 01:41:51.617 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 01:41:51.620 -03:00 [DBG] Start discovery request
2018-09-06 01:41:51.658 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 01:41:51.704 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 01:41:51.714 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:51.719 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:51.722 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 01:41:51.726 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 01:41:51.730 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 01:41:51.736 -03:00 [DBG] Start key discovery request
2018-09-06 01:41:51.788 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 01:41:51.793 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 01:41:51.804 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 01:41:51.819 -03:00 [DBG] Start authorize request
2018-09-06 01:41:51.822 -03:00 [DBG] No user present in authorize request
2018-09-06 01:41:51.825 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:41:51.867 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:51.879 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:51.902 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:41:51.912 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:51.937 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:41:51.941 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:41:51.944 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "LyUM7eFlxRPWlkdANdNrZXJdGOCBu5ntoV8KgsJD",
  "Nonce": "LyUM7eFlxRPWlkdANdNrZXJdGOCBu5ntoV8KgsJD",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "LyUM7eFlxRPWlkdANdNrZXJdGOCBu5ntoV8KgsJD",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "LyUM7eFlxRPWlkdANdNrZXJdGOCBu5ntoV8KgsJD"
  }
}
2018-09-06 01:41:51.950 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 01:41:51.958 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:41:52.001 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:52.017 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:52.045 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:41:52.061 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:41:52.085 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:41:52.089 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:41:52.125 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:41:53.040 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:41:54.671 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 01:41:54.680 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:54.684 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:54.688 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 01:41:54.692 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 01:41:54.696 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 01:41:54.701 -03:00 [DBG] Start discovery request
2018-09-06 01:41:54.746 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 01:41:54.833 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 01:41:54.843 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 01:41:54.850 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 01:41:54.855 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 01:41:54.861 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 01:41:54.866 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 01:41:54.870 -03:00 [DBG] Start key discovery request
2018-09-06 01:42:00.518 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:42:00.522 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:42:00.526 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:42:00.529 -03:00 [DBG] Starting introspection request.
2018-09-06 01:42:00.532 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:42:00.535 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:42:00.537 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:42:00.539 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:42:00.557 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:42:00.560 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:42:00.562 -03:00 [DBG] API resource validation success
2018-09-06 01:42:00.565 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000006",
  "TimeStamp": "2018-09-06T04:42:00Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:42:00.569 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:42:00.576 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 01:42:00.579 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 01:42:00.583 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 01:42:00.586 -03:00 [DBG] Token is invalid.
2018-09-06 01:42:00.588 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 01:42:00.592 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 01:42:02.307 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:42:02.311 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:42:02.314 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:42:02.317 -03:00 [DBG] Starting introspection request.
2018-09-06 01:42:02.320 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:42:02.322 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:42:02.325 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:42:02.327 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:42:02.349 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:42:02.352 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:42:02.354 -03:00 [DBG] API resource validation success
2018-09-06 01:42:02.357 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000007",
  "TimeStamp": "2018-09-06T04:42:02Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:42:02.360 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:42:02.366 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 01:42:02.369 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 01:42:02.373 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 01:42:02.376 -03:00 [DBG] Token is invalid.
2018-09-06 01:42:02.379 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 01:42:02.381 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 01:42:06.476 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:42:06.481 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:42:06.485 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:42:06.488 -03:00 [DBG] Starting introspection request.
2018-09-06 01:42:06.491 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:42:06.493 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:42:06.495 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:42:06.497 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:42:06.518 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:42:06.522 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:42:06.525 -03:00 [DBG] API resource validation success
2018-09-06 01:42:06.527 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000008",
  "TimeStamp": "2018-09-06T04:42:06Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:42:06.533 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:42:06.539 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 01:42:06.542 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 01:42:06.545 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 01:42:06.548 -03:00 [DBG] Token is invalid.
2018-09-06 01:42:06.550 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 01:42:06.552 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 01:42:07.073 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:42:07.077 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:42:07.079 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:42:07.082 -03:00 [DBG] Starting introspection request.
2018-09-06 01:42:07.085 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:42:07.087 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:42:07.089 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:42:07.092 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:42:07.112 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:42:07.116 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:42:07.118 -03:00 [DBG] API resource validation success
2018-09-06 01:42:07.121 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:00000009",
  "TimeStamp": "2018-09-06T04:42:07Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:42:07.125 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:42:07.132 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 01:42:07.137 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 01:42:07.141 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 01:42:07.145 -03:00 [DBG] Token is invalid.
2018-09-06 01:42:07.148 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 01:42:07.150 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 01:42:08.057 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:42:23.065 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:42:25.203 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-06 01:42:25.207 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-06 01:42:25.210 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-06 01:42:25.213 -03:00 [DBG] Starting introspection request.
2018-09-06 01:42:25.217 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-06 01:42:25.220 -03:00 [DBG] Start parsing for secret in post body
2018-09-06 01:42:25.223 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-06 01:42:25.226 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-06 01:42:25.247 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-06 01:42:25.251 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-06 01:42:25.253 -03:00 [DBG] API resource validation success
2018-09-06 01:42:25.255 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGJMB5J69G3:0000000A",
  "TimeStamp": "2018-09-06T04:42:25Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:42:25.259 -03:00 [DBG] Introspection request validation started.
2018-09-06 01:42:25.265 -03:00 [DBG] KHbWVo2m2jDjt+N6WMBnw/Hx5FbGNKoQP7MrOKHa3cA= found in database: false
2018-09-06 01:42:25.268 -03:00 [DBG] reference_token grant with value: null not found in store.
2018-09-06 01:42:25.271 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "null"
}
2018-09-06 01:42:25.274 -03:00 [DBG] Token is invalid.
2018-09-06 01:42:25.276 -03:00 [DBG] Creating introspection response for inactive token.
2018-09-06 01:42:25.278 -03:00 [INF] Success token introspection. Token active: false, for API name: UserManagementApi
2018-09-06 01:42:25.677 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 01:42:25.691 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 01:42:25.697 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 01:42:25.703 -03:00 [DBG] Start authorize request
2018-09-06 01:42:25.706 -03:00 [DBG] No user present in authorize request
2018-09-06 01:42:25.710 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:42:25.752 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:42:25.763 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:25.788 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:25.800 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:25.822 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:25.828 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:42:25.832 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto",
  "Nonce": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto"
  }
}
2018-09-06 01:42:25.843 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 01:42:25.853 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:42:25.898 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:42:25.911 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:25.937 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:25.948 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:25.974 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:25.981 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:42:26.042 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:42:37.530 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-09-06 01:42:38.084 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:42:42.950 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 01:42:48.732 -03:00 [INF] Provider Google associated.
2018-09-06 01:42:48.795 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "83966a50-d46f-45e7-9af1-ffd8fb7f3d45",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGJMB5J69FT:00000014",
  "TimeStamp": "2018-09-06T04:42:48Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:42:48.807 -03:00 [DBG] Augmenting SignInContext
2018-09-06 01:42:48.810 -03:00 [DBG] Adding amr claim with value: external
2018-09-06 01:42:48.813 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 01:42:48.817 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 01:42:48.827 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 01:42:48.830 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 01:42:48.836 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 01:42:48.839 -03:00 [DBG] Start authorize callback request
2018-09-06 01:42:48.843 -03:00 [DBG] User in authorize request: 83966a50-d46f-45e7-9af1-ffd8fb7f3d45
2018-09-06 01:42:48.847 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:42:48.889 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:42:48.903 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:48.926 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:48.936 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:48.958 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:48.962 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:42:48.965 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "83966a50-d46f-45e7-9af1-ffd8fb7f3d45",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto",
  "Nonce": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto",
  "SessionId": "14016add7c1308a377d9ae18b3a4de27",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "Is5x187K5t9wf3c4IMNDbt2ofZ7emha1u47K0qto"
  }
}
2018-09-06 01:42:48.980 -03:00 [DBG] rH+JtHL3rFmXTslKDlLH0m7yGgVf2iE9my/vWznCeeQ= found in database: false
2018-09-06 01:42:48.984 -03:00 [DBG] user_consent grant with value: UserManagementUI|83966a50-d46f-45e7-9af1-ffd8fb7f3d45 not found in store.
2018-09-06 01:42:48.987 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 01:42:48.991 -03:00 [INF] Showing consent: User has not yet consented
2018-09-06 01:42:48.998 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 01:42:49.057 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:42:49.070 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:49.094 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:49.105 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:49.130 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:49.137 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 01:42:49.186 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 01:42:49.200 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 01:42:49.225 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 01:42:53.096 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:42:53.850 -03:00 [DBG] 0 persisted grants found for 83966a50-d46f-45e7-9af1-ffd8fb7f3d45
2018-09-06 01:43:01.581 -03:00 [DBG] 0 persisted grants found for 83966a50-d46f-45e7-9af1-ffd8fb7f3d45
2018-09-06 01:43:05.469 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-09-06 01:43:05.484 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-09-06 01:43:05.489 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 01:43:05.492 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-09-06 01:43:05.496 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "83966a50-d46f-45e7-9af1-ffd8fb7f3d45",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLGJMB5J69FT:0000001B",
  "TimeStamp": "2018-09-06T04:43:05Z",
  "ProcessId": 21112,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 01:43:08.110 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:43:23.126 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:43:38.141 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:43:53.146 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:44:08.161 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:44:23.191 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:44:38.217 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:44:53.242 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:45:08.255 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:45:23.285 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:45:38.302 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:45:53.314 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:46:08.328 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:46:23.346 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:46:38.362 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:46:53.370 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:47:08.397 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:47:23.410 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:47:38.436 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:47:53.456 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:48:08.482 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:48:23.501 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:48:38.521 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:48:53.531 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:49:08.547 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:49:23.565 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:49:38.583 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:49:53.602 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:50:08.615 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:50:23.633 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:50:38.640 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:50:53.656 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:51:08.672 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:51:23.689 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:51:38.704 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:51:53.721 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:52:08.738 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:52:23.758 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:52:38.769 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:52:53.784 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:53:08.798 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:53:23.817 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:53:38.828 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:53:53.844 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:54:08.862 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:54:23.876 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:54:38.892 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:54:53.913 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:55:08.926 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:55:23.946 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:55:38.953 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:55:53.969 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:56:08.985 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:56:24.001 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:56:39.020 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:56:54.038 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:57:09.051 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:57:24.067 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:57:39.087 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:57:54.097 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:58:09.109 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:58:24.132 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:58:39.155 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:58:54.183 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:59:09.216 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:59:24.236 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:59:39.250 -03:00 [INF] Clearing 0 tokens
2018-09-06 01:59:54.270 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:00:09.296 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:00:24.327 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:00:39.346 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:00:54.365 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:01:09.386 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:01:24.403 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:01:39.421 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:01:54.429 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:02:09.449 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:02:24.456 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:02:39.469 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:02:54.486 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:03:09.509 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:03:24.535 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:03:39.554 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:03:54.562 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:04:09.579 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:04:24.598 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:04:39.613 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:04:54.629 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:05:09.655 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:05:24.680 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:05:39.699 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:05:54.729 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:06:09.754 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:06:24.772 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:06:39.790 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:06:54.799 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:07:09.813 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:07:24.834 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:07:39.856 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:07:54.873 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:08:09.894 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:08:24.914 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:08:39.929 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:08:54.937 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:09:09.944 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:09:24.961 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:09:39.978 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:09:54.988 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:10:10.004 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:10:25.018 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:10:40.036 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:10:55.053 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:11:10.072 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:11:25.083 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:11:40.111 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:31:12.914 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 02:31:13.030 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 02:31:17.186 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-06 02:31:17.203 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-06 02:31:17.206 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-06 02:31:17.209 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-06 02:31:17.214 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-06 02:31:17.331 -03:00 [DBG] Starting token cleanup
2018-09-06 02:31:32.414 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:31:47.449 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:32:02.470 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:32:17.486 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:32:32.506 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:32:47.521 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:33:02.554 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:33:14.072 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-06 02:33:14.195 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 02:33:14.199 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 02:33:14.234 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-06 02:33:14.243 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-06 02:33:14.246 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-06 02:33:14.252 -03:00 [DBG] Start discovery request
2018-09-06 02:33:14.594 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-06 02:33:14.656 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-06 02:33:14.662 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-06 02:33:14.665 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-06 02:33:14.668 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-06 02:33:14.671 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-06 02:33:14.675 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-06 02:33:14.680 -03:00 [DBG] Start key discovery request
2018-09-06 02:33:14.737 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-06 02:33:14.754 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-06 02:33:14.761 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-06 02:33:14.768 -03:00 [DBG] Start authorize request
2018-09-06 02:33:14.780 -03:00 [DBG] No user present in authorize request
2018-09-06 02:33:14.790 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 02:33:15.142 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 02:33:15.186 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:15.299 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:15.319 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:15.341 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:15.354 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 02:33:15.366 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS",
  "Nonce": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS"
  }
}
2018-09-06 02:33:15.382 -03:00 [INF] Showing login: User is not authenticated
2018-09-06 02:33:15.522 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 02:33:15.556 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 02:33:15.566 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:15.585 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:15.595 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:15.614 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:15.618 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 02:33:15.660 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 02:33:17.578 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:33:18.625 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-06 02:33:20.182 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-06 02:33:20.410 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "39c47430-63ec-4117-aef4-7d7255941fe1",
  "DisplayName": "bhdebrito123",
  "Endpoint": "UI",
  "ActivityId": "0HLGJN8UQPV76:00000005",
  "TimeStamp": "2018-09-06T05:33:20Z",
  "ProcessId": 19920,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-06 02:33:20.423 -03:00 [DBG] Augmenting SignInContext
2018-09-06 02:33:20.427 -03:00 [DBG] Adding amr claim with value: external
2018-09-06 02:33:20.434 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-06 02:33:20.442 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-06 02:33:20.466 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-06 02:33:20.470 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-06 02:33:20.473 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-06 02:33:20.480 -03:00 [DBG] Start authorize callback request
2018-09-06 02:33:20.485 -03:00 [DBG] User in authorize request: 39c47430-63ec-4117-aef4-7d7255941fe1
2018-09-06 02:33:20.489 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 02:33:20.531 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 02:33:20.548 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:20.572 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:20.583 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:20.606 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:20.610 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 02:33:20.614 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "39c47430-63ec-4117-aef4-7d7255941fe1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS",
  "Nonce": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS",
  "SessionId": "eb6843d473d406f8ae217ce6baa3b4e4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "SefcnIm3ju8Gz52qsWstJ7JvmKIkeGLcxIVb6hKS"
  }
}
2018-09-06 02:33:20.673 -03:00 [DBG] WxuI4ibBnlUTly5ku/N3QtgcoR6pt9EF5sGFbPUAKrM= found in database: false
2018-09-06 02:33:20.678 -03:00 [DBG] user_consent grant with value: UserManagementUI|39c47430-63ec-4117-aef4-7d7255941fe1 not found in store.
2018-09-06 02:33:20.682 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-09-06 02:33:20.684 -03:00 [INF] Showing consent: User has not yet consented
2018-09-06 02:33:20.716 -03:00 [DBG] Start authorize request protocol validation
2018-09-06 02:33:20.757 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 02:33:20.770 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:20.796 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:20.807 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:20.833 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:33:20.837 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-06 02:33:20.880 -03:00 [DBG] UserManagementUI found in database: true
2018-09-06 02:33:20.889 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-06 02:33:20.908 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-06 02:42:06.544 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-06 02:42:06.757 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-06 02:42:11.273 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-06 02:42:11.289 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-06 02:42:11.292 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-06 02:42:11.294 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-06 02:42:11.299 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-06 02:42:11.416 -03:00 [DBG] Starting token cleanup
2018-09-06 02:42:26.541 -03:00 [INF] Clearing 1 tokens
2018-09-06 02:42:41.676 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:42:56.690 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:43:11.707 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:43:26.727 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:43:41.734 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:43:56.751 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:44:11.766 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:44:26.783 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:44:41.806 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:44:56.821 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:45:11.838 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:45:26.864 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:45:41.884 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:45:56.893 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:46:11.908 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:46:26.932 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:46:41.957 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:46:56.970 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:47:11.987 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:47:27.004 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:47:42.016 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:47:57.035 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:48:12.056 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:48:27.068 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:48:42.082 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:48:57.100 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:49:12.113 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:49:27.135 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:49:42.144 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:49:57.157 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:50:12.174 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:50:27.189 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:50:42.208 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:50:57.226 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:51:12.242 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:51:27.251 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:51:42.265 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:51:57.281 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:52:12.298 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:52:27.330 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:52:42.347 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:52:57.359 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:53:12.383 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:53:27.395 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:53:42.408 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:53:57.426 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:54:12.443 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:54:27.456 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:54:42.484 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:54:57.500 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:55:12.519 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:55:27.533 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:55:42.551 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:55:57.572 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:56:12.594 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:56:27.611 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:56:42.627 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:56:57.644 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:57:12.656 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:57:27.673 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:57:42.688 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:57:57.703 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:58:12.733 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:58:27.754 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:58:42.772 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:58:57.789 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:59:12.807 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:59:27.834 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:59:42.861 -03:00 [INF] Clearing 0 tokens
2018-09-06 02:59:57.891 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:00:12.911 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:00:27.933 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:00:42.943 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:00:57.958 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:01:12.971 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:01:27.986 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:01:43.004 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:01:58.026 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:02:13.048 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:02:28.062 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:02:43.078 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:02:58.095 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:03:13.109 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:03:28.125 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:03:43.142 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:03:58.161 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:04:13.196 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:04:28.206 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:04:43.221 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:04:58.236 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:05:13.250 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:05:28.267 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:05:43.290 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:05:58.301 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:06:13.314 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:06:28.332 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:06:43.347 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:06:58.365 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:07:13.377 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:07:28.405 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:07:43.433 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:07:58.455 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:08:13.471 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:08:28.486 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:08:43.505 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:08:58.523 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:09:13.534 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:09:28.548 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:09:43.567 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:09:58.595 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:10:13.623 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:10:28.642 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:10:43.666 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:10:58.687 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:11:13.703 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:11:28.722 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:11:43.734 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:11:58.755 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:12:13.770 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:12:28.789 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:12:43.815 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:12:58.828 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:13:13.845 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:13:28.862 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:13:43.877 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:13:58.897 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:14:13.917 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:14:28.927 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:14:43.940 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:14:58.957 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:15:13.971 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:15:28.991 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:15:44.003 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:15:59.017 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:16:14.034 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:16:29.043 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:16:44.065 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:16:59.080 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:17:14.095 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:17:29.121 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:17:44.141 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:17:59.160 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:18:14.176 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:18:29.194 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:18:44.215 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:18:59.240 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:19:14.282 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:19:29.305 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:19:44.313 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:19:59.336 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:20:14.357 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:20:29.364 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:20:44.378 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:20:59.394 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:21:14.413 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:21:29.430 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:21:44.437 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:21:59.445 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:22:14.457 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:22:29.472 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:22:44.490 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:22:59.507 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:23:14.516 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:23:29.534 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:23:44.551 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:23:59.562 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:24:14.578 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:24:29.594 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:24:44.612 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:24:59.627 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:25:14.647 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:25:29.670 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:25:44.688 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:25:59.707 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:26:14.723 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:26:29.741 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:26:44.759 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:26:59.769 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:27:14.782 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:27:29.798 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:27:44.814 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:27:59.829 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:28:14.848 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:28:29.868 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:28:44.892 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:28:59.911 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:29:14.930 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:29:29.940 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:29:44.955 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:29:59.972 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:30:14.990 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:30:30.015 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:30:45.037 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:31:00.049 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:31:15.066 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:31:30.087 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:31:45.099 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:32:00.120 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:32:15.188 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:32:30.211 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:32:45.221 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:33:00.234 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:33:15.255 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:33:30.281 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:33:45.298 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:34:00.313 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:34:15.329 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:34:30.355 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:34:45.362 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:35:00.376 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:35:15.391 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:35:30.412 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:35:45.431 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:36:00.446 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:36:15.455 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:36:30.478 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:36:45.489 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:37:00.505 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:37:15.524 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:37:30.537 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:37:45.552 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:38:00.570 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:38:15.591 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:38:30.598 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:38:45.609 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:39:00.628 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:39:15.641 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:39:30.656 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:39:45.674 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:40:00.689 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:40:15.706 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:40:30.724 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:40:45.737 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:41:00.751 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:41:15.773 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:41:30.788 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:41:45.797 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:42:00.817 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:42:15.831 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:42:30.843 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:42:45.861 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:43:00.875 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:43:15.908 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:43:30.929 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:43:45.943 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:44:00.960 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:44:15.971 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:44:30.988 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:44:46.005 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:45:01.027 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:45:16.047 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:45:31.065 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:45:46.080 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:46:01.099 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:46:16.114 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:46:31.128 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:46:46.145 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:47:01.166 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:47:16.174 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:47:31.190 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:47:46.202 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:48:01.218 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:48:16.237 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:48:31.256 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:48:46.271 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:49:01.282 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:49:16.302 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:49:31.321 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:49:46.331 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:50:01.345 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:50:16.362 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:50:31.381 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:50:46.409 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:51:01.423 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:51:16.442 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:51:31.458 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:51:46.473 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:52:01.490 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:52:16.503 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:52:31.518 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:52:46.533 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:53:01.547 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:53:16.572 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:53:31.582 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:53:46.598 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:54:01.612 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:54:16.626 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:54:31.643 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:54:46.659 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:55:01.677 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:55:16.699 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:55:31.708 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:55:46.722 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:56:01.743 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:56:16.765 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:56:31.770 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:56:46.789 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:57:01.805 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:57:16.831 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:57:31.850 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:57:46.858 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:58:01.877 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:58:16.895 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:58:31.908 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:58:46.923 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:59:01.939 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:59:16.966 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:59:31.989 -03:00 [INF] Clearing 0 tokens
2018-09-06 03:59:47.007 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:00:02.021 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:00:17.040 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:00:32.052 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:00:47.071 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:01:02.082 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:01:17.094 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:01:32.117 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:01:47.131 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:02:02.142 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:02:17.160 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:02:32.176 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:02:47.194 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:03:02.215 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:03:17.235 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:03:32.250 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:03:47.276 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:04:02.299 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:04:17.313 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:04:32.331 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:04:47.346 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:05:02.364 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:05:17.376 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:05:32.401 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:05:47.407 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:06:02.436 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:06:17.461 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:06:32.491 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:06:47.500 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:07:02.516 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:07:17.537 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:07:32.559 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:07:47.581 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:08:02.598 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:08:17.614 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:08:32.626 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:08:47.639 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:09:02.660 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:09:17.674 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:09:32.694 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:09:47.715 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:10:02.722 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:10:17.735 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:10:32.752 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:10:47.769 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:11:02.782 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:11:17.798 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:11:32.812 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:11:47.835 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:12:02.867 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:12:17.889 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:12:32.910 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:12:47.925 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:13:02.943 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:13:17.966 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:13:32.991 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:13:48.000 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:14:03.022 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:14:18.039 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:14:33.051 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:14:48.076 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:15:03.094 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:15:18.110 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:15:33.133 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:15:48.153 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:16:03.179 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:16:18.195 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:16:33.223 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:16:48.234 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:17:03.254 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:17:18.276 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:17:33.286 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:17:48.304 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:18:03.320 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:18:18.338 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:18:33.359 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:18:48.375 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:19:03.391 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:19:18.411 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:19:33.430 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:19:48.445 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:20:03.462 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:20:18.486 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:20:33.501 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:20:48.525 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:21:03.532 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:21:18.542 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:21:33.554 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:21:48.573 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:22:03.597 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:22:18.613 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:22:33.629 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:22:48.645 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:23:03.669 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:23:18.691 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:23:33.706 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:23:48.723 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:24:03.741 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:24:18.751 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:24:33.768 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:24:48.782 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:25:03.789 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:25:18.808 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:25:33.835 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:25:48.853 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:26:03.870 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:26:18.892 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:26:33.909 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:26:48.935 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:27:03.953 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:27:18.969 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:27:34.001 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:27:49.024 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:28:04.048 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:28:19.064 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:28:34.080 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:28:49.104 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:29:04.114 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:29:19.131 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:29:34.145 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:29:49.162 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:30:04.172 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:30:19.192 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:30:34.208 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:30:49.220 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:31:04.239 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:31:19.253 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:31:34.269 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:31:49.288 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:32:04.308 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:32:19.332 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:32:34.344 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:32:49.363 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:33:04.376 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:33:19.390 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:33:34.413 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:33:49.422 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:34:04.438 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:34:19.457 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:34:34.472 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:34:49.486 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:35:04.513 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:35:19.522 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:35:34.535 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:35:49.546 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:36:04.564 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:36:19.586 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:36:34.605 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:36:49.626 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:37:04.642 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:37:19.660 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:37:34.676 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:37:49.693 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:38:04.704 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:38:19.723 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:38:34.756 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:38:49.782 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:39:04.798 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:39:19.816 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:39:34.840 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:39:49.864 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:40:04.878 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:40:19.892 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:40:34.915 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:40:49.938 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:41:04.960 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:41:19.978 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:41:35.013 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:41:50.037 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:42:05.058 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:42:20.066 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:42:35.089 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:42:50.117 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:43:05.126 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:43:20.142 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:43:35.162 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:43:50.172 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:44:05.190 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:44:20.210 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:44:35.234 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:44:50.251 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:45:05.275 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:45:20.303 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:45:35.323 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:45:50.345 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:46:05.363 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:46:20.375 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:46:35.391 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:46:50.413 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:47:05.426 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:47:20.454 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:47:35.469 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:47:50.488 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:48:05.500 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:48:20.518 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:48:35.534 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:48:50.546 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:49:05.562 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:49:20.582 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:49:35.600 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:49:50.616 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:50:05.630 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:50:20.662 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:50:35.690 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:50:50.708 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:51:05.720 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:51:20.725 -03:00 [INF] Clearing 0 tokens
2018-09-06 04:51:35.747 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:27:48.141 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 11:27:48.194 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 11:27:52.319 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 11:27:52.330 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 11:27:52.331 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 11:27:52.333 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 11:27:52.334 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 11:27:52.542 -03:00 [DBG] Starting token cleanup
2018-09-07 11:28:07.615 -03:00 [INF] Clearing 1 tokens
2018-09-07 11:28:22.708 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:28:37.727 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:28:52.737 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:29:07.748 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:29:22.752 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:29:37.760 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:29:52.769 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:30:07.783 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:30:19.418 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 11:30:19.425 -03:00 [DBG] Stopping token cleanup
2018-09-07 11:53:56.064 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 11:53:56.105 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 11:53:59.530 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 11:53:59.541 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 11:53:59.542 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 11:53:59.543 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 11:53:59.545 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 11:53:59.769 -03:00 [DBG] Starting token cleanup
2018-09-07 11:54:07.363 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 11:54:07.370 -03:00 [DBG] Stopping token cleanup
2018-09-07 11:54:22.318 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 11:54:22.360 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 11:54:25.139 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 11:54:25.148 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 11:54:25.149 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 11:54:25.150 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 11:54:25.150 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 11:54:25.349 -03:00 [DBG] Starting token cleanup
2018-09-07 11:54:40.405 -03:00 [INF] Clearing 0 tokens
2018-09-07 11:54:44.248 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 11:54:44.255 -03:00 [DBG] Stopping token cleanup
2018-09-07 12:00:53.092 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 12:00:53.132 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 12:00:56.029 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 12:00:56.040 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 12:00:56.043 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 12:00:56.047 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 12:00:56.048 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 12:00:56.419 -03:00 [DBG] Starting token cleanup
2018-09-07 12:01:11.482 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:01:26.496 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:01:41.515 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:01:56.526 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:02:11.541 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:02:26.558 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:02:41.561 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:02:56.576 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:03:11.581 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:03:26.589 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:03:41.593 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:03:56.601 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:04:11.606 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:04:26.617 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:04:41.625 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:04:56.635 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:05:11.642 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:05:26.651 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:05:41.657 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:05:56.666 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:06:11.673 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:06:26.685 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:06:41.689 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:06:56.702 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:07:11.703 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:07:26.714 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:07:41.716 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:07:43.327 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 12:07:43.440 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:07:43.441 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:07:43.476 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:07:43.484 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:07:43.485 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:07:43.489 -03:00 [DBG] Start discovery request
2018-09-07 12:07:43.771 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:07:43.818 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 12:07:43.822 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:07:43.822 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:07:43.823 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:07:43.825 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:07:43.825 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:07:43.829 -03:00 [DBG] Start key discovery request
2018-09-07 12:07:43.880 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:07:43.883 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:07:43.886 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-07 12:07:43.901 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-07 12:07:43.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-07 12:07:43.906 -03:00 [DBG] Start authorize request
2018-09-07 12:07:43.929 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:07:43.934 -03:00 [DBG] No user present in authorize request
2018-09-07 12:07:43.944 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 12:07:44.123 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:07:44.153 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:07:44.186 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:07:44.196 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:07:44.202 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:07:44.209 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 12:07:44.217 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "g7laBEXcmtnz2EIrhqkLVnYdHhLkqjZJqxr0XK7s",
  "Nonce": "g7laBEXcmtnz2EIrhqkLVnYdHhLkqjZJqxr0XK7s",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "g7laBEXcmtnz2EIrhqkLVnYdHhLkqjZJqxr0XK7s",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "g7laBEXcmtnz2EIrhqkLVnYdHhLkqjZJqxr0XK7s"
  }
}
2018-09-07 12:07:44.227 -03:00 [INF] Showing login: User is not authenticated
2018-09-07 12:07:44.236 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:07:44.236 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:07:44.398 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:07:44.400 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 12:07:44.413 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:07:44.416 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:07:44.424 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:07:44.428 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:07:44.435 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:07:44.436 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 12:07:44.451 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:07:56.730 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:08:11.733 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:08:26.736 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:08:41.748 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:08:48.847 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 12:08:48.851 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:08:48.852 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:08:48.854 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:08:48.857 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:08:48.860 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:08:48.862 -03:00 [DBG] Start discovery request
2018-09-07 12:08:48.876 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:08:48.933 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 12:08:48.937 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:08:48.938 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:08:48.939 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:08:48.941 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:08:48.942 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:08:48.943 -03:00 [DBG] Start key discovery request
2018-09-07 12:08:48.979 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:48.981 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:48.984 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-07 12:08:48.986 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-07 12:08:48.987 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-07 12:08:48.988 -03:00 [DBG] Start authorize request
2018-09-07 12:08:48.989 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:48.991 -03:00 [DBG] No user present in authorize request
2018-09-07 12:08:48.995 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 12:08:49.015 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:08:49.022 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:49.033 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:08:49.038 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:49.043 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:08:49.044 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 12:08:49.047 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF",
  "Nonce": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF"
  }
}
2018-09-07 12:08:49.050 -03:00 [INF] Showing login: User is not authenticated
2018-09-07 12:08:49.052 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:49.053 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:49.057 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:49.058 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 12:08:49.070 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:08:49.073 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:49.078 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:08:49.082 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:49.086 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:08:49.087 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 12:08:49.096 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:08:53.050 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:53.052 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:53.068 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-09-07 12:08:54.356 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-09-07 12:08:54.364 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:54.365 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:54.519 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLGKQE8FGNLH:00000008",
  "TimeStamp": "2018-09-07T15:08:54Z",
  "ProcessId": 29156,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-07 12:08:54.528 -03:00 [DBG] Augmenting SignInContext
2018-09-07 12:08:54.531 -03:00 [DBG] Adding amr claim with value: external
2018-09-07 12:08:54.533 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-09-07 12:08:54.535 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-07 12:08:54.539 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-09-07 12:08:54.555 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-09-07 12:08:54.557 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-09-07 12:08:54.558 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-09-07 12:08:54.563 -03:00 [DBG] Start authorize callback request
2018-09-07 12:08:54.565 -03:00 [DBG] User in authorize request: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 12:08:54.566 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 12:08:54.575 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:08:54.577 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:54.582 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:08:54.585 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:54.588 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:08:54.589 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 12:08:54.590 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF",
  "Nonce": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF",
  "SessionId": "e8b04a3881d96e5b27d40fdcc64ba9cb",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF"
  }
}
2018-09-07 12:08:54.638 -03:00 [DBG] 0tlgkubKW7U2h003V5cqQvbdpTRy3/nBXFkBR+pQVz0= found in database: true
2018-09-07 12:08:54.645 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-07 12:08:54.651 -03:00 [DBG] Creating Implicit Flow response.
2018-09-07 12:08:54.658 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-07 12:08:54.658 -03:00 [DBG] Getting claims for access token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 12:08:54.689 -03:00 [DBG] PTAosuSR1XjIui9KxuDbZwTb1kWy6pYjgSo+ohuMTBA= not found in database
2018-09-07 12:08:54.797 -03:00 [DBG] Getting claims for identity token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27 and client: UserManagementUI
2018-09-07 12:08:54.799 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-07 12:08:54.829 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DJ5w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****c6d7"
    }
  ],
  "ActivityId": "0HLGKQE8FGNLH:00000009",
  "TimeStamp": "2018-09-07T15:08:54Z",
  "ProcessId": 29156,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-07 12:08:54.836 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "PcTmYNsGpTSlayTvb7jvckOwpVNED0N0y3ehgLyF",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-07 12:08:54.848 -03:00 [DBG] Augmenting SignInContext
2018-09-07 12:08:54.849 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-09-07 12:08:55.525 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 12:08:55.530 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:08:55.530 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:08:55.531 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:08:55.532 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:08:55.533 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:08:55.533 -03:00 [DBG] Start discovery request
2018-09-07 12:08:55.539 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:08:55.613 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 12:08:55.616 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:08:55.616 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:08:55.617 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:08:55.618 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:08:55.619 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:08:55.621 -03:00 [DBG] Start key discovery request
2018-09-07 12:08:56.713 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 12:08:56.716 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:08:56.716 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:08:56.761 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:08:56.780 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 12:08:56.784 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:08:56.785 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:08:56.785 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-07 12:08:56.788 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-07 12:08:56.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-07 12:08:56.794 -03:00 [DBG] Start userinfo request
2018-09-07 12:08:56.797 -03:00 [DBG] Bearer token found in header
2018-09-07 12:08:56.810 -03:00 [DBG] PTAosuSR1XjIui9KxuDbZwTb1kWy6pYjgSo+ohuMTBA= found in database: true
2018-09-07 12:08:56.829 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:08:56.840 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:08:56.845 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-07 12:08:56.848 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "2d04dbe55bbf4cd2bcf4035c7c088ef1a9b1c99c185830a61e808c4a7db4c6d7",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536332934,
    "exp": 1536336534,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536332934,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-07 12:08:56.856 -03:00 [DBG] Creating userinfo response
2018-09-07 12:08:56.860 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:08:56.863 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:08:56.867 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:56.868 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-07 12:08:56.869 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:08:56.871 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:08:56.875 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-07 12:08:56.877 -03:00 [DBG] End userinfo request
2018-09-07 12:09:11.767 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:09:26.773 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:09:34.567 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 12:09:34.582 -03:00 [DBG] Stopping token cleanup
2018-09-07 12:09:42.842 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 12:09:42.883 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 12:09:46.207 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 12:09:46.216 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 12:09:46.218 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 12:09:46.218 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 12:09:46.219 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 12:09:46.446 -03:00 [DBG] Starting token cleanup
2018-09-07 12:10:01.510 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:10:02.842 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 12:10:02.850 -03:00 [DBG] Stopping token cleanup
2018-09-07 12:13:27.784 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 12:13:27.834 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 12:13:30.967 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 12:13:30.975 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 12:13:30.977 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 12:13:30.977 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 12:13:30.978 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 12:13:31.200 -03:00 [DBG] Starting token cleanup
2018-09-07 12:13:46.260 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:14:01.292 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:14:16.301 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:14:31.309 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:14:46.315 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:15:01.326 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:15:16.335 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:15:31.344 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:15:46.355 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:15:56.796 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 12:15:56.803 -03:00 [DBG] Stopping token cleanup
2018-09-07 12:18:00.481 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 12:18:00.521 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 12:18:03.659 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 12:18:03.668 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 12:18:03.670 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 12:18:03.672 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 12:18:03.673 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 12:18:03.908 -03:00 [DBG] Starting token cleanup
2018-09-07 12:18:18.965 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:18:20.321 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 12:18:20.410 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:18:20.411 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:18:20.452 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:18:20.458 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:18:20.460 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:18:20.464 -03:00 [DBG] Start discovery request
2018-09-07 12:18:20.703 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:18:20.768 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 12:18:20.774 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:18:20.775 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:18:20.776 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:18:20.779 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:18:20.781 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:18:20.784 -03:00 [DBG] Start key discovery request
2018-09-07 12:18:20.825 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-07 12:18:20.831 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-07 12:18:20.835 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-07 12:18:20.839 -03:00 [DBG] Start authorize request
2018-09-07 12:18:20.846 -03:00 [DBG] User in authorize request: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 12:18:20.850 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 12:18:21.005 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:18:21.039 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:18:21.081 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:18:21.094 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:18:21.099 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:18:21.106 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 12:18:21.113 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "JGViyZTs34VlAr638K0VNPfNclXuzJhf60DYlJ8H",
  "Nonce": "JGViyZTs34VlAr638K0VNPfNclXuzJhf60DYlJ8H",
  "SessionId": "e8b04a3881d96e5b27d40fdcc64ba9cb",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "JGViyZTs34VlAr638K0VNPfNclXuzJhf60DYlJ8H",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "JGViyZTs34VlAr638K0VNPfNclXuzJhf60DYlJ8H"
  }
}
2018-09-07 12:18:21.170 -03:00 [DBG] 0tlgkubKW7U2h003V5cqQvbdpTRy3/nBXFkBR+pQVz0= found in database: true
2018-09-07 12:18:21.176 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-07 12:18:21.183 -03:00 [DBG] Creating Implicit Flow response.
2018-09-07 12:18:21.190 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-07 12:18:21.190 -03:00 [DBG] Getting claims for access token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 12:18:21.306 -03:00 [DBG] Q3pXD7E/jMXvBqy3vy/UK4oX6ezKLERVhdM0mGjb0BY= not found in database
2018-09-07 12:18:21.405 -03:00 [DBG] Getting claims for identity token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27 and client: UserManagementUI
2018-09-07 12:18:21.406 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-07 12:18:21.439 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ghIg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****28cc"
    }
  ],
  "ActivityId": "0HLGKQKI8DHN1:00000001",
  "TimeStamp": "2018-09-07T15:18:21Z",
  "ProcessId": 45660,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-07 12:18:21.445 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "JGViyZTs34VlAr638K0VNPfNclXuzJhf60DYlJ8H",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-07 12:18:21.957 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 12:18:21.960 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:18:21.960 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:18:21.961 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:18:21.963 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:18:21.965 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:18:21.970 -03:00 [DBG] Start discovery request
2018-09-07 12:18:21.979 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:18:21.995 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 12:18:22.005 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:18:22.006 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:18:22.008 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:18:22.010 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:18:22.012 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:18:22.014 -03:00 [DBG] Start key discovery request
2018-09-07 12:18:23.080 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 12:18:23.084 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:18:23.084 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:18:23.133 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 12:18:23.137 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:18:23.139 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:18:23.140 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-07 12:18:23.142 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-07 12:18:23.143 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-07 12:18:23.148 -03:00 [DBG] Start userinfo request
2018-09-07 12:18:23.152 -03:00 [DBG] Bearer token found in header
2018-09-07 12:18:23.167 -03:00 [DBG] Q3pXD7E/jMXvBqy3vy/UK4oX6ezKLERVhdM0mGjb0BY= found in database: true
2018-09-07 12:18:23.187 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:18:23.200 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:18:23.204 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-07 12:18:23.208 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "078880ea83150b113bb4660b4460adcce5afa9b487c27fbcf5dbddadfa6128cc",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536333501,
    "exp": 1536337101,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536332934,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-07 12:18:23.216 -03:00 [DBG] Creating userinfo response
2018-09-07 12:18:23.219 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:18:23.222 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:18:23.227 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:18:23.228 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-07 12:18:23.229 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:18:23.234 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:18:23.238 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-07 12:18:23.239 -03:00 [DBG] End userinfo request
2018-09-07 12:18:24.945 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 12:18:24.949 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:18:24.950 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:18:24.952 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-07 12:18:24.953 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-07 12:18:24.955 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-07 12:18:24.958 -03:00 [DBG] Start userinfo request
2018-09-07 12:18:24.959 -03:00 [DBG] Bearer token found in header
2018-09-07 12:18:24.962 -03:00 [DBG] Q3pXD7E/jMXvBqy3vy/UK4oX6ezKLERVhdM0mGjb0BY= found in database: true
2018-09-07 12:18:24.986 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:18:24.994 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:18:24.997 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-07 12:18:24.998 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "078880ea83150b113bb4660b4460adcce5afa9b487c27fbcf5dbddadfa6128cc",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536333501,
    "exp": 1536337101,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536332934,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-07 12:18:25.000 -03:00 [DBG] Creating userinfo response
2018-09-07 12:18:25.000 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:18:25.002 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:18:25.006 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:18:25.007 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-07 12:18:25.008 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:18:25.012 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:18:25.018 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-07 12:18:25.019 -03:00 [DBG] End userinfo request
2018-09-07 12:18:25.154 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:18:25.156 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:18:25.156 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:18:25.157 -03:00 [DBG] Start discovery request
2018-09-07 12:18:25.164 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:18:25.190 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:18:25.191 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:18:25.192 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:18:25.193 -03:00 [DBG] Start key discovery request
2018-09-07 12:18:25.211 -03:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2018-09-07 12:18:25.214 -03:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2018-09-07 12:18:25.215 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2018-09-07 12:18:25.221 -03:00 [DBG] Starting introspection request.
2018-09-07 12:18:25.229 -03:00 [DBG] Start parsing Basic Authentication secret
2018-09-07 12:18:25.232 -03:00 [DBG] Start parsing for secret in post body
2018-09-07 12:18:25.242 -03:00 [DBG] Parser found secret: PostBodySecretParser
2018-09-07 12:18:25.242 -03:00 [DBG] Secret id found: UserManagementApi
2018-09-07 12:18:25.267 -03:00 [DBG] Found UserManagementApi API resource in database
2018-09-07 12:18:25.274 -03:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-09-07 12:18:25.274 -03:00 [DBG] API resource validation success
2018-09-07 12:18:25.278 -03:00 [INF] {
  "Name": "API Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1020,
  "ApiName": "UserManagementApi",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLGKQKI8DHN5:00000001",
  "TimeStamp": "2018-09-07T15:18:25Z",
  "ProcessId": 45660,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-07 12:18:25.282 -03:00 [DBG] Introspection request validation started.
2018-09-07 12:18:25.284 -03:00 [DBG] Q3pXD7E/jMXvBqy3vy/UK4oX6ezKLERVhdM0mGjb0BY= found in database: true
2018-09-07 12:18:25.298 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:18:25.304 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:18:25.306 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-07 12:18:25.306 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "TokenHandle": "078880ea83150b113bb4660b4460adcce5afa9b487c27fbcf5dbddadfa6128cc",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536333501,
    "exp": 1536337101,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536332934,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-07 12:18:25.311 -03:00 [DBG] Introspection request validation successful.
2018-09-07 12:18:25.315 -03:00 [DBG] Creating introspection response for active token.
2018-09-07 12:18:25.317 -03:00 [INF] Success token introspection. Token active: true, for API name: UserManagementApi
2018-09-07 12:18:32.970 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 12:18:32.985 -03:00 [DBG] Stopping token cleanup
2018-09-07 12:33:12.498 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 12:33:12.543 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 12:33:15.686 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 12:33:15.695 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 12:33:15.696 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 12:33:15.697 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 12:33:15.697 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 12:33:15.925 -03:00 [DBG] Starting token cleanup
2018-09-07 12:33:30.987 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:33:39.306 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 12:33:39.406 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:33:39.407 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:33:39.436 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:33:39.442 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:33:39.443 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:33:39.447 -03:00 [DBG] Start discovery request
2018-09-07 12:33:39.709 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:33:39.756 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 12:33:39.761 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:33:39.761 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:33:39.763 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:33:39.764 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:33:39.765 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:33:39.770 -03:00 [DBG] Start key discovery request
2018-09-07 12:33:39.829 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-07 12:33:39.833 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-07 12:33:39.833 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-07 12:33:39.838 -03:00 [DBG] Start authorize request
2018-09-07 12:33:39.844 -03:00 [DBG] User in authorize request: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 12:33:39.849 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 12:33:40.007 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:33:40.039 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:33:40.089 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:33:40.100 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:33:40.104 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 12:33:40.111 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 12:33:40.119 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "L6XdkeYQDb4S5X3FkcPZ4nU03RsL0eP9vFSLjcjm",
  "Nonce": "L6XdkeYQDb4S5X3FkcPZ4nU03RsL0eP9vFSLjcjm",
  "SessionId": "e8b04a3881d96e5b27d40fdcc64ba9cb",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "L6XdkeYQDb4S5X3FkcPZ4nU03RsL0eP9vFSLjcjm",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "L6XdkeYQDb4S5X3FkcPZ4nU03RsL0eP9vFSLjcjm"
  }
}
2018-09-07 12:33:40.177 -03:00 [DBG] 0tlgkubKW7U2h003V5cqQvbdpTRy3/nBXFkBR+pQVz0= found in database: true
2018-09-07 12:33:40.182 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-07 12:33:40.189 -03:00 [DBG] Creating Implicit Flow response.
2018-09-07 12:33:40.196 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-07 12:33:40.197 -03:00 [DBG] Getting claims for access token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 12:33:40.325 -03:00 [DBG] mR81V7qCfn9n/tmhx5QKjjgAt2S+LJEeEnHLey931ss= not found in database
2018-09-07 12:33:40.426 -03:00 [DBG] Getting claims for identity token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27 and client: UserManagementUI
2018-09-07 12:33:40.427 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-07 12:33:40.459 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Rc2w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3f9d"
    }
  ],
  "ActivityId": "0HLGKQT44IAFG:00000001",
  "TimeStamp": "2018-09-07T15:33:40Z",
  "ProcessId": 40412,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-07 12:33:40.467 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "L6XdkeYQDb4S5X3FkcPZ4nU03RsL0eP9vFSLjcjm",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-07 12:33:40.979 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 12:33:40.982 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:33:40.985 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:33:40.986 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 12:33:40.987 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 12:33:40.988 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 12:33:40.991 -03:00 [DBG] Start discovery request
2018-09-07 12:33:41.001 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 12:33:41.015 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 12:33:41.021 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:33:41.022 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:33:41.023 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 12:33:41.026 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 12:33:41.030 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 12:33:41.035 -03:00 [DBG] Start key discovery request
2018-09-07 12:33:42.095 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 12:33:42.098 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:33:42.099 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:33:42.146 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 12:33:42.150 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 12:33:42.151 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 12:33:42.153 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-07 12:33:42.156 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-07 12:33:42.157 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-07 12:33:42.164 -03:00 [DBG] Start userinfo request
2018-09-07 12:33:42.167 -03:00 [DBG] Bearer token found in header
2018-09-07 12:33:42.181 -03:00 [DBG] mR81V7qCfn9n/tmhx5QKjjgAt2S+LJEeEnHLey931ss= found in database: true
2018-09-07 12:33:42.196 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:33:42.207 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 12:33:42.211 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-07 12:33:42.214 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "92c31382272e5445f4e551b386df36a85b7179e7250d150a187cca11fa3c3f9d",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536334420,
    "exp": 1536338020,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536332934,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-07 12:33:42.222 -03:00 [DBG] Creating userinfo response
2018-09-07 12:33:42.224 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:33:42.227 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:33:42.231 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:33:42.233 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-07 12:33:42.233 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 12:33:42.236 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 12:33:42.249 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-07 12:33:42.251 -03:00 [DBG] End userinfo request
2018-09-07 12:33:45.996 -03:00 [INF] Clearing 0 tokens
2018-09-07 12:33:59.070 -03:00 [DBG] TaskCanceledException. Exiting.
2018-09-07 12:33:59.085 -03:00 [DBG] Stopping token cleanup
2018-09-07 13:20:40.133 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 13:20:40.264 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
2018-09-07 13:20:44.513 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-09-07 13:20:44.528 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-09-07 13:20:44.532 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-09-07 13:20:44.536 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-09-07 13:20:44.540 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-09-07 13:20:44.865 -03:00 [DBG] Starting token cleanup
2018-09-07 13:20:59.962 -03:00 [INF] Clearing 2 tokens
2018-09-07 13:21:13.356 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 13:21:13.478 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 13:21:13.482 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 13:21:13.521 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 13:21:13.529 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 13:21:13.533 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 13:21:13.538 -03:00 [DBG] Start discovery request
2018-09-07 13:21:13.836 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 13:21:13.896 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 13:21:13.906 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 13:21:13.908 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 13:21:13.910 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 13:21:13.917 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 13:21:13.920 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 13:21:13.924 -03:00 [DBG] Start key discovery request
2018-09-07 13:21:14.205 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-09-07 13:21:14.212 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-09-07 13:21:14.215 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-09-07 13:21:14.220 -03:00 [DBG] Start authorize request
2018-09-07 13:21:14.233 -03:00 [DBG] User in authorize request: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 13:21:14.239 -03:00 [DBG] Start authorize request protocol validation
2018-09-07 13:21:14.464 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 13:21:14.516 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 13:21:14.563 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 13:21:14.580 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 13:21:14.599 -03:00 [DBG] Found ["UserManagementApi.owner-content"] API scopes in database
2018-09-07 13:21:14.609 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-09-07 13:21:14.620 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture UserManagementApi.owner-content",
  "State": "VjQl5YbnU91YgKF7dlaGImj33TzgOI1FztoNKDA7",
  "Nonce": "VjQl5YbnU91YgKF7dlaGImj33TzgOI1FztoNKDA7",
  "SessionId": "e8b04a3881d96e5b27d40fdcc64ba9cb",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "VjQl5YbnU91YgKF7dlaGImj33TzgOI1FztoNKDA7",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture UserManagementApi.owner-content",
    "nonce": "VjQl5YbnU91YgKF7dlaGImj33TzgOI1FztoNKDA7"
  }
}
2018-09-07 13:21:14.664 -03:00 [DBG] 0tlgkubKW7U2h003V5cqQvbdpTRy3/nBXFkBR+pQVz0= found in database: true
2018-09-07 13:21:14.675 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-09-07 13:21:14.684 -03:00 [DBG] Creating Implicit Flow response.
2018-09-07 13:21:14.694 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-09-07 13:21:14.698 -03:00 [DBG] Getting claims for access token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27
2018-09-07 13:21:14.747 -03:00 [DBG] a68hTnGtDv7w0xCbvbTH7W8NcHX80bBf4QdYJuopNyA= not found in database
2018-09-07 13:21:14.805 -03:00 [DBG] Getting claims for identity token for subject: bd712d59-5ba3-46d6-88c3-4b052a4b9f27 and client: UserManagementUI
2018-09-07 13:21:14.809 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-09-07 13:21:14.864 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "Scopes": "openid profile email picture UserManagementApi.owner-content",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****r9Xw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****57b0"
    }
  ],
  "ActivityId": "0HLGKRNMMH8H5:00000001",
  "TimeStamp": "2018-09-07T16:21:14Z",
  "ProcessId": 36776,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-09-07 13:21:14.872 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "VjQl5YbnU91YgKF7dlaGImj33TzgOI1FztoNKDA7",
  "Scope": "openid profile email picture UserManagementApi.owner-content"
}
2018-09-07 13:21:15.080 -03:00 [INF] Clearing 0 tokens
2018-09-07 13:21:15.730 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-09-07 13:21:15.742 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 13:21:15.764 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 13:21:15.768 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-09-07 13:21:15.772 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-09-07 13:21:15.783 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-09-07 13:21:15.789 -03:00 [DBG] Start discovery request
2018-09-07 13:21:15.820 -03:00 [DBG] Found ["openid","profile","email","picture","UserManagementApi.owner-content"] as all scopes in database
2018-09-07 13:21:15.830 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-09-07 13:21:15.837 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 13:21:15.840 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 13:21:15.842 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-09-07 13:21:15.844 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-09-07 13:21:15.846 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-09-07 13:21:15.849 -03:00 [DBG] Start key discovery request
2018-09-07 13:21:16.927 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 13:21:16.937 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 13:21:16.940 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 13:21:16.991 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-09-07 13:21:17.001 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-09-07 13:21:17.004 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-09-07 13:21:17.006 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-09-07 13:21:17.010 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-09-07 13:21:17.013 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-09-07 13:21:17.034 -03:00 [DBG] Start userinfo request
2018-09-07 13:21:17.039 -03:00 [DBG] Bearer token found in header
2018-09-07 13:21:17.057 -03:00 [DBG] a68hTnGtDv7w0xCbvbTH7W8NcHX80bBf4QdYJuopNyA= found in database: true
2018-09-07 13:21:17.099 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 13:21:17.140 -03:00 [DBG] UserManagementUI found in database: true
2018-09-07 13:21:17.150 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-09-07 13:21:17.156 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c1dff0d31460b5bae244acc610574c550b9d855362746ec49978447f994c57b0",
  "Claims": {
    "iss": "https://localhost:5000",
    "nbf": 1536337274,
    "exp": 1536340874,
    "aud": [
      "https://localhost:5000/resources",
      "UserManagementApi"
    ],
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture",
      "UserManagementApi.owner-content"
    ],
    "sub": "bd712d59-5ba3-46d6-88c3-4b052a4b9f27",
    "auth_time": 1536332934,
    "idp": "Facebook",
    "amr": "external",
    "email": "bhdebrito@gmail.com"
  }
}
2018-09-07 13:21:17.166 -03:00 [DBG] Creating userinfo response
2018-09-07 13:21:17.172 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 13:21:17.178 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 13:21:17.193 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 13:21:17.197 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email email_verified
2018-09-07 13:21:17.200 -03:00 [DBG] Scopes in access token: openid profile email picture UserManagementApi.owner-content
2018-09-07 13:21:17.208 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-09-07 13:21:17.219 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-09-07 13:21:17.222 -03:00 [DBG] End userinfo request
2018-09-07 18:50:05.889 -03:00 [INF] SigninCredentialExtension keyType is File
2018-09-07 18:50:05.926 -03:00 [INF] SigninCredentialExtension adding key from file jpproject.pfx
