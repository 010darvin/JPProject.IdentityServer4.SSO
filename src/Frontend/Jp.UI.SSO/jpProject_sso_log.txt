2018-10-14 02:00:39.878 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 02:00:40.052 -03:00 [INF] SigninCredentialExtension added
2018-10-14 02:03:08.523 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 02:03:08.689 -03:00 [INF] SigninCredentialExtension added
2018-10-14 02:06:40.844 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 02:06:40.994 -03:00 [INF] SigninCredentialExtension added
2018-10-14 02:07:00.238 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 02:07:00.376 -03:00 [INF] SigninCredentialExtension added
2018-10-14 02:07:04.576 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 02:07:04.594 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 02:07:04.602 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 02:07:04.604 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 02:07:04.609 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 02:07:58.416 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:07:58.538 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:07:58.546 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:07:58.588 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:07:58.596 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:07:58.599 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:07:58.605 -03:00 [DBG] Start discovery request
2018-10-14 02:07:58.964 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:07:59.016 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:07:59.025 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:07:59.028 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:07:59.031 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:07:59.036 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:07:59.040 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:07:59.045 -03:00 [DBG] Start key discovery request
2018-10-14 02:07:59.299 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 02:07:59.305 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 02:07:59.308 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 02:07:59.313 -03:00 [DBG] Start authorize request
2018-10-14 02:07:59.333 -03:00 [DBG] User in authorize request: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 02:07:59.339 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:07:59.523 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:07:59.565 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:07:59.611 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:07:59.629 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:07:59.651 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:07:59.664 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:07:59.674 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "Hj087NzhkbqI9ULTekFPpGqbsjiZsH2RjrJOdFFs",
  "Nonce": "Hj087NzhkbqI9ULTekFPpGqbsjiZsH2RjrJOdFFs",
  "SessionId": "0dccd73a004af1081acf892161ce5982",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Hj087NzhkbqI9ULTekFPpGqbsjiZsH2RjrJOdFFs",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "Hj087NzhkbqI9ULTekFPpGqbsjiZsH2RjrJOdFFs"
  }
}
2018-10-14 02:07:59.751 -03:00 [DBG] CQw7PQZzv0X/POAfOZXAe9WpvFJDwBmfVs0+A8o4zoM= found in database: true
2018-10-14 02:07:59.760 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 02:07:59.773 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 02:07:59.785 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 02:07:59.788 -03:00 [DBG] Getting claims for access token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 02:07:59.854 -03:00 [DBG] Getting claims for identity token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b and client: UserManagementUI
2018-10-14 02:07:59.858 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 02:07:59.895 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****C4Zw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****iAtg"
    }
  ],
  "ActivityId": "0HLHHIBHIQQJD:00000001",
  "TimeStamp": "2018-10-14T05:07:59Z",
  "ProcessId": 16536,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 02:07:59.908 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "Hj087NzhkbqI9ULTekFPpGqbsjiZsH2RjrJOdFFs",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 02:08:01.151 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:08:01.159 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:01.166 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:01.180 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:08:01.190 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:08:01.199 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:08:01.212 -03:00 [DBG] Start discovery request
2018-10-14 02:08:01.233 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:08:01.259 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:08:01.268 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:01.271 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:01.275 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:08:01.278 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:08:01.283 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:08:01.286 -03:00 [DBG] Start key discovery request
2018-10-14 02:08:02.399 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:08:02.408 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:02.411 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:02.472 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:08:02.478 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:02.483 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:02.485 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 02:08:02.490 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 02:08:02.492 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 02:08:02.501 -03:00 [DBG] Start userinfo request
2018-10-14 02:08:02.506 -03:00 [DBG] Bearer token found in header
2018-10-14 02:08:02.540 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:02.559 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:02.569 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:08:02.575 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539493679,
    "exp": 1539497279,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539466548,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "external"
  }
}
2018-10-14 02:08:02.586 -03:00 [DBG] Creating userinfo response
2018-10-14 02:08:02.591 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:08:02.595 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:08:02.603 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:02.606 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 02:08:02.609 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:08:02.614 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:02.625 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 02:08:02.629 -03:00 [DBG] End userinfo request
2018-10-14 02:08:32.431 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:08:32.438 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:32.442 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:32.446 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:08:32.449 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:08:32.453 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:08:32.461 -03:00 [DBG] Start discovery request
2018-10-14 02:08:32.477 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:08:32.494 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:08:32.502 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:32.507 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:32.510 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:08:32.514 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:08:32.517 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:08:32.521 -03:00 [DBG] Start key discovery request
2018-10-14 02:08:32.743 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:08:32.749 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:32.753 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:32.839 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:08:32.846 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:32.850 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:32.852 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 02:08:32.855 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 02:08:32.859 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 02:08:32.866 -03:00 [DBG] Start userinfo request
2018-10-14 02:08:32.868 -03:00 [DBG] Bearer token found in header
2018-10-14 02:08:32.898 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:32.918 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:32.930 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:08:32.934 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539493679,
    "exp": 1539497279,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539466548,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "external"
  }
}
2018-10-14 02:08:32.943 -03:00 [DBG] Creating userinfo response
2018-10-14 02:08:32.945 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:08:32.947 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:08:32.952 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:32.955 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 02:08:32.957 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:08:32.963 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:32.980 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 02:08:32.985 -03:00 [DBG] End userinfo request
2018-10-14 02:08:34.221 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-10-14 02:08:34.227 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-10-14 02:08:34.230 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-10-14 02:08:34.240 -03:00 [DBG] Processing signout request for d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 02:08:34.247 -03:00 [DBG] Start end session request validation
2018-10-14 02:08:34.254 -03:00 [DBG] Start identity token validation
2018-10-14 02:08:34.276 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:34.279 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-10-14 02:08:34.290 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:08:34.293 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1539493679,
    "exp": 1539493979,
    "iss": "https://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "Hj087NzhkbqI9ULTekFPpGqbsjiZsH2RjrJOdFFs",
    "iat": 1539493679,
    "at_hash": "hj7NYr7CytV7I1PHHZjmMg",
    "sid": "0dccd73a004af1081acf892161ce5982",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539466548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-10-14 02:08:34.304 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjM1Y2JkMjU0NmQ0Mjc5MmI3MTVhYTRhN2U4MGRmODczIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1Mzk0OTM2NzksImV4cCI6MTUzOTQ5Mzk3OSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6IlVzZXJNYW5hZ2VtZW50VUkiLCJub25jZSI6IkhqMDg3Tnpoa2JxSTlVTFRla0ZQcEdxYnNqaVpzSDJSanJKT2RGRnMiLCJpYXQiOjE1Mzk0OTM2NzksImF0X2hhc2giOiJoajdOWXI3Q3l0VjdJMVBISFpqbU1nIiwic2lkIjoiMGRjY2Q3M2EwMDRhZjEwODFhY2Y4OTIxNjFjZTU5ODIiLCJzdWIiOiJkMzZiNzE2MC1iNThiLTRlNjgtOGQwYS1mZTk1OWQ0NDVmNGIiLCJhdXRoX3RpbWUiOjE1Mzk0NjY1NDgsImlkcCI6Ikdvb2dsZSIsImFtciI6WyJleHRlcm5hbCJdfQ.NqZjeC5B5OGuxK0xnTyE9gCwyIz2g43GMJo4cYxbTIG5dtZ0gikADe83vH9rhXY8oJZoGSPapNAhuHwVohfRcJYlG6F94PLSPkhPRoighfNAVIqPjhFHrilrhjW6eSCbNONBd2Mt9e9MLkhUc5VZ4XHyYTghjZ4qKLYeOhn19ehd_MlK63aDL-OgHCcC_g-YQe3N67HNWJXbj3OOFKpw14ka41L2LQKX6qXVmMv0bWzjXyJuKtfDp_xVUMMs9CZ-ZDngEwrcNxzFhPQLbyTm8xRtxYexqyFsjWRYTMDz8mKilWIwpKXrpR7auttOxvn5Zymb1w9wHS1u4yFQMvC4Zw",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-10-14 02:08:34.312 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-10-14 02:08:34.494 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-10-14 02:08:34.498 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-10-14 02:08:34.501 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-10-14 02:08:34.507 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLHHIBHIQQJD:00000003",
  "TimeStamp": "2018-10-14T05:08:34Z",
  "ProcessId": 16536,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 02:08:34.771 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-10-14 02:08:34.777 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-10-14 02:08:34.782 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-10-14 02:08:34.789 -03:00 [DBG] Processing signout callback request
2018-10-14 02:08:34.815 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:34.846 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 02:08:34.848 -03:00 [DBG] No client front-channel logout URLs
2018-10-14 02:08:34.851 -03:00 [DBG] No client back-channel logout URLs
2018-10-14 02:08:34.853 -03:00 [INF] Successful signout callback.
2018-10-14 02:08:34.855 -03:00 [DBG] No client front-channel iframe urls
2018-10-14 02:08:34.860 -03:00 [DBG] No client back-channel iframe urls
2018-10-14 02:08:37.310 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:08:37.318 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:37.325 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:37.347 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:08:37.353 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:08:37.359 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:08:37.364 -03:00 [DBG] Start discovery request
2018-10-14 02:08:37.388 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:08:37.432 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:08:37.440 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:08:37.443 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:08:37.446 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:08:37.451 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:08:37.454 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:08:37.457 -03:00 [DBG] Start key discovery request
2018-10-14 02:08:37.504 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 02:08:37.511 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 02:08:37.516 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 02:08:37.520 -03:00 [DBG] Start authorize request
2018-10-14 02:08:37.523 -03:00 [DBG] No user present in authorize request
2018-10-14 02:08:37.525 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:08:37.548 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:37.556 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:37.568 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:08:37.574 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:37.585 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:08:37.589 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:08:37.592 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "ldAcYLbLppZaaVulLHsFCw5jydllxjgY1YCHvVD8",
  "Nonce": "ldAcYLbLppZaaVulLHsFCw5jydllxjgY1YCHvVD8",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ldAcYLbLppZaaVulLHsFCw5jydllxjgY1YCHvVD8",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "ldAcYLbLppZaaVulLHsFCw5jydllxjgY1YCHvVD8"
  }
}
2018-10-14 02:08:37.597 -03:00 [INF] Showing login: User is not authenticated
2018-10-14 02:08:37.637 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:08:37.655 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:37.661 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:37.670 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:08:37.676 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:37.688 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:08:37.693 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:08:37.722 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:41.284 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-14 02:08:54.258 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:08:54.283 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:08:54.291 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:54.308 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:08:54.316 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:08:54.331 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:08:54.335 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:08:54.360 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:00.688 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:09:00.695 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:00.704 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:00.709 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:09:00.730 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:09:00.741 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:09:00.748 -03:00 [DBG] Start discovery request
2018-10-14 02:09:00.773 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:09:00.808 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:09:00.819 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:00.826 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:00.830 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:09:00.835 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:09:00.839 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:09:00.844 -03:00 [DBG] Start key discovery request
2018-10-14 02:09:00.939 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 02:09:00.948 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 02:09:00.952 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 02:09:00.956 -03:00 [DBG] Start authorize request
2018-10-14 02:09:00.958 -03:00 [DBG] No user present in authorize request
2018-10-14 02:09:00.961 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:00.980 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:00.988 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:01.008 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:01.015 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:01.032 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:01.035 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:01.038 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "2iEDefg9KKfnFMN4ceX5GuBzkDAysCC5ZQ5sDLW4",
  "Nonce": "2iEDefg9KKfnFMN4ceX5GuBzkDAysCC5ZQ5sDLW4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "2iEDefg9KKfnFMN4ceX5GuBzkDAysCC5ZQ5sDLW4",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "2iEDefg9KKfnFMN4ceX5GuBzkDAysCC5ZQ5sDLW4"
  }
}
2018-10-14 02:09:01.044 -03:00 [INF] Showing login: User is not authenticated
2018-10-14 02:09:01.052 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:01.070 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:01.077 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:01.086 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:01.091 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:01.104 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:01.108 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:01.125 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:02.949 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-14 02:09:14.790 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:14.813 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:14.821 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:14.835 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:14.843 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:14.857 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:14.861 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:14.884 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:21.494 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:21.523 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:21.533 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:21.547 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:21.555 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:21.571 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:21.575 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:21.599 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:27.284 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:09:27.291 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:27.295 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:27.299 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:09:27.303 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:09:27.307 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:09:27.310 -03:00 [DBG] Start discovery request
2018-10-14 02:09:27.327 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:09:27.389 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:09:27.396 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:27.404 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:27.407 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:09:27.413 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:09:27.416 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:09:27.419 -03:00 [DBG] Start key discovery request
2018-10-14 02:09:27.463 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 02:09:27.470 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 02:09:27.474 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 02:09:27.479 -03:00 [DBG] Start authorize request
2018-10-14 02:09:27.481 -03:00 [DBG] No user present in authorize request
2018-10-14 02:09:27.487 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:27.506 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:27.514 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:27.527 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:27.534 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:27.545 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:27.550 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:27.554 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L",
  "Nonce": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L"
  }
}
2018-10-14 02:09:27.561 -03:00 [INF] Showing login: User is not authenticated
2018-10-14 02:09:27.569 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:27.592 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:27.599 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:27.611 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:27.616 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:27.625 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:27.628 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:27.646 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:28.833 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-14 02:09:37.595 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:37.616 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:37.623 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:37.636 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:37.644 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:37.657 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:37.661 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:37.683 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:38.720 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-10-14 02:09:39.730 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-10-14 02:09:39.974 -03:00 [WRN] User ec9c70b1-1f3c-4458-8e8d-7883199c11e6 validation failed: DuplicateUserName.
2018-10-14 02:09:42.815 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:42.839 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:42.847 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:42.861 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:42.869 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:42.882 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:42.887 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:42.911 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:51.564 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-14 02:09:51.710 -03:00 [DBG] Augmenting SignInContext
2018-10-14 02:09:51.716 -03:00 [DBG] Adding idp claim with value: local
2018-10-14 02:09:51.719 -03:00 [DBG] Adding amr claim with value: pwd
2018-10-14 02:09:51.722 -03:00 [DBG] Adding auth_time claim with value: 1539493791
2018-10-14 02:09:51.728 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 02:09:51.736 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bruno",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "DisplayName": "bruno",
  "Endpoint": "UI",
  "ActivityId": "0HLHHIBHIQQJH:00000016",
  "TimeStamp": "2018-10-14T05:09:51Z",
  "ProcessId": 16536,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 02:09:51.746 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-10-14 02:09:51.751 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-10-14 02:09:51.755 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-10-14 02:09:51.762 -03:00 [DBG] Start authorize callback request
2018-10-14 02:09:51.768 -03:00 [DBG] User in authorize request: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 02:09:51.771 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:09:51.790 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:51.796 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:51.807 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:51.812 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:51.822 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:09:51.825 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:09:51.828 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L",
  "Nonce": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L",
  "SessionId": "0a769d2f24518ec13eac343f6871a924",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L"
  }
}
2018-10-14 02:09:51.838 -03:00 [DBG] M7Imqp1yPU4pCxFvLqxrbgd/81DG0hJr2wTmQ57JSgM= found in database: true
2018-10-14 02:09:51.843 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 02:09:51.846 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 02:09:51.849 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 02:09:51.851 -03:00 [DBG] Getting claims for access token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 02:09:51.874 -03:00 [DBG] Getting claims for identity token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad and client: UserManagementUI
2018-10-14 02:09:51.877 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 02:09:51.882 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Kl8g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****eyXA"
    }
  ],
  "ActivityId": "0HLHHIBHIQQJH:00000017",
  "TimeStamp": "2018-10-14T05:09:51Z",
  "ProcessId": 16536,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 02:09:51.891 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "yKAMmeKMGqBVddQyvmZ68vNoN1dz1gasaQ4OUy5L",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 02:09:51.898 -03:00 [DBG] Augmenting SignInContext
2018-10-14 02:09:51.900 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 02:09:53.329 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:09:53.337 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:53.341 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:53.345 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:09:53.348 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:09:53.352 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:09:53.356 -03:00 [DBG] Start discovery request
2018-10-14 02:09:53.373 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:09:53.430 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:09:53.442 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:53.446 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:53.449 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:09:53.453 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:09:53.457 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:09:53.460 -03:00 [DBG] Start key discovery request
2018-10-14 02:09:54.593 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:09:54.602 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:54.606 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:54.669 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:09:54.679 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:54.685 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:54.689 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 02:09:54.693 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 02:09:54.698 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 02:09:54.702 -03:00 [DBG] Start userinfo request
2018-10-14 02:09:54.705 -03:00 [DBG] Bearer token found in header
2018-10-14 02:09:54.728 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:54.745 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:54.754 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:09:54.757 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539493791,
    "exp": 1539497391,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493791,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "pwd"
  }
}
2018-10-14 02:09:54.761 -03:00 [DBG] Creating userinfo response
2018-10-14 02:09:54.763 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:09:54.766 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:09:54.772 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:54.775 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 02:09:54.780 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:09:54.785 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:54.804 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 02:09:54.807 -03:00 [DBG] End userinfo request
2018-10-14 02:09:57.129 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:09:57.139 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:09:57.147 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:09:57.151 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 02:09:57.157 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 02:09:57.161 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 02:09:57.165 -03:00 [DBG] Start userinfo request
2018-10-14 02:09:57.168 -03:00 [DBG] Bearer token found in header
2018-10-14 02:09:57.194 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:57.217 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:09:57.227 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:09:57.231 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539493791,
    "exp": 1539497391,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493791,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "pwd"
  }
}
2018-10-14 02:09:57.237 -03:00 [DBG] Creating userinfo response
2018-10-14 02:09:57.240 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:09:57.244 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:09:57.251 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:57.255 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 02:09:57.259 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:09:57.266 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:09:57.285 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 02:09:57.289 -03:00 [DBG] End userinfo request
2018-10-14 02:10:16.145 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:10:16.152 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:16.156 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:16.160 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:10:16.163 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:10:16.167 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:10:16.173 -03:00 [DBG] Start discovery request
2018-10-14 02:10:16.192 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:10:16.212 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:10:16.219 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:16.222 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:16.226 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:10:16.230 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:10:16.235 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:10:16.240 -03:00 [DBG] Start key discovery request
2018-10-14 02:10:22.001 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:10:22.008 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:22.013 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:22.019 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:10:22.026 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:10:22.030 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:10:22.035 -03:00 [DBG] Start discovery request
2018-10-14 02:10:22.054 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:10:22.083 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:10:22.092 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:22.096 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:22.100 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:10:22.105 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:10:22.109 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:10:22.113 -03:00 [DBG] Start key discovery request
2018-10-14 02:10:22.194 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 02:10:22.199 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 02:10:22.204 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 02:10:22.208 -03:00 [DBG] Start authorize request
2018-10-14 02:10:22.210 -03:00 [DBG] No user present in authorize request
2018-10-14 02:10:22.213 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:10:22.233 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:10:22.241 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:22.257 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:10:22.263 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:22.276 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:10:22.281 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:10:22.284 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h",
  "Nonce": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h"
  }
}
2018-10-14 02:10:22.289 -03:00 [INF] Showing login: User is not authenticated
2018-10-14 02:10:22.297 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:10:22.317 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:10:22.324 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:22.337 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:10:22.344 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:22.354 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:10:22.357 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:10:22.378 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:10:30.541 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-14 02:10:30.585 -03:00 [DBG] Augmenting SignInContext
2018-10-14 02:10:30.589 -03:00 [DBG] Adding idp claim with value: local
2018-10-14 02:10:30.592 -03:00 [DBG] Adding amr claim with value: pwd
2018-10-14 02:10:30.596 -03:00 [DBG] Adding auth_time claim with value: 1539493830
2018-10-14 02:10:30.599 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 02:10:30.603 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bruno",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "DisplayName": "bruno",
  "Endpoint": "UI",
  "ActivityId": "0HLHHIBHIQQJH:0000001B",
  "TimeStamp": "2018-10-14T05:10:30Z",
  "ProcessId": 16536,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 02:10:30.614 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-10-14 02:10:30.619 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-10-14 02:10:30.624 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-10-14 02:10:30.629 -03:00 [DBG] Start authorize callback request
2018-10-14 02:10:30.632 -03:00 [DBG] User in authorize request: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 02:10:30.636 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:10:30.660 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:10:30.667 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:30.680 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:10:30.688 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:30.702 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:10:30.706 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:10:30.710 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h",
  "Nonce": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h",
  "SessionId": "2cf33e0891a401cdb3d793c298b94a67",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h"
  }
}
2018-10-14 02:10:30.729 -03:00 [DBG] M7Imqp1yPU4pCxFvLqxrbgd/81DG0hJr2wTmQ57JSgM= found in database: true
2018-10-14 02:10:30.735 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 02:10:30.738 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 02:10:30.740 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 02:10:30.743 -03:00 [DBG] Getting claims for access token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 02:10:30.765 -03:00 [DBG] Getting claims for identity token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad and client: UserManagementUI
2018-10-14 02:10:30.768 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 02:10:30.773 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****9bAw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****rdNw"
    }
  ],
  "ActivityId": "0HLHHIBHIQQJH:0000001C",
  "TimeStamp": "2018-10-14T05:10:30Z",
  "ProcessId": 16536,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 02:10:30.779 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "t3PItclNhEN9RtE1g16PpC8tEIhq6mWiTUl9hm2h",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 02:10:30.782 -03:00 [DBG] Augmenting SignInContext
2018-10-14 02:10:30.784 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 02:10:32.222 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:10:32.229 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:32.233 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:32.236 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:10:32.240 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:10:32.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:10:32.250 -03:00 [DBG] Start discovery request
2018-10-14 02:10:32.266 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:10:32.319 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:10:32.326 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:32.331 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:32.335 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:10:32.339 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:10:32.343 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:10:32.347 -03:00 [DBG] Start key discovery request
2018-10-14 02:10:33.481 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:10:33.487 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:33.491 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:33.548 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:10:33.557 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:10:33.560 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:10:33.564 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 02:10:33.568 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 02:10:33.572 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 02:10:33.576 -03:00 [DBG] Start userinfo request
2018-10-14 02:10:33.578 -03:00 [DBG] Bearer token found in header
2018-10-14 02:10:33.602 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:10:33.628 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:10:33.639 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:10:33.642 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539493830,
    "exp": 1539497430,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "pwd"
  }
}
2018-10-14 02:10:33.649 -03:00 [DBG] Creating userinfo response
2018-10-14 02:10:33.652 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:10:33.656 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:10:33.663 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:33.668 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 02:10:33.671 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:10:33.678 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:10:33.700 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 02:10:33.704 -03:00 [DBG] End userinfo request
2018-10-14 02:14:28.338 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 02:14:28.470 -03:00 [INF] SigninCredentialExtension added
2018-10-14 02:14:32.627 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 02:14:32.646 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 02:14:32.648 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 02:14:32.650 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 02:14:32.656 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 02:14:33.004 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:14:33.154 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:14:33.163 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:14:33.202 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:14:33.210 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:14:33.213 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:14:33.219 -03:00 [DBG] Start discovery request
2018-10-14 02:14:33.496 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:14:33.543 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:14:33.552 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:14:33.555 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:14:33.558 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:14:33.562 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:14:33.565 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:14:33.571 -03:00 [DBG] Start key discovery request
2018-10-14 02:14:33.624 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:14:33.634 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:14:33.638 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:14:33.739 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:14:33.754 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:14:33.758 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:14:33.762 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 02:14:33.770 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 02:14:33.774 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 02:14:33.784 -03:00 [DBG] Start userinfo request
2018-10-14 02:14:33.793 -03:00 [DBG] Bearer token found in header
2018-10-14 02:14:34.025 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:14:34.051 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:14:34.083 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:14:34.093 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539493830,
    "exp": 1539497430,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "pwd"
  }
}
2018-10-14 02:14:34.113 -03:00 [DBG] Creating userinfo response
2018-10-14 02:14:34.119 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:14:34.125 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:14:34.151 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:14:34.156 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 02:14:34.159 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:14:34.165 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:14:34.306 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 02:14:34.309 -03:00 [DBG] End userinfo request
2018-10-14 02:15:11.329 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-10-14 02:15:11.329 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2018-10-14 02:15:46.208 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:15:46.214 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:46.219 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:46.225 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:15:46.229 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:15:46.242 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:15:46.249 -03:00 [DBG] Start discovery request
2018-10-14 02:15:46.271 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:15:46.546 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:15:46.553 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:46.556 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:46.560 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:15:46.563 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:15:46.567 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:15:46.574 -03:00 [DBG] Start key discovery request
2018-10-14 02:15:49.458 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:15:49.464 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:49.469 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:49.474 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:15:49.477 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:15:49.481 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:15:49.487 -03:00 [DBG] Start discovery request
2018-10-14 02:15:49.506 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:15:49.536 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:15:49.543 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:49.546 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:49.549 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:15:49.553 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:15:49.556 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:15:49.559 -03:00 [DBG] Start key discovery request
2018-10-14 02:15:49.651 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 02:15:49.661 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 02:15:49.664 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 02:15:49.670 -03:00 [DBG] Start authorize request
2018-10-14 02:15:49.681 -03:00 [DBG] User in authorize request: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 02:15:49.692 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 02:15:49.721 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:15:49.747 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:15:49.790 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:15:49.803 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:15:49.813 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 02:15:49.822 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 02:15:49.831 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "DB17gjebOJ6YmfKTWUCvaROxRUnzM8bYy1YYUFUe",
  "Nonce": "DB17gjebOJ6YmfKTWUCvaROxRUnzM8bYy1YYUFUe",
  "SessionId": "2cf33e0891a401cdb3d793c298b94a67",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "DB17gjebOJ6YmfKTWUCvaROxRUnzM8bYy1YYUFUe",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "DB17gjebOJ6YmfKTWUCvaROxRUnzM8bYy1YYUFUe"
  }
}
2018-10-14 02:15:49.899 -03:00 [DBG] M7Imqp1yPU4pCxFvLqxrbgd/81DG0hJr2wTmQ57JSgM= found in database: true
2018-10-14 02:15:49.908 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 02:15:49.920 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 02:15:49.930 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 02:15:49.933 -03:00 [DBG] Getting claims for access token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 02:15:49.990 -03:00 [DBG] Getting claims for identity token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad and client: UserManagementUI
2018-10-14 02:15:49.993 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 02:15:50.012 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****9FZg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****MmRA"
    }
  ],
  "ActivityId": "0HLHHIFMIUQ18:00000001",
  "TimeStamp": "2018-10-14T05:15:50Z",
  "ProcessId": 29512,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 02:15:50.020 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "DB17gjebOJ6YmfKTWUCvaROxRUnzM8bYy1YYUFUe",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 02:15:51.035 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 02:15:51.042 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:51.055 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:51.060 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 02:15:51.065 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 02:15:51.069 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 02:15:51.072 -03:00 [DBG] Start discovery request
2018-10-14 02:15:51.088 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 02:15:51.143 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 02:15:51.149 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:51.153 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:51.156 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 02:15:51.159 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 02:15:51.163 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 02:15:51.166 -03:00 [DBG] Start key discovery request
2018-10-14 02:15:52.303 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:15:52.310 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:52.313 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:52.360 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 02:15:52.368 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 02:15:52.371 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 02:15:52.376 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 02:15:52.379 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 02:15:52.383 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 02:15:52.386 -03:00 [DBG] Start userinfo request
2018-10-14 02:15:52.390 -03:00 [DBG] Bearer token found in header
2018-10-14 02:15:52.411 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:15:52.432 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 02:15:52.441 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 02:15:52.446 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539494149,
    "exp": 1539497749,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "pwd"
  }
}
2018-10-14 02:15:52.452 -03:00 [DBG] Creating userinfo response
2018-10-14 02:15:52.455 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:15:52.458 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:15:52.464 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:15:52.467 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 02:15:52.469 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 02:15:52.475 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 02:15:52.493 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 02:15:52.496 -03:00 [DBG] End userinfo request
2018-10-14 12:35:55.948 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 12:35:56.209 -03:00 [INF] SigninCredentialExtension added
2018-10-14 12:36:01.248 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 12:36:01.267 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 12:36:01.271 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 12:36:01.274 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 12:36:01.280 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 12:51:20.010 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 12:51:20.148 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 12:51:20.154 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 12:51:20.187 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 12:51:20.195 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 12:51:20.197 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 12:51:20.203 -03:00 [DBG] Start discovery request
2018-10-14 12:51:20.475 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 12:51:20.525 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 12:51:20.534 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 12:51:20.536 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 12:51:20.546 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 12:51:20.554 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 12:51:20.559 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 12:51:20.564 -03:00 [DBG] Start key discovery request
2018-10-14 12:51:20.808 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 12:51:20.816 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 12:51:20.820 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 12:51:20.824 -03:00 [DBG] Start authorize request
2018-10-14 12:51:20.836 -03:00 [DBG] User in authorize request: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 12:51:20.845 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 12:51:21.022 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 12:51:21.062 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 12:51:21.111 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 12:51:21.128 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 12:51:21.139 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 12:51:21.149 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 12:51:21.160 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "QsEsMo4xA0HqOV90iS25lU3f3BGpy5lbucQmYPhX",
  "Nonce": "QsEsMo4xA0HqOV90iS25lU3f3BGpy5lbucQmYPhX",
  "SessionId": "2cf33e0891a401cdb3d793c298b94a67",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "QsEsMo4xA0HqOV90iS25lU3f3BGpy5lbucQmYPhX",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "QsEsMo4xA0HqOV90iS25lU3f3BGpy5lbucQmYPhX"
  }
}
2018-10-14 12:51:21.238 -03:00 [DBG] M7Imqp1yPU4pCxFvLqxrbgd/81DG0hJr2wTmQ57JSgM= found in database: true
2018-10-14 12:51:21.252 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 12:51:21.262 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 12:51:21.274 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 12:51:21.278 -03:00 [DBG] Getting claims for access token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 12:51:21.343 -03:00 [DBG] Getting claims for identity token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad and client: UserManagementUI
2018-10-14 12:51:21.347 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 12:51:21.368 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****3oRg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****E95w"
    }
  ],
  "ActivityId": "0HLHHTHCGDLRO:00000001",
  "TimeStamp": "2018-10-14T15:51:21Z",
  "ProcessId": 20128,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 12:51:21.377 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "QsEsMo4xA0HqOV90iS25lU3f3BGpy5lbucQmYPhX",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 12:51:21.943 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 12:51:21.951 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 12:51:21.956 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 12:51:21.960 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 12:51:21.964 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 12:51:21.972 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 12:51:21.977 -03:00 [DBG] Start discovery request
2018-10-14 12:51:21.997 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 12:51:22.035 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 12:51:22.042 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 12:51:22.048 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 12:51:22.051 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 12:51:22.055 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 12:51:22.060 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 12:51:22.066 -03:00 [DBG] Start key discovery request
2018-10-14 12:51:23.177 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 12:51:23.185 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 12:51:23.188 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 12:51:23.272 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 12:51:23.283 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 12:51:23.290 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 12:51:23.294 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 12:51:23.302 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 12:51:23.308 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 12:51:23.326 -03:00 [DBG] Start userinfo request
2018-10-14 12:51:23.335 -03:00 [DBG] Bearer token found in header
2018-10-14 12:51:23.402 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 12:51:23.432 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 12:51:23.447 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 12:51:23.455 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539532281,
    "exp": 1539535881,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "pwd"
  }
}
2018-10-14 12:51:23.470 -03:00 [DBG] Creating userinfo response
2018-10-14 12:51:23.477 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 12:51:23.481 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 12:51:23.491 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 12:51:23.494 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 12:51:23.497 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 12:51:23.502 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 12:51:23.520 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 12:51:23.524 -03:00 [DBG] End userinfo request
2018-10-14 13:01:04.709 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 13:01:04.728 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:04.749 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:04.774 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 13:01:04.783 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 13:01:04.791 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 13:01:04.800 -03:00 [DBG] Start discovery request
2018-10-14 13:01:04.818 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 13:01:05.010 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 13:01:05.017 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:05.025 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:05.030 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 13:01:05.034 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 13:01:05.038 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 13:01:05.042 -03:00 [DBG] Start key discovery request
2018-10-14 13:01:09.930 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 13:01:09.937 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:09.942 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:09.945 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 13:01:09.950 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 13:01:09.956 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 13:01:09.960 -03:00 [DBG] Start discovery request
2018-10-14 13:01:09.977 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 13:01:10.003 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 13:01:10.011 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:10.015 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:10.020 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 13:01:10.024 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 13:01:10.027 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 13:01:10.032 -03:00 [DBG] Start key discovery request
2018-10-14 13:01:10.107 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 13:01:10.115 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 13:01:10.129 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 13:01:10.137 -03:00 [DBG] Start authorize request
2018-10-14 13:01:10.146 -03:00 [DBG] User in authorize request: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 13:01:10.150 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 13:01:10.177 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 13:01:10.185 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:01:10.198 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 13:01:10.206 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:01:10.217 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 13:01:10.220 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 13:01:10.224 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "yJL6RMJ9OFfGETgB8LE8Fhh8YGTQl4q1q79XOQmW",
  "Nonce": "yJL6RMJ9OFfGETgB8LE8Fhh8YGTQl4q1q79XOQmW",
  "SessionId": "2cf33e0891a401cdb3d793c298b94a67",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "yJL6RMJ9OFfGETgB8LE8Fhh8YGTQl4q1q79XOQmW",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "yJL6RMJ9OFfGETgB8LE8Fhh8YGTQl4q1q79XOQmW"
  }
}
2018-10-14 13:01:10.241 -03:00 [DBG] M7Imqp1yPU4pCxFvLqxrbgd/81DG0hJr2wTmQ57JSgM= found in database: true
2018-10-14 13:01:10.255 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 13:01:10.259 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 13:01:10.262 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 13:01:10.266 -03:00 [DBG] Getting claims for access token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 13:01:10.296 -03:00 [DBG] Getting claims for identity token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad and client: UserManagementUI
2018-10-14 13:01:10.301 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 13:01:10.308 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****RTUg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****LkoQ"
    }
  ],
  "ActivityId": "0HLHHTHCGDLRR:00000001",
  "TimeStamp": "2018-10-14T16:01:10Z",
  "ProcessId": 20128,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 13:01:10.314 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "yJL6RMJ9OFfGETgB8LE8Fhh8YGTQl4q1q79XOQmW",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 13:01:11.417 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 13:01:11.425 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:11.447 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:11.453 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 13:01:11.458 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 13:01:11.462 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 13:01:11.467 -03:00 [DBG] Start discovery request
2018-10-14 13:01:11.486 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 13:01:11.526 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 13:01:11.535 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:11.539 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:11.542 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 13:01:11.546 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 13:01:11.550 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 13:01:11.554 -03:00 [DBG] Start key discovery request
2018-10-14 13:01:12.709 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 13:01:12.717 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:12.725 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:12.785 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 13:01:12.794 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 13:01:12.798 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 13:01:12.802 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 13:01:12.807 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 13:01:12.812 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 13:01:12.816 -03:00 [DBG] Start userinfo request
2018-10-14 13:01:12.818 -03:00 [DBG] Bearer token found in header
2018-10-14 13:01:12.844 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 13:01:12.871 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 13:01:12.880 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 13:01:12.883 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539532870,
    "exp": 1539536470,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "pwd"
  }
}
2018-10-14 13:01:12.889 -03:00 [DBG] Creating userinfo response
2018-10-14 13:01:12.891 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 13:01:12.896 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 13:01:12.901 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:01:12.904 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 13:01:12.907 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 13:01:12.912 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:01:12.934 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 13:01:12.937 -03:00 [DBG] End userinfo request
2018-10-14 13:15:28.518 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 13:15:28.543 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:15:28.547 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:15:28.551 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 13:15:28.557 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 13:15:28.561 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 13:15:28.564 -03:00 [DBG] Start discovery request
2018-10-14 13:15:28.583 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 13:15:28.610 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 13:15:28.617 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:15:28.621 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:15:28.624 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 13:15:28.627 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 13:15:28.630 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 13:15:28.633 -03:00 [DBG] Start key discovery request
2018-10-14 13:15:28.681 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 13:15:28.685 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 13:15:28.688 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 13:15:28.692 -03:00 [DBG] Start authorize request
2018-10-14 13:15:28.696 -03:00 [DBG] User in authorize request: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 13:15:28.699 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 13:15:28.718 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 13:15:28.724 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:15:28.735 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 13:15:28.741 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:15:28.751 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 13:15:28.757 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 13:15:28.760 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.is4",
  "State": "plCv5UlibAihljjT8GjOeqlr1rrQLMgYLMMzyDV2",
  "Nonce": "plCv5UlibAihljjT8GjOeqlr1rrQLMgYLMMzyDV2",
  "SessionId": "2cf33e0891a401cdb3d793c298b94a67",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "plCv5UlibAihljjT8GjOeqlr1rrQLMgYLMMzyDV2",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email jp_api.is4",
    "nonce": "plCv5UlibAihljjT8GjOeqlr1rrQLMgYLMMzyDV2"
  }
}
2018-10-14 13:15:28.777 -03:00 [DBG] BMREC/048dYCBs84fVzwQyEz6wb10iKLMV2Lx+u9g6I= found in database: true
2018-10-14 13:15:28.783 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 13:15:28.786 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 13:15:28.788 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-10-14 13:15:28.790 -03:00 [DBG] Getting claims for access token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 13:15:28.812 -03:00 [DBG] Getting claims for identity token for subject: 08d630d3-c89f-e2ef-a358-559ea4ad9dad and client: IS4-Admin
2018-10-14 13:15:28.815 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 13:15:28.820 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "Scopes": "openid profile email jp_api.is4",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pgog"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f87w"
    }
  ],
  "ActivityId": "0HLHHTHCGDLRV:00000001",
  "TimeStamp": "2018-10-14T16:15:28Z",
  "ProcessId": 20128,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 13:15:28.826 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "plCv5UlibAihljjT8GjOeqlr1rrQLMgYLMMzyDV2",
  "Scope": "openid profile email jp_api.is4"
}
2018-10-14 13:15:28.837 -03:00 [DBG] Augmenting SignInContext
2018-10-14 13:15:28.847 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 13:15:29.831 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 13:15:29.840 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:15:29.845 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:15:29.849 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 13:15:29.854 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 13:15:29.858 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 13:15:29.862 -03:00 [DBG] Start discovery request
2018-10-14 13:15:29.884 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 13:15:29.907 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 13:15:29.915 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:15:29.919 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:15:29.922 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 13:15:29.935 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 13:15:29.938 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 13:15:29.942 -03:00 [DBG] Start key discovery request
2018-10-14 13:15:31.090 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 13:15:31.096 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:15:31.099 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:15:31.188 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 13:15:31.196 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:15:31.200 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:15:31.204 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 13:15:31.208 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 13:15:31.213 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 13:15:31.219 -03:00 [DBG] Start userinfo request
2018-10-14 13:15:31.225 -03:00 [DBG] Bearer token found in header
2018-10-14 13:15:31.259 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 13:15:31.296 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 13:15:31.307 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 13:15:31.317 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539533728,
    "exp": 1539537328,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "pwd"
  }
}
2018-10-14 13:15:31.324 -03:00 [DBG] Creating userinfo response
2018-10-14 13:15:31.331 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 13:15:31.336 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 13:15:31.346 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:15:31.350 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 13:15:31.353 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 13:15:31.361 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:15:31.382 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 13:15:31.386 -03:00 [DBG] End userinfo request
2018-10-14 13:15:38.961 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 13:15:38.966 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 13:15:38.969 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 13:15:38.972 -03:00 [DBG] Start discovery request
2018-10-14 13:15:38.983 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 13:15:39.041 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 13:15:39.045 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 13:15:39.048 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 13:15:39.051 -03:00 [DBG] Start key discovery request
2018-10-14 13:16:02.327 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 13:16:02.333 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:16:02.336 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:16:02.339 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 13:16:02.343 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 13:16:02.347 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 13:16:02.352 -03:00 [DBG] Start discovery request
2018-10-14 13:16:02.368 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 13:16:02.392 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 13:16:02.405 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:16:02.410 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:16:02.414 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 13:16:02.419 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 13:16:02.422 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 13:16:02.426 -03:00 [DBG] Start key discovery request
2018-10-14 13:16:03.049 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 13:16:03.056 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:16:03.059 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:16:03.149 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 13:16:03.158 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 13:16:03.162 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 13:16:03.166 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 13:16:03.172 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 13:16:03.178 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 13:16:03.183 -03:00 [DBG] Start userinfo request
2018-10-14 13:16:03.186 -03:00 [DBG] Bearer token found in header
2018-10-14 13:16:03.216 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 13:16:03.244 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 13:16:03.256 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 13:16:03.260 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539533728,
    "exp": 1539537328,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "is4-rights": "manager",
    "username": "bruno",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "pwd"
  }
}
2018-10-14 13:16:03.268 -03:00 [DBG] Creating userinfo response
2018-10-14 13:16:03.274 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 13:16:03.281 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 13:16:03.296 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:16:03.302 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 13:16:03.306 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 13:16:03.321 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 13:16:03.359 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 13:16:03.367 -03:00 [DBG] End userinfo request
2018-10-14 14:04:00.896 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 14:04:01.126 -03:00 [INF] SigninCredentialExtension added
2018-10-14 14:04:07.183 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 14:04:07.198 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 14:04:07.201 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 14:04:07.203 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 14:04:07.206 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 14:13:34.170 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 14:13:34.326 -03:00 [INF] SigninCredentialExtension added
2018-10-14 14:13:38.506 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 14:13:38.524 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 14:13:38.526 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 14:13:38.529 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 14:13:38.534 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 14:13:42.495 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-10-14 14:13:42.511 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-10-14 14:13:42.514 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-10-14 14:13:42.524 -03:00 [DBG] Processing signout request for 08d630d3-c89f-e2ef-a358-559ea4ad9dad
2018-10-14 14:13:42.532 -03:00 [DBG] Start end session request validation
2018-10-14 14:13:42.546 -03:00 [DBG] Start identity token validation
2018-10-14 14:13:42.888 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:13:42.895 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-10-14 14:13:42.920 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:13:42.930 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1539532870,
    "exp": 1539533170,
    "iss": "https://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "yJL6RMJ9OFfGETgB8LE8Fhh8YGTQl4q1q79XOQmW",
    "iat": 1539532870,
    "at_hash": "0jt2ZNT8SwXJ9DcLUVcd0w",
    "sid": "2cf33e0891a401cdb3d793c298b94a67",
    "sub": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
    "auth_time": 1539493830,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-10-14 14:13:42.946 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjM1Y2JkMjU0NmQ0Mjc5MmI3MTVhYTRhN2U4MGRmODczIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1Mzk1MzI4NzAsImV4cCI6MTUzOTUzMzE3MCwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6IlVzZXJNYW5hZ2VtZW50VUkiLCJub25jZSI6InlKTDZSTUo5T0ZmR0VUZ0I4TEU4RmhoOFlHVFFsNHExcTc5WE9RbVciLCJpYXQiOjE1Mzk1MzI4NzAsImF0X2hhc2giOiIwanQyWk5UOFN3WEo5RGNMVVZjZDB3Iiwic2lkIjoiMmNmMzNlMDg5MWE0MDFjZGIzZDc5M2MyOThiOTRhNjciLCJzdWIiOiIwOGQ2MzBkMy1jODlmLWUyZWYtYTM1OC01NTllYTRhZDlkYWQiLCJhdXRoX3RpbWUiOjE1Mzk0OTM4MzAsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.uR-eNdkreijUmacSpKqUo0fr-GzFGtEP3Ssw9em-9lGxompvsBoRdXK7zxPbqb_KcbCMGLgRTp2vdemGrHQZoR2iBS2rIj6Bg_WsUQrTOH-0yJBEOlPscmqO6ddT_8JSszq59KuO-CqUl26g2v19BcFC7lahbkUygHU2be2QC_4_FBJVv2MFFW7LhzfleQSNeApQw5AVzco1ZhhQckC7hEv9JheqXdj3I_Cvb3XXP2dHTwgeYTeeD7pSr2x1EWW2_5La3HcqyKYQB-kDinBPZB6vYMK9ygGYRHLzEs63WejpMz-diG8OFUiATwfJ0O_xIPkU8_mjXGLJ3IuFUZRTUg",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-10-14 14:13:42.951 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-10-14 14:13:43.183 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-10-14 14:13:43.188 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-10-14 14:13:43.192 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-10-14 14:13:43.207 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "08d630d3-c89f-e2ef-a358-559ea4ad9dad",
  "DisplayName": "bruno",
  "ActivityId": "0HLHHV1I166K7:00000002",
  "TimeStamp": "2018-10-14T17:13:43Z",
  "ProcessId": 21860,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 14:13:43.549 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-10-14 14:13:43.556 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-10-14 14:13:43.559 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-10-14 14:13:43.570 -03:00 [DBG] Processing signout callback request
2018-10-14 14:13:43.608 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:13:43.632 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:13:43.634 -03:00 [DBG] No client front-channel logout URLs
2018-10-14 14:13:43.637 -03:00 [DBG] No client back-channel logout URLs
2018-10-14 14:13:43.639 -03:00 [INF] Successful signout callback.
2018-10-14 14:13:43.642 -03:00 [DBG] No client front-channel iframe urls
2018-10-14 14:13:43.649 -03:00 [DBG] No client back-channel iframe urls
2018-10-14 14:13:47.784 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:13:47.828 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:13:47.844 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:13:47.850 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:13:47.858 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:13:47.861 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:13:47.870 -03:00 [DBG] Start discovery request
2018-10-14 14:13:48.099 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:13:48.124 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:13:48.131 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:13:48.134 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:13:48.137 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:13:48.141 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:13:48.146 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:13:48.156 -03:00 [DBG] Start key discovery request
2018-10-14 14:13:48.194 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 14:13:48.204 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 14:13:48.209 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 14:13:48.217 -03:00 [DBG] Start authorize request
2018-10-14 14:13:48.225 -03:00 [DBG] No user present in authorize request
2018-10-14 14:13:48.233 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 14:13:48.267 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:13:48.324 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:13:48.371 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:13:48.385 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:13:48.395 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:13:48.405 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 14:13:48.413 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd",
  "Nonce": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd"
  }
}
2018-10-14 14:13:48.434 -03:00 [INF] Showing login: User is not authenticated
2018-10-14 14:13:48.467 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 14:13:48.484 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:13:48.489 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:13:48.500 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:13:48.506 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:13:48.516 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:13:48.519 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 14:13:48.537 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:13:57.043 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-14 14:14:01.395 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-10-14 14:14:01.500 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLHHV1I166K9:00000005",
  "TimeStamp": "2018-10-14T17:14:01Z",
  "ProcessId": 21860,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 14:14:01.512 -03:00 [DBG] Augmenting SignInContext
2018-10-14 14:14:01.517 -03:00 [DBG] Adding amr claim with value: external
2018-10-14 14:14:01.523 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 14:14:01.526 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-10-14 14:14:01.560 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-10-14 14:14:01.565 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-10-14 14:14:01.569 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-10-14 14:14:01.579 -03:00 [DBG] Start authorize callback request
2018-10-14 14:14:01.585 -03:00 [DBG] User in authorize request: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 14:14:01.588 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 14:14:01.607 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:14:01.613 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:14:01.622 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:14:01.630 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:14:01.643 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:14:01.646 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 14:14:01.649 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd",
  "Nonce": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd",
  "SessionId": "f313a49fa663c1f1df4906607518da7a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd"
  }
}
2018-10-14 14:14:01.705 -03:00 [DBG] CQw7PQZzv0X/POAfOZXAe9WpvFJDwBmfVs0+A8o4zoM= found in database: true
2018-10-14 14:14:01.712 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 14:14:01.722 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 14:14:01.733 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 14:14:01.736 -03:00 [DBG] Getting claims for access token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 14:14:01.782 -03:00 [DBG] Getting claims for identity token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b and client: UserManagementUI
2018-10-14 14:14:01.786 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 14:14:01.800 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****qv3g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****fjtw"
    }
  ],
  "ActivityId": "0HLHHV1I166K9:00000006",
  "TimeStamp": "2018-10-14T17:14:01Z",
  "ProcessId": 21860,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 14:14:01.810 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "tspun6j7kT1h13YccTjH3ZH54bS2vMqlsTpZEhMd",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 14:14:01.823 -03:00 [DBG] Augmenting SignInContext
2018-10-14 14:14:01.826 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 14:14:03.381 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:14:03.387 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:14:03.398 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:14:03.401 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:14:03.406 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:14:03.414 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:14:03.419 -03:00 [DBG] Start discovery request
2018-10-14 14:14:03.443 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:14:03.495 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:14:03.502 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:14:03.507 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:14:03.512 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:14:03.516 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:14:03.522 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:14:03.526 -03:00 [DBG] Start key discovery request
2018-10-14 14:14:04.687 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:14:04.696 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:14:04.700 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:14:04.775 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:14:04.782 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:14:04.786 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:14:04.791 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:14:04.796 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:14:04.801 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:14:04.810 -03:00 [DBG] Start userinfo request
2018-10-14 14:14:04.816 -03:00 [DBG] Bearer token found in header
2018-10-14 14:14:04.848 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:14:04.866 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:14:04.876 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:14:04.879 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539537241,
    "exp": 1539540841,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "external"
  }
}
2018-10-14 14:14:04.890 -03:00 [DBG] Creating userinfo response
2018-10-14 14:14:04.894 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:14:04.899 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:14:04.906 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:14:04.910 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:14:04.912 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:14:04.917 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:14:04.929 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:14:04.932 -03:00 [DBG] End userinfo request
2018-10-14 14:15:12.793 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:15:12.797 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:15:12.800 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:15:12.803 -03:00 [DBG] Start discovery request
2018-10-14 14:15:12.814 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:15:12.862 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:15:12.868 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:15:12.871 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:15:12.874 -03:00 [DBG] Start key discovery request
2018-10-14 14:16:11.285 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 14:16:11.442 -03:00 [INF] SigninCredentialExtension added
2018-10-14 14:16:15.587 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 14:16:15.602 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 14:16:15.605 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 14:16:15.607 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 14:16:15.612 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 14:16:21.157 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:16:21.320 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:16:21.329 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:16:21.373 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:16:21.384 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:16:21.404 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:16:21.414 -03:00 [DBG] Start discovery request
2018-10-14 14:16:21.749 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:16:21.801 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:16:21.813 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:16:21.818 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:16:21.821 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:16:21.825 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:16:21.830 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:16:21.838 -03:00 [DBG] Start key discovery request
2018-10-14 14:16:21.910 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:16:21.920 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:16:21.925 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:16:22.052 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:16:22.068 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:16:22.076 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:16:22.087 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:16:22.094 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:16:22.100 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:16:22.110 -03:00 [DBG] Start userinfo request
2018-10-14 14:16:22.118 -03:00 [DBG] Bearer token found in header
2018-10-14 14:16:22.409 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:16:22.436 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:16:22.479 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:16:22.498 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539537241,
    "exp": 1539540841,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "external"
  }
}
2018-10-14 14:16:22.513 -03:00 [DBG] Creating userinfo response
2018-10-14 14:16:22.518 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:16:22.524 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:16:22.550 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:16:22.555 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:16:22.558 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:16:22.564 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:16:22.680 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:16:22.684 -03:00 [DBG] End userinfo request
2018-10-14 14:17:13.819 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:17:13.826 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:13.830 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:13.834 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:17:13.840 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:17:13.847 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:17:13.853 -03:00 [DBG] Start discovery request
2018-10-14 14:17:13.878 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:17:16.376 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:17:16.383 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:16.387 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:16.390 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:17:16.395 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:17:16.400 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:17:16.404 -03:00 [DBG] Start key discovery request
2018-10-14 14:17:18.785 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:17:18.793 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:18.797 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:42.270 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:17:42.289 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:42.315 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:42.323 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:17:42.332 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:17:42.346 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:17:42.374 -03:00 [DBG] Start userinfo request
2018-10-14 14:17:42.378 -03:00 [DBG] Bearer token found in header
2018-10-14 14:17:42.414 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:17:42.440 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:17:42.453 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:17:42.458 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539537241,
    "exp": 1539540841,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "external"
  }
}
2018-10-14 14:17:42.468 -03:00 [DBG] Creating userinfo response
2018-10-14 14:17:42.472 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:17:42.475 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:17:42.484 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:17:42.489 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:17:42.496 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:17:42.510 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:17:42.535 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:17:42.539 -03:00 [DBG] End userinfo request
2018-10-14 14:17:55.111 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:17:55.119 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:55.124 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:55.128 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:17:55.132 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:17:55.137 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:17:55.141 -03:00 [DBG] Start discovery request
2018-10-14 14:17:55.161 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:17:55.348 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:17:55.354 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:55.357 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:55.360 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:17:55.364 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:17:55.368 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:17:55.372 -03:00 [DBG] Start key discovery request
2018-10-14 14:17:55.407 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:17:55.415 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:55.419 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:55.489 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:17:55.503 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:17:55.510 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:17:55.518 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:17:55.523 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:17:55.530 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:17:55.543 -03:00 [DBG] Start userinfo request
2018-10-14 14:17:55.562 -03:00 [DBG] Bearer token found in header
2018-10-14 14:17:55.585 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:17:55.606 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:17:55.614 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:17:55.617 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539537241,
    "exp": 1539540841,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "external"
  }
}
2018-10-14 14:17:55.622 -03:00 [DBG] Creating userinfo response
2018-10-14 14:17:55.624 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:17:55.630 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:17:55.636 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:17:55.639 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:17:55.642 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:17:55.648 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:17:55.665 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:17:55.668 -03:00 [DBG] End userinfo request
2018-10-14 14:27:34.877 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:27:34.891 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:34.896 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:34.901 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:27:34.906 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:27:34.911 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:27:34.915 -03:00 [DBG] Start discovery request
2018-10-14 14:27:34.934 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:27:34.945 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:27:34.954 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:34.958 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:34.961 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:27:34.965 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:27:34.970 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:27:34.973 -03:00 [DBG] Start key discovery request
2018-10-14 14:27:45.576 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:27:45.582 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:45.588 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:45.591 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:27:45.595 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:27:45.600 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:27:45.604 -03:00 [DBG] Start discovery request
2018-10-14 14:27:45.625 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:27:45.671 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:27:45.680 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:45.684 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:45.687 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:27:45.693 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:27:45.697 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:27:45.701 -03:00 [DBG] Start key discovery request
2018-10-14 14:27:45.816 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 14:27:45.824 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 14:27:45.827 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 14:27:45.836 -03:00 [DBG] Start authorize request
2018-10-14 14:27:45.849 -03:00 [DBG] User in authorize request: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 14:27:45.857 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 14:27:45.880 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:27:45.909 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:27:45.958 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:27:45.973 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:27:45.987 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:27:46.001 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 14:27:46.012 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.user",
  "State": "1eJRImJ5VviLkHaF5yGQcNTpsPWzYiyURo98sy0i",
  "Nonce": "1eJRImJ5VviLkHaF5yGQcNTpsPWzYiyURo98sy0i",
  "SessionId": "f313a49fa663c1f1df4906607518da7a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "1eJRImJ5VviLkHaF5yGQcNTpsPWzYiyURo98sy0i",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email jp_api.user",
    "nonce": "1eJRImJ5VviLkHaF5yGQcNTpsPWzYiyURo98sy0i"
  }
}
2018-10-14 14:27:46.093 -03:00 [DBG] CQw7PQZzv0X/POAfOZXAe9WpvFJDwBmfVs0+A8o4zoM= found in database: true
2018-10-14 14:27:46.101 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 14:27:46.109 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 14:27:46.119 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-10-14 14:27:46.122 -03:00 [DBG] Getting claims for access token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 14:27:46.170 -03:00 [DBG] Getting claims for identity token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b and client: UserManagementUI
2018-10-14 14:27:46.173 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 14:27:46.201 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "Scopes": "openid profile email jp_api.user",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****UrnQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****lOCg"
    }
  ],
  "ActivityId": "0HLHHV30UUFPC:00000001",
  "TimeStamp": "2018-10-14T17:27:46Z",
  "ProcessId": 9496,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 14:27:46.212 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "1eJRImJ5VviLkHaF5yGQcNTpsPWzYiyURo98sy0i",
  "Scope": "openid profile email jp_api.user"
}
2018-10-14 14:27:47.438 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-10-14 14:27:47.444 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:47.449 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:47.453 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:27:47.458 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:27:47.463 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:27:47.468 -03:00 [DBG] Start discovery request
2018-10-14 14:27:47.488 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:27:47.515 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-10-14 14:27:47.522 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:47.526 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:47.532 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:27:47.535 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:27:47.540 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:27:47.543 -03:00 [DBG] Start key discovery request
2018-10-14 14:27:48.675 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:27:48.684 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:48.688 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:48.742 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-10-14 14:27:48.750 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-10-14 14:27:48.755 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-10-14 14:27:48.759 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:27:48.764 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:27:48.768 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:27:48.771 -03:00 [DBG] Start userinfo request
2018-10-14 14:27:48.774 -03:00 [DBG] Bearer token found in header
2018-10-14 14:27:48.798 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:27:48.818 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 14:27:48.827 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:27:48.830 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539538066,
    "exp": 1539541666,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "UserManagementUI",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.user"
    ],
    "amr": "external"
  }
}
2018-10-14 14:27:48.834 -03:00 [DBG] Creating userinfo response
2018-10-14 14:27:48.837 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:27:48.841 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:27:48.847 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:27:48.850 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:27:48.853 -03:00 [DBG] Scopes in access token: openid profile email jp_api.user
2018-10-14 14:27:48.858 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:27:48.869 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:27:48.872 -03:00 [DBG] End userinfo request
2018-10-14 14:27:51.027 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:27:51.031 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:27:51.034 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:27:51.037 -03:00 [DBG] Start discovery request
2018-10-14 14:27:51.047 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:27:51.095 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:27:51.099 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:27:51.103 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:27:51.105 -03:00 [DBG] Start key discovery request
2018-10-14 14:50:54.117 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 14:50:54.302 -03:00 [INF] SigninCredentialExtension added
2018-10-14 14:50:59.647 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 14:50:59.662 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 14:50:59.665 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 14:50:59.667 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 14:50:59.672 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 14:51:11.069 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:51:11.179 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:11.187 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:11.223 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:51:11.232 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:51:11.236 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:51:11.242 -03:00 [DBG] Start discovery request
2018-10-14 14:51:11.549 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:51:11.603 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:51:11.615 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:11.620 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:11.624 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:51:11.628 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:51:11.668 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:51:11.677 -03:00 [DBG] Start key discovery request
2018-10-14 14:51:11.930 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-10-14 14:51:11.938 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-10-14 14:51:11.941 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-10-14 14:51:11.948 -03:00 [DBG] Start authorize request
2018-10-14 14:51:11.956 -03:00 [DBG] User in authorize request: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 14:51:11.963 -03:00 [DBG] Start authorize request protocol validation
2018-10-14 14:51:12.159 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:12.201 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:12.247 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:51:12.270 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:12.286 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2018-10-14 14:51:12.298 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-10-14 14:51:12.313 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.is4",
  "State": "kzQIepBiJ1HtWZ5rUmbaLPsLEKr33Lp3VfAifXcE",
  "Nonce": "kzQIepBiJ1HtWZ5rUmbaLPsLEKr33Lp3VfAifXcE",
  "SessionId": "f313a49fa663c1f1df4906607518da7a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "kzQIepBiJ1HtWZ5rUmbaLPsLEKr33Lp3VfAifXcE",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email jp_api.is4",
    "nonce": "kzQIepBiJ1HtWZ5rUmbaLPsLEKr33Lp3VfAifXcE"
  }
}
2018-10-14 14:51:12.379 -03:00 [DBG] HfP76HeqAZj89RV7qQ4e7uzUwcMI+2MExHjSLkC+zo0= found in database: true
2018-10-14 14:51:12.387 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-10-14 14:51:12.397 -03:00 [DBG] Creating Implicit Flow response.
2018-10-14 14:51:12.408 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2018-10-14 14:51:12.410 -03:00 [DBG] Getting claims for access token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b
2018-10-14 14:51:12.465 -03:00 [DBG] Getting claims for identity token for subject: d36b7160-b58b-4e68-8d0a-fe959d445f4b and client: IS4-Admin
2018-10-14 14:51:12.469 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-10-14 14:51:12.491 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "Scopes": "openid profile email jp_api.is4",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****JyTg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****gwMA"
    }
  ],
  "ActivityId": "0HLHHVMG804UU:00000001",
  "TimeStamp": "2018-10-14T17:51:12Z",
  "ProcessId": 23076,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 14:51:12.499 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "kzQIepBiJ1HtWZ5rUmbaLPsLEKr33Lp3VfAifXcE",
  "Scope": "openid profile email jp_api.is4"
}
2018-10-14 14:51:12.521 -03:00 [DBG] Augmenting SignInContext
2018-10-14 14:51:12.532 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 14:51:13.563 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:51:13.570 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:13.575 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:13.580 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:51:13.585 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:51:13.590 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:51:13.595 -03:00 [DBG] Start discovery request
2018-10-14 14:51:13.617 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:51:13.637 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:51:13.645 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:13.650 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:13.654 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:51:13.658 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:51:13.663 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:51:13.666 -03:00 [DBG] Start key discovery request
2018-10-14 14:51:14.821 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:14.827 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:14.830 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:14.890 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:14.897 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:14.902 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:14.905 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:51:14.911 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:51:14.916 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:51:14.926 -03:00 [DBG] Start userinfo request
2018-10-14 14:51:14.932 -03:00 [DBG] Bearer token found in header
2018-10-14 14:51:14.980 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:15.004 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:15.016 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:51:15.024 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:51:15.034 -03:00 [DBG] Creating userinfo response
2018-10-14 14:51:15.040 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:15.045 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:15.052 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:15.056 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:51:15.059 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:15.064 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:15.075 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:51:15.078 -03:00 [DBG] End userinfo request
2018-10-14 14:51:42.640 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:51:42.650 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:42.654 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:42.657 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:51:42.661 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:51:42.666 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:51:42.669 -03:00 [DBG] Start discovery request
2018-10-14 14:51:42.688 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:51:42.713 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:51:42.721 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:42.726 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:42.731 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:51:42.736 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:51:42.739 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:51:42.743 -03:00 [DBG] Start key discovery request
2018-10-14 14:51:42.856 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:42.864 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:42.868 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:42.950 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:42.958 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:42.962 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:42.967 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:51:42.971 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:51:42.976 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:51:42.981 -03:00 [DBG] Start userinfo request
2018-10-14 14:51:42.985 -03:00 [DBG] Bearer token found in header
2018-10-14 14:51:43.021 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:43.057 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:43.069 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:51:43.084 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:51:43.103 -03:00 [DBG] Creating userinfo response
2018-10-14 14:51:43.106 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:43.112 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:43.123 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:43.128 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:51:43.134 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:43.144 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:43.161 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:51:43.164 -03:00 [DBG] End userinfo request
2018-10-14 14:51:43.558 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:51:43.563 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:43.566 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:43.569 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:51:43.572 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:51:43.575 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:51:43.578 -03:00 [DBG] Start discovery request
2018-10-14 14:51:43.596 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:51:43.611 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:51:43.617 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:43.620 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:43.622 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:51:43.626 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:51:43.629 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:51:43.633 -03:00 [DBG] Start key discovery request
2018-10-14 14:51:45.453 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:45.459 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:45.462 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:45.516 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:45.523 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:45.526 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:45.529 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:51:45.532 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:51:45.535 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:51:45.538 -03:00 [DBG] Start userinfo request
2018-10-14 14:51:45.541 -03:00 [DBG] Bearer token found in header
2018-10-14 14:51:45.562 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:45.583 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:45.590 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:51:45.593 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:51:45.598 -03:00 [DBG] Creating userinfo response
2018-10-14 14:51:45.600 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:45.603 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:45.611 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:45.614 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:51:45.617 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:45.626 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:45.637 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:51:45.640 -03:00 [DBG] End userinfo request
2018-10-14 14:51:46.232 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:51:46.240 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:46.245 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:46.250 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:51:46.256 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:51:46.263 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:51:46.268 -03:00 [DBG] Start discovery request
2018-10-14 14:51:46.292 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:51:46.327 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:51:46.336 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:46.344 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:46.348 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:51:46.354 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:51:46.357 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:51:46.361 -03:00 [DBG] Start key discovery request
2018-10-14 14:51:48.227 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:48.233 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:48.237 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:48.334 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:51:48.343 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:51:48.348 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:51:48.352 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:51:48.357 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:51:48.362 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:51:48.371 -03:00 [DBG] Start userinfo request
2018-10-14 14:51:48.375 -03:00 [DBG] Bearer token found in header
2018-10-14 14:51:48.405 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:48.439 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:51:48.447 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:51:48.451 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:51:48.456 -03:00 [DBG] Creating userinfo response
2018-10-14 14:51:48.459 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:48.461 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:48.471 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:48.474 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:51:48.478 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:51:48.485 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:51:48.497 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:51:48.501 -03:00 [DBG] End userinfo request
2018-10-14 14:52:48.353 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:52:48.368 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:52:48.389 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:52:48.402 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:52:48.429 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:52:48.434 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:52:48.448 -03:00 [DBG] Start discovery request
2018-10-14 14:52:48.470 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:52:48.539 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:52:48.544 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:52:48.547 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:52:48.551 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:52:48.554 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:52:48.558 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:52:48.561 -03:00 [DBG] Start key discovery request
2018-10-14 14:52:48.637 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:52:48.644 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:52:48.647 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:52:48.742 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:52:48.751 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:52:48.755 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:52:48.759 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:52:48.762 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:52:48.765 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:52:48.769 -03:00 [DBG] Start userinfo request
2018-10-14 14:52:48.771 -03:00 [DBG] Bearer token found in header
2018-10-14 14:52:48.801 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:52:48.824 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:52:48.845 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:52:48.849 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:52:48.855 -03:00 [DBG] Creating userinfo response
2018-10-14 14:52:48.858 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:52:48.866 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:52:48.873 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:52:48.881 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:52:48.885 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:52:48.895 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:52:48.916 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:52:48.920 -03:00 [DBG] End userinfo request
2018-10-14 14:53:03.765 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:53:03.772 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:03.777 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:03.782 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:53:03.785 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:53:03.791 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:53:03.797 -03:00 [DBG] Start discovery request
2018-10-14 14:53:03.816 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:53:03.842 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:53:03.849 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:03.853 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:03.857 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:53:03.860 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:53:03.864 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:53:03.868 -03:00 [DBG] Start key discovery request
2018-10-14 14:53:04.043 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:04.050 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:04.054 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:04.174 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:04.183 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:04.188 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:04.195 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:53:04.201 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:53:04.205 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:53:04.209 -03:00 [DBG] Start userinfo request
2018-10-14 14:53:04.211 -03:00 [DBG] Bearer token found in header
2018-10-14 14:53:04.240 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:04.270 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:04.285 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:53:04.289 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:53:04.294 -03:00 [DBG] Creating userinfo response
2018-10-14 14:53:04.298 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:04.304 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:04.313 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:04.319 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:53:04.324 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:04.332 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:04.356 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:53:04.362 -03:00 [DBG] End userinfo request
2018-10-14 14:53:04.476 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:53:04.484 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:04.487 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:04.491 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:53:04.494 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:53:04.498 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:53:04.504 -03:00 [DBG] Start discovery request
2018-10-14 14:53:04.521 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:53:04.546 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:53:04.554 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:04.557 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:04.560 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:53:04.564 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:53:04.568 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:53:04.572 -03:00 [DBG] Start key discovery request
2018-10-14 14:53:04.780 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:04.788 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:04.792 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:04.847 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:04.858 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:04.861 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:04.863 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:53:04.867 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:53:04.870 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:53:04.873 -03:00 [DBG] Start userinfo request
2018-10-14 14:53:04.875 -03:00 [DBG] Bearer token found in header
2018-10-14 14:53:04.894 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:04.910 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:04.916 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:53:04.920 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:53:04.927 -03:00 [DBG] Creating userinfo response
2018-10-14 14:53:04.929 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:04.931 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:04.939 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:04.942 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:53:04.945 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:04.953 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:04.964 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:53:04.967 -03:00 [DBG] End userinfo request
2018-10-14 14:53:13.667 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:13.674 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:13.680 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:13.738 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:13.748 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:13.754 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:13.758 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:53:13.764 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:53:13.771 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:53:13.776 -03:00 [DBG] Start userinfo request
2018-10-14 14:53:13.780 -03:00 [DBG] Bearer token found in header
2018-10-14 14:53:13.808 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:13.834 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:13.842 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:53:13.846 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:53:13.852 -03:00 [DBG] Creating userinfo response
2018-10-14 14:53:13.854 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:13.860 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:13.867 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:13.894 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:53:13.901 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:13.932 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:13.964 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:53:13.973 -03:00 [DBG] End userinfo request
2018-10-14 14:53:46.759 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:53:46.768 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:46.773 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:46.780 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:53:46.789 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:53:46.796 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:53:46.804 -03:00 [DBG] Start discovery request
2018-10-14 14:53:46.834 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:53:46.901 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:53:46.906 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:46.910 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:46.913 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:53:46.917 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:53:46.922 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:53:46.938 -03:00 [DBG] Start key discovery request
2018-10-14 14:53:47.012 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:47.017 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:47.021 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:47.077 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:47.087 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:47.092 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:47.096 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:53:47.100 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:53:47.105 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:53:47.109 -03:00 [DBG] Start userinfo request
2018-10-14 14:53:47.112 -03:00 [DBG] Bearer token found in header
2018-10-14 14:53:47.145 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:47.190 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:47.206 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:53:47.210 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:53:47.218 -03:00 [DBG] Creating userinfo response
2018-10-14 14:53:47.221 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:47.225 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:47.233 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:47.237 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:53:47.240 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:47.253 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:47.273 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:53:47.279 -03:00 [DBG] End userinfo request
2018-10-14 14:53:47.568 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2018-10-14 14:53:47.574 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:47.578 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:47.583 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-10-14 14:53:47.588 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-10-14 14:53:47.592 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-10-14 14:53:47.597 -03:00 [DBG] Start discovery request
2018-10-14 14:53:47.613 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2018-10-14 14:53:47.627 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2018-10-14 14:53:47.633 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:47.636 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:47.640 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-10-14 14:53:47.643 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-10-14 14:53:47.646 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-10-14 14:53:47.650 -03:00 [DBG] Start key discovery request
2018-10-14 14:53:47.759 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:47.765 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:47.772 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:47.825 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:47.835 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:47.840 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:47.843 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:53:47.847 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:53:47.850 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:53:47.854 -03:00 [DBG] Start userinfo request
2018-10-14 14:53:47.857 -03:00 [DBG] Bearer token found in header
2018-10-14 14:53:47.883 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:47.910 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:47.920 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:53:47.925 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:53:47.932 -03:00 [DBG] Creating userinfo response
2018-10-14 14:53:47.939 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:47.944 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:47.957 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:47.961 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:53:47.965 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:47.973 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:47.991 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:53:47.995 -03:00 [DBG] End userinfo request
2018-10-14 14:53:53.183 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:53.191 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:53.195 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:53.297 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2018-10-14 14:53:53.305 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2018-10-14 14:53:53.309 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2018-10-14 14:53:53.313 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-10-14 14:53:53.317 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-10-14 14:53:53.322 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-10-14 14:53:53.327 -03:00 [DBG] Start userinfo request
2018-10-14 14:53:53.329 -03:00 [DBG] Bearer token found in header
2018-10-14 14:53:53.359 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:53.384 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 14:53:53.397 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-10-14 14:53:53.406 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1539539472,
    "exp": 1539543072,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
    "auth_time": 1539537241,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2018-10-14 14:53:53.417 -03:00 [DBG] Creating userinfo response
2018-10-14 14:53:53.425 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:53.430 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:53.440 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:53.447 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2018-10-14 14:53:53.456 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2018-10-14 14:53:53.467 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-10-14 14:53:53.484 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2018-10-14 14:53:53.488 -03:00 [DBG] End userinfo request
2018-10-14 17:58:20.492 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2018-10-14 17:58:20.715 -03:00 [INF] SigninCredentialExtension added
2018-10-14 17:58:25.041 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-10-14 17:58:25.060 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-10-14 17:58:25.065 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-10-14 17:58:25.070 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-10-14 17:58:25.077 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-10-14 17:58:48.769 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-10-14 17:58:48.820 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-10-14 17:58:48.825 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-10-14 17:58:48.828 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-10-14 17:58:48.840 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "DisplayName": "bhdebrito@gmail.com",
  "ActivityId": "0HLHI2V9Q872A:00000008",
  "TimeStamp": "2018-10-14T20:58:48Z",
  "ProcessId": 11844,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 17:58:48.965 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-10-14 17:58:48.976 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-10-14 17:58:48.981 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-10-14 17:58:48.992 -03:00 [DBG] Processing signout callback request
2018-10-14 17:58:49.457 -03:00 [DBG] UserManagementUI found in database: true
2018-10-14 17:58:49.493 -03:00 [DBG] IS4-Admin found in database: true
2018-10-14 17:58:49.496 -03:00 [DBG] No client front-channel logout URLs
2018-10-14 17:58:49.499 -03:00 [DBG] No client back-channel logout URLs
2018-10-14 17:58:49.504 -03:00 [INF] Successful signout callback.
2018-10-14 17:58:49.507 -03:00 [DBG] No client front-channel iframe urls
2018-10-14 17:58:49.511 -03:00 [DBG] No client back-channel iframe urls
2018-10-14 17:58:51.453 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-14 17:59:03.013 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-10-14 17:59:03.118 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "d36b7160-b58b-4e68-8d0a-fe959d445f4b",
  "DisplayName": "bhdebrito@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLHI2V9Q872A:0000000E",
  "TimeStamp": "2018-10-14T20:59:03Z",
  "ProcessId": 11844,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-10-14 17:59:03.131 -03:00 [DBG] Augmenting SignInContext
2018-10-14 17:59:03.136 -03:00 [DBG] Adding amr claim with value: external
2018-10-14 17:59:03.142 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-10-14 17:59:03.145 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-02-03 02:59:28.462 -02:00 [INF] SigninCredentialExtension keyType is Temporary
2019-02-03 02:59:28.667 -02:00 [INF] SigninCredentialExtension added
2019-02-03 02:59:30.565 -02:00 [ERR] An error occurred using the connection to database '' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Access denied for user 'bruno'@'172.18.0.1' (using password: YES)
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 416
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2019-03-02 09:10:28.984 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-02 09:10:29.151 -03:00 [INF] SigninCredentialExtension added
2019-03-02 09:10:31.115 -03:00 [ERR] An error occurred using the connection to database '' on server 'localhost'.
MySql.Data.MySqlClient.MySqlException (0x80004005): Access denied for user 'bruno'@'172.18.0.1' (using password: YES)
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 356
   at MySql.Data.MySqlClient.MySqlConnection.CreateSessionAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 416
   at MySql.Data.MySqlClient.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlConnection.cs:line 175
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
2019-03-02 09:11:07.278 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-02 09:11:07.421 -03:00 [INF] SigninCredentialExtension added
2019-03-02 09:11:10.914 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2019-03-02 09:11:10.927 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2019-03-02 09:11:10.929 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2019-03-02 09:11:10.931 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2019-03-02 09:11:10.935 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2019-03-02 09:11:51.814 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 09:11:51.910 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 09:11:51.916 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 09:11:51.948 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 09:11:51.955 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 09:11:51.958 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 09:11:51.963 -03:00 [DBG] Start discovery request
2019-03-02 09:11:52.234 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 09:11:52.282 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 09:11:52.290 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 09:11:52.293 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 09:11:52.296 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 09:11:52.299 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 09:11:52.302 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 09:11:52.307 -03:00 [DBG] Start key discovery request
2019-03-02 09:11:52.496 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-02 09:11:52.501 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-02 09:11:52.504 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-02 09:11:52.508 -03:00 [DBG] Start authorize request
2019-03-02 09:11:52.516 -03:00 [DBG] User in authorize request: b23b2565-e15b-4131-991d-1fc32680af6f
2019-03-02 09:11:52.522 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 09:11:52.704 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 09:11:52.750 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 09:11:52.788 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 09:11:52.802 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 09:11:52.814 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 09:11:52.822 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 09:11:52.832 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4300/login-callback"
  ],
  "SubjectId": "b23b2565-e15b-4131-991d-1fc32680af6f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email jp_api.is4",
  "State": "nQBCXV6J8D6dCBA2PsVr2j55ZTT6CQ9vH4vuNwIr",
  "Nonce": "nQBCXV6J8D6dCBA2PsVr2j55ZTT6CQ9vH4vuNwIr",
  "SessionId": "12c600817ce02f2c48e434028b158aba",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "IS4-Admin",
    "state": "nQBCXV6J8D6dCBA2PsVr2j55ZTT6CQ9vH4vuNwIr",
    "redirect_uri": "http://localhost:4300/login-callback",
    "scope": "openid profile email jp_api.is4",
    "nonce": "nQBCXV6J8D6dCBA2PsVr2j55ZTT6CQ9vH4vuNwIr"
  }
}
2019-03-02 09:11:52.882 -03:00 [DBG] QgS2eSmAP1znKLrSX4jNcGvMGRUxVAQArhy9rrbVwgw= found in database: true
2019-03-02 09:11:52.889 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-02 09:11:52.896 -03:00 [DBG] Creating Implicit Flow response.
2019-03-02 09:11:52.906 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-02 09:11:52.908 -03:00 [DBG] Getting claims for access token for subject: b23b2565-e15b-4131-991d-1fc32680af6f
2019-03-02 09:11:52.964 -03:00 [DBG] Getting claims for identity token for subject: b23b2565-e15b-4131-991d-1fc32680af6f and client: IS4-Admin
2019-03-02 09:11:52.967 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-02 09:11:52.986 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "IS4-Admin",
  "ClientName": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b23b2565-e15b-4131-991d-1fc32680af6f",
  "Scopes": "openid profile email jp_api.is4",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****cRcw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****v--Q"
    }
  ],
  "ActivityId": "0HLKV10U78607:00000001",
  "TimeStamp": "2019-03-02T12:11:52Z",
  "ProcessId": 22696,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2019-03-02 09:11:52.993 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b23b2565-e15b-4131-991d-1fc32680af6f",
  "ClientId": "IS4-Admin",
  "RedirectUri": "http://localhost:4300/login-callback",
  "State": "nQBCXV6J8D6dCBA2PsVr2j55ZTT6CQ9vH4vuNwIr",
  "Scope": "openid profile email jp_api.is4"
}
2019-03-02 09:11:53.788 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 09:11:53.794 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 09:11:53.797 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 09:11:53.799 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 09:11:53.803 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 09:11:53.805 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 09:11:53.809 -03:00 [DBG] Start discovery request
2019-03-02 09:11:53.835 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 09:11:53.851 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 09:11:53.860 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 09:11:53.863 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 09:11:53.866 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 09:11:53.870 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 09:11:53.872 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 09:11:53.875 -03:00 [DBG] Start key discovery request
2019-03-02 09:11:55.010 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 09:11:55.016 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 09:11:55.019 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 09:11:55.078 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 09:11:55.086 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 09:11:55.089 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 09:11:55.092 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-02 09:11:55.098 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-02 09:11:55.101 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-02 09:11:55.109 -03:00 [DBG] Start userinfo request
2019-03-02 09:11:55.115 -03:00 [DBG] Bearer token found in header
2019-03-02 09:11:55.169 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 09:11:55.198 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 09:11:55.217 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-02 09:11:55.224 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1551528712,
    "exp": 1551532312,
    "iss": "https://localhost:5000",
    "aud": [
      "https://localhost:5000/resources",
      "jp_api"
    ],
    "client_id": "IS4-Admin",
    "sub": "b23b2565-e15b-4131-991d-1fc32680af6f",
    "auth_time": 1551323830,
    "idp": "Google",
    "username": "bhdebrito@gmail.com",
    "email": "bhdebrito@gmail.com",
    "scope": [
      "openid",
      "profile",
      "email",
      "jp_api.is4"
    ],
    "amr": "external"
  }
}
2019-03-02 09:11:55.237 -03:00 [DBG] Creating userinfo response
2019-03-02 09:11:55.244 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 09:11:55.251 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 09:11:55.260 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 09:11:55.263 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-02 09:11:55.267 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 09:11:55.273 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 09:11:55.285 -03:00 [INF] Profile service returned to the following claim types: sub email picture preferred_username name email email_verified
2019-03-02 09:11:55.289 -03:00 [DBG] End userinfo request
2019-03-02 09:11:59.057 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 09:11:59.060 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 09:11:59.063 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 09:11:59.067 -03:00 [DBG] Start discovery request
2019-03-02 09:11:59.081 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 09:11:59.129 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 09:11:59.132 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 09:11:59.135 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 09:11:59.137 -03:00 [DBG] Start key discovery request
2019-03-02 10:24:19.626 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-02 10:24:19.807 -03:00 [INF] SigninCredentialExtension added
2019-03-02 10:24:50.750 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-02 10:24:50.945 -03:00 [INF] SigninCredentialExtension added
2019-03-02 10:24:52.828 -03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ApiResources` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Enabled` bit NOT NULL,
    `Name` varchar(200) NOT NULL,
    `DisplayName` varchar(200) NULL,
    `Description` varchar(1000) NULL,
    CONSTRAINT `PK_ApiResources` PRIMARY KEY (`Id`)
);
MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'ApiResources' already exists ---> MySql.Data.MySqlClient.MySqlException (0x80004005): Table 'ApiResources' already exists
   at MySqlConnector.Core.ServerSession.TryAsyncContinuation(Task`1 task) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ServerSession.cs:line 1245
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\Core\ResultSet.cs:line 42
   at MySql.Data.MySqlClient.MySqlDataReader.ActivateResultSet(ResultSet resultSet) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 74
   at MySql.Data.MySqlClient.MySqlDataReader.ReadFirstResultSetAsync(IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 299
   at MySql.Data.MySqlClient.MySqlDataReader.CreateAsync(MySqlCommand command, CommandBehavior behavior, ResultSetProtocol resultSetProtocol, IOBehavior ioBehavior) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlDataReader.cs:line 284
   at MySqlConnector.Core.TextCommandExecutor.ExecuteReaderAsync(String commandText, MySqlParameterCollection parameterCollection, CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\Core\TextCommandExecutor.cs:line 37
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQueryAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in C:\projects\mysqlconnector\src\MySqlConnector\MySql.Data.MySqlClient\MySqlCommand.cs:line 261
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2019-03-02 12:12:41.165 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-02 12:12:41.323 -03:00 [INF] SigninCredentialExtension added
2019-03-02 12:12:47.899 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-02 12:12:47.938 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-02 12:12:47.941 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-02 12:12:47.946 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-02 12:12:47.948 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-02 12:12:47.950 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-02 12:12:47.952 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-02 12:13:13.274 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-02 12:13:13.438 -03:00 [INF] SigninCredentialExtension added
2019-03-02 12:13:17.020 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-02 12:13:17.080 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-02 12:13:17.083 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-02 12:13:17.085 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-02 12:13:17.088 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-02 12:13:17.090 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-02 12:13:17.092 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-02 12:13:31.203 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:13:31.326 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:13:31.332 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:13:31.354 -03:00 [DBG] Login Url: /Account/Login
2019-03-02 12:13:31.356 -03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-03-02 12:13:31.358 -03:00 [DBG] Logout Url: /Account/Logout
2019-03-02 12:13:31.360 -03:00 [DBG] ConsentUrl Url: /consent
2019-03-02 12:13:31.362 -03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-03-02 12:13:31.364 -03:00 [DBG] Error Url: /home/error
2019-03-02 12:13:31.367 -03:00 [DBG] Error Id Parameter: errorId
2019-03-02 12:13:31.384 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:13:31.391 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:13:31.393 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:13:31.398 -03:00 [DBG] Start discovery request
2019-03-02 12:13:31.729 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:13:31.791 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:13:31.800 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:13:31.803 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:13:31.806 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:13:31.812 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:13:31.815 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:13:31.820 -03:00 [DBG] Start key discovery request
2019-03-02 12:13:31.901 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-03-02 12:13:31.905 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-03-02 12:13:31.908 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-03-02 12:13:31.913 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2019-03-02 12:13:31.918 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2019-03-02 12:13:31.922 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-02 12:13:31.928 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-02 12:13:31.932 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-02 12:13:31.938 -03:00 [DBG] Start authorize request
2019-03-02 12:13:31.944 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2019-03-02 12:13:31.951 -03:00 [DBG] No user present in authorize request
2019-03-02 12:13:31.957 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:13:32.138 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:13:32.145 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:13:32.191 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:13:32.241 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:13:32.256 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:13:32.271 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:13:32.279 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:13:32.294 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","UiLocales":null,"Nonce":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ"},"$type":"AuthorizeRequestValidationLog"}
2019-03-02 12:13:32.311 -03:00 [INF] Showing login: User is not authenticated
2019-03-02 12:13:32.505 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:13:32.530 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:13:32.532 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:13:32.540 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:13:32.555 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:13:32.563 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:13:32.578 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:13:32.583 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:13:32.611 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:13:32.613 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:13:42.246 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-02 12:13:42.333 -03:00 [WRN] Invalid password for user 08d69f21-86e8-fc9b-ff42-4175a9ace90c.
2019-03-02 12:13:42.337 -03:00 [WRN] User 08d69f21-86e8-fc9b-ff42-4175a9ace90c failed to provide the correct password.
2019-03-02 12:13:42.535 -03:00 [INF] {"Username":"bhdebrito@Gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKV46G1UCRI:00000005","TimeStamp":"2019-03-02T15:13:42.0000000Z","ProcessId":16464,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-03-02 12:13:42.544 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:13:42.570 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:13:42.572 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:13:42.579 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:13:42.595 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:13:42.604 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:13:42.620 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:13:42.624 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:13:42.649 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:13:42.652 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:01.048 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-02 12:16:01.296 -03:00 [DBG] Augmenting SignInContext
2019-03-02 12:16:01.300 -03:00 [DBG] Adding idp claim with value: local
2019-03-02 12:16:01.302 -03:00 [DBG] Adding amr claim with value: pwd
2019-03-02 12:16:01.305 -03:00 [DBG] Adding auth_time claim with value: 1551539761
2019-03-02 12:16:01.313 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-03-02 12:16:01.317 -03:00 [INF] {"Username":"bruno","Provider":null,"ProviderUserId":null,"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","DisplayName":"bruno","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKV46G1UCRI:00000006","TimeStamp":"2019-03-02T15:16:01.0000000Z","ProcessId":16464,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-03-02 12:16:01.328 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-03-02 12:16:01.332 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-03-02 12:16:01.335 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-03-02 12:16:01.342 -03:00 [DBG] Start authorize callback request
2019-03-02 12:16:01.348 -03:00 [DBG] User in authorize request: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:16:01.352 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:16:01.376 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:01.378 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:01.385 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:01.400 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:01.407 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:01.422 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:01.426 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:16:01.429 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","UiLocales":null,"Nonce":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6f74fbd7e786a6971c959d6eaed2314c","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ"},"$type":"AuthorizeRequestValidationLog"}
2019-03-02 12:16:01.470 -03:00 [DBG] WW2BU6wc288RK/rYTyEw52LkBANlzKZ1FD2y4a9Gzaw= found in database: false
2019-03-02 12:16:01.473 -03:00 [DBG] user_consent grant with value: IS4-Admin|08d69f21-86e8-fc9b-ff42-4175a9ace90c not found in store.
2019-03-02 12:16:01.476 -03:00 [DBG] Found no prior consent from consent store, consent is required
2019-03-02 12:16:01.478 -03:00 [INF] Showing consent: User has not yet consented
2019-03-02 12:16:01.497 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:16:01.523 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:01.525 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:01.532 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:01.549 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:01.556 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:01.573 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:01.577 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:16:01.601 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:01.604 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:01.611 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:01.626 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:04.044 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-02 12:16:04.059 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:16:04.084 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:04.086 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:04.093 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:04.108 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:04.115 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:04.129 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:04.132 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:16:04.152 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-03-02 12:16:04.157 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-03-02 12:16:04.159 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-03-02 12:16:04.162 -03:00 [DBG] Start authorize callback request
2019-03-02 12:16:04.167 -03:00 [DBG] User in authorize request: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:16:04.170 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:16:04.196 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:04.198 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:04.204 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:04.221 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:04.228 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:04.242 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:16:04.245 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:16:04.247 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","UiLocales":null,"Nonce":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6f74fbd7e786a6971c959d6eaed2314c","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ"},"$type":"AuthorizeRequestValidationLog"}
2019-03-02 12:16:04.263 -03:00 [DBG] WW2BU6wc288RK/rYTyEw52LkBANlzKZ1FD2y4a9Gzaw= found in database: false
2019-03-02 12:16:04.266 -03:00 [DBG] user_consent grant with value: IS4-Admin|08d69f21-86e8-fc9b-ff42-4175a9ace90c not found in store.
2019-03-02 12:16:04.268 -03:00 [DBG] Found no prior consent from consent store, consent is required
2019-03-02 12:16:04.274 -03:00 [INF] User consented to scopes: ["openid","profile","email","jp_api.is4"]
2019-03-02 12:16:04.278 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","jp_api.is4"]
2019-03-02 12:16:04.283 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:16:04.299 -03:00 [DBG] WW2BU6wc288RK/rYTyEw52LkBANlzKZ1FD2y4a9Gzaw= not found in database
2019-03-02 12:16:04.371 -03:00 [DBG] Creating Implicit Flow response.
2019-03-02 12:16:04.381 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-02 12:16:04.384 -03:00 [DBG] Getting claims for access token for subject: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:16:04.466 -03:00 [DBG] Getting claims for identity token for subject: 08d69f21-86e8-fc9b-ff42-4175a9ace90c and client: IS4-Admin
2019-03-02 12:16:04.470 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-02 12:16:04.483 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****N7CA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****AU-A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKV46G1UCRI:0000000B","TimeStamp":"2019-03-02T15:16:04.0000000Z","ProcessId":16464,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-02 12:16:04.497 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"tYzVDjdCIz6Wx2H0Pqa4hko7kFFAhJ2kK0KwDZGQ","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-02 12:16:04.515 -03:00 [DBG] Augmenting SignInContext
2019-03-02 12:16:04.517 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-03-02 12:16:06.010 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:16:06.016 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:06.019 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:06.022 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:16:06.024 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:16:06.027 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:16:06.030 -03:00 [DBG] Start discovery request
2019-03-02 12:16:06.054 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:16:06.070 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:16:06.076 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:06.093 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:06.099 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:16:06.102 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:16:06.106 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:16:06.109 -03:00 [DBG] Start key discovery request
2019-03-02 12:16:07.267 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:16:07.273 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:07.276 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:07.330 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:16:07.337 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:07.341 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:07.344 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-02 12:16:07.350 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-02 12:16:07.353 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-02 12:16:07.363 -03:00 [DBG] Start userinfo request
2019-03-02 12:16:07.370 -03:00 [DBG] Bearer token found in header
2019-03-02 12:16:07.419 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:07.421 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:07.447 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:07.449 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:07.458 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-02 12:16:07.462 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1551539764,"exp":1551543364,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","auth_time":1551539761,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-02 12:16:07.477 -03:00 [DBG] Creating userinfo response
2019-03-02 12:16:07.482 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:16:07.487 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:16:07.498 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:07.502 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-02 12:16:07.504 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:16:07.512 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:07.531 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-02 12:16:07.536 -03:00 [DBG] End userinfo request
2019-03-02 12:16:11.277 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:16:11.281 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:16:11.284 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:16:11.287 -03:00 [DBG] Start discovery request
2019-03-02 12:16:11.303 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:16:11.373 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:16:11.376 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:16:11.379 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:16:11.382 -03:00 [DBG] Start key discovery request
2019-03-02 12:16:27.121 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:16:27.127 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:27.129 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:27.132 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:16:27.136 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:16:27.139 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:16:27.142 -03:00 [DBG] Start discovery request
2019-03-02 12:16:27.158 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:16:27.217 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:16:27.224 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:27.227 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:27.230 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:16:27.233 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:16:27.239 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:16:27.243 -03:00 [DBG] Start key discovery request
2019-03-02 12:16:28.124 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:16:28.131 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:28.134 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:28.191 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:16:28.201 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:16:28.207 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:16:28.212 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-02 12:16:28.218 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-02 12:16:28.225 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-02 12:16:28.231 -03:00 [DBG] Start userinfo request
2019-03-02 12:16:28.235 -03:00 [DBG] Bearer token found in header
2019-03-02 12:16:28.277 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:28.281 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:28.317 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:16:28.322 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:16:28.342 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-02 12:16:28.348 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1551539764,"exp":1551543364,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","auth_time":1551539761,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-02 12:16:28.364 -03:00 [DBG] Creating userinfo response
2019-03-02 12:16:28.369 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:16:28.374 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:16:28.387 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:28.398 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-02 12:16:28.405 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:16:28.415 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:16:28.458 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-02 12:16:28.462 -03:00 [DBG] End userinfo request
2019-03-02 12:17:34.402 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-02 12:17:34.562 -03:00 [INF] SigninCredentialExtension added
2019-03-02 12:17:38.084 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-02 12:17:38.121 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-02 12:17:38.123 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-02 12:17:38.128 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-02 12:17:38.130 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-02 12:17:38.132 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-02 12:17:38.134 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-02 12:17:41.536 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:17:41.728 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:17:41.744 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:17:41.781 -03:00 [DBG] Login Url: /Account/Login
2019-03-02 12:17:41.788 -03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-03-02 12:17:41.791 -03:00 [DBG] Logout Url: /Account/Logout
2019-03-02 12:17:41.794 -03:00 [DBG] ConsentUrl Url: /consent
2019-03-02 12:17:41.798 -03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-03-02 12:17:41.801 -03:00 [DBG] Error Url: /home/error
2019-03-02 12:17:41.805 -03:00 [DBG] Error Id Parameter: errorId
2019-03-02 12:17:41.821 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:17:41.828 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:17:41.833 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:17:41.839 -03:00 [DBG] Start discovery request
2019-03-02 12:17:42.282 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:17:42.477 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:17:42.487 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:17:42.491 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:17:42.495 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:17:42.501 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:17:42.505 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:17:42.512 -03:00 [DBG] Start key discovery request
2019-03-02 12:17:42.614 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:17:42.621 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:17:42.624 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:17:42.682 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:17:42.689 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:17:42.697 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:17:42.704 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-02 12:17:42.749 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-02 12:17:42.757 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-02 12:17:42.771 -03:00 [DBG] Start userinfo request
2019-03-02 12:17:42.777 -03:00 [DBG] Bearer token found in header
2019-03-02 12:17:42.977 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:17:42.981 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:17:42.985 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:17:42.989 -03:00 [DBG] Start discovery request
2019-03-02 12:17:43.014 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:17:43.075 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:17:43.082 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:17:43.104 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:17:43.108 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:17:43.111 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:17:43.115 -03:00 [DBG] Start key discovery request
2019-03-02 12:17:43.121 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:17:43.124 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:17:43.180 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-02 12:17:43.194 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1551539764,"exp":1551543364,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","auth_time":1551539761,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-02 12:17:43.217 -03:00 [DBG] Creating userinfo response
2019-03-02 12:17:43.222 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:17:43.227 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:17:43.264 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:17:43.268 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-02 12:17:43.271 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:17:43.279 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:17:43.390 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-02 12:17:43.394 -03:00 [DBG] End userinfo request
2019-03-02 12:33:24.916 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:33:24.927 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:33:24.930 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:33:24.935 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:33:24.938 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:33:24.941 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:33:24.945 -03:00 [DBG] Start discovery request
2019-03-02 12:33:24.965 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:33:24.987 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:33:24.994 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:33:24.997 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:33:25.000 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:33:25.003 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:33:25.005 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:33:25.008 -03:00 [DBG] Start key discovery request
2019-03-02 12:33:25.063 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:33:25.069 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:33:25.072 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:33:25.075 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:33:25.078 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:33:25.080 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:33:25.083 -03:00 [DBG] Start discovery request
2019-03-02 12:33:25.106 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:33:25.219 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:33:25.229 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:33:25.235 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:33:25.238 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:33:25.242 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:33:25.245 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:33:25.250 -03:00 [DBG] Start key discovery request
2019-03-02 12:34:35.294 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:34:35.302 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:34:35.305 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:34:35.309 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:34:35.313 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:34:35.316 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:34:35.320 -03:00 [DBG] Start discovery request
2019-03-02 12:34:35.341 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:34:35.359 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:34:35.365 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:34:35.368 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:34:35.370 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:34:35.373 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:34:35.375 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:34:35.377 -03:00 [DBG] Start key discovery request
2019-03-02 12:34:35.437 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-02 12:34:35.443 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-02 12:34:35.446 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-02 12:34:35.451 -03:00 [DBG] Start authorize request
2019-03-02 12:34:35.461 -03:00 [DBG] User in authorize request: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:34:35.468 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:34:35.496 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:34:35.499 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:34:35.525 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:34:35.586 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:34:35.604 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:34:35.622 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:34:35.631 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:34:35.639 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"6bRLrIB2aX7xezj7lhrliRy8hafgRYl0LVNtopwA","UiLocales":null,"Nonce":"6bRLrIB2aX7xezj7lhrliRy8hafgRYl0LVNtopwA","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6f74fbd7e786a6971c959d6eaed2314c","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"6bRLrIB2aX7xezj7lhrliRy8hafgRYl0LVNtopwA","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"6bRLrIB2aX7xezj7lhrliRy8hafgRYl0LVNtopwA"},"$type":"AuthorizeRequestValidationLog"}
2019-03-02 12:34:35.691 -03:00 [DBG] WW2BU6wc288RK/rYTyEw52LkBANlzKZ1FD2y4a9Gzaw= found in database: true
2019-03-02 12:34:35.698 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-02 12:34:35.707 -03:00 [DBG] Creating Implicit Flow response.
2019-03-02 12:34:35.722 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-02 12:34:35.725 -03:00 [DBG] Getting claims for access token for subject: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:34:35.778 -03:00 [DBG] Getting claims for identity token for subject: 08d69f21-86e8-fc9b-ff42-4175a9ace90c and client: IS4-Admin
2019-03-02 12:34:35.781 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-02 12:34:35.796 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****bDzA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Qy-g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKV48QTBVSV:00000001","TimeStamp":"2019-03-02T15:34:35.0000000Z","ProcessId":26536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-02 12:34:35.804 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"6bRLrIB2aX7xezj7lhrliRy8hafgRYl0LVNtopwA","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-02 12:34:37.090 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:34:37.096 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:34:37.098 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:34:37.101 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:34:37.104 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:34:37.107 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:34:37.109 -03:00 [DBG] Start discovery request
2019-03-02 12:34:37.126 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:34:37.201 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:34:37.207 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:34:37.209 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:34:37.214 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:34:37.218 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:34:37.225 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:34:37.229 -03:00 [DBG] Start key discovery request
2019-03-02 12:34:38.418 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:34:38.424 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:34:38.426 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:34:38.477 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:34:38.484 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:34:38.488 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:34:38.491 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-02 12:34:38.495 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-02 12:34:38.499 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-02 12:34:38.504 -03:00 [DBG] Start userinfo request
2019-03-02 12:34:38.507 -03:00 [DBG] Bearer token found in header
2019-03-02 12:34:38.548 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:34:38.551 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:34:38.582 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:34:38.585 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:34:38.593 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-02 12:34:38.597 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1551540875,"exp":1551544475,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","auth_time":1551539761,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-02 12:34:38.603 -03:00 [DBG] Creating userinfo response
2019-03-02 12:34:38.606 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:34:38.610 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:34:38.618 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:34:38.621 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-02 12:34:38.623 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:34:38.631 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:34:38.649 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-02 12:34:38.652 -03:00 [DBG] End userinfo request
2019-03-02 12:40:50.018 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:40:50.031 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:40:50.034 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:40:50.042 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:40:50.046 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:40:50.049 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:40:50.052 -03:00 [DBG] Start discovery request
2019-03-02 12:40:50.078 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:40:50.098 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:40:50.107 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:40:50.110 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:40:50.113 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:40:50.116 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:40:50.121 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:40:50.124 -03:00 [DBG] Start key discovery request
2019-03-02 12:40:59.464 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:40:59.471 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:40:59.474 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:40:59.477 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:40:59.480 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:40:59.484 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:40:59.487 -03:00 [DBG] Start discovery request
2019-03-02 12:40:59.512 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:40:59.526 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:40:59.535 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:40:59.539 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:40:59.542 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:40:59.546 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:40:59.550 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:40:59.555 -03:00 [DBG] Start key discovery request
2019-03-02 12:40:59.595 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-02 12:40:59.598 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-02 12:40:59.605 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-02 12:40:59.609 -03:00 [DBG] Start authorize request
2019-03-02 12:40:59.624 -03:00 [DBG] User in authorize request: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:40:59.627 -03:00 [DBG] Start authorize request protocol validation
2019-03-02 12:40:59.661 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:40:59.667 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:40:59.675 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:40:59.695 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:40:59.703 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:40:59.722 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-02 12:40:59.726 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-02 12:40:59.729 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"MSlf3gxyk8JrqHVdSiqlqr5LJQHrpFSvp0hbTFlW","UiLocales":null,"Nonce":"MSlf3gxyk8JrqHVdSiqlqr5LJQHrpFSvp0hbTFlW","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6f74fbd7e786a6971c959d6eaed2314c","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"MSlf3gxyk8JrqHVdSiqlqr5LJQHrpFSvp0hbTFlW","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"MSlf3gxyk8JrqHVdSiqlqr5LJQHrpFSvp0hbTFlW"},"$type":"AuthorizeRequestValidationLog"}
2019-03-02 12:40:59.751 -03:00 [DBG] WW2BU6wc288RK/rYTyEw52LkBANlzKZ1FD2y4a9Gzaw= found in database: true
2019-03-02 12:40:59.755 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-02 12:40:59.758 -03:00 [DBG] Creating Implicit Flow response.
2019-03-02 12:40:59.761 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-02 12:40:59.763 -03:00 [DBG] Getting claims for access token for subject: 08d69f21-86e8-fc9b-ff42-4175a9ace90c
2019-03-02 12:40:59.797 -03:00 [DBG] Getting claims for identity token for subject: 08d69f21-86e8-fc9b-ff42-4175a9ace90c and client: IS4-Admin
2019-03-02 12:40:59.800 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-02 12:40:59.805 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Ac5A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JVBg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKV48QTBVT2:00000001","TimeStamp":"2019-03-02T15:40:59.0000000Z","ProcessId":26536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-02 12:40:59.812 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"MSlf3gxyk8JrqHVdSiqlqr5LJQHrpFSvp0hbTFlW","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-02 12:41:00.894 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-02 12:41:00.901 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:41:00.904 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:41:00.907 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-02 12:41:00.910 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-02 12:41:00.914 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-02 12:41:00.917 -03:00 [DBG] Start discovery request
2019-03-02 12:41:00.956 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-02 12:41:00.978 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-02 12:41:00.988 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:41:00.992 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:41:00.995 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-02 12:41:01.000 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-02 12:41:01.009 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-02 12:41:01.030 -03:00 [DBG] Start key discovery request
2019-03-02 12:41:02.214 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:41:02.220 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:41:02.222 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:41:02.268 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-02 12:41:02.276 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-02 12:41:02.280 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-02 12:41:02.283 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-02 12:41:02.287 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-02 12:41:02.291 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-02 12:41:02.295 -03:00 [DBG] Start userinfo request
2019-03-02 12:41:02.298 -03:00 [DBG] Bearer token found in header
2019-03-02 12:41:02.334 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:41:02.338 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:41:02.363 -03:00 [DBG] IS4-Admin found in database: true
2019-03-02 12:41:02.365 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-02 12:41:02.373 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-02 12:41:02.375 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1551541259,"exp":1551544859,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d69f21-86e8-fc9b-ff42-4175a9ace90c","auth_time":1551539761,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-02 12:41:02.382 -03:00 [DBG] Creating userinfo response
2019-03-02 12:41:02.384 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:41:02.387 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:41:02.394 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:41:02.397 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-02 12:41:02.400 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-02 12:41:02.408 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-02 12:41:02.425 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-02 12:41:02.427 -03:00 [DBG] End userinfo request
2019-03-25 23:39:11.419 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-25 23:39:11.621 -03:00 [INF] SigninCredentialExtension added
2019-03-25 23:39:17.029 -03:00 [WRN] No XML encryptor configured. Key "7d9f03a7-626f-4e7f-bf5f-cb549f6b51a2" may be persisted to storage in unencrypted form.
2019-03-25 23:39:21.339 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-25 23:39:21.369 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-25 23:39:21.372 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-25 23:39:21.375 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-25 23:39:21.377 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-25 23:39:21.379 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-25 23:39:21.381 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-25 23:39:58.188 -03:00 [DBG] Login Url: /Account/Login
2019-03-25 23:39:58.198 -03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-03-25 23:39:58.200 -03:00 [DBG] Logout Url: /Account/Logout
2019-03-25 23:39:58.203 -03:00 [DBG] ConsentUrl Url: /consent
2019-03-25 23:39:58.205 -03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-03-25 23:39:58.208 -03:00 [DBG] Error Url: /home/error
2019-03-25 23:39:58.210 -03:00 [DBG] Error Id Parameter: errorId
2019-03-25 23:39:58.215 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:39:58.227 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:04.402 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:04.405 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:04.433 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-03-25 23:41:04.441 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:04.444 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:12.619 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-25 23:41:12.622 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:12.625 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:12.706 -03:00 [WRN] Invalid password for user 08d6b194-3db5-99fe-6c1c-7d85d66713d6.
2019-03-25 23:41:12.709 -03:00 [WRN] User 08d6b194-3db5-99fe-6c1c-7d85d66713d6 failed to provide the correct password.
2019-03-25 23:41:12.799 -03:00 [INF] {"Username":"bhdebrito@Gmail.com","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLLHIH9CG5B7:00000003","TimeStamp":"2019-03-26T02:41:12.0000000Z","ProcessId":19660,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-03-25 23:41:22.267 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-25 23:41:22.273 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:22.276 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:22.299 -03:00 [WRN] Invalid password for user 08d6b194-3db5-99fe-6c1c-7d85d66713d6.
2019-03-25 23:41:22.302 -03:00 [WRN] User 08d6b194-3db5-99fe-6c1c-7d85d66713d6 failed to provide the correct password.
2019-03-25 23:41:22.370 -03:00 [INF] {"Username":"bruno","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLLHIH9CG5B7:00000004","TimeStamp":"2019-03-26T02:41:22.0000000Z","ProcessId":19660,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-03-25 23:41:27.194 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-25 23:41:27.199 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:27.202 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:41:27.219 -03:00 [WRN] Invalid password for user 08d6b194-3db5-99fe-6c1c-7d85d66713d6.
2019-03-25 23:41:27.223 -03:00 [WRN] User 08d6b194-3db5-99fe-6c1c-7d85d66713d6 failed to provide the correct password.
2019-03-25 23:41:27.243 -03:00 [INF] {"Username":"bruno","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLLHIH9CG5B7:00000005","TimeStamp":"2019-03-26T02:41:27.0000000Z","ProcessId":19660,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-03-25 23:42:00.775 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-25 23:42:00.780 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:42:00.783 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:42:00.974 -03:00 [DBG] Augmenting SignInContext
2019-03-25 23:42:00.978 -03:00 [DBG] Adding idp claim with value: local
2019-03-25 23:42:00.980 -03:00 [DBG] Adding amr claim with value: pwd
2019-03-25 23:42:00.982 -03:00 [DBG] Adding auth_time claim with value: 1553568120
2019-03-25 23:42:00.988 -03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-03-25 23:42:00.998 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-03-25 23:42:01.006 -03:00 [INF] {"Username":"bruno","Provider":null,"ProviderUserId":null,"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","DisplayName":"bruno","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLLHIH9CG5B7:00000006","TimeStamp":"2019-03-26T02:42:01.0000000Z","ProcessId":19660,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-03-25 23:42:01.052 -03:00 [DBG] 0 persisted grants found for 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-25 23:42:03.594 -03:00 [DBG] 0 persisted grants found for 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-25 23:47:40.493 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-25 23:47:40.656 -03:00 [INF] SigninCredentialExtension added
2019-03-25 23:47:44.615 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-25 23:47:44.652 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-25 23:47:44.655 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-25 23:47:44.657 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-25 23:47:44.659 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-25 23:47:44.661 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-25 23:47:44.663 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-26 00:22:11.829 -03:00 [DBG] Login Url: /Account/Login
2019-03-26 00:22:11.841 -03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-03-26 00:22:11.844 -03:00 [DBG] Logout Url: /Account/Logout
2019-03-26 00:22:11.849 -03:00 [DBG] ConsentUrl Url: /consent
2019-03-26 00:22:11.851 -03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-03-26 00:22:11.854 -03:00 [DBG] Error Url: /home/error
2019-03-26 00:22:11.858 -03:00 [DBG] Error Id Parameter: errorId
2019-03-26 00:22:11.880 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 00:22:11.892 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 00:22:11.895 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 00:22:11.900 -03:00 [DBG] Start discovery request
2019-03-26 00:22:12.373 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 00:22:12.486 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 00:22:12.494 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 00:22:12.497 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 00:22:12.502 -03:00 [DBG] Start key discovery request
2019-03-26 00:22:12.769 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 00:22:12.776 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 00:22:12.779 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 00:22:12.786 -03:00 [DBG] Start authorize request
2019-03-26 00:22:12.797 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 00:22:12.805 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 00:22:12.918 -03:00 [DBG] skoruba_identity_admin found in database: false
2019-03-26 00:22:12.931 -03:00 [ERR] Unknown client or not enabled: skoruba_identity_admin
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"skoruba_identity_admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891673325332856.ZmIyYzNkZWItNmM1MS00YTBlLWJkOTYtY2ViMWYzNDc2ZGQzYjQ0ZTVkZTMtZTdmNC00MGQ5LWE4NTQtNTU1NGJjNGMzMjNl","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD5grgjuJ_oP6mFMA4GuRa27fKRiaPwKz7L962LD7S0PN9pDlejPhU0jFDF1sv3PfqLnWOPAjEVrYCV-uaM7YLMOrbLGC0PR5Ilny9_NKLar_J1BGU4tZKBREX00LDCZ_eA-czLO-DBDF6va-7OsZbdXqhZlCoxX0cWwAgYtxE6jr3npmTi4l61DllzTH8OIp09aBMc7eeEGhU1wJz45mOmKTSRM58CQkxFcb_B0WJVRcxELO1FPuXmUg_BcK9LdLP0Zabes7TXVJVPgg5rAY4pociQrgRHFA0aDGXpino3jHw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 00:22:12.946 -03:00 [ERR] Request validation failed
2019-03-26 00:22:12.948 -03:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"skoruba_identity_admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891673325332856.ZmIyYzNkZWItNmM1MS00YTBlLWJkOTYtY2ViMWYzNDc2ZGQzYjQ0ZTVkZTMtZTdmNC00MGQ5LWE4NTQtNTU1NGJjNGMzMjNl","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD5grgjuJ_oP6mFMA4GuRa27fKRiaPwKz7L962LD7S0PN9pDlejPhU0jFDF1sv3PfqLnWOPAjEVrYCV-uaM7YLMOrbLGC0PR5Ilny9_NKLar_J1BGU4tZKBREX00LDCZ_eA-czLO-DBDF6va-7OsZbdXqhZlCoxX0cWwAgYtxE6jr3npmTi4l61DllzTH8OIp09aBMc7eeEGhU1wJz45mOmKTSRM58CQkxFcb_B0WJVRcxELO1FPuXmUg_BcK9LdLP0Zabes7TXVJVPgg5rAY4pociQrgRHFA0aDGXpino3jHw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 00:22:12.962 -03:00 [INF] {"ClientId":"skoruba_identity_admin","ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Unknown client or client not enabled","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLLHJ4073MHP:00000001","TimeStamp":"2019-03-26T03:22:12.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-03-26 00:22:27.118 -03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-26 00:22:27.225 -03:00 [DBG] Augmenting SignInContext
2019-03-26 00:22:27.229 -03:00 [DBG] Adding idp claim with value: local
2019-03-26 00:22:27.231 -03:00 [DBG] Adding amr claim with value: pwd
2019-03-26 00:22:27.234 -03:00 [DBG] Adding auth_time claim with value: 1553570547
2019-03-26 00:22:27.241 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-03-26 00:22:27.247 -03:00 [INF] {"Username":"bruno","Provider":null,"ProviderUserId":null,"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","DisplayName":"bruno","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLLHJ4073MHP:00000008","TimeStamp":"2019-03-26T03:22:27.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-03-26 00:22:28.995 -03:00 [DBG] 0 persisted grants found for 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 01:19:36.342 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 01:19:36.409 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:19:36.412 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:19:36.416 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 01:19:36.420 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 01:19:36.423 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 01:19:36.427 -03:00 [DBG] Start discovery request
2019-03-26 01:19:36.449 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 01:19:36.458 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 01:19:36.464 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:19:36.467 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:19:36.469 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 01:19:36.472 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 01:19:36.475 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 01:19:36.478 -03:00 [DBG] Start key discovery request
2019-03-26 01:19:36.533 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 01:19:36.536 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 01:19:36.540 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 01:19:36.543 -03:00 [DBG] Start authorize request
2019-03-26 01:19:36.546 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 01:19:36.549 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 01:19:36.696 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:19:36.704 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:19:36.751 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:36.802 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:36.819 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:36.833 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:36.843 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 01:19:36.846 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0","UiLocales":null,"Nonce":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 01:19:36.878 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: false
2019-03-26 01:19:36.882 -03:00 [DBG] user_consent grant with value: IS4-Admin|08d6b194-3db5-99fe-6c1c-7d85d66713d6 not found in store.
2019-03-26 01:19:36.884 -03:00 [DBG] Found no prior consent from consent store, consent is required
2019-03-26 01:19:36.886 -03:00 [INF] Showing consent: User has not yet consented
2019-03-26 01:19:36.901 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 01:19:36.925 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:19:36.927 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:19:36.935 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:36.951 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:36.958 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:36.973 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:36.975 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 01:19:37.002 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:19:37.004 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:19:37.012 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:37.029 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:39.441 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-26 01:19:39.456 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 01:19:39.484 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:19:39.486 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:19:39.494 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:39.511 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:39.519 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:39.534 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:39.537 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 01:19:39.552 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-03-26 01:19:39.558 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-03-26 01:19:39.561 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-03-26 01:19:39.567 -03:00 [DBG] Start authorize callback request
2019-03-26 01:19:39.573 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 01:19:39.576 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 01:19:39.603 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:19:39.606 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:19:39.613 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:39.629 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:39.636 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:39.655 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:19:39.658 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 01:19:39.663 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0","UiLocales":null,"Nonce":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 01:19:39.684 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: false
2019-03-26 01:19:39.687 -03:00 [DBG] user_consent grant with value: IS4-Admin|08d6b194-3db5-99fe-6c1c-7d85d66713d6 not found in store.
2019-03-26 01:19:39.690 -03:00 [DBG] Found no prior consent from consent store, consent is required
2019-03-26 01:19:39.696 -03:00 [INF] User consented to scopes: ["openid","profile","email","jp_api.is4"]
2019-03-26 01:19:39.700 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","jp_api.is4"]
2019-03-26 01:19:39.705 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 01:19:39.724 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= not found in database
2019-03-26 01:19:39.901 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 01:19:39.911 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 01:19:39.913 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 01:19:39.985 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 01:19:39.987 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 01:19:39.996 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Hwhg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4hUg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MHT:00000004","TimeStamp":"2019-03-26T04:19:39.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 01:19:40.003 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"3iFNc9xuNeumvKwlh4wbG4FIUITjsdAs4xzQtuM0","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 01:19:40.020 -03:00 [DBG] Augmenting SignInContext
2019-03-26 01:19:40.022 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-03-26 01:19:41.194 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 01:19:41.200 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:19:41.203 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:19:41.206 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 01:19:41.209 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 01:19:41.212 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 01:19:41.216 -03:00 [DBG] Start discovery request
2019-03-26 01:19:41.240 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 01:19:41.257 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 01:19:41.266 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:19:41.270 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:19:41.282 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 01:19:41.291 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 01:19:41.295 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 01:19:41.299 -03:00 [DBG] Start key discovery request
2019-03-26 01:19:42.438 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 01:19:42.445 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:19:42.448 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:19:42.500 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 01:19:42.506 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:19:42.510 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:19:42.513 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 01:19:42.517 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 01:19:42.520 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 01:19:42.529 -03:00 [DBG] Start userinfo request
2019-03-26 01:19:42.535 -03:00 [DBG] Bearer token found in header
2019-03-26 01:19:42.595 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:19:42.598 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:19:42.626 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:19:42.628 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:19:42.638 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 01:19:42.643 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553573979,"exp":1553577579,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 01:19:42.657 -03:00 [DBG] Creating userinfo response
2019-03-26 01:19:42.664 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 01:19:42.669 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 01:19:42.699 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:42.702 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 01:19:42.706 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 01:19:42.716 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:19:42.734 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 01:19:42.738 -03:00 [DBG] End userinfo request
2019-03-26 01:19:47.048 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 01:19:47.052 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 01:19:47.055 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 01:19:47.057 -03:00 [DBG] Start discovery request
2019-03-26 01:19:47.075 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 01:19:47.151 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 01:19:47.154 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 01:19:47.156 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 01:19:47.160 -03:00 [DBG] Start key discovery request
2019-03-26 01:38:37.165 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 01:38:37.177 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:37.179 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:37.182 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 01:38:37.185 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 01:38:37.188 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 01:38:37.191 -03:00 [DBG] Start discovery request
2019-03-26 01:38:37.217 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 01:38:37.228 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 01:38:37.233 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:37.236 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:37.238 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 01:38:37.241 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 01:38:37.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 01:38:37.246 -03:00 [DBG] Start key discovery request
2019-03-26 01:38:40.023 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 01:38:40.029 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:40.032 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:40.038 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 01:38:40.042 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 01:38:40.045 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 01:38:40.049 -03:00 [DBG] Start discovery request
2019-03-26 01:38:40.078 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 01:38:40.091 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 01:38:40.099 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:40.101 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:40.104 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 01:38:40.106 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 01:38:40.108 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 01:38:40.111 -03:00 [DBG] Start key discovery request
2019-03-26 01:38:40.129 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 01:38:40.136 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 01:38:40.139 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 01:38:40.142 -03:00 [DBG] Start authorize request
2019-03-26 01:38:40.144 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 01:38:40.147 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 01:38:40.179 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:38:40.182 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:38:40.191 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:38:40.209 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:38:40.217 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:38:40.237 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 01:38:40.240 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 01:38:40.243 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"unONcb5jHQt6dPyxSbHhvaVEiDkHKV78PwkV85tQ","UiLocales":null,"Nonce":"unONcb5jHQt6dPyxSbHhvaVEiDkHKV78PwkV85tQ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"unONcb5jHQt6dPyxSbHhvaVEiDkHKV78PwkV85tQ","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"unONcb5jHQt6dPyxSbHhvaVEiDkHKV78PwkV85tQ"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 01:38:40.268 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 01:38:40.273 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 01:38:40.276 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 01:38:40.280 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 01:38:40.283 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 01:38:40.313 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 01:38:40.316 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 01:38:40.323 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****Q-xA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****9Yng","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MI1:00000001","TimeStamp":"2019-03-26T04:38:40.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 01:38:40.337 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"unONcb5jHQt6dPyxSbHhvaVEiDkHKV78PwkV85tQ","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 01:38:41.240 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 01:38:41.247 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:41.252 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:41.256 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 01:38:41.259 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 01:38:41.263 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 01:38:41.270 -03:00 [DBG] Start discovery request
2019-03-26 01:38:41.295 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 01:38:41.416 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 01:38:41.425 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:41.429 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:41.432 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 01:38:41.436 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 01:38:41.439 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 01:38:41.443 -03:00 [DBG] Start key discovery request
2019-03-26 01:38:42.621 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 01:38:42.627 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:42.629 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:42.678 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 01:38:42.685 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 01:38:42.688 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 01:38:42.691 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 01:38:42.695 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 01:38:42.699 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 01:38:42.705 -03:00 [DBG] Start userinfo request
2019-03-26 01:38:42.709 -03:00 [DBG] Bearer token found in header
2019-03-26 01:38:42.747 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:38:42.749 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:38:42.776 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 01:38:42.779 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 01:38:42.787 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 01:38:42.790 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553575120,"exp":1553578720,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 01:38:42.795 -03:00 [DBG] Creating userinfo response
2019-03-26 01:38:42.797 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 01:38:42.801 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 01:38:42.809 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:38:42.812 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 01:38:42.815 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 01:38:42.823 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 01:38:42.840 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 01:38:42.843 -03:00 [DBG] End userinfo request
2019-03-26 02:01:07.101 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:01:07.116 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:07.119 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:07.122 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:01:07.125 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:01:07.128 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:01:07.131 -03:00 [DBG] Start discovery request
2019-03-26 02:01:07.156 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:01:07.167 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:01:07.172 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:07.175 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:07.177 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:01:07.179 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:01:07.182 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:01:07.184 -03:00 [DBG] Start key discovery request
2019-03-26 02:01:35.232 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:01:35.238 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:35.240 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:35.243 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:01:35.249 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:01:35.253 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:01:35.257 -03:00 [DBG] Start discovery request
2019-03-26 02:01:35.288 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:01:35.308 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:01:35.319 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:35.322 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:35.325 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:01:35.329 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:01:35.333 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:01:35.337 -03:00 [DBG] Start key discovery request
2019-03-26 02:01:35.398 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:01:35.401 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:01:35.403 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:01:35.406 -03:00 [DBG] Start authorize request
2019-03-26 02:01:35.409 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:01:35.412 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:01:35.440 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:01:35.443 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:01:35.452 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:01:35.472 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:01:35.481 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:01:35.497 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:01:35.500 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:01:35.503 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"XapsnqPbORxhQ6TtjbMPYnk7y9PdYnfuKQTep62w","UiLocales":null,"Nonce":"XapsnqPbORxhQ6TtjbMPYnk7y9PdYnfuKQTep62w","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"XapsnqPbORxhQ6TtjbMPYnk7y9PdYnfuKQTep62w","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"XapsnqPbORxhQ6TtjbMPYnk7y9PdYnfuKQTep62w"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:01:35.516 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:01:35.520 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:01:35.523 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:01:35.527 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 02:01:35.530 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:01:35.553 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:01:35.557 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 02:01:35.564 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****gS2w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6dBg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MI6:00000001","TimeStamp":"2019-03-26T05:01:35.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:01:35.577 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"XapsnqPbORxhQ6TtjbMPYnk7y9PdYnfuKQTep62w","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:01:36.520 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:01:36.526 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:36.530 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:36.533 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:01:36.537 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:01:36.541 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:01:36.546 -03:00 [DBG] Start discovery request
2019-03-26 02:01:36.568 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:01:36.661 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:01:36.675 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:36.679 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:36.681 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:01:36.685 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:01:36.689 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:01:36.692 -03:00 [DBG] Start key discovery request
2019-03-26 02:01:37.851 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:01:37.857 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:37.859 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:37.913 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:01:37.921 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:01:37.924 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:01:37.927 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:01:37.931 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:01:37.934 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:01:37.937 -03:00 [DBG] Start userinfo request
2019-03-26 02:01:37.940 -03:00 [DBG] Bearer token found in header
2019-03-26 02:01:37.979 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:01:37.981 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:01:38.009 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:01:38.011 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:01:38.019 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:01:38.021 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553576495,"exp":1553580095,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:01:38.027 -03:00 [DBG] Creating userinfo response
2019-03-26 02:01:38.030 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:01:38.032 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:01:38.039 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:01:38.042 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:01:38.045 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:01:38.052 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:01:38.068 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:01:38.072 -03:00 [DBG] End userinfo request
2019-03-26 02:09:48.501 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:09:48.514 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:48.517 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:48.520 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:09:48.527 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:09:48.530 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:09:48.533 -03:00 [DBG] Start discovery request
2019-03-26 02:09:48.561 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:09:48.581 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:09:48.590 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:48.592 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:48.595 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:09:48.599 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:09:48.602 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:09:48.606 -03:00 [DBG] Start key discovery request
2019-03-26 02:09:53.774 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:09:53.782 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:53.786 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:53.795 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:09:53.798 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:09:53.801 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:09:53.804 -03:00 [DBG] Start discovery request
2019-03-26 02:09:53.827 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:09:53.852 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:09:53.860 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:53.866 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:53.869 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:09:53.872 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:09:53.875 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:09:53.880 -03:00 [DBG] Start key discovery request
2019-03-26 02:09:53.930 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:09:53.933 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:09:53.936 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:09:53.940 -03:00 [DBG] Start authorize request
2019-03-26 02:09:53.944 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:09:53.946 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:09:53.984 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:09:53.987 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:09:53.996 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:09:54.014 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:09:54.023 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:09:54.041 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:09:54.044 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:09:54.048 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"204nQnJdXel0poeMrAwz9TSdwrcy1a93zpjMfnKg","UiLocales":null,"Nonce":"204nQnJdXel0poeMrAwz9TSdwrcy1a93zpjMfnKg","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"204nQnJdXel0poeMrAwz9TSdwrcy1a93zpjMfnKg","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"204nQnJdXel0poeMrAwz9TSdwrcy1a93zpjMfnKg"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:09:54.065 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:09:54.068 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:09:54.071 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:09:54.073 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 02:09:54.076 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:09:54.098 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:09:54.101 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 02:09:54.105 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****SICQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****beiw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MI8:00000001","TimeStamp":"2019-03-26T05:09:54.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:09:54.111 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"204nQnJdXel0poeMrAwz9TSdwrcy1a93zpjMfnKg","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:09:54.972 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:09:54.978 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:54.980 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:54.983 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:09:54.986 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:09:54.988 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:09:54.993 -03:00 [DBG] Start discovery request
2019-03-26 02:09:55.019 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:09:55.038 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:09:55.045 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:55.048 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:55.051 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:09:55.055 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:09:55.057 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:09:55.060 -03:00 [DBG] Start key discovery request
2019-03-26 02:09:56.189 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:09:56.194 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:56.197 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:56.239 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:09:56.247 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:09:56.250 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:09:56.253 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:09:56.257 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:09:56.262 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:09:56.266 -03:00 [DBG] Start userinfo request
2019-03-26 02:09:56.269 -03:00 [DBG] Bearer token found in header
2019-03-26 02:09:56.311 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:09:56.314 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:09:56.352 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:09:56.355 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:09:56.365 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:09:56.370 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553576994,"exp":1553580594,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:09:56.380 -03:00 [DBG] Creating userinfo response
2019-03-26 02:09:56.382 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:09:56.385 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:09:56.393 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:09:56.396 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:09:56.399 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:09:56.406 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:09:56.428 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:09:56.430 -03:00 [DBG] End userinfo request
2019-03-26 02:11:52.942 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:11:52.947 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:11:52.950 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:11:52.953 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:11:52.956 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:11:52.959 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:11:52.963 -03:00 [DBG] Start discovery request
2019-03-26 02:11:52.986 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:11:53.005 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:11:53.010 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:11:53.013 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:11:53.016 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:11:53.019 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:11:53.021 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:11:53.024 -03:00 [DBG] Start key discovery request
2019-03-26 02:11:53.575 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:11:53.581 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:11:53.585 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:11:53.633 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:11:53.641 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:11:53.645 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:11:53.649 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:11:53.656 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:11:53.662 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:11:53.665 -03:00 [DBG] Start userinfo request
2019-03-26 02:11:53.668 -03:00 [DBG] Bearer token found in header
2019-03-26 02:11:53.705 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:11:53.708 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:11:53.748 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:11:53.751 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:11:53.765 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:11:53.769 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553576994,"exp":1553580594,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:11:53.786 -03:00 [DBG] Creating userinfo response
2019-03-26 02:11:53.789 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:11:53.792 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:11:53.803 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:11:53.806 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:11:53.809 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:11:53.820 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:11:53.849 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:11:53.852 -03:00 [DBG] End userinfo request
2019-03-26 02:18:39.120 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:18:39.133 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:39.136 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:39.141 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:18:39.145 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:18:39.150 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:18:39.153 -03:00 [DBG] Start discovery request
2019-03-26 02:18:39.176 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:18:39.195 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:18:39.201 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:39.204 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:39.206 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:18:39.209 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:18:39.211 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:18:39.214 -03:00 [DBG] Start key discovery request
2019-03-26 02:18:41.972 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:18:41.979 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:41.982 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:41.986 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:18:41.991 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:18:41.995 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:18:41.999 -03:00 [DBG] Start discovery request
2019-03-26 02:18:42.027 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:18:42.047 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:18:42.055 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:42.066 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:42.068 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:18:42.072 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:18:42.074 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:18:42.077 -03:00 [DBG] Start key discovery request
2019-03-26 02:18:42.098 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:18:42.103 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:18:42.107 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:18:42.111 -03:00 [DBG] Start authorize request
2019-03-26 02:18:42.115 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:18:42.118 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:18:42.151 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:18:42.154 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:18:42.162 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:18:42.180 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:18:42.189 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:18:42.207 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:18:42.211 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:18:42.214 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"pXl3nhJPCZ2w2OkUjS1PvJ6HzzuwDqCJc60HAt3x","UiLocales":null,"Nonce":"pXl3nhJPCZ2w2OkUjS1PvJ6HzzuwDqCJc60HAt3x","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"pXl3nhJPCZ2w2OkUjS1PvJ6HzzuwDqCJc60HAt3x","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"pXl3nhJPCZ2w2OkUjS1PvJ6HzzuwDqCJc60HAt3x"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:18:42.235 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:18:42.239 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:18:42.241 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:18:42.244 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 02:18:42.246 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:18:42.274 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:18:42.278 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 02:18:42.287 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****WfXQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****pjiQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MIB:00000001","TimeStamp":"2019-03-26T05:18:42.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:18:42.297 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"pXl3nhJPCZ2w2OkUjS1PvJ6HzzuwDqCJc60HAt3x","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:18:43.029 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:18:43.036 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:43.040 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:43.043 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:18:43.047 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:18:43.053 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:18:43.057 -03:00 [DBG] Start discovery request
2019-03-26 02:18:43.087 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:18:43.112 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:18:43.119 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:43.129 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:43.131 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:18:43.134 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:18:43.136 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:18:43.140 -03:00 [DBG] Start key discovery request
2019-03-26 02:18:44.315 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:18:44.321 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:44.324 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:44.394 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:18:44.402 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:18:44.405 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:18:44.409 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:18:44.413 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:18:44.418 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:18:44.422 -03:00 [DBG] Start userinfo request
2019-03-26 02:18:44.428 -03:00 [DBG] Bearer token found in header
2019-03-26 02:18:44.476 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:18:44.479 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:18:44.510 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:18:44.512 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:18:44.519 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:18:44.523 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553577522,"exp":1553581122,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:18:44.531 -03:00 [DBG] Creating userinfo response
2019-03-26 02:18:44.534 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:18:44.537 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:18:44.547 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:18:44.550 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:18:44.554 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:18:44.563 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:18:44.582 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:18:44.586 -03:00 [DBG] End userinfo request
2019-03-26 02:20:03.503 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:20:03.506 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:20:03.509 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:20:03.512 -03:00 [DBG] Start discovery request
2019-03-26 02:20:03.528 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:20:03.613 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:20:03.616 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:20:03.618 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:20:03.621 -03:00 [DBG] Start key discovery request
2019-03-26 02:20:03.683 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:20:03.686 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:20:03.688 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:20:03.690 -03:00 [DBG] Start authorize request
2019-03-26 02:20:03.693 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:20:03.695 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:20:03.720 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:20:03.722 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:20:03.725 -03:00 [ERR] Invalid redirect_uri: http://localhost:9000/signin-oidc
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891744036450594.ZGJjNGM3ZTgtMWZlYS00ZDdjLTk2OTUtMWQ0YzUwMGUwNTg2NTYwNTYyYjUtYjk4ZS00ZjMyLThlNjYtMGQ2M2NlY2U2MDI4","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD6I0PH3NV5u6StNwYlfCk0Fg36tp2YdDCyqyotMNa-x4An7nfioWZiFMbpYUwErU-lWzXFti5WwqLrBU97MUuB1KjgQzV8T-EuKIpWkG0vtX6coN47GZWd5U3Vxj7ooKKNWEnU1HQyYw8BPI8vquwg5QjmxeNnKK-KMEcbVHhgAxj0pZXOoZZD4NrcSX8jkILGHlCSmc714cRoS4BY8K8xUQ-C8FpscParERm0RAoXgxA8b9v92lzuqIVSsjX3yLslVlKue7nLwXCU1VQDAlMSutOpDqvK78ruqiSpdTNwrbg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:20:03.732 -03:00 [ERR] Request validation failed
2019-03-26 02:20:03.734 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":null,"AllowedRedirectUris":["http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891744036450594.ZGJjNGM3ZTgtMWZlYS00ZDdjLTk2OTUtMWQ0YzUwMGUwNTg2NTYwNTYyYjUtYjk4ZS00ZjMyLThlNjYtMGQ2M2NlY2U2MDI4","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD6I0PH3NV5u6StNwYlfCk0Fg36tp2YdDCyqyotMNa-x4An7nfioWZiFMbpYUwErU-lWzXFti5WwqLrBU97MUuB1KjgQzV8T-EuKIpWkG0vtX6coN47GZWd5U3Vxj7ooKKNWEnU1HQyYw8BPI8vquwg5QjmxeNnKK-KMEcbVHhgAxj0pZXOoZZD4NrcSX8jkILGHlCSmc714cRoS4BY8K8xUQ-C8FpscParERm0RAoXgxA8b9v92lzuqIVSsjX3yLslVlKue7nLwXCU1VQDAlMSutOpDqvK78ruqiSpdTNwrbg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:20:03.742 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLLHJ4073MIB:00000002","TimeStamp":"2019-03-26T05:20:03.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-03-26 02:21:27.320 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:21:27.323 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:21:27.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:21:27.330 -03:00 [DBG] Start discovery request
2019-03-26 02:21:27.356 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:21:27.444 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:21:27.447 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:21:27.450 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:21:27.453 -03:00 [DBG] Start key discovery request
2019-03-26 02:21:27.504 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:21:27.508 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:21:27.510 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:21:27.513 -03:00 [DBG] Start authorize request
2019-03-26 02:21:27.515 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:21:27.520 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:21:27.546 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:21:27.549 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:21:27.559 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:27.566 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:27.578 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:27.585 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:27.589 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:21:27.592 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email roles","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","UiLocales":null,"Nonce":"636891744874697474.MTIyN2IxMTMtZTc1YS00MDIyLWJmODEtNzlmNzg3ZDA0MjNmMWIwMGNiYjAtN2Y2Ni00ODIzLWJlNzctZDAzMDFiYjk0YjA5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891744874697474.MTIyN2IxMTMtZTc1YS00MDIyLWJmODEtNzlmNzg3ZDA0MjNmMWIwMGNiYjAtN2Y2Ni00ODIzLWJlNzctZDAzMDFiYjk0YjA5","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:21:27.622 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:21:27.625 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2019-03-26 02:21:27.629 -03:00 [INF] Showing consent: User has not yet consented
2019-03-26 02:21:27.636 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:21:27.661 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:21:27.664 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:21:27.672 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:27.678 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:27.686 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:27.691 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:27.694 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:21:27.721 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:21:27.723 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:21:27.737 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:27.744 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:30.373 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-26 02:21:30.396 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:21:30.420 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:21:30.422 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:21:30.430 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:30.436 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:30.445 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:30.452 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:30.455 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:21:30.463 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-03-26 02:21:30.466 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-03-26 02:21:30.469 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-03-26 02:21:30.473 -03:00 [DBG] Start authorize callback request
2019-03-26 02:21:30.478 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:21:30.481 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:21:30.509 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:21:30.512 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:21:30.519 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:30.527 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:30.535 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:30.541 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:30.546 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:21:30.549 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email roles","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","UiLocales":null,"Nonce":"636891744874697474.MTIyN2IxMTMtZTc1YS00MDIyLWJmODEtNzlmNzg3ZDA0MjNmMWIwMGNiYjAtN2Y2Ni00ODIzLWJlNzctZDAzMDFiYjk0YjA5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891744874697474.MTIyN2IxMTMtZTc1YS00MDIyLWJmODEtNzlmNzg3ZDA0MjNmMWIwMGNiYjAtN2Y2Ni00ODIzLWJlNzctZDAzMDFiYjk0YjA5","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:21:30.591 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:21:30.595 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2019-03-26 02:21:30.600 -03:00 [INF] User consented to scopes: ["openid","profile","email","roles"]
2019-03-26 02:21:30.603 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","roles"]
2019-03-26 02:21:30.607 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:21:30.617 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database
2019-03-26 02:21:30.717 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:21:30.720 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:21:30.744 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****XVzA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MIB:0000000B","TimeStamp":"2019-03-26T05:21:30.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:21:30.750 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","Scope":"openid profile email roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:21:42.454 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-03-26 02:21:42.461 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-03-26 02:21:42.464 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-03-26 02:21:42.467 -03:00 [DBG] Start authorize callback request
2019-03-26 02:21:42.470 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:21:42.473 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:21:42.502 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:21:42.505 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:21:42.513 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:42.519 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:42.527 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:42.534 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:42.538 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:21:42.541 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email roles","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","UiLocales":null,"Nonce":"636891744874697474.MTIyN2IxMTMtZTc1YS00MDIyLWJmODEtNzlmNzg3ZDA0MjNmMWIwMGNiYjAtN2Y2Ni00ODIzLWJlNzctZDAzMDFiYjk0YjA5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891744874697474.MTIyN2IxMTMtZTc1YS00MDIyLWJmODEtNzlmNzg3ZDA0MjNmMWIwMGNiYjAtN2Y2Ni00ODIzLWJlNzctZDAzMDFiYjk0YjA5","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:21:42.570 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:21:42.574 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:21:42.578 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:21:42.581 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:21:42.603 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****7MiQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MIB:0000000D","TimeStamp":"2019-03-26T05:21:42.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:21:42.609 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD73YQqi7QI3a6HpRKsLaOqBkr4MfH7CWLSAdeSMqiNc9_5-JExUBonU5EwyaFCDAM_liLKz2nNZ0jTMxA3AtnrP-wwsXizjqS6AlyeV7YRBiZFfgzX3fZiJjj41YIa-aN2S3xYeazLExWvIXltbYqEq-G5ICu1vIblUHgXyjUVjEc8BI_yvcPsILMRiQ33bKPrtQrCEEGaHxMJkqSg3UETwgegv3SNJIPbOVXijpJVrV9j4YRuNXupb3Kxjph0coxd-oX3kfhj0RyZNY-Bl0g8NryzhaoXL2R28JZTjQav4DA","Scope":"openid profile email roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:21:54.749 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:21:54.755 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:21:54.759 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:21:54.762 -03:00 [DBG] Start authorize request
2019-03-26 02:21:54.765 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:21:54.768 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:21:54.796 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:21:54.799 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:21:54.807 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:54.813 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:54.825 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:21:54.831 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:21:54.835 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:21:54.839 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email roles","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","UiLocales":null,"Nonce":"636891745147399961.ZTY3MGY0YzgtNjc3My00MGVhLWE0NjctYjYzYzUyOGIxYTUzZTk0ZGE1NTctNDgwOC00YWU2LWE4NGEtMDc2NmRiOTEyOWJj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891745147399961.ZTY3MGY0YzgtNjc3My00MGVhLWE0NjctYjYzYzUyOGIxYTUzZTk0ZGE1NTctNDgwOC00YWU2LWE4NGEtMDc2NmRiOTEyOWJj","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:21:54.868 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:21:54.871 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:21:54.874 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:21:54.876 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:21:54.896 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****SdUQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MIB:0000000E","TimeStamp":"2019-03-26T05:21:54.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:21:54.902 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","Scope":"openid profile email roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:22:16.465 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:22:16.470 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:22:16.473 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:22:16.476 -03:00 [DBG] Start authorize request
2019-03-26 02:22:16.479 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:22:16.481 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:22:16.509 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:22:16.511 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:22:16.518 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:22:16.523 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:22:16.530 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:22:16.536 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:22:16.539 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:22:16.542 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email roles","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","UiLocales":null,"Nonce":"636891745147399961.ZTY3MGY0YzgtNjc3My00MGVhLWE0NjctYjYzYzUyOGIxYTUzZTk0ZGE1NTctNDgwOC00YWU2LWE4NGEtMDc2NmRiOTEyOWJj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891745147399961.ZTY3MGY0YzgtNjc3My00MGVhLWE0NjctYjYzYzUyOGIxYTUzZTk0ZGE1NTctNDgwOC00YWU2LWE4NGEtMDc2NmRiOTEyOWJj","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:22:16.570 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:22:16.573 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:22:16.576 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:22:16.578 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:22:16.600 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ynQQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MIB:0000000F","TimeStamp":"2019-03-26T05:22:16.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:22:16.607 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","Scope":"openid profile email roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:22:19.942 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:22:19.945 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:22:19.948 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:22:19.951 -03:00 [DBG] Start authorize request
2019-03-26 02:22:19.953 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:22:19.956 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:22:19.982 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:22:19.984 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:22:19.991 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:22:19.997 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:22:20.005 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:22:20.011 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:22:20.013 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:22:20.016 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email roles","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","UiLocales":null,"Nonce":"636891745147399961.ZTY3MGY0YzgtNjc3My00MGVhLWE0NjctYjYzYzUyOGIxYTUzZTk0ZGE1NTctNDgwOC00YWU2LWE4NGEtMDc2NmRiOTEyOWJj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891745147399961.ZTY3MGY0YzgtNjc3My00MGVhLWE0NjctYjYzYzUyOGIxYTUzZTk0ZGE1NTctNDgwOC00YWU2LWE4NGEtMDc2NmRiOTEyOWJj","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:22:20.038 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:22:20.041 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:22:20.043 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:22:20.045 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:22:20.063 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****4tsA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHJ4073MIB:00000010","TimeStamp":"2019-03-26T05:22:20.0000000Z","ProcessId":4736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:22:20.070 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD4X9_UzfTOWjDnzdu3E3imYKDgVubcQHk1eO4Cc7clZpcNWMaGKrCKW0kLbk9Q6M1OruNKxTsFUrk0ioTohzeRKpk791SX4iC2dEON-DCD5ILcO8z0NIsLFjAjiXjeJ_TweggaNuSBMFdRho_3a7LnQPMNuENvuda0vzn0gn0kYiT7Az6ErqdLOH6m5ZBkdG-5R45Y5JN7qqQFvBTDuGyH8u1E-aZ5O6qm8_wke8WYUTsXnlwKmyknBgrPRrAoc009AGew7LTz44RGwCf5L_ujy1PTVL_hBxd9fSFjvflZt9A","Scope":"openid profile email roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:24:01.767 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-26 02:24:01.924 -03:00 [INF] SigninCredentialExtension added
2019-03-26 02:24:05.618 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-26 02:24:05.654 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-26 02:24:05.656 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-26 02:24:05.658 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-26 02:24:05.663 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-26 02:24:05.666 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-26 02:24:05.668 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-26 02:24:08.621 -03:00 [DBG] Login Url: /Account/Login
2019-03-26 02:24:08.632 -03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-03-26 02:24:08.635 -03:00 [DBG] Logout Url: /Account/Logout
2019-03-26 02:24:08.637 -03:00 [DBG] ConsentUrl Url: /consent
2019-03-26 02:24:08.640 -03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-03-26 02:24:08.643 -03:00 [DBG] Error Url: /home/error
2019-03-26 02:24:08.647 -03:00 [DBG] Error Id Parameter: errorId
2019-03-26 02:24:08.680 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:24:08.688 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:24:08.690 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:24:08.696 -03:00 [DBG] Start authorize request
2019-03-26 02:24:08.703 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:24:08.714 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:24:09.182 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:24:09.192 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:24:09.273 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:24:09.374 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:24:09.389 -03:00 [DBG] Found ["openid","profile","email","roles"] identity scopes in database
2019-03-26 02:24:09.395 -03:00 [DBG] Found [] API scopes in database
2019-03-26 02:24:09.403 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:24:09.414 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email roles","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD414onmsi8oXzP-Nbpruuy-GzFn1pp0LlwnRu82jcZRMGGopRUD3BgFBOodXghee3y5fRalIYHRew_YwYjSNuCPdefChJqW0484l95zzc3emZBsh_P_iGafiM7aKoOqoX55-owbMqjnggZJZRzcB2uuX3Li98VfxMubk2ylEs0zaU9FjsVMyGMu9ywAV6Khk5rAvqx0EM1eu7DN48Me8MK_VC4NbPD74XksZxo2xhLqE3rrWF2PWBe70kqzJO0IC-VVU60_tkZ9lChYCPPuFSm4Oy29jGV1L-OXjeDf74bASQ","UiLocales":null,"Nonce":"636891746484619168.ZjE5YTFlNzQtZWU1OS00Y2M4LWIyZWMtMDZjMmZmMjllZGIzZDNiMjEwMjItOGNmMi00OThiLWE0OGMtYmE3ZDNlZThmM2Fi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"client_id":"IS4-Admin","redirect_uri":"http://localhost:9000/signin-oidc","response_type":"id_token","scope":"openid profile email roles","response_mode":"form_post","nonce":"636891746484619168.ZjE5YTFlNzQtZWU1OS00Y2M4LWIyZWMtMDZjMmZmMjllZGIzZDNiMjEwMjItOGNmMi00OThiLWE0OGMtYmE3ZDNlZThmM2Fi","state":"CfDJ8B3nFXvkMn5NkBzoICtEmD414onmsi8oXzP-Nbpruuy-GzFn1pp0LlwnRu82jcZRMGGopRUD3BgFBOodXghee3y5fRalIYHRew_YwYjSNuCPdefChJqW0484l95zzc3emZBsh_P_iGafiM7aKoOqoX55-owbMqjnggZJZRzcB2uuX3Li98VfxMubk2ylEs0zaU9FjsVMyGMu9ywAV6Khk5rAvqx0EM1eu7DN48Me8MK_VC4NbPD74XksZxo2xhLqE3rrWF2PWBe70kqzJO0IC-VVU60_tkZ9lChYCPPuFSm4Oy29jGV1L-OXjeDf74bASQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:24:09.494 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:24:09.501 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:24:09.509 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:24:09.517 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:24:09.695 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email roles","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****5anQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHLD2PEENT:00000001","TimeStamp":"2019-03-26T05:24:09.0000000Z","ProcessId":37736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:24:09.703 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:9000/signin-oidc","State":"CfDJ8B3nFXvkMn5NkBzoICtEmD414onmsi8oXzP-Nbpruuy-GzFn1pp0LlwnRu82jcZRMGGopRUD3BgFBOodXghee3y5fRalIYHRew_YwYjSNuCPdefChJqW0484l95zzc3emZBsh_P_iGafiM7aKoOqoX55-owbMqjnggZJZRzcB2uuX3Li98VfxMubk2ylEs0zaU9FjsVMyGMu9ywAV6Khk5rAvqx0EM1eu7DN48Me8MK_VC4NbPD74XksZxo2xhLqE3rrWF2PWBe70kqzJO0IC-VVU60_tkZ9lChYCPPuFSm4Oy29jGV1L-OXjeDf74bASQ","Scope":"openid profile email roles","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:27:34.394 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:27:34.399 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:27:34.402 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:27:34.408 -03:00 [DBG] Start discovery request
2019-03-26 02:27:34.558 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:27:34.646 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:27:34.650 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:27:34.653 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:27:34.658 -03:00 [DBG] Start key discovery request
2019-03-26 02:32:50.193 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:32:50.232 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:32:50.240 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:32:50.249 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:32:50.254 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:32:50.258 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:32:50.262 -03:00 [DBG] Start discovery request
2019-03-26 02:32:50.288 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:32:50.875 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:32:50.883 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:32:50.886 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:32:50.889 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:32:50.892 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:32:50.895 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:32:50.898 -03:00 [DBG] Start key discovery request
2019-03-26 02:32:58.442 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:32:58.451 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:32:58.454 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:32:58.459 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:32:58.466 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:32:58.471 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:32:58.480 -03:00 [DBG] Start discovery request
2019-03-26 02:32:58.512 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:32:58.549 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:32:58.566 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:32:58.572 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:32:58.575 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:32:58.579 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:32:58.585 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:32:58.590 -03:00 [DBG] Start key discovery request
2019-03-26 02:32:58.688 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:32:58.694 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:32:58.697 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:32:58.701 -03:00 [DBG] Start authorize request
2019-03-26 02:32:58.704 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:32:58.709 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:32:58.747 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:32:58.750 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:32:58.786 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:32:58.814 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:32:58.829 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:32:58.848 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:32:58.860 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:32:58.863 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr","UiLocales":null,"Nonce":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:32:58.876 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:32:58.880 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2019-03-26 02:32:58.884 -03:00 [INF] Showing consent: User has not yet consented
2019-03-26 02:32:59.017 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:32:59.049 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:32:59.052 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:32:59.061 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:32:59.077 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:32:59.085 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:32:59.100 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:32:59.103 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:32:59.128 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:32:59.131 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:32:59.141 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:32:59.158 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:33:18.533 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-03-26 02:33:18.578 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:33:18.607 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:33:18.610 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:33:18.619 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:33:18.635 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:33:18.644 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:33:18.659 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:33:18.662 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:33:18.678 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-03-26 02:33:18.682 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-03-26 02:33:18.688 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-03-26 02:33:18.697 -03:00 [DBG] Start authorize callback request
2019-03-26 02:33:18.703 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:33:18.708 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:33:18.734 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:33:18.737 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:33:18.748 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:33:18.766 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:33:18.776 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:33:18.792 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:33:18.795 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:33:18.799 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr","UiLocales":null,"Nonce":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:33:18.826 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:33:18.830 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2019-03-26 02:33:18.847 -03:00 [INF] User consented to scopes: ["openid","profile","email","jp_api.is4"]
2019-03-26 02:33:18.851 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","jp_api.is4"]
2019-03-26 02:33:18.859 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:33:18.899 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database
2019-03-26 02:33:19.108 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:33:19.118 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 02:33:19.120 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:33:19.149 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:33:19.152 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 02:33:19.157 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****F83A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8fbg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHLD2PEEO0:00000004","TimeStamp":"2019-03-26T05:33:19.0000000Z","ProcessId":37736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:33:19.166 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"IoofRIPU6KxNHgde2nEupUdlsQfhbtM8s6ZKlQEr","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:33:20.793 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:33:20.800 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:33:20.803 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:33:20.805 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:33:20.808 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:33:20.811 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:33:20.814 -03:00 [DBG] Start discovery request
2019-03-26 02:33:20.842 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:33:20.883 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:33:20.894 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:33:20.897 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:33:20.901 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:33:20.904 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:33:20.907 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:33:20.913 -03:00 [DBG] Start key discovery request
2019-03-26 02:33:22.063 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:33:22.070 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:33:22.073 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:33:22.136 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:33:22.143 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:33:22.148 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:33:22.153 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:33:22.159 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:33:22.162 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:33:22.172 -03:00 [DBG] Start userinfo request
2019-03-26 02:33:22.178 -03:00 [DBG] Bearer token found in header
2019-03-26 02:33:22.231 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:33:22.234 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:33:22.279 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:33:22.282 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:33:22.297 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:33:22.302 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553578399,"exp":1553581999,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:33:22.321 -03:00 [DBG] Creating userinfo response
2019-03-26 02:33:22.328 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:33:22.335 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:33:22.348 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:33:22.352 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:33:22.356 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:33:22.364 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:33:22.386 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:33:22.389 -03:00 [DBG] End userinfo request
2019-03-26 02:37:04.529 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:37:04.539 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:37:04.542 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:37:04.546 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:37:04.558 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:37:04.566 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:37:04.578 -03:00 [DBG] Start discovery request
2019-03-26 02:37:04.621 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:37:05.108 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:37:05.115 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:37:05.118 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:37:05.121 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:37:05.124 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:37:05.127 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:37:05.131 -03:00 [DBG] Start key discovery request
2019-03-26 02:37:05.207 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:37:05.217 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:37:05.221 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:37:05.284 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:37:05.326 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:37:05.347 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:37:05.361 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:37:05.373 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:37:05.399 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:37:05.419 -03:00 [DBG] Start userinfo request
2019-03-26 02:37:05.424 -03:00 [DBG] Bearer token found in header
2019-03-26 02:37:05.471 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:37:05.477 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:37:05.520 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:37:05.523 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:37:05.541 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:37:05.548 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553578399,"exp":1553581999,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:37:05.592 -03:00 [DBG] Creating userinfo response
2019-03-26 02:37:05.598 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:37:05.611 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:37:05.628 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:37:05.640 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:37:05.651 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:37:05.669 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:37:05.701 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:37:05.705 -03:00 [DBG] End userinfo request
2019-03-26 02:43:30.330 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:43:30.350 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:30.370 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:30.379 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:43:30.392 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:43:30.400 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:43:30.408 -03:00 [DBG] Start discovery request
2019-03-26 02:43:30.435 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:43:31.148 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:43:31.156 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:31.159 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:31.162 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:43:31.167 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:43:31.170 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:43:31.174 -03:00 [DBG] Start key discovery request
2019-03-26 02:43:33.768 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:43:33.781 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:33.787 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:33.793 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:43:33.796 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:43:33.803 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:43:33.808 -03:00 [DBG] Start discovery request
2019-03-26 02:43:33.835 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:43:33.861 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:43:33.879 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:33.885 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:33.893 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:43:33.898 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:43:33.902 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:43:33.915 -03:00 [DBG] Start key discovery request
2019-03-26 02:43:33.967 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:43:33.972 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:43:33.976 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:43:33.984 -03:00 [DBG] Start authorize request
2019-03-26 02:43:33.988 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:43:34.004 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:43:34.042 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:43:34.045 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:43:34.058 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:43:34.081 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:43:34.091 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:43:34.109 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:43:34.114 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:43:34.117 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"gvC8B1gByFHB31PloYcQLe1FQsZEIFwPNCpMkIgJ","UiLocales":null,"Nonce":"gvC8B1gByFHB31PloYcQLe1FQsZEIFwPNCpMkIgJ","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"gvC8B1gByFHB31PloYcQLe1FQsZEIFwPNCpMkIgJ","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"gvC8B1gByFHB31PloYcQLe1FQsZEIFwPNCpMkIgJ"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:43:34.136 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:43:34.139 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:43:34.142 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:43:34.145 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 02:43:34.149 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:43:34.169 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:43:34.173 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 02:43:34.180 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ct5w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****LA9Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHLD2PEEO4:00000001","TimeStamp":"2019-03-26T05:43:34.0000000Z","ProcessId":37736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:43:34.191 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"gvC8B1gByFHB31PloYcQLe1FQsZEIFwPNCpMkIgJ","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:43:35.474 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:43:35.481 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:35.485 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:35.488 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:43:35.492 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:43:35.495 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:43:35.498 -03:00 [DBG] Start discovery request
2019-03-26 02:43:35.518 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:43:35.547 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:43:35.557 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:35.591 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:35.605 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:43:35.611 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:43:35.616 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:43:35.620 -03:00 [DBG] Start key discovery request
2019-03-26 02:43:37.050 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:43:37.058 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:37.061 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:37.108 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:43:37.117 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:37.122 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:37.125 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:43:37.131 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:43:37.135 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:43:37.139 -03:00 [DBG] Start userinfo request
2019-03-26 02:43:37.145 -03:00 [DBG] Bearer token found in header
2019-03-26 02:43:37.185 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:43:37.188 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:43:37.218 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:43:37.220 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:43:37.228 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:43:37.232 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553579014,"exp":1553582614,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:43:37.239 -03:00 [DBG] Creating userinfo response
2019-03-26 02:43:37.241 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:43:37.244 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:43:37.254 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:43:37.258 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:43:37.265 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:43:37.277 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:43:37.308 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:43:37.312 -03:00 [DBG] End userinfo request
2019-03-26 02:43:48.805 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:43:48.814 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:48.817 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:48.821 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:43:48.825 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:43:48.829 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:43:48.834 -03:00 [DBG] Start discovery request
2019-03-26 02:43:48.868 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:43:48.915 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:43:48.938 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:48.942 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:48.945 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:43:48.949 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:43:48.953 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:43:48.956 -03:00 [DBG] Start key discovery request
2019-03-26 02:43:49.922 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:43:49.929 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:49.932 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:49.979 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:43:49.990 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:43:49.994 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:43:49.998 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:43:50.005 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:43:50.012 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:43:50.017 -03:00 [DBG] Start userinfo request
2019-03-26 02:43:50.020 -03:00 [DBG] Bearer token found in header
2019-03-26 02:43:50.063 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:43:50.065 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:43:50.115 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:43:50.120 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:43:50.170 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:43:50.176 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553579014,"exp":1553582614,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:43:50.186 -03:00 [DBG] Creating userinfo response
2019-03-26 02:43:50.188 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:43:50.192 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:43:50.200 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:43:50.204 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:43:50.208 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:43:50.216 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:43:50.235 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:43:50.240 -03:00 [DBG] End userinfo request
2019-03-26 02:53:09.117 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:53:09.131 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:09.136 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:09.144 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:53:09.151 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:53:09.155 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:53:09.159 -03:00 [DBG] Start discovery request
2019-03-26 02:53:09.197 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:53:09.241 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:53:09.268 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:09.284 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:09.290 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:53:09.319 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:53:09.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:53:09.330 -03:00 [DBG] Start key discovery request
2019-03-26 02:53:14.285 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:53:14.294 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:14.298 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:14.303 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:53:14.306 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:53:14.312 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:53:14.316 -03:00 [DBG] Start discovery request
2019-03-26 02:53:14.355 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:53:14.371 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:53:14.381 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:14.387 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:14.391 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:53:14.396 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:53:14.401 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:53:14.406 -03:00 [DBG] Start key discovery request
2019-03-26 02:53:14.489 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 02:53:14.500 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 02:53:14.511 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 02:53:14.518 -03:00 [DBG] Start authorize request
2019-03-26 02:53:14.522 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:53:14.527 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 02:53:14.566 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:53:14.570 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:53:14.584 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:53:14.605 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:53:14.619 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:53:14.642 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 02:53:14.647 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 02:53:14.650 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"xhiITBJGlnu5uJK9TtGsrU0DQAxXabr7nayunYvb","UiLocales":null,"Nonce":"xhiITBJGlnu5uJK9TtGsrU0DQAxXabr7nayunYvb","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"xhiITBJGlnu5uJK9TtGsrU0DQAxXabr7nayunYvb","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"xhiITBJGlnu5uJK9TtGsrU0DQAxXabr7nayunYvb"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 02:53:14.674 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 02:53:14.683 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 02:53:14.686 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 02:53:14.692 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 02:53:14.695 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 02:53:14.724 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 02:53:14.728 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 02:53:14.735 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****F3AA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****iPww","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHLD2PEEO7:00000001","TimeStamp":"2019-03-26T05:53:14.0000000Z","ProcessId":37736,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 02:53:14.743 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"xhiITBJGlnu5uJK9TtGsrU0DQAxXabr7nayunYvb","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 02:53:15.971 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:53:15.979 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:15.982 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:15.985 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:53:15.990 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:53:15.993 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:53:15.997 -03:00 [DBG] Start discovery request
2019-03-26 02:53:16.023 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:53:16.043 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:53:16.057 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:16.062 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:16.065 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:53:16.069 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:53:16.074 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:53:16.078 -03:00 [DBG] Start key discovery request
2019-03-26 02:53:17.239 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:53:17.245 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:17.248 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:17.328 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:53:17.339 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:53:17.375 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:53:17.383 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:53:17.387 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:53:17.394 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:53:17.400 -03:00 [DBG] Start userinfo request
2019-03-26 02:53:17.404 -03:00 [DBG] Bearer token found in header
2019-03-26 02:53:17.444 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:53:17.446 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:53:17.472 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:53:17.474 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:53:17.482 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:53:17.485 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553579594,"exp":1553583194,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:53:17.493 -03:00 [DBG] Creating userinfo response
2019-03-26 02:53:17.495 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:53:17.497 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:53:17.506 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:53:17.509 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:53:17.512 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:53:17.518 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:53:17.537 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:53:17.540 -03:00 [DBG] End userinfo request
2019-03-26 02:54:13.036 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:54:13.049 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:54:13.053 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:54:13.056 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:54:13.061 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:54:13.064 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:54:13.075 -03:00 [DBG] Start discovery request
2019-03-26 02:54:13.109 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:54:13.179 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:54:13.187 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:54:13.190 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:54:13.194 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:54:13.197 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:54:13.201 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:54:13.209 -03:00 [DBG] Start key discovery request
2019-03-26 02:54:13.314 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:54:13.321 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:54:13.325 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:54:13.398 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:54:13.407 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:54:13.411 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:54:13.416 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:54:13.419 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:54:13.426 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:54:13.434 -03:00 [DBG] Start userinfo request
2019-03-26 02:54:13.437 -03:00 [DBG] Bearer token found in header
2019-03-26 02:54:13.482 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:54:13.485 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:54:13.516 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:54:13.519 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:54:13.532 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:54:13.535 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553579594,"exp":1553583194,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:54:13.542 -03:00 [DBG] Creating userinfo response
2019-03-26 02:54:13.544 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:54:13.547 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:54:13.558 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:54:13.562 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:54:13.566 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:54:13.578 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:54:13.602 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:54:13.606 -03:00 [DBG] End userinfo request
2019-03-26 02:55:10.838 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:55:10.845 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:55:10.848 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:55:10.851 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:55:10.855 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:55:10.859 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:55:10.868 -03:00 [DBG] Start discovery request
2019-03-26 02:55:10.900 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:55:10.916 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:55:10.924 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:55:10.928 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:55:10.933 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:55:10.942 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:55:10.947 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:55:10.952 -03:00 [DBG] Start key discovery request
2019-03-26 02:55:11.719 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:55:11.726 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:55:11.729 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:55:11.786 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 02:55:11.800 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:55:11.804 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:55:11.807 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 02:55:11.811 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 02:55:11.816 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 02:55:11.820 -03:00 [DBG] Start userinfo request
2019-03-26 02:55:11.823 -03:00 [DBG] Bearer token found in header
2019-03-26 02:55:11.863 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:55:11.867 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:55:11.936 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 02:55:11.942 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 02:55:11.980 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 02:55:11.985 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553579594,"exp":1553583194,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 02:55:11.999 -03:00 [DBG] Creating userinfo response
2019-03-26 02:55:12.004 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:55:12.007 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:55:12.018 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:55:12.023 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 02:55:12.026 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 02:55:12.037 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 02:55:12.065 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 02:55:12.069 -03:00 [DBG] End userinfo request
2019-03-26 02:58:57.100 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 02:58:57.121 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:58:57.124 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:58:57.128 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 02:58:57.131 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 02:58:57.135 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 02:58:57.139 -03:00 [DBG] Start discovery request
2019-03-26 02:58:57.164 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 02:58:57.212 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 02:58:57.221 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 02:58:57.225 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 02:58:57.231 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 02:58:57.240 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 02:58:57.246 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 02:58:57.252 -03:00 [DBG] Start key discovery request
2019-03-26 03:03:32.840 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-26 03:03:33.027 -03:00 [INF] SigninCredentialExtension added
2019-03-26 03:03:36.715 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-26 03:03:36.756 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-26 03:03:36.759 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-26 03:03:36.766 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-26 03:03:36.769 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-26 03:03:36.771 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-26 03:03:36.773 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-26 03:03:42.614 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:03:42.765 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:03:42.770 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:03:42.792 -03:00 [DBG] Login Url: /Account/Login
2019-03-26 03:03:42.795 -03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-03-26 03:03:42.797 -03:00 [DBG] Logout Url: /Account/Logout
2019-03-26 03:03:42.799 -03:00 [DBG] ConsentUrl Url: /consent
2019-03-26 03:03:42.801 -03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-03-26 03:03:42.803 -03:00 [DBG] Error Url: /home/error
2019-03-26 03:03:42.805 -03:00 [DBG] Error Id Parameter: errorId
2019-03-26 03:03:42.823 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:03:42.831 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:03:42.835 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:03:42.842 -03:00 [DBG] Start discovery request
2019-03-26 03:03:43.246 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:03:43.331 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:03:43.343 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:03:43.346 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:03:43.350 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:03:43.359 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:03:43.362 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:03:43.368 -03:00 [DBG] Start key discovery request
2019-03-26 03:03:43.611 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 03:03:43.617 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 03:03:43.620 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 03:03:43.626 -03:00 [DBG] Start authorize request
2019-03-26 03:03:43.636 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 03:03:43.642 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 03:03:43.851 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:03:43.858 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:03:43.907 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:03:43.960 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 03:03:43.979 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:03:43.994 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 03:03:44.006 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 03:03:44.020 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"cha51sDfXPuSUg9j8h71mVR8oDLqPkOjaidOqSH0","UiLocales":null,"Nonce":"cha51sDfXPuSUg9j8h71mVR8oDLqPkOjaidOqSH0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"cha51sDfXPuSUg9j8h71mVR8oDLqPkOjaidOqSH0","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"cha51sDfXPuSUg9j8h71mVR8oDLqPkOjaidOqSH0"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 03:03:44.095 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 03:03:44.105 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 03:03:44.113 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 03:03:44.123 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 03:03:44.126 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 03:03:44.195 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 03:03:44.198 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 03:03:44.213 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****pKBg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****sLDA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHM369E53A:00000001","TimeStamp":"2019-03-26T06:03:44.0000000Z","ProcessId":7160,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 03:03:44.223 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"cha51sDfXPuSUg9j8h71mVR8oDLqPkOjaidOqSH0","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 03:03:45.477 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:03:45.486 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:03:45.491 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:03:45.496 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:03:45.500 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:03:45.505 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:03:45.513 -03:00 [DBG] Start discovery request
2019-03-26 03:03:45.541 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:03:45.558 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:03:45.569 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:03:45.573 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:03:45.575 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:03:45.581 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:03:45.589 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:03:45.593 -03:00 [DBG] Start key discovery request
2019-03-26 03:03:46.799 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:03:46.806 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:03:46.809 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:03:46.863 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:03:46.874 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:03:46.880 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:03:46.883 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:03:46.888 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:03:46.892 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:03:46.905 -03:00 [DBG] Start userinfo request
2019-03-26 03:03:46.913 -03:00 [DBG] Bearer token found in header
2019-03-26 03:03:46.986 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:03:46.989 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:03:47.019 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:03:47.022 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:03:47.033 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:03:47.038 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553580224,"exp":1553583824,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:03:47.054 -03:00 [DBG] Creating userinfo response
2019-03-26 03:03:47.058 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:03:47.062 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:03:47.072 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:03:47.075 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:03:47.078 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:03:47.087 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:03:47.107 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:03:47.111 -03:00 [DBG] End userinfo request
2019-03-26 03:03:52.898 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:03:52.901 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:03:52.904 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:03:52.908 -03:00 [DBG] Start discovery request
2019-03-26 03:03:52.928 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:03:53.003 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:03:53.006 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:03:53.009 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:03:53.012 -03:00 [DBG] Start key discovery request
2019-03-26 03:04:23.509 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:04:23.516 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:04:23.519 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:04:23.522 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:04:23.527 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:04:23.530 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:04:23.535 -03:00 [DBG] Start discovery request
2019-03-26 03:04:23.560 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:04:23.591 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:04:23.620 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:04:23.624 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:04:23.628 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:04:23.634 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:04:23.640 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:04:23.646 -03:00 [DBG] Start key discovery request
2019-03-26 03:04:28.975 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:04:28.985 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:04:28.989 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:04:28.996 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:04:29.002 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:04:29.017 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:04:29.023 -03:00 [DBG] Start discovery request
2019-03-26 03:04:29.059 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:04:29.136 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:04:29.153 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:04:29.169 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:04:29.175 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:04:29.181 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:04:29.187 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:04:29.193 -03:00 [DBG] Start key discovery request
2019-03-26 03:04:30.200 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:04:30.207 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:04:30.211 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:04:30.368 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:04:30.389 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:04:30.397 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:04:30.413 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:04:30.422 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:04:30.428 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:04:30.434 -03:00 [DBG] Start userinfo request
2019-03-26 03:04:30.447 -03:00 [DBG] Bearer token found in header
2019-03-26 03:04:30.493 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:04:30.498 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:04:30.557 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:04:30.562 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:04:30.598 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:04:30.609 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553580224,"exp":1553583824,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:04:30.641 -03:00 [DBG] Creating userinfo response
2019-03-26 03:04:30.646 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:04:30.651 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:04:30.663 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:04:30.666 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:04:30.670 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:04:30.681 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:04:30.708 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:04:30.712 -03:00 [DBG] End userinfo request
2019-03-26 03:05:11.816 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:05:11.823 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:05:11.827 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:05:11.830 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:05:11.833 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:05:11.838 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:05:11.841 -03:00 [DBG] Start discovery request
2019-03-26 03:05:11.866 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:05:11.969 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:05:11.984 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:05:11.990 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:05:11.998 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:05:12.003 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:05:12.013 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:05:12.017 -03:00 [DBG] Start key discovery request
2019-03-26 03:05:12.104 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:05:12.112 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:05:12.115 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:05:12.179 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:05:12.192 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:05:12.221 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:05:12.228 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:05:12.234 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:05:12.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:05:12.250 -03:00 [DBG] Start userinfo request
2019-03-26 03:05:12.255 -03:00 [DBG] Bearer token found in header
2019-03-26 03:05:12.303 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:05:12.310 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:05:12.368 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:05:12.372 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:05:12.387 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:05:12.393 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553580224,"exp":1553583824,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:05:12.410 -03:00 [DBG] Creating userinfo response
2019-03-26 03:05:12.415 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:05:12.420 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:05:12.433 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:05:12.436 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:05:12.443 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:05:12.455 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:05:12.480 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:05:12.484 -03:00 [DBG] End userinfo request
2019-03-26 03:06:17.217 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:06:17.230 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:06:17.238 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:06:17.252 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:06:17.300 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:06:17.305 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:06:17.311 -03:00 [DBG] Start discovery request
2019-03-26 03:06:17.334 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:06:17.349 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:06:17.364 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:06:17.370 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:06:17.375 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:06:17.381 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:06:17.387 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:06:17.397 -03:00 [DBG] Start key discovery request
2019-03-26 03:06:17.964 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:06:17.973 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:06:17.976 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:06:18.062 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:06:18.073 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:06:18.077 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:06:18.080 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:06:18.085 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:06:18.091 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:06:18.095 -03:00 [DBG] Start userinfo request
2019-03-26 03:06:18.097 -03:00 [DBG] Bearer token found in header
2019-03-26 03:06:18.135 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:06:18.138 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:06:18.170 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:06:18.173 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:06:18.181 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:06:18.184 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553580224,"exp":1553583824,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:06:18.194 -03:00 [DBG] Creating userinfo response
2019-03-26 03:06:18.200 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:06:18.204 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:06:18.215 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:06:18.218 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:06:18.222 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:06:18.233 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:06:18.262 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:06:18.266 -03:00 [DBG] End userinfo request
2019-03-26 03:07:12.493 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:07:12.506 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:12.512 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:12.518 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:07:12.525 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:07:12.529 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:07:12.533 -03:00 [DBG] Start discovery request
2019-03-26 03:07:12.569 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:07:12.610 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:07:12.631 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:12.636 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:12.640 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:07:12.649 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:07:12.659 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:07:12.667 -03:00 [DBG] Start key discovery request
2019-03-26 03:07:13.719 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:07:13.736 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:13.740 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:13.816 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:07:13.836 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:13.840 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:13.844 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:07:13.850 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:07:13.856 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:07:13.864 -03:00 [DBG] Start userinfo request
2019-03-26 03:07:13.873 -03:00 [DBG] Bearer token found in header
2019-03-26 03:07:13.936 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:07:13.942 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:07:13.996 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:07:14.005 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:07:14.017 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:07:14.022 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553580224,"exp":1553583824,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:07:14.032 -03:00 [DBG] Creating userinfo response
2019-03-26 03:07:14.046 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:07:14.051 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:07:14.068 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:07:14.085 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:07:14.091 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:07:14.103 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:07:14.130 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:07:14.136 -03:00 [DBG] End userinfo request
2019-03-26 03:07:30.798 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:07:30.806 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:30.809 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:30.812 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:07:30.816 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:07:30.820 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:07:30.824 -03:00 [DBG] Start discovery request
2019-03-26 03:07:30.846 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:07:30.923 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:07:30.930 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:30.933 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:30.937 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:07:30.941 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:07:30.977 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:07:30.989 -03:00 [DBG] Start key discovery request
2019-03-26 03:07:31.767 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:07:31.774 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:31.777 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:31.843 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:07:31.854 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:07:31.859 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:07:31.863 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:07:31.877 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:07:31.885 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:07:31.890 -03:00 [DBG] Start userinfo request
2019-03-26 03:07:31.894 -03:00 [DBG] Bearer token found in header
2019-03-26 03:07:31.936 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:07:31.939 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:07:31.999 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:07:32.005 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:07:32.028 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:07:32.035 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553580224,"exp":1553583824,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:07:32.048 -03:00 [DBG] Creating userinfo response
2019-03-26 03:07:32.054 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:07:32.060 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:07:32.071 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:07:32.074 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:07:32.078 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:07:32.090 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:07:32.116 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:07:32.120 -03:00 [DBG] End userinfo request
2019-03-26 03:26:47.862 -03:00 [INF] SigninCredentialExtension keyType is Temporary
2019-03-26 03:26:48.044 -03:00 [INF] SigninCredentialExtension added
2019-03-26 03:26:51.695 -03:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-03-26 03:26:51.740 -03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-03-26 03:26:51.743 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-03-26 03:26:51.746 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-03-26 03:26:51.748 -03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-03-26 03:26:51.750 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-03-26 03:26:51.753 -03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-03-26 03:54:11.204 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:54:11.427 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:11.436 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:11.485 -03:00 [DBG] Login Url: /Account/Login
2019-03-26 03:54:11.488 -03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-03-26 03:54:11.490 -03:00 [DBG] Logout Url: /Account/Logout
2019-03-26 03:54:11.493 -03:00 [DBG] ConsentUrl Url: /consent
2019-03-26 03:54:11.496 -03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-03-26 03:54:11.499 -03:00 [DBG] Error Url: /home/error
2019-03-26 03:54:11.501 -03:00 [DBG] Error Id Parameter: errorId
2019-03-26 03:54:11.525 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:54:11.543 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:54:11.551 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:54:11.560 -03:00 [DBG] Start discovery request
2019-03-26 03:54:12.041 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:54:12.592 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:54:12.609 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:12.615 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:12.620 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:54:12.635 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:54:12.639 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:54:12.649 -03:00 [DBG] Start key discovery request
2019-03-26 03:54:52.307 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:54:52.317 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:52.321 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:52.326 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:54:52.331 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:54:52.334 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:54:52.339 -03:00 [DBG] Start discovery request
2019-03-26 03:54:52.365 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:54:52.420 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:54:52.427 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:52.430 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:52.433 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:54:52.437 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:54:52.441 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:54:52.446 -03:00 [DBG] Start key discovery request
2019-03-26 03:54:52.721 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 03:54:52.728 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 03:54:52.731 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 03:54:52.737 -03:00 [DBG] Start authorize request
2019-03-26 03:54:52.760 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 03:54:52.769 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 03:54:52.985 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:54:52.994 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:54:53.041 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:54:53.099 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 03:54:53.114 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:54:53.132 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 03:54:53.146 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 03:54:53.175 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"msQFyPHq40Qoj3aEWT3CBixtTUVUySzw6DUa4GqL","UiLocales":null,"Nonce":"msQFyPHq40Qoj3aEWT3CBixtTUVUySzw6DUa4GqL","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"msQFyPHq40Qoj3aEWT3CBixtTUVUySzw6DUa4GqL","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"msQFyPHq40Qoj3aEWT3CBixtTUVUySzw6DUa4GqL"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 03:54:53.252 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 03:54:53.294 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 03:54:53.311 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 03:54:53.332 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 03:54:53.337 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 03:54:53.458 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 03:54:53.463 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 03:54:53.482 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****NQaw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****aN9Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSC9S:00000001","TimeStamp":"2019-03-26T06:54:53.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 03:54:53.493 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"msQFyPHq40Qoj3aEWT3CBixtTUVUySzw6DUa4GqL","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 03:54:55.072 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:54:55.079 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:55.083 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:55.087 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:54:55.090 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:54:55.093 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:54:55.096 -03:00 [DBG] Start discovery request
2019-03-26 03:54:55.118 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:54:55.235 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:54:55.246 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:55.255 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:55.263 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:54:55.275 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:54:55.285 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:54:55.289 -03:00 [DBG] Start key discovery request
2019-03-26 03:54:57.433 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:54:57.440 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:57.444 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:57.484 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:54:57.490 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:54:57.500 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:54:57.505 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:54:57.510 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:54:57.513 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:54:57.526 -03:00 [DBG] Start userinfo request
2019-03-26 03:54:57.531 -03:00 [DBG] Bearer token found in header
2019-03-26 03:54:57.577 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:54:57.580 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:54:57.609 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:54:57.611 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:54:57.622 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:54:57.627 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:54:57.643 -03:00 [DBG] Creating userinfo response
2019-03-26 03:54:57.648 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:54:57.654 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:54:57.667 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:54:57.679 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:54:57.683 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:54:57.693 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:54:57.718 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:54:57.721 -03:00 [DBG] End userinfo request
2019-03-26 03:55:40.228 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:55:40.236 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:40.238 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:40.241 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:55:40.246 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:55:40.254 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:55:40.273 -03:00 [DBG] Start discovery request
2019-03-26 03:55:40.345 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:55:41.111 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:55:41.119 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:41.123 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:41.126 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:55:41.130 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:55:41.133 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:55:41.136 -03:00 [DBG] Start key discovery request
2019-03-26 03:55:41.207 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:55:41.213 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:41.216 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:41.355 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:55:41.362 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:41.365 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:41.368 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:55:41.371 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:55:41.374 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:55:41.378 -03:00 [DBG] Start userinfo request
2019-03-26 03:55:41.381 -03:00 [DBG] Bearer token found in header
2019-03-26 03:55:41.418 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:55:41.420 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:55:41.447 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:55:41.449 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:55:41.463 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:55:41.466 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:55:41.475 -03:00 [DBG] Creating userinfo response
2019-03-26 03:55:41.477 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:55:41.481 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:55:41.489 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:55:41.492 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:55:41.495 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:55:41.503 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:55:41.527 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:55:41.531 -03:00 [DBG] End userinfo request
2019-03-26 03:55:45.983 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:55:45.994 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:46.000 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:46.004 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:55:46.008 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:55:46.011 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:55:46.015 -03:00 [DBG] Start discovery request
2019-03-26 03:55:46.043 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:55:46.067 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:55:46.079 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:46.087 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:46.093 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:55:46.098 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:55:46.104 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:55:46.107 -03:00 [DBG] Start key discovery request
2019-03-26 03:55:47.041 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:55:47.047 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:47.051 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:47.104 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:55:47.113 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:55:47.116 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:55:47.120 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:55:47.123 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:55:47.126 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:55:47.132 -03:00 [DBG] Start userinfo request
2019-03-26 03:55:47.135 -03:00 [DBG] Bearer token found in header
2019-03-26 03:55:47.174 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:55:47.177 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:55:47.219 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:55:47.222 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:55:47.231 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:55:47.234 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:55:47.244 -03:00 [DBG] Creating userinfo response
2019-03-26 03:55:47.246 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:55:47.248 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:55:47.261 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:55:47.264 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:55:47.270 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:55:47.281 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:55:47.313 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:55:47.319 -03:00 [DBG] End userinfo request
2019-03-26 03:56:11.847 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:56:11.855 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:56:11.859 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:56:11.863 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:56:11.867 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:56:11.871 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:56:11.874 -03:00 [DBG] Start discovery request
2019-03-26 03:56:11.898 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:56:11.916 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:56:11.925 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:56:11.929 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:56:11.933 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:56:11.940 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:56:11.944 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:56:11.954 -03:00 [DBG] Start key discovery request
2019-03-26 03:56:12.790 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:56:12.797 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:56:12.802 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:56:12.873 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:56:12.883 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:56:12.887 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:56:12.892 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:56:12.900 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:56:12.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:56:12.909 -03:00 [DBG] Start userinfo request
2019-03-26 03:56:12.913 -03:00 [DBG] Bearer token found in header
2019-03-26 03:56:12.959 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:56:12.967 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:56:13.003 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:56:13.006 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:56:13.014 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:56:13.018 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:56:13.027 -03:00 [DBG] Creating userinfo response
2019-03-26 03:56:13.031 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:56:13.034 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:56:13.045 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:56:13.048 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:56:13.052 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:56:13.060 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:56:13.085 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:56:13.089 -03:00 [DBG] End userinfo request
2019-03-26 03:57:17.991 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:57:17.998 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:18.001 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:18.004 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:57:18.007 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:57:18.010 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:57:18.013 -03:00 [DBG] Start discovery request
2019-03-26 03:57:18.031 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:57:18.086 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:57:18.093 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:18.106 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:18.110 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:57:18.118 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:57:18.132 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:57:18.135 -03:00 [DBG] Start key discovery request
2019-03-26 03:57:18.919 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:57:18.925 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:18.929 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:18.999 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:57:19.012 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:19.015 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:19.018 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:57:19.021 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:57:19.025 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:57:19.030 -03:00 [DBG] Start userinfo request
2019-03-26 03:57:19.033 -03:00 [DBG] Bearer token found in header
2019-03-26 03:57:19.072 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:57:19.075 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:57:19.123 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:57:19.129 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:57:19.145 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:57:19.148 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:57:19.155 -03:00 [DBG] Creating userinfo response
2019-03-26 03:57:19.159 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:19.162 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:19.176 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:57:19.180 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:57:19.185 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:19.198 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:57:19.230 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:57:19.234 -03:00 [DBG] End userinfo request
2019-03-26 03:57:37.575 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:57:37.582 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:37.585 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:37.589 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:57:37.593 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:57:37.597 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:57:37.604 -03:00 [DBG] Start discovery request
2019-03-26 03:57:37.627 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:57:37.658 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:57:37.674 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:37.679 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:37.687 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:57:37.690 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:57:37.695 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:57:37.699 -03:00 [DBG] Start key discovery request
2019-03-26 03:57:38.540 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:57:38.546 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:38.548 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:38.606 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:57:38.613 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:38.616 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:38.619 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:57:38.622 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:57:38.626 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:57:38.629 -03:00 [DBG] Start userinfo request
2019-03-26 03:57:38.632 -03:00 [DBG] Bearer token found in header
2019-03-26 03:57:38.670 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:57:38.673 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:57:38.712 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:57:38.715 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:57:38.724 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:57:38.728 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:57:38.735 -03:00 [DBG] Creating userinfo response
2019-03-26 03:57:38.737 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:38.740 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:38.748 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:57:38.751 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:57:38.754 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:38.763 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:57:38.786 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:57:38.790 -03:00 [DBG] End userinfo request
2019-03-26 03:57:53.978 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:57:53.986 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:53.989 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:53.992 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:57:53.996 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:57:54.000 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:57:54.004 -03:00 [DBG] Start discovery request
2019-03-26 03:57:54.036 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:57:54.060 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:57:54.071 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:54.080 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:54.091 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:57:54.105 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:57:54.111 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:57:54.114 -03:00 [DBG] Start key discovery request
2019-03-26 03:57:54.909 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:57:54.915 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:54.918 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:54.969 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:57:54.978 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:57:54.981 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:57:54.983 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:57:54.986 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:57:54.989 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:57:54.992 -03:00 [DBG] Start userinfo request
2019-03-26 03:57:54.996 -03:00 [DBG] Bearer token found in header
2019-03-26 03:57:55.037 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:57:55.039 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:57:55.072 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:57:55.074 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:57:55.086 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:57:55.090 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:57:55.098 -03:00 [DBG] Creating userinfo response
2019-03-26 03:57:55.102 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:55.105 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:55.114 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:57:55.116 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:57:55.120 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:57:55.129 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:57:55.157 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:57:55.161 -03:00 [DBG] End userinfo request
2019-03-26 03:58:18.758 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 03:58:18.765 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:58:18.768 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:58:18.771 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:58:18.781 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:58:18.786 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:58:18.790 -03:00 [DBG] Start discovery request
2019-03-26 03:58:18.827 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:58:18.856 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 03:58:18.890 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:58:18.893 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:58:18.902 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:58:18.907 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:58:18.912 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:58:18.917 -03:00 [DBG] Start key discovery request
2019-03-26 03:58:19.759 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:58:19.765 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:58:19.768 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:58:19.823 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 03:58:19.835 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 03:58:19.838 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 03:58:19.841 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 03:58:19.844 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 03:58:19.849 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 03:58:19.852 -03:00 [DBG] Start userinfo request
2019-03-26 03:58:19.855 -03:00 [DBG] Bearer token found in header
2019-03-26 03:58:19.890 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:58:19.892 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:58:19.932 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 03:58:19.935 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 03:58:19.942 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 03:58:19.945 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583293,"exp":1553586893,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 03:58:19.951 -03:00 [DBG] Creating userinfo response
2019-03-26 03:58:19.955 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:58:19.958 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:58:19.966 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:58:19.970 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 03:58:19.973 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 03:58:19.981 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 03:58:20.003 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 03:58:20.006 -03:00 [DBG] End userinfo request
2019-03-26 03:58:52.722 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 03:58:52.727 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 03:58:52.730 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 03:58:52.733 -03:00 [DBG] Start discovery request
2019-03-26 03:58:52.753 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 03:58:52.833 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 03:58:52.836 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 03:58:52.839 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 03:58:52.841 -03:00 [DBG] Start key discovery request
2019-03-26 04:02:55.479 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:02:55.492 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:02:55.495 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:02:55.498 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:02:55.503 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:02:55.511 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:02:55.514 -03:00 [DBG] Start discovery request
2019-03-26 04:02:55.541 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:02:55.570 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:02:55.587 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:02:55.593 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:02:55.596 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:02:55.605 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:02:55.610 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:02:55.615 -03:00 [DBG] Start key discovery request
2019-03-26 04:03:41.672 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:03:41.680 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:03:41.684 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:03:41.690 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:03:41.703 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:03:41.710 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:03:41.715 -03:00 [DBG] Start discovery request
2019-03-26 04:03:41.746 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:03:41.803 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:03:41.813 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:03:41.822 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:03:41.836 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:03:41.841 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:03:41.845 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:03:41.848 -03:00 [DBG] Start key discovery request
2019-03-26 04:03:41.895 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 04:03:41.902 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 04:03:41.905 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 04:03:41.914 -03:00 [DBG] Start authorize request
2019-03-26 04:03:41.921 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:03:41.929 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 04:03:41.965 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:03:41.967 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:03:41.978 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:03:41.995 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:03:42.004 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:03:42.023 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:03:42.027 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 04:03:42.030 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"NWW9g2iHnsjOiKlhkTPql7MlTMxHNPzXcnvFxgPc","UiLocales":null,"Nonce":"NWW9g2iHnsjOiKlhkTPql7MlTMxHNPzXcnvFxgPc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"NWW9g2iHnsjOiKlhkTPql7MlTMxHNPzXcnvFxgPc","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"NWW9g2iHnsjOiKlhkTPql7MlTMxHNPzXcnvFxgPc"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 04:03:42.056 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 04:03:42.061 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 04:03:42.063 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 04:03:42.065 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 04:03:42.068 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:03:42.094 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 04:03:42.097 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 04:03:42.102 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****fx6A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****k0yw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSC9V:00000001","TimeStamp":"2019-03-26T07:03:42.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 04:03:42.111 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"NWW9g2iHnsjOiKlhkTPql7MlTMxHNPzXcnvFxgPc","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 04:03:43.305 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:03:43.314 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:03:43.319 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:03:43.323 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:03:43.327 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:03:43.331 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:03:43.339 -03:00 [DBG] Start discovery request
2019-03-26 04:03:43.367 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:03:43.382 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:03:43.397 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:03:43.401 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:03:43.404 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:03:43.408 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:03:43.412 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:03:43.416 -03:00 [DBG] Start key discovery request
2019-03-26 04:03:44.589 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:03:44.596 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:03:44.599 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:03:44.649 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:03:44.657 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:03:44.661 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:03:44.664 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:03:44.668 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:03:44.671 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:03:44.675 -03:00 [DBG] Start userinfo request
2019-03-26 04:03:44.679 -03:00 [DBG] Bearer token found in header
2019-03-26 04:03:44.718 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:03:44.722 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:03:44.753 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:03:44.757 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:03:44.767 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:03:44.773 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553583822,"exp":1553587422,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:03:44.780 -03:00 [DBG] Creating userinfo response
2019-03-26 04:03:44.782 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:03:44.785 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:03:44.794 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:03:44.797 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:03:44.800 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:03:44.808 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:03:44.829 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:03:44.833 -03:00 [DBG] End userinfo request
2019-03-26 04:16:05.288 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:16:05.307 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:05.310 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:05.314 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:16:05.319 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:16:05.322 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:16:05.327 -03:00 [DBG] Start discovery request
2019-03-26 04:16:05.352 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:16:05.501 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:16:05.510 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:05.513 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:05.517 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:16:05.522 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:16:05.527 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:16:05.531 -03:00 [DBG] Start key discovery request
2019-03-26 04:16:17.176 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:16:17.184 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:17.187 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:17.194 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:16:17.198 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:16:17.202 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:16:17.205 -03:00 [DBG] Start discovery request
2019-03-26 04:16:17.229 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:16:17.399 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:16:17.406 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:17.409 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:17.412 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:16:17.416 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:16:17.418 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:16:17.422 -03:00 [DBG] Start key discovery request
2019-03-26 04:16:17.451 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 04:16:17.455 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 04:16:17.458 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 04:16:17.461 -03:00 [DBG] Start authorize request
2019-03-26 04:16:17.464 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:16:17.466 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 04:16:17.499 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:16:17.501 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:16:17.510 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:16:17.529 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:16:17.542 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:16:17.562 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:16:17.570 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 04:16:17.574 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"Hl8sMMji97EIfDkY1g4cNhLBNwIdn3OWlWFm8K9u","UiLocales":null,"Nonce":"Hl8sMMji97EIfDkY1g4cNhLBNwIdn3OWlWFm8K9u","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"Hl8sMMji97EIfDkY1g4cNhLBNwIdn3OWlWFm8K9u","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"Hl8sMMji97EIfDkY1g4cNhLBNwIdn3OWlWFm8K9u"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 04:16:17.598 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 04:16:17.603 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 04:16:17.606 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 04:16:17.608 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 04:16:17.611 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:16:17.637 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 04:16:17.640 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 04:16:17.645 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****drnw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1RSw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSCA2:00000001","TimeStamp":"2019-03-26T07:16:17.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 04:16:17.653 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"Hl8sMMji97EIfDkY1g4cNhLBNwIdn3OWlWFm8K9u","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 04:16:19.024 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:16:19.031 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:19.035 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:19.038 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:16:19.042 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:16:19.045 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:16:19.049 -03:00 [DBG] Start discovery request
2019-03-26 04:16:19.070 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:16:19.176 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:16:19.183 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:19.187 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:19.189 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:16:19.193 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:16:19.196 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:16:19.200 -03:00 [DBG] Start key discovery request
2019-03-26 04:16:20.440 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:16:20.448 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:20.451 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:20.528 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:16:20.536 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:16:20.540 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:16:20.543 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:16:20.546 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:16:20.550 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:16:20.553 -03:00 [DBG] Start userinfo request
2019-03-26 04:16:20.557 -03:00 [DBG] Bearer token found in header
2019-03-26 04:16:20.587 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:16:20.590 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:16:20.616 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:16:20.618 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:16:20.627 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:16:20.630 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584577,"exp":1553588177,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:16:20.638 -03:00 [DBG] Creating userinfo response
2019-03-26 04:16:20.641 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:16:20.643 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:16:20.652 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:16:20.656 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:16:20.660 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:16:20.669 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:16:20.688 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:16:20.692 -03:00 [DBG] End userinfo request
2019-03-26 04:17:38.036 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:17:38.047 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:17:38.052 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:17:38.055 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:17:38.059 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:17:38.063 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:17:38.066 -03:00 [DBG] Start discovery request
2019-03-26 04:17:38.089 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:17:38.203 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:17:38.213 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:17:38.216 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:17:38.223 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:17:38.239 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:17:38.246 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:17:38.259 -03:00 [DBG] Start key discovery request
2019-03-26 04:17:38.613 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:17:38.619 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:17:38.622 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:17:38.677 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:17:38.684 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:17:38.686 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:17:38.688 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:17:38.692 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:17:38.695 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:17:38.698 -03:00 [DBG] Start userinfo request
2019-03-26 04:17:38.700 -03:00 [DBG] Bearer token found in header
2019-03-26 04:17:38.728 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:17:38.740 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:17:38.775 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:17:38.777 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:17:38.790 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:17:38.797 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584577,"exp":1553588177,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:17:38.808 -03:00 [DBG] Creating userinfo response
2019-03-26 04:17:38.810 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:17:38.812 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:17:38.822 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:17:38.826 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:17:38.829 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:17:38.838 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:17:38.860 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:17:38.864 -03:00 [DBG] End userinfo request
2019-03-26 04:18:32.143 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:18:32.153 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:32.157 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:32.159 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:18:32.163 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:18:32.166 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:18:32.169 -03:00 [DBG] Start discovery request
2019-03-26 04:18:32.195 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:18:32.354 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:18:32.373 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:32.378 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:32.381 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:18:32.385 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:18:32.389 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:18:32.392 -03:00 [DBG] Start key discovery request
2019-03-26 04:18:32.528 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:18:32.537 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:32.541 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:32.585 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:18:32.593 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:32.597 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:32.599 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:18:32.604 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:18:32.607 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:18:32.611 -03:00 [DBG] Start userinfo request
2019-03-26 04:18:32.614 -03:00 [DBG] Bearer token found in header
2019-03-26 04:18:32.644 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:18:32.646 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:18:32.672 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:18:32.675 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:18:32.686 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:18:32.691 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584577,"exp":1553588177,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:18:32.698 -03:00 [DBG] Creating userinfo response
2019-03-26 04:18:32.700 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:32.703 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:32.712 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:18:32.715 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:18:32.718 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:32.726 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:18:32.754 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:18:32.768 -03:00 [DBG] End userinfo request
2019-03-26 04:18:39.874 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:18:39.883 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:39.887 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:39.895 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:18:39.899 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:18:39.902 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:18:39.907 -03:00 [DBG] Start discovery request
2019-03-26 04:18:39.929 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:18:39.954 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:18:39.962 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:39.965 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:39.968 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:18:39.972 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:18:39.977 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:18:39.980 -03:00 [DBG] Start key discovery request
2019-03-26 04:18:40.113 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:18:40.120 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:40.124 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:40.170 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:18:40.177 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:40.180 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:40.182 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:18:40.185 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:18:40.188 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:18:40.192 -03:00 [DBG] Start userinfo request
2019-03-26 04:18:40.195 -03:00 [DBG] Bearer token found in header
2019-03-26 04:18:40.224 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:18:40.227 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:18:40.253 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:18:40.256 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:18:40.265 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:18:40.270 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584577,"exp":1553588177,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:18:40.286 -03:00 [DBG] Creating userinfo response
2019-03-26 04:18:40.289 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:40.293 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:40.306 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:18:40.334 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:18:40.340 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:40.352 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:18:40.376 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:18:40.380 -03:00 [DBG] End userinfo request
2019-03-26 04:18:43.595 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:18:43.602 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:43.606 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:43.610 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:18:43.613 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:18:43.617 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:18:43.620 -03:00 [DBG] Start discovery request
2019-03-26 04:18:43.641 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:18:43.658 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:18:43.666 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:43.669 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:43.672 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:18:43.677 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:18:43.684 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:18:43.693 -03:00 [DBG] Start key discovery request
2019-03-26 04:18:43.868 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:18:43.874 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:18:43.876 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:18:43.880 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:18:43.882 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:18:43.885 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:18:43.889 -03:00 [DBG] Start userinfo request
2019-03-26 04:18:43.891 -03:00 [DBG] Bearer token found in header
2019-03-26 04:18:43.922 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:18:43.926 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:18:43.960 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:18:43.963 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:18:43.972 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:18:43.975 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584577,"exp":1553588177,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:18:43.987 -03:00 [DBG] Creating userinfo response
2019-03-26 04:18:43.990 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:43.994 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:44.004 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:18:44.008 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:18:44.012 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:18:44.022 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:18:44.043 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:18:44.047 -03:00 [DBG] End userinfo request
2019-03-26 04:19:47.707 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:19:47.715 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:19:47.725 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:19:47.733 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:19:47.736 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:19:47.742 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:19:47.745 -03:00 [DBG] Start discovery request
2019-03-26 04:19:47.767 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:19:47.850 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:19:47.862 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:19:47.867 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:19:47.878 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:19:47.891 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:19:47.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:19:47.908 -03:00 [DBG] Start key discovery request
2019-03-26 04:19:48.040 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:19:48.047 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:19:48.050 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:19:48.104 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:19:48.116 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:19:48.119 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:19:48.124 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:19:48.127 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:19:48.132 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:19:48.135 -03:00 [DBG] Start userinfo request
2019-03-26 04:19:48.137 -03:00 [DBG] Bearer token found in header
2019-03-26 04:19:48.176 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:19:48.179 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:19:48.218 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:19:48.243 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:19:48.266 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:19:48.271 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584577,"exp":1553588177,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:19:48.285 -03:00 [DBG] Creating userinfo response
2019-03-26 04:19:48.291 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:19:48.304 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:19:48.316 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:19:48.320 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:19:48.324 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:19:48.334 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:19:48.359 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:19:48.362 -03:00 [DBG] End userinfo request
2019-03-26 04:21:33.183 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:21:33.204 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:33.210 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:33.216 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:21:33.219 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:21:33.224 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:21:33.230 -03:00 [DBG] Start discovery request
2019-03-26 04:21:33.254 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:21:33.323 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:21:33.331 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:33.336 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:33.364 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:21:33.373 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:21:33.381 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:21:33.395 -03:00 [DBG] Start key discovery request
2019-03-26 04:21:38.058 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:21:38.066 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:38.069 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:38.072 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:21:38.075 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:21:38.079 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:21:38.082 -03:00 [DBG] Start discovery request
2019-03-26 04:21:38.107 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:21:38.163 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:21:38.172 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:38.176 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:38.178 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:21:38.182 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:21:38.186 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:21:38.189 -03:00 [DBG] Start key discovery request
2019-03-26 04:21:38.248 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 04:21:38.255 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 04:21:38.259 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 04:21:38.266 -03:00 [DBG] Start authorize request
2019-03-26 04:21:38.270 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:21:38.275 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 04:21:38.319 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:21:38.322 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:21:38.334 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:21:38.363 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:21:38.375 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:21:38.398 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:21:38.402 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 04:21:38.406 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"9LfJwRQAI0fsRETQBIKQ9PLT3XrK3oaJXXlIA0ow","UiLocales":null,"Nonce":"9LfJwRQAI0fsRETQBIKQ9PLT3XrK3oaJXXlIA0ow","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"9LfJwRQAI0fsRETQBIKQ9PLT3XrK3oaJXXlIA0ow","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"9LfJwRQAI0fsRETQBIKQ9PLT3XrK3oaJXXlIA0ow"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 04:21:38.429 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 04:21:38.433 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 04:21:38.437 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 04:21:38.440 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 04:21:38.443 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:21:38.469 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 04:21:38.473 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 04:21:38.480 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****ICyg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1qKg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSCA4:00000001","TimeStamp":"2019-03-26T07:21:38.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 04:21:38.492 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"9LfJwRQAI0fsRETQBIKQ9PLT3XrK3oaJXXlIA0ow","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 04:21:39.821 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:21:39.828 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:39.832 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:39.835 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:21:39.838 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:21:39.842 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:21:39.845 -03:00 [DBG] Start discovery request
2019-03-26 04:21:39.872 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:21:39.915 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:21:39.923 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:39.927 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:39.931 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:21:39.935 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:21:39.941 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:21:39.950 -03:00 [DBG] Start key discovery request
2019-03-26 04:21:41.117 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:21:41.123 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:41.126 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:41.175 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:21:41.184 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:21:41.189 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:21:41.193 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:21:41.196 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:21:41.200 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:21:41.204 -03:00 [DBG] Start userinfo request
2019-03-26 04:21:41.207 -03:00 [DBG] Bearer token found in header
2019-03-26 04:21:41.253 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:21:41.259 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:21:41.296 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:21:41.300 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:21:41.313 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:21:41.318 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584898,"exp":1553588498,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:21:41.331 -03:00 [DBG] Creating userinfo response
2019-03-26 04:21:41.336 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:21:41.341 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:21:41.352 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:21:41.358 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:21:41.362 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:21:41.373 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:21:41.399 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:21:41.404 -03:00 [DBG] End userinfo request
2019-03-26 04:22:14.484 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:22:14.492 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:22:14.498 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:22:14.504 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:22:14.510 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:22:14.512 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:22:14.516 -03:00 [DBG] Start discovery request
2019-03-26 04:22:14.543 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:22:14.567 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:22:14.593 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:22:14.598 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:22:14.601 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:22:14.611 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:22:14.617 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:22:14.621 -03:00 [DBG] Start key discovery request
2019-03-26 04:24:37.509 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:24:37.517 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:24:37.521 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:24:37.578 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:24:37.588 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:24:37.593 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:24:37.596 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:24:37.602 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:24:37.607 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:24:37.611 -03:00 [DBG] Start userinfo request
2019-03-26 04:24:37.613 -03:00 [DBG] Bearer token found in header
2019-03-26 04:24:37.643 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:24:37.645 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:24:37.673 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:24:37.675 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:24:37.687 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:24:37.691 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584898,"exp":1553588498,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:24:37.698 -03:00 [DBG] Creating userinfo response
2019-03-26 04:24:37.700 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:24:37.704 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:24:37.712 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:24:37.715 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:24:37.718 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:24:37.725 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:24:37.742 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:24:37.745 -03:00 [DBG] End userinfo request
2019-03-26 04:24:39.389 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:24:39.397 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:24:39.401 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:24:39.404 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:24:39.408 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:24:39.411 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:24:39.414 -03:00 [DBG] Start discovery request
2019-03-26 04:24:39.436 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:24:39.486 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:24:39.494 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:24:39.498 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:24:39.501 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:24:39.505 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:24:39.509 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:24:39.512 -03:00 [DBG] Start key discovery request
2019-03-26 04:25:36.780 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:25:36.789 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:25:36.792 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:25:36.927 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:25:36.942 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:25:36.946 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:25:36.949 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:25:36.955 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:25:36.959 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:25:36.964 -03:00 [DBG] Start userinfo request
2019-03-26 04:25:36.967 -03:00 [DBG] Bearer token found in header
2019-03-26 04:25:37.008 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:25:37.011 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:25:37.042 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:25:37.045 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:25:37.057 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:25:37.061 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584898,"exp":1553588498,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:25:37.071 -03:00 [DBG] Creating userinfo response
2019-03-26 04:25:37.074 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:25:37.079 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:25:37.090 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:25:37.093 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:25:37.096 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:25:37.105 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:25:37.128 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:25:37.132 -03:00 [DBG] End userinfo request
2019-03-26 04:25:38.209 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:25:38.218 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:25:38.221 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:25:38.225 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:25:38.229 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:25:38.281 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:25:38.299 -03:00 [DBG] Start discovery request
2019-03-26 04:25:38.332 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:25:38.942 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:25:38.949 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:25:38.952 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:25:38.954 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:25:38.957 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:25:38.960 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:25:38.964 -03:00 [DBG] Start key discovery request
2019-03-26 04:25:39.072 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:25:39.081 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:25:39.087 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:25:39.090 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:25:39.095 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:25:39.100 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:25:39.105 -03:00 [DBG] Start userinfo request
2019-03-26 04:25:39.108 -03:00 [DBG] Bearer token found in header
2019-03-26 04:25:39.148 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:25:39.150 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:25:39.183 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:25:39.186 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:25:39.197 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:25:39.200 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584898,"exp":1553588498,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:25:39.211 -03:00 [DBG] Creating userinfo response
2019-03-26 04:25:39.213 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:25:39.216 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:25:39.226 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:25:39.230 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:25:39.232 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:25:39.243 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:25:39.264 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:25:39.268 -03:00 [DBG] End userinfo request
2019-03-26 04:26:03.283 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:26:03.292 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:03.295 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:03.299 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:26:03.303 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:26:03.309 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:26:03.312 -03:00 [DBG] Start discovery request
2019-03-26 04:26:03.339 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:26:03.393 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:26:03.413 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:03.417 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:03.429 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:26:03.437 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:26:03.444 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:26:03.455 -03:00 [DBG] Start key discovery request
2019-03-26 04:26:09.591 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:26:09.601 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:09.605 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:09.701 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:26:09.720 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:09.726 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:09.734 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:26:09.739 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:26:09.742 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:26:09.746 -03:00 [DBG] Start userinfo request
2019-03-26 04:26:09.749 -03:00 [DBG] Bearer token found in header
2019-03-26 04:26:09.777 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:26:09.781 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:26:09.809 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:26:09.811 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:26:09.819 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:26:09.822 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584898,"exp":1553588498,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:26:09.829 -03:00 [DBG] Creating userinfo response
2019-03-26 04:26:09.831 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:09.834 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:09.843 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:26:09.846 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:26:09.850 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:09.859 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:26:09.882 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:26:09.886 -03:00 [DBG] End userinfo request
2019-03-26 04:26:31.568 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:26:31.578 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:31.584 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:31.587 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:26:31.592 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:26:31.598 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:26:31.606 -03:00 [DBG] Start discovery request
2019-03-26 04:26:31.653 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:26:31.679 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:26:31.692 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:31.700 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:31.703 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:26:31.708 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:26:31.712 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:26:31.716 -03:00 [DBG] Start key discovery request
2019-03-26 04:26:32.363 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:26:32.373 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:32.376 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:32.479 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:26:32.489 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:32.495 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:32.500 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:26:32.507 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:26:32.513 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:26:32.518 -03:00 [DBG] Start userinfo request
2019-03-26 04:26:32.527 -03:00 [DBG] Bearer token found in header
2019-03-26 04:26:32.575 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:26:32.586 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:26:32.625 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:26:32.628 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:26:32.637 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:26:32.640 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584898,"exp":1553588498,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:26:32.650 -03:00 [DBG] Creating userinfo response
2019-03-26 04:26:32.653 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:32.656 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:32.664 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:26:32.668 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:26:32.671 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:32.680 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:26:32.703 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:26:32.708 -03:00 [DBG] End userinfo request
2019-03-26 04:26:33.815 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:26:33.823 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:33.827 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:33.831 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:26:33.835 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:26:33.839 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:26:33.843 -03:00 [DBG] Start discovery request
2019-03-26 04:26:33.870 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:26:33.892 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:26:33.899 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:33.905 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:33.910 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:26:33.915 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:26:33.918 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:26:33.922 -03:00 [DBG] Start key discovery request
2019-03-26 04:26:34.556 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:26:34.573 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:34.577 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:34.581 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:26:34.585 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:26:34.588 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:26:34.591 -03:00 [DBG] Start userinfo request
2019-03-26 04:26:34.594 -03:00 [DBG] Bearer token found in header
2019-03-26 04:26:34.629 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:26:34.632 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:26:34.666 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:26:34.669 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:26:34.679 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:26:34.682 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553584898,"exp":1553588498,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:26:34.696 -03:00 [DBG] Creating userinfo response
2019-03-26 04:26:34.700 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:34.703 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:34.712 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:26:34.716 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:26:34.719 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:26:34.728 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:26:34.752 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:26:34.756 -03:00 [DBG] End userinfo request
2019-03-26 04:26:59.579 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:26:59.589 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:59.593 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:59.598 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:26:59.604 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:26:59.607 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:26:59.610 -03:00 [DBG] Start discovery request
2019-03-26 04:26:59.633 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:26:59.669 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:26:59.679 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:26:59.687 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:26:59.698 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:26:59.713 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:26:59.718 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:26:59.723 -03:00 [DBG] Start key discovery request
2019-03-26 04:27:10.105 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:27:10.113 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:10.116 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:10.120 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:27:10.124 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:27:10.127 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:27:10.130 -03:00 [DBG] Start discovery request
2019-03-26 04:27:10.155 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:27:10.173 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:27:10.183 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:10.187 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:10.191 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:27:10.198 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:27:10.202 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:27:10.209 -03:00 [DBG] Start key discovery request
2019-03-26 04:27:10.327 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 04:27:10.331 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 04:27:10.336 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 04:27:10.341 -03:00 [DBG] Start authorize request
2019-03-26 04:27:10.344 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:27:10.349 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 04:27:10.400 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:27:10.403 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:27:10.413 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:10.434 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:27:10.445 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:10.466 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:27:10.472 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 04:27:10.476 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"tvT3t8VdyhAvs8dr9db0L6Zaq9btkRDa1jn8XjEt","UiLocales":null,"Nonce":"tvT3t8VdyhAvs8dr9db0L6Zaq9btkRDa1jn8XjEt","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"tvT3t8VdyhAvs8dr9db0L6Zaq9btkRDa1jn8XjEt","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"tvT3t8VdyhAvs8dr9db0L6Zaq9btkRDa1jn8XjEt"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 04:27:10.491 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 04:27:10.495 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 04:27:10.499 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 04:27:10.502 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 04:27:10.505 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:27:10.530 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 04:27:10.535 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 04:27:10.542 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****tDbg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5bCw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSCA8:00000001","TimeStamp":"2019-03-26T07:27:10.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 04:27:10.555 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"tvT3t8VdyhAvs8dr9db0L6Zaq9btkRDa1jn8XjEt","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 04:27:11.944 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:27:11.952 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:11.956 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:11.959 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:27:11.962 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:27:11.966 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:27:11.969 -03:00 [DBG] Start discovery request
2019-03-26 04:27:12.000 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:27:12.020 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:27:12.030 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:12.033 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:12.036 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:27:12.040 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:27:12.044 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:27:12.047 -03:00 [DBG] Start key discovery request
2019-03-26 04:27:13.237 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:27:13.243 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:13.246 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:13.315 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:27:13.326 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:13.332 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:13.335 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:27:13.340 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:27:13.344 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:27:13.347 -03:00 [DBG] Start userinfo request
2019-03-26 04:27:13.350 -03:00 [DBG] Bearer token found in header
2019-03-26 04:27:13.390 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:27:13.392 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:27:13.424 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:27:13.426 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:27:13.435 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:27:13.438 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:27:13.444 -03:00 [DBG] Creating userinfo response
2019-03-26 04:27:13.446 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:13.449 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:13.458 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:13.461 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:27:13.466 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:13.477 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:13.495 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:27:13.498 -03:00 [DBG] End userinfo request
2019-03-26 04:27:18.846 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:27:18.854 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:18.858 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:18.860 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:27:18.864 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:27:18.868 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:27:18.872 -03:00 [DBG] Start discovery request
2019-03-26 04:27:18.904 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:27:18.939 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:27:18.974 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:18.978 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:18.987 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:27:18.993 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:27:18.998 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:27:19.003 -03:00 [DBG] Start key discovery request
2019-03-26 04:27:19.139 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:27:19.147 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:19.151 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:19.220 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:27:19.228 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:19.232 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:19.235 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:27:19.239 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:27:19.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:27:19.249 -03:00 [DBG] Start userinfo request
2019-03-26 04:27:19.322 -03:00 [DBG] Bearer token found in header
2019-03-26 04:27:19.363 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:27:19.377 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:27:19.420 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:27:19.423 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:27:19.435 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:27:19.439 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:27:19.448 -03:00 [DBG] Creating userinfo response
2019-03-26 04:27:19.452 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:19.456 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:19.467 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:19.471 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:27:19.475 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:19.485 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:19.514 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:27:19.520 -03:00 [DBG] End userinfo request
2019-03-26 04:27:49.582 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:27:49.590 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:49.593 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:49.597 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:27:49.603 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:27:49.610 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:27:49.619 -03:00 [DBG] Start discovery request
2019-03-26 04:27:49.649 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:27:49.692 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:27:49.712 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:49.717 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:49.720 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:27:49.723 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:27:49.727 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:27:49.730 -03:00 [DBG] Start key discovery request
2019-03-26 04:27:50.195 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:27:50.202 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:50.205 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:50.282 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:27:50.301 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:27:50.309 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:27:50.315 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:27:50.324 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:27:50.333 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:27:50.342 -03:00 [DBG] Start userinfo request
2019-03-26 04:27:50.350 -03:00 [DBG] Bearer token found in header
2019-03-26 04:27:50.400 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:27:50.435 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:27:50.483 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:27:50.486 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:27:50.502 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:27:50.518 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:27:50.533 -03:00 [DBG] Creating userinfo response
2019-03-26 04:27:50.537 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:50.542 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:50.554 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:50.561 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:27:50.568 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:27:50.584 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:27:50.614 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:27:50.620 -03:00 [DBG] End userinfo request
2019-03-26 04:28:39.605 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:28:39.612 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:28:39.617 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:28:39.622 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:28:39.626 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:28:39.633 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:28:39.637 -03:00 [DBG] Start discovery request
2019-03-26 04:28:39.670 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:28:39.696 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:28:39.709 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:28:39.715 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:28:39.718 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:28:39.722 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:28:39.725 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:28:39.729 -03:00 [DBG] Start key discovery request
2019-03-26 04:28:40.353 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:28:40.362 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:28:40.366 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:28:40.433 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:28:40.443 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:28:40.449 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:28:40.455 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:28:40.461 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:28:40.468 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:28:40.475 -03:00 [DBG] Start userinfo request
2019-03-26 04:28:40.483 -03:00 [DBG] Bearer token found in header
2019-03-26 04:28:40.536 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:28:40.542 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:28:40.600 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:28:40.604 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:28:40.621 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:28:40.630 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:28:40.647 -03:00 [DBG] Creating userinfo response
2019-03-26 04:28:40.649 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:28:40.654 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:28:40.664 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:28:40.669 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:28:40.673 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:28:40.685 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:28:40.714 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:28:40.718 -03:00 [DBG] End userinfo request
2019-03-26 04:29:02.924 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:29:02.944 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:29:02.956 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:29:02.965 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:29:02.969 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:29:02.974 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:29:02.979 -03:00 [DBG] Start discovery request
2019-03-26 04:29:03.009 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:29:03.043 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:29:03.062 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:29:03.065 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:29:03.071 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:29:03.074 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:29:03.079 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:29:03.083 -03:00 [DBG] Start key discovery request
2019-03-26 04:29:03.913 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:29:03.921 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:29:03.924 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:29:03.994 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:29:04.007 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:29:04.012 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:29:04.015 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:29:04.022 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:29:04.026 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:29:04.031 -03:00 [DBG] Start userinfo request
2019-03-26 04:29:04.037 -03:00 [DBG] Bearer token found in header
2019-03-26 04:29:04.084 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:29:04.089 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:29:04.126 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:29:04.128 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:29:04.140 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:29:04.144 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:29:04.153 -03:00 [DBG] Creating userinfo response
2019-03-26 04:29:04.155 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:29:04.159 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:29:04.166 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:29:04.169 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:29:04.175 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:29:04.183 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:29:04.214 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:29:04.218 -03:00 [DBG] End userinfo request
2019-03-26 04:30:04.125 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:30:04.133 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:04.137 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:04.140 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:30:04.144 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:30:04.148 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:30:04.152 -03:00 [DBG] Start discovery request
2019-03-26 04:30:04.177 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:30:04.199 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:30:04.204 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:04.208 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:04.211 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:30:04.215 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:30:04.218 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:30:04.222 -03:00 [DBG] Start key discovery request
2019-03-26 04:30:04.848 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:04.856 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:04.859 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:05.039 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:05.058 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:05.063 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:05.066 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:30:05.070 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:30:05.074 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:30:05.085 -03:00 [DBG] Start userinfo request
2019-03-26 04:30:05.087 -03:00 [DBG] Bearer token found in header
2019-03-26 04:30:05.125 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:05.127 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:05.156 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:05.158 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:05.170 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:30:05.173 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:30:05.182 -03:00 [DBG] Creating userinfo response
2019-03-26 04:30:05.185 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:05.189 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:05.198 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:05.201 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:30:05.204 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:05.213 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:05.236 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:30:05.239 -03:00 [DBG] End userinfo request
2019-03-26 04:30:26.125 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:30:26.133 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:26.136 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:26.139 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:30:26.143 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:30:26.146 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:30:26.150 -03:00 [DBG] Start discovery request
2019-03-26 04:30:26.171 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:30:26.210 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:30:26.230 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:26.251 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:26.255 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:30:26.261 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:30:26.266 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:30:26.271 -03:00 [DBG] Start key discovery request
2019-03-26 04:30:26.841 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:26.856 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:26.859 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:26.908 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:26.921 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:26.926 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:26.930 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:30:26.936 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:30:26.941 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:30:26.946 -03:00 [DBG] Start userinfo request
2019-03-26 04:30:26.949 -03:00 [DBG] Bearer token found in header
2019-03-26 04:30:26.994 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:26.997 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:27.038 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:27.040 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:27.048 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:30:27.051 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:30:27.059 -03:00 [DBG] Creating userinfo response
2019-03-26 04:30:27.061 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:27.063 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:27.072 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:27.075 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:30:27.078 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:27.085 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:27.104 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:30:27.107 -03:00 [DBG] End userinfo request
2019-03-26 04:30:41.594 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:30:41.603 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:41.608 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:41.612 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:30:41.622 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:30:41.625 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:30:41.629 -03:00 [DBG] Start discovery request
2019-03-26 04:30:41.662 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:30:41.689 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:30:41.699 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:41.705 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:41.708 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:30:41.713 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:30:41.719 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:30:41.724 -03:00 [DBG] Start key discovery request
2019-03-26 04:30:42.301 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:42.309 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:42.312 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:42.383 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:42.392 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:42.399 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:42.403 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:30:42.408 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:30:42.413 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:30:42.418 -03:00 [DBG] Start userinfo request
2019-03-26 04:30:42.423 -03:00 [DBG] Bearer token found in header
2019-03-26 04:30:42.464 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:42.468 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:42.500 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:42.503 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:42.512 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:30:42.515 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:30:42.523 -03:00 [DBG] Creating userinfo response
2019-03-26 04:30:42.526 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:42.529 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:42.539 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:42.542 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:30:42.546 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:42.556 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:42.583 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:30:42.588 -03:00 [DBG] End userinfo request
2019-03-26 04:30:43.812 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:30:43.819 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:43.823 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:43.829 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:30:43.834 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:30:43.839 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:30:43.842 -03:00 [DBG] Start discovery request
2019-03-26 04:30:43.877 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:30:43.901 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:30:43.910 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:43.913 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:43.916 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:30:43.919 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:30:43.923 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:30:43.926 -03:00 [DBG] Start key discovery request
2019-03-26 04:30:44.472 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:44.481 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:44.485 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:44.488 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:30:44.491 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:30:44.496 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:30:44.501 -03:00 [DBG] Start userinfo request
2019-03-26 04:30:44.506 -03:00 [DBG] Bearer token found in header
2019-03-26 04:30:44.540 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:44.545 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:44.586 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:44.589 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:44.597 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:30:44.601 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:30:44.611 -03:00 [DBG] Creating userinfo response
2019-03-26 04:30:44.615 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:44.620 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:44.629 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:44.632 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:30:44.635 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:44.644 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:44.667 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:30:44.671 -03:00 [DBG] End userinfo request
2019-03-26 04:30:51.921 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:30:51.939 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:51.943 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:51.947 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:30:51.952 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:30:51.956 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:30:51.960 -03:00 [DBG] Start discovery request
2019-03-26 04:30:51.996 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:30:52.025 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:30:52.032 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:52.035 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:52.039 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:30:52.042 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:30:52.057 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:30:52.061 -03:00 [DBG] Start key discovery request
2019-03-26 04:30:52.711 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:52.718 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:52.721 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:52.782 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:30:52.793 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:30:52.799 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:30:52.807 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:30:52.813 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:30:52.824 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:30:52.833 -03:00 [DBG] Start userinfo request
2019-03-26 04:30:52.840 -03:00 [DBG] Bearer token found in header
2019-03-26 04:30:52.888 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:52.891 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:52.935 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:30:52.937 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:30:52.956 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:30:52.960 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:30:52.971 -03:00 [DBG] Creating userinfo response
2019-03-26 04:30:52.974 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:52.978 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:52.987 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:52.991 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:30:52.994 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:30:53.004 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:30:53.024 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:30:53.027 -03:00 [DBG] End userinfo request
2019-03-26 04:31:07.328 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:31:07.346 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:31:07.352 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:31:07.357 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:31:07.362 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:31:07.368 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:31:07.374 -03:00 [DBG] Start discovery request
2019-03-26 04:31:07.405 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:31:07.430 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:31:07.439 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:31:07.448 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:31:07.451 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:31:07.464 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:31:07.467 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:31:07.471 -03:00 [DBG] Start key discovery request
2019-03-26 04:31:08.099 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:31:08.106 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:31:08.109 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:31:08.168 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:31:08.178 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:31:08.184 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:31:08.188 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:31:08.196 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:31:08.206 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:31:08.212 -03:00 [DBG] Start userinfo request
2019-03-26 04:31:08.217 -03:00 [DBG] Bearer token found in header
2019-03-26 04:31:08.261 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:31:08.263 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:31:08.309 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:31:08.321 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:31:08.333 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:31:08.337 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585230,"exp":1553588830,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:31:08.346 -03:00 [DBG] Creating userinfo response
2019-03-26 04:31:08.349 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:31:08.353 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:31:08.363 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:31:08.367 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:31:08.371 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:31:08.380 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:31:08.402 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:31:08.407 -03:00 [DBG] End userinfo request
2019-03-26 04:32:47.978 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:32:48.001 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:32:48.005 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:32:48.007 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:32:48.012 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:32:48.015 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:32:48.018 -03:00 [DBG] Start discovery request
2019-03-26 04:32:48.043 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:32:48.060 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:32:48.068 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:32:48.072 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:32:48.075 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:32:48.080 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:32:48.083 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:32:48.088 -03:00 [DBG] Start key discovery request
2019-03-26 04:33:15.195 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:33:15.202 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:15.207 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:15.211 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:33:15.215 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:33:15.218 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:33:15.221 -03:00 [DBG] Start discovery request
2019-03-26 04:33:15.247 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:33:15.278 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:33:15.292 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:15.297 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:15.301 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:33:15.306 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:33:15.310 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:33:15.313 -03:00 [DBG] Start key discovery request
2019-03-26 04:33:15.413 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 04:33:15.419 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 04:33:15.423 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 04:33:15.433 -03:00 [DBG] Start authorize request
2019-03-26 04:33:15.440 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:33:15.457 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 04:33:15.488 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:33:15.491 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:33:15.502 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:33:15.519 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:33:15.528 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:33:15.547 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:33:15.550 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 04:33:15.554 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"pxq3Bh6ycS6wQLXldOf9hlHBdXn0207V9C47JuTk","UiLocales":null,"Nonce":"pxq3Bh6ycS6wQLXldOf9hlHBdXn0207V9C47JuTk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"pxq3Bh6ycS6wQLXldOf9hlHBdXn0207V9C47JuTk","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"pxq3Bh6ycS6wQLXldOf9hlHBdXn0207V9C47JuTk"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 04:33:15.585 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 04:33:15.590 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 04:33:15.594 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 04:33:15.598 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 04:33:15.600 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:33:15.626 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 04:33:15.629 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 04:33:15.636 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****hVvg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****cb9g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSCAB:00000001","TimeStamp":"2019-03-26T07:33:15.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 04:33:15.644 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"pxq3Bh6ycS6wQLXldOf9hlHBdXn0207V9C47JuTk","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 04:33:17.042 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:33:17.049 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:17.052 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:17.056 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:33:17.062 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:33:17.067 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:33:17.071 -03:00 [DBG] Start discovery request
2019-03-26 04:33:17.095 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:33:17.110 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:33:17.119 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:17.126 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:17.130 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:33:17.133 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:33:17.137 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:33:17.141 -03:00 [DBG] Start key discovery request
2019-03-26 04:33:18.328 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:33:18.334 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:18.339 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:18.386 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:33:18.401 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:18.404 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:18.408 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:33:18.411 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:33:18.414 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:33:18.417 -03:00 [DBG] Start userinfo request
2019-03-26 04:33:18.420 -03:00 [DBG] Bearer token found in header
2019-03-26 04:33:18.453 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:33:18.455 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:33:18.479 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:33:18.481 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:33:18.489 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:33:18.492 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585595,"exp":1553589195,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:33:18.499 -03:00 [DBG] Creating userinfo response
2019-03-26 04:33:18.502 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:33:18.504 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:33:18.513 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:33:18.515 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:33:18.519 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:33:18.530 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:33:18.550 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:33:18.554 -03:00 [DBG] End userinfo request
2019-03-26 04:33:34.870 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:33:34.878 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:34.882 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:34.886 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:33:34.894 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:33:34.899 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:33:34.902 -03:00 [DBG] Start discovery request
2019-03-26 04:33:34.927 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:33:34.958 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:33:34.969 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:34.973 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:34.977 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:33:34.990 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:33:34.996 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:33:35.005 -03:00 [DBG] Start key discovery request
2019-03-26 04:33:35.668 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:33:35.675 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:35.678 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:35.737 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:33:35.748 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:33:35.754 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:33:35.761 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:33:35.772 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:33:35.785 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:33:35.795 -03:00 [DBG] Start userinfo request
2019-03-26 04:33:35.800 -03:00 [DBG] Bearer token found in header
2019-03-26 04:33:35.841 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:33:35.846 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:33:35.887 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:33:35.892 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:33:35.916 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:33:35.919 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585595,"exp":1553589195,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:33:35.926 -03:00 [DBG] Creating userinfo response
2019-03-26 04:33:35.929 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:33:35.932 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:33:35.941 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:33:35.944 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:33:35.947 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:33:35.955 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:33:35.980 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:33:35.984 -03:00 [DBG] End userinfo request
2019-03-26 04:34:13.446 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:34:13.454 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:13.457 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:13.460 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:34:13.464 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:34:13.470 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:34:13.474 -03:00 [DBG] Start discovery request
2019-03-26 04:34:13.498 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:34:13.551 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:34:13.562 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:13.570 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:13.579 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:34:13.609 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:34:13.614 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:34:13.621 -03:00 [DBG] Start key discovery request
2019-03-26 04:34:14.201 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:34:14.207 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:14.211 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:14.266 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:34:14.277 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:14.282 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:14.289 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:34:14.294 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:34:14.299 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:34:14.304 -03:00 [DBG] Start userinfo request
2019-03-26 04:34:14.308 -03:00 [DBG] Bearer token found in header
2019-03-26 04:34:14.348 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:34:14.352 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:34:14.393 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:34:14.397 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:34:14.432 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:34:14.438 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585595,"exp":1553589195,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:34:14.454 -03:00 [DBG] Creating userinfo response
2019-03-26 04:34:14.459 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:14.464 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:14.475 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:34:14.480 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:34:14.483 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:14.494 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:34:14.524 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:34:14.527 -03:00 [DBG] End userinfo request
2019-03-26 04:34:22.587 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:34:22.600 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:22.626 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:22.630 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:34:22.636 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:34:22.641 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:34:22.644 -03:00 [DBG] Start discovery request
2019-03-26 04:34:22.670 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:34:22.692 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:34:22.699 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:22.703 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:22.706 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:34:22.709 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:34:22.713 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:34:22.716 -03:00 [DBG] Start key discovery request
2019-03-26 04:34:23.197 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:34:23.204 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:23.207 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:23.263 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:34:23.275 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:23.281 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:23.286 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:34:23.292 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:34:23.298 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:34:23.318 -03:00 [DBG] Start userinfo request
2019-03-26 04:34:23.324 -03:00 [DBG] Bearer token found in header
2019-03-26 04:34:23.364 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:34:23.373 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:34:23.416 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:34:23.485 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:34:23.499 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:34:23.503 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585595,"exp":1553589195,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:34:23.514 -03:00 [DBG] Creating userinfo response
2019-03-26 04:34:23.517 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:23.521 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:23.531 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:34:23.536 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:34:23.540 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:23.549 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:34:23.596 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:34:23.606 -03:00 [DBG] End userinfo request
2019-03-26 04:34:51.644 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:34:51.653 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:51.658 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:51.665 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:34:51.673 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:34:51.678 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:34:51.688 -03:00 [DBG] Start discovery request
2019-03-26 04:34:51.713 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:34:51.761 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:34:51.770 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:51.775 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:51.780 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:34:51.786 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:34:51.790 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:34:51.794 -03:00 [DBG] Start key discovery request
2019-03-26 04:34:52.429 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:34:52.435 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:52.438 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:52.493 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:34:52.507 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:34:52.514 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:34:52.517 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:34:52.523 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:34:52.528 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:34:52.532 -03:00 [DBG] Start userinfo request
2019-03-26 04:34:52.536 -03:00 [DBG] Bearer token found in header
2019-03-26 04:34:52.578 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:34:52.583 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:34:52.642 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:34:52.646 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:34:52.663 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:34:52.666 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585595,"exp":1553589195,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:34:52.674 -03:00 [DBG] Creating userinfo response
2019-03-26 04:34:52.678 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:52.680 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:52.688 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:34:52.692 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:34:52.697 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:34:52.707 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:34:52.735 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:34:52.737 -03:00 [DBG] End userinfo request
2019-03-26 04:35:05.848 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:35:05.855 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:35:05.858 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:35:05.862 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:35:05.866 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:35:05.869 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:35:05.873 -03:00 [DBG] Start discovery request
2019-03-26 04:35:05.896 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:35:05.916 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:35:05.931 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:35:05.934 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:35:05.937 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:35:05.941 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:35:05.945 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:35:05.949 -03:00 [DBG] Start key discovery request
2019-03-26 04:35:06.526 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:35:06.536 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:35:06.541 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:35:06.597 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:35:06.612 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:35:06.620 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:35:06.626 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:35:06.636 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:35:06.646 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:35:06.654 -03:00 [DBG] Start userinfo request
2019-03-26 04:35:06.659 -03:00 [DBG] Bearer token found in header
2019-03-26 04:35:06.713 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:35:06.721 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:35:06.762 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:35:06.768 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:35:06.784 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:35:06.789 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553585595,"exp":1553589195,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:35:06.799 -03:00 [DBG] Creating userinfo response
2019-03-26 04:35:06.801 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:35:06.805 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:35:06.816 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:35:06.819 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:35:06.823 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:35:06.832 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:35:06.855 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:35:06.860 -03:00 [DBG] End userinfo request
2019-03-26 04:40:00.224 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:40:00.249 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:00.253 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:00.259 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:40:00.263 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:40:00.267 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:40:00.272 -03:00 [DBG] Start discovery request
2019-03-26 04:40:00.296 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:40:00.357 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:40:00.364 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:00.367 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:00.371 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:40:00.376 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:40:00.382 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:40:00.385 -03:00 [DBG] Start key discovery request
2019-03-26 04:40:30.576 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:40:30.585 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:30.588 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:30.591 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:40:30.594 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:40:30.598 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:40:30.601 -03:00 [DBG] Start discovery request
2019-03-26 04:40:30.670 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:40:30.802 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:40:30.811 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:30.821 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:30.824 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:40:30.829 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:40:30.834 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:40:30.838 -03:00 [DBG] Start key discovery request
2019-03-26 04:40:30.881 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 04:40:30.896 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 04:40:30.908 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 04:40:30.912 -03:00 [DBG] Start authorize request
2019-03-26 04:40:30.915 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:40:30.918 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 04:40:30.949 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:40:30.953 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:40:30.963 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:40:30.983 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:40:30.993 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:40:31.012 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:40:31.016 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 04:40:31.019 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"ZCoh21SgKAhZ4RPfEAJm8uLpexSexTfE2D9D90wn","UiLocales":null,"Nonce":"ZCoh21SgKAhZ4RPfEAJm8uLpexSexTfE2D9D90wn","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"ZCoh21SgKAhZ4RPfEAJm8uLpexSexTfE2D9D90wn","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"ZCoh21SgKAhZ4RPfEAJm8uLpexSexTfE2D9D90wn"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 04:40:31.042 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 04:40:31.045 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 04:40:31.049 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 04:40:31.054 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 04:40:31.058 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:40:31.081 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 04:40:31.085 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 04:40:31.090 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****k62g","$type":"Token"},{"TokenType":"access_token","TokenValue":"****I-_A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSCAD:00000001","TimeStamp":"2019-03-26T07:40:31.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 04:40:31.098 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"ZCoh21SgKAhZ4RPfEAJm8uLpexSexTfE2D9D90wn","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 04:40:32.611 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:40:32.620 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:32.623 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:32.626 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:40:32.630 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:40:32.633 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:40:32.637 -03:00 [DBG] Start discovery request
2019-03-26 04:40:32.663 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:40:32.684 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:40:32.691 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:32.696 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:32.698 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:40:32.703 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:40:32.709 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:40:32.712 -03:00 [DBG] Start key discovery request
2019-03-26 04:40:33.906 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:40:33.912 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:33.915 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:33.968 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:40:33.976 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:33.981 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:33.990 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:40:33.994 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:40:33.997 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:40:34.001 -03:00 [DBG] Start userinfo request
2019-03-26 04:40:34.003 -03:00 [DBG] Bearer token found in header
2019-03-26 04:40:34.037 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:40:34.039 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:40:34.064 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:40:34.066 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:40:34.074 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:40:34.077 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:40:34.087 -03:00 [DBG] Creating userinfo response
2019-03-26 04:40:34.089 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:40:34.093 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:40:34.100 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:40:34.103 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:40:34.106 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:40:34.114 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:40:34.132 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:40:34.135 -03:00 [DBG] End userinfo request
2019-03-26 04:40:59.624 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:40:59.633 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:59.636 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:59.639 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:40:59.644 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:40:59.647 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:40:59.652 -03:00 [DBG] Start discovery request
2019-03-26 04:40:59.683 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:40:59.693 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:40:59.701 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:40:59.707 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:40:59.710 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:40:59.716 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:40:59.721 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:40:59.726 -03:00 [DBG] Start key discovery request
2019-03-26 04:41:00.103 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:41:00.109 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:41:00.113 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:41:00.158 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:41:00.169 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:41:00.172 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:41:00.175 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:41:00.181 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:41:00.185 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:41:00.191 -03:00 [DBG] Start userinfo request
2019-03-26 04:41:00.193 -03:00 [DBG] Bearer token found in header
2019-03-26 04:41:00.237 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:41:00.243 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:41:00.288 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:41:00.292 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:41:00.309 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:41:00.313 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:41:00.326 -03:00 [DBG] Creating userinfo response
2019-03-26 04:41:00.328 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:41:00.332 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:41:00.345 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:41:00.350 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:41:00.355 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:41:00.378 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:41:00.411 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:41:00.415 -03:00 [DBG] End userinfo request
2019-03-26 04:43:36.832 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:43:36.840 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:36.846 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:36.849 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:43:36.855 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:43:36.858 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:43:36.862 -03:00 [DBG] Start discovery request
2019-03-26 04:43:36.887 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:43:36.897 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:43:36.904 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:36.910 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:36.914 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:43:36.918 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:43:36.921 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:43:36.924 -03:00 [DBG] Start key discovery request
2019-03-26 04:43:37.435 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:43:37.441 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:37.445 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:37.468 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:43:37.475 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:37.479 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:37.481 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:43:37.485 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:43:37.488 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:43:37.492 -03:00 [DBG] Start userinfo request
2019-03-26 04:43:37.495 -03:00 [DBG] Bearer token found in header
2019-03-26 04:43:37.529 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:43:37.532 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:43:37.558 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:43:37.563 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:43:37.572 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:43:37.576 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:43:37.584 -03:00 [DBG] Creating userinfo response
2019-03-26 04:43:37.587 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:37.590 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:37.601 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:43:37.604 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:43:37.608 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:37.615 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:43:37.636 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:43:37.639 -03:00 [DBG] End userinfo request
2019-03-26 04:43:44.797 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:43:44.803 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:44.806 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:44.808 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:43:44.812 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:43:44.815 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:43:44.819 -03:00 [DBG] Start discovery request
2019-03-26 04:43:44.845 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:43:44.858 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:43:44.865 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:44.869 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:44.871 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:43:44.874 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:43:44.878 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:43:44.881 -03:00 [DBG] Start key discovery request
2019-03-26 04:43:45.341 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:43:45.349 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:45.352 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:45.435 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:43:45.443 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:45.447 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:45.450 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:43:45.454 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:43:45.459 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:43:45.464 -03:00 [DBG] Start userinfo request
2019-03-26 04:43:45.467 -03:00 [DBG] Bearer token found in header
2019-03-26 04:43:45.500 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:43:45.503 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:43:45.540 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:43:45.542 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:43:45.552 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:43:45.561 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:43:45.578 -03:00 [DBG] Creating userinfo response
2019-03-26 04:43:45.581 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:45.585 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:45.598 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:43:45.602 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:43:45.606 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:45.617 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:43:45.637 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:43:45.641 -03:00 [DBG] End userinfo request
2019-03-26 04:43:58.064 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:43:58.075 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:58.078 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:58.081 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:43:58.088 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:43:58.093 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:43:58.098 -03:00 [DBG] Start discovery request
2019-03-26 04:43:58.123 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:43:58.140 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:43:58.156 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:58.160 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:58.163 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:43:58.167 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:43:58.181 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:43:58.184 -03:00 [DBG] Start key discovery request
2019-03-26 04:43:58.842 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:43:58.854 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:58.857 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:58.902 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:43:58.913 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:43:58.916 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:43:58.919 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:43:58.922 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:43:58.925 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:43:58.929 -03:00 [DBG] Start userinfo request
2019-03-26 04:43:58.932 -03:00 [DBG] Bearer token found in header
2019-03-26 04:43:58.964 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:43:58.966 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:43:58.995 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:43:58.998 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:43:59.006 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:43:59.009 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:43:59.015 -03:00 [DBG] Creating userinfo response
2019-03-26 04:43:59.018 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:59.021 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:59.030 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:43:59.033 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:43:59.036 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:43:59.045 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:43:59.071 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:43:59.075 -03:00 [DBG] End userinfo request
2019-03-26 04:44:13.543 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:44:13.559 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:13.564 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:13.571 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:44:13.577 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:44:13.581 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:44:13.587 -03:00 [DBG] Start discovery request
2019-03-26 04:44:13.615 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:44:13.678 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:44:13.694 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:13.698 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:13.702 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:44:13.706 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:44:13.711 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:44:13.715 -03:00 [DBG] Start key discovery request
2019-03-26 04:44:14.292 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:44:14.301 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:14.305 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:14.379 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:44:14.391 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:14.399 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:14.409 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:44:14.418 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:44:14.423 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:44:14.427 -03:00 [DBG] Start userinfo request
2019-03-26 04:44:14.431 -03:00 [DBG] Bearer token found in header
2019-03-26 04:44:14.478 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:44:14.482 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:44:14.533 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:44:14.538 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:44:14.548 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:44:14.551 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:44:14.563 -03:00 [DBG] Creating userinfo response
2019-03-26 04:44:14.566 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:14.572 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:14.582 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:44:14.586 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:44:14.591 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:14.602 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:44:14.627 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:44:14.633 -03:00 [DBG] End userinfo request
2019-03-26 04:44:17.795 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:44:17.805 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:17.810 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:17.816 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:44:17.824 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:44:17.832 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:44:17.842 -03:00 [DBG] Start discovery request
2019-03-26 04:44:17.875 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:44:18.376 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:44:18.383 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:18.387 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:18.389 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:44:18.392 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:44:18.395 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:44:18.399 -03:00 [DBG] Start key discovery request
2019-03-26 04:44:18.483 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:44:18.491 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:18.496 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:18.500 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:44:18.504 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:44:18.508 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:44:18.512 -03:00 [DBG] Start userinfo request
2019-03-26 04:44:18.515 -03:00 [DBG] Bearer token found in header
2019-03-26 04:44:18.546 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:44:18.560 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:44:18.599 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:44:18.601 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:44:18.610 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:44:18.615 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:44:18.628 -03:00 [DBG] Creating userinfo response
2019-03-26 04:44:18.631 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:18.635 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:18.654 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:44:18.661 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:44:18.664 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:18.678 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:44:18.702 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:44:18.705 -03:00 [DBG] End userinfo request
2019-03-26 04:44:50.233 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:44:50.242 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:50.247 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:50.253 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:44:50.260 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:44:50.268 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:44:50.282 -03:00 [DBG] Start discovery request
2019-03-26 04:44:50.328 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:44:50.393 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:44:50.408 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:50.413 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:50.419 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:44:50.423 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:44:50.428 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:44:50.432 -03:00 [DBG] Start key discovery request
2019-03-26 04:44:51.037 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:44:51.044 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:51.046 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:51.103 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:44:51.113 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:44:51.118 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:44:51.124 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:44:51.131 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:44:51.135 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:44:51.141 -03:00 [DBG] Start userinfo request
2019-03-26 04:44:51.147 -03:00 [DBG] Bearer token found in header
2019-03-26 04:44:51.192 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:44:51.194 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:44:51.240 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:44:51.245 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:44:51.264 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:44:51.270 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586031,"exp":1553589631,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:44:51.283 -03:00 [DBG] Creating userinfo response
2019-03-26 04:44:51.289 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:51.294 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:51.308 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:44:51.312 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:44:51.318 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:44:51.335 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:44:51.371 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:44:51.376 -03:00 [DBG] End userinfo request
2019-03-26 04:46:26.115 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:46:26.134 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:26.137 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:26.141 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:46:26.147 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:46:26.150 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:46:26.154 -03:00 [DBG] Start discovery request
2019-03-26 04:46:26.180 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:46:26.263 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:46:26.284 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:26.288 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:26.293 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:46:26.296 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:46:26.300 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:46:26.305 -03:00 [DBG] Start key discovery request
2019-03-26 04:46:36.218 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:46:36.227 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:36.231 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:36.234 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:46:36.238 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:46:36.241 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:46:36.245 -03:00 [DBG] Start discovery request
2019-03-26 04:46:36.269 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:46:36.330 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:46:36.338 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:36.341 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:36.344 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:46:36.348 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:46:36.351 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:46:36.354 -03:00 [DBG] Start key discovery request
2019-03-26 04:46:36.381 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-03-26 04:46:36.384 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-03-26 04:46:36.389 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-03-26 04:46:36.392 -03:00 [DBG] Start authorize request
2019-03-26 04:46:36.396 -03:00 [DBG] User in authorize request: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:46:36.399 -03:00 [DBG] Start authorize request protocol validation
2019-03-26 04:46:36.440 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:46:36.443 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:46:36.453 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:46:36.470 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:46:36.479 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:46:36.497 -03:00 [DBG] Found ["jp_api.user","jp_api.is4"] API scopes in database
2019-03-26 04:46:36.500 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-03-26 04:46:36.504 -03:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","AllowedRedirectUris":["http://localhost:9000/signin-oidc","http://localhost:4300/login-callback"],"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile email jp_api.is4","State":"KYSa2oZnfjtzPl3bTUMb1zx2xiWisYJ3nTjBNdKx","UiLocales":null,"Nonce":"KYSa2oZnfjtzPl3bTUMb1zx2xiWisYJ3nTjBNdKx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"acaa8b2351c94cb83e099bd9dc5be698","Raw":{"response_type":"id_token token","client_id":"IS4-Admin","state":"KYSa2oZnfjtzPl3bTUMb1zx2xiWisYJ3nTjBNdKx","redirect_uri":"http://localhost:4300/login-callback","scope":"openid profile email jp_api.is4","nonce":"KYSa2oZnfjtzPl3bTUMb1zx2xiWisYJ3nTjBNdKx"},"$type":"AuthorizeRequestValidationLog"}
2019-03-26 04:46:36.546 -03:00 [DBG] yTuFTpP1LnO05Mf+rXz8fU/dAjD+jMTPNfFF3xj7Pks= found in database: true
2019-03-26 04:46:36.552 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-03-26 04:46:36.557 -03:00 [DBG] Creating Implicit Flow response.
2019-03-26 04:46:36.561 -03:00 [DBG] Getting claims for access token for client: IS4-Admin
2019-03-26 04:46:36.564 -03:00 [DBG] Getting claims for access token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6
2019-03-26 04:46:36.600 -03:00 [DBG] Getting claims for identity token for subject: 08d6b194-3db5-99fe-6c1c-7d85d66713d6 and client: IS4-Admin
2019-03-26 04:46:36.607 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-03-26 04:46:36.619 -03:00 [INF] {"ClientId":"IS4-Admin","ClientName":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","Endpoint":"Authorize","SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","Scopes":"openid profile email jp_api.is4","GrantType":"implicit","Tokens":[{"TokenType":"id_token","TokenValue":"****LlzQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****CMbw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLLHMVCRSCAF:00000001","TimeStamp":"2019-03-26T07:46:36.0000000Z","ProcessId":39196,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-03-26 04:46:36.644 -03:00 [INF] Authorize endpoint response
{"SubjectId":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","ClientId":"IS4-Admin","RedirectUri":"http://localhost:4300/login-callback","State":"KYSa2oZnfjtzPl3bTUMb1zx2xiWisYJ3nTjBNdKx","Scope":"openid profile email jp_api.is4","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-03-26 04:46:38.734 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4300
2019-03-26 04:46:38.740 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:38.744 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:38.746 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-03-26 04:46:38.750 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-03-26 04:46:38.753 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-03-26 04:46:38.758 -03:00 [DBG] Start discovery request
2019-03-26 04:46:38.779 -03:00 [DBG] Found ["openid","profile","email","username","roles","is4-rights","jp_api.user","jp_api.is4"] as all scopes in database
2019-03-26 04:46:38.806 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4300
2019-03-26 04:46:38.813 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:38.820 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:38.823 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-03-26 04:46:38.827 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-03-26 04:46:38.831 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-03-26 04:46:38.836 -03:00 [DBG] Start key discovery request
2019-03-26 04:46:40.512 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:46:40.517 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:40.521 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:40.551 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4300
2019-03-26 04:46:40.565 -03:00 [DBG] Origin http://localhost:4300 is allowed: true
2019-03-26 04:46:40.571 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4300
2019-03-26 04:46:40.576 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-03-26 04:46:40.585 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-03-26 04:46:40.594 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-03-26 04:46:40.606 -03:00 [DBG] Start userinfo request
2019-03-26 04:46:40.610 -03:00 [DBG] Bearer token found in header
2019-03-26 04:46:40.649 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:46:40.651 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:46:40.680 -03:00 [DBG] IS4-Admin found in database: true
2019-03-26 04:46:40.684 -03:00 [DBG] client configuration validation for client IS4-Admin succeeded.
2019-03-26 04:46:40.697 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-03-26 04:46:40.703 -03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1553586396,"exp":1553589996,"iss":"https://localhost:5000","aud":["https://localhost:5000/resources","jp_api"],"client_id":"IS4-Admin","sub":"08d6b194-3db5-99fe-6c1c-7d85d66713d6","auth_time":1553570547,"idp":"local","is4-rights":"manager","username":"bruno","email":"bhdebrito@gmail.com","scope":["openid","profile","email","jp_api.is4"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-03-26 04:46:40.732 -03:00 [DBG] Creating userinfo response
2019-03-26 04:46:40.735 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:46:40.742 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:46:40.755 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:46:40.761 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website picture profile preferred_username nickname middle_name given_name family_name name email_verified email
2019-03-26 04:46:40.767 -03:00 [DBG] Scopes in access token: openid profile email jp_api.is4
2019-03-26 04:46:40.779 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-03-26 04:46:40.803 -03:00 [INF] Profile service returned the following claim types: sub email preferred_username name email email_verified
2019-03-26 04:46:40.807 -03:00 [DBG] End userinfo request
